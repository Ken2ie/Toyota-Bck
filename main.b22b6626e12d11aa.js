"use strict";(self.webpackChunkToyotaBck=self.webpackChunkToyotaBck||[]).push([[179],{851:()=>{function ft(n){return"function"==typeof n}function rc(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const pd=rc(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function la(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class mr{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(ft(r))try{r()}catch(o){e=o instanceof pd?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{M0(o)}catch(s){e=e??[],s instanceof pd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new pd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)M0(e);else{if(e instanceof mr){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&la(t,e)}remove(e){const{_finalizers:t}=this;t&&la(t,e),e instanceof mr&&e._removeParent(this)}}mr.EMPTY=(()=>{const n=new mr;return n.closed=!0,n})();const v0=mr.EMPTY;function _0(n){return n instanceof mr||n&&"closed"in n&&ft(n.remove)&&ft(n.add)&&ft(n.unsubscribe)}function M0(n){ft(n)?n():n.unsubscribe()}const ls={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},gd={setTimeout(n,e,...t){const{delegate:r}=gd;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=gd;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function x0(n){gd.setTimeout(()=>{const{onUnhandledError:e}=ls;if(!e)throw n;e(n)})}function ic(){}const NI=sg("C",void 0,void 0);function sg(n,e,t){return{kind:n,value:e,error:t}}let cs=null;function md(n){if(ls.useDeprecatedSynchronousErrorHandling){const e=!cs;if(e&&(cs={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=cs;if(cs=null,t)throw r}}else n()}class ag extends mr{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,_0(e)&&e.add(this)):this.destination=kI}static create(e,t,r){return new oc(e,t,r)}next(e){this.isStopped?cg(function II(n){return sg("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?cg(function PI(n){return sg("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?cg(NI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const OI=Function.prototype.bind;function lg(n,e){return OI.call(n,e)}class FI{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){yd(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){yd(r)}else yd(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){yd(t)}}}class oc extends ag{constructor(e,t,r){let i;if(super(),ft(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&ls.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&lg(e.next,o),error:e.error&&lg(e.error,o),complete:e.complete&&lg(e.complete,o)}):i=e}this.destination=new FI(i)}}function yd(n){ls.useDeprecatedSynchronousErrorHandling?function RI(n){ls.useDeprecatedSynchronousErrorHandling&&cs&&(cs.errorThrown=!0,cs.error=n)}(n):x0(n)}function cg(n,e){const{onStoppedNotification:t}=ls;t&&gd.setTimeout(()=>t(n,e))}const kI={closed:!0,next:ic,error:function LI(n){throw n},complete:ic},ug="function"==typeof Symbol&&Symbol.observable||"@@observable";function yi(n){return n}function dg(...n){return w0(n)}function w0(n){return 0===n.length?yi:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let qt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function VI(n){return n&&n instanceof ag||function BI(n){return n&&ft(n.next)&&ft(n.error)&&ft(n.complete)}(n)&&_0(n)}(t)?t:new oc(t,r,i);return md(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=b0(r))((i,o)=>{const s=new oc({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[ug](){return this}pipe(...t){return w0(t)(this)}toPromise(t){return new(t=b0(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function b0(n){var e;return null!==(e=n??ls.Promise)&&void 0!==e?e:Promise}const GI=rc(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let yr=(()=>{class n extends qt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new C0(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new GI}next(t){md(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){md(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){md(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?v0:(this.currentObservers=null,o.push(t),new mr(()=>{this.currentObservers=null,la(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new qt;return t.source=this,t}}return n.create=(e,t)=>new C0(e,t),n})();class C0 extends yr{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:v0}}function S0(n){return ft(n?.lift)}function Xt(n){return e=>{if(S0(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ot(n,e,t,r,i){return new UI(n,e,t,r,i)}class UI extends ag{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function nt(n,e){return Xt((t,r)=>{let i=0;t.subscribe(Ot(r,o=>{r.next(n.call(e,o,i++))}))})}function us(n){return this instanceof us?(this.v=n,this):new us(n)}function jI(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){o.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof us?Promise.resolve(h.value.v).then(c,u):d(o[0][2],h)}(r[h](f))}catch(p){d(o[0][3],p)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),o.shift(),o.length&&a(o[0][0],o[0][1])}}function WI(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function T0(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){!function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}(a,l,(s=n[o](s)).done,s.value)})}}}function hn(n,e,t,r){if("a"===t&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?r:"a"===t?r.call(n):r?r.value:e.get(n)}const fg=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function A0(n){return ft(n?.then)}function N0(n){return ft(n[ug])}function P0(n){return Symbol.asyncIterator&&ft(n?.[Symbol.asyncIterator])}function I0(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const R0=function XI(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function O0(n){return ft(n?.[R0])}function F0(n){return jI(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield us(t.read());if(i)return yield us(void 0);yield yield us(r)}}finally{t.releaseLock()}})}function L0(n){return ft(n?.getReader)}function Zn(n){if(n instanceof qt)return n;if(null!=n){if(N0(n))return function ZI(n){return new qt(e=>{const t=n[ug]();if(ft(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(fg(n))return function YI(n){return new qt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(A0(n))return function JI(n){return new qt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,x0)})}(n);if(P0(n))return k0(n);if(O0(n))return function KI(n){return new qt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(L0(n))return function QI(n){return k0(F0(n))}(n)}throw I0(n)}function k0(n){return new qt(e=>{(function eR(n,e){var t,r,i,o;return function HI(n,e,t,r){return new(t||(t=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=WI(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Gi(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function An(n,e,t=1/0){return ft(e)?An((r,i)=>nt((o,s)=>e(r,o,i,s))(Zn(n(r,i))),t):("number"==typeof e&&(t=e),Xt((r,i)=>function tR(n,e,t,r,i,o,s,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<r?p(g):l.push(g),p=g=>{o&&e.next(g),c++;let m=!1;Zn(t(g,u++)).subscribe(Ot(e,y=>{i?.(y),o?f(y):e.next(y)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<r;){const y=l.shift();s?Gi(e,s,()=>p(y)):p(y)}h()}catch(y){e.error(y)}}))};return n.subscribe(Ot(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,n,t)))}function ca(n=1/0){return An(yi,n)}const Ui=new qt(n=>n.complete());function B0(n){return n&&ft(n.schedule)}function pg(n){return n[n.length-1]}function gg(n){return ft(pg(n))?n.pop():void 0}function sc(n){return B0(pg(n))?n.pop():void 0}function V0(n,e=0){return Xt((t,r)=>{t.subscribe(Ot(r,i=>Gi(r,n,()=>r.next(i),e),()=>Gi(r,n,()=>r.complete(),e),i=>Gi(r,n,()=>r.error(i),e)))})}function G0(n,e=0){return Xt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function U0(n,e){if(!n)throw new Error("Iterable cannot be null");return new qt(t=>{Gi(t,e,()=>{const r=n[Symbol.asyncIterator]();Gi(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function H0(n,e){if(null!=n){if(N0(n))return function iR(n,e){return Zn(n).pipe(G0(e),V0(e))}(n,e);if(fg(n))return function sR(n,e){return new qt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(A0(n))return function oR(n,e){return Zn(n).pipe(G0(e),V0(e))}(n,e);if(P0(n))return U0(n,e);if(O0(n))return function aR(n,e){return new qt(t=>{let r;return Gi(t,e,()=>{r=n[R0](),Gi(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>ft(r?.return)&&r.return()})}(n,e);if(L0(n))return function lR(n,e){return U0(F0(n),e)}(n,e)}throw I0(n)}function ln(n,e){return e?H0(n,e):Zn(n)}function ac(n={}){const{connector:e=(()=>new yr),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=l=void 0,u=d=!1},p=()=>{const g=s;f(),g?.unsubscribe()};return Xt((g,m)=>{c++,!d&&!u&&h();const y=l=l??e();m.add(()=>{c--,0===c&&!d&&!u&&(a=mg(p,i))}),y.subscribe(m),!s&&c>0&&(s=new oc({next:v=>y.next(v),error:v=>{d=!0,h(),a=mg(f,t,v),y.error(v)},complete:()=>{u=!0,h(),a=mg(f,r),y.complete()}}),Zn(g).subscribe(s))})(o)}}function mg(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new oc({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function Ft(n){for(let e in n)if(n[e]===Ft)return e;throw Error("Could not find renamed property on target object.")}function yg(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Lt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Lt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function vg(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const uR=Ft({__forward_ref__:Ft});function Gt(n){return n.__forward_ref__=Gt,n.toString=function(){return Lt(this())},n}function ke(n){return _g(n)?n():n}function _g(n){return"function"==typeof n&&n.hasOwnProperty(uR)&&n.__forward_ref__===Gt}class se extends Error{constructor(e,t){super(function vd(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function Xe(n){return"string"==typeof n?n:null==n?"":String(n)}function _d(n,e){throw new se(-201,!1)}function _r(n,e){null==n&&function Ct(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Ze(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Yr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Md(n){return z0(n,xd)||z0(n,W0)}function z0(n,e){return n.hasOwnProperty(e)?n[e]:null}function j0(n){return n&&(n.hasOwnProperty(Mg)||n.hasOwnProperty(_R))?n[Mg]:null}const xd=Ft({\u0275prov:Ft}),Mg=Ft({\u0275inj:Ft}),W0=Ft({ngInjectableDef:Ft}),_R=Ft({ngInjectorDef:Ft});var Re=(()=>((Re=Re||{})[Re.Default=0]="Default",Re[Re.Host=1]="Host",Re[Re.Self=2]="Self",Re[Re.SkipSelf=4]="SkipSelf",Re[Re.Optional=8]="Optional",Re))();let xg;function Pr(n){const e=xg;return xg=n,e}function $0(n,e,t){const r=Md(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Re.Optional?null:void 0!==e?e:void _d(Lt(n))}function Co(n){return{toString:n}.toString()}var Jr=(()=>((Jr=Jr||{})[Jr.OnPush=0]="OnPush",Jr[Jr.Default=1]="Default",Jr))(),vi=(()=>{return(n=vi||(vi={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",vi;var n})();const kt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ua={},bt=[],wd=Ft({\u0275cmp:Ft}),wg=Ft({\u0275dir:Ft}),bg=Ft({\u0275pipe:Ft}),q0=Ft({\u0275mod:Ft}),zi=Ft({\u0275fac:Ft}),lc=Ft({__NG_ELEMENT_ID__:Ft});let xR=0;function Ln(n){return Co(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Jr.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||bt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||vi.Emulated,id:"c"+xR++,styles:n.styles||bt,_:null,setInput:null,schemas:n.schemas||null,tView:null},o=n.dependencies,s=n.features;return i.inputs=Y0(n.inputs,r),i.outputs=Y0(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(X0).filter(Z0):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(Jn).filter(Z0):null,i})}function X0(n){return At(n)||Yn(n)}function Z0(n){return null!==n}function _i(n){return Co(()=>({type:n.type,bootstrap:n.bootstrap||bt,declarations:n.declarations||bt,imports:n.imports||bt,exports:n.exports||bt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Y0(n,e){if(null==n)return ua;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,e&&(e[i]=o)}return t}const _e=Ln;function At(n){return n[wd]||null}function Yn(n){return n[wg]||null}function Jn(n){return n[bg]||null}function Mr(n,e){const t=n[q0]||null;if(!t&&!0===e)throw new Error(`Type ${Lt(n)} does not have '\u0275mod' property.`);return t}function hr(n){return Array.isArray(n)&&"object"==typeof n[1]}function Qr(n){return Array.isArray(n)&&!0===n[1]}function Eg(n){return 0!=(8&n.flags)}function Ed(n){return 2==(2&n.flags)}function Dd(n){return 1==(1&n.flags)}function ei(n){return null!==n.template}function DR(n){return 0!=(256&n[2])}function gs(n,e){return n.hasOwnProperty(zi)?n[zi]:null}class NR{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Rr(){return Q0}function Q0(n){return n.type.prototype.ngOnChanges&&(n.setInput=IR),PR}function PR(){const n=tx(this),e=n?.current;if(e){const t=n.previous;if(t===ua)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function IR(n,e,t,r){const i=tx(n)||function RR(n,e){return n[ex]=e}(n,{previous:ua,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[t],l=s[a];o[a]=new NR(l&&l.currentValue,e,s===ua),n[r]=e}Rr.ngInherit=!0;const ex="__ngSimpleChanges__";function tx(n){return n[ex]||null}function fn(n){for(;Array.isArray(n);)n=n[0];return n}function Td(n,e){return fn(e[n])}function Fr(n,e){return fn(e[n.index])}function Pg(n,e){return n.data[e]}function wr(n,e){const t=e[n];return hr(t)?t:t[0]}function Ad(n){return 64==(64&n[2])}function So(n,e){return null==e?null:n[e]}function nx(n){n[18]=0}function Ig(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const He={lFrame:hx(null),bindingsEnabled:!0};function ix(){return He.bindingsEnabled}function J(){return He.lFrame.lView}function mt(){return He.lFrame.tView}function wn(){let n=ox();for(;null!==n&&64===n.type;)n=n.parent;return n}function ox(){return He.lFrame.currentTNode}function Mi(n,e){const t=He.lFrame;t.currentTNode=n,t.isParent=e}function Rg(){return He.lFrame.isParent}function Og(){He.lFrame.isParent=!1}function ma(){return He.lFrame.bindingIndex++}function YR(n,e){const t=He.lFrame;t.bindingIndex=t.bindingRootIndex=n,Fg(e)}function Fg(n){He.lFrame.currentDirectiveIndex=n}function cx(){return He.lFrame.currentQueryIndex}function kg(n){He.lFrame.currentQueryIndex=n}function KR(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function ux(n,e,t){if(t&Re.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&Re.Host||(i=KR(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;e=i,n=o}const r=He.lFrame=dx();return r.currentTNode=e,r.lView=n,!0}function Bg(n){const e=dx(),t=n[1];He.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function dx(){const n=He.lFrame,e=null===n?null:n.child;return null===e?hx(n):e}function hx(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function fx(){const n=He.lFrame;return He.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const px=fx;function Vg(){const n=fx();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Qn(){return He.lFrame.selectedIndex}function Eo(n){He.lFrame.selectedIndex=n}function nn(){const n=He.lFrame;return Pg(n.tView,n.selectedIndex)}function Nd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(n.contentHooks||(n.contentHooks=[])).push(-t,s),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function Pd(n,e,t){yx(n,e,3,t)}function Id(n,e,t,r){(3&n[2])===t&&yx(n,e,t,r)}function Gg(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function yx(n,e,t,r){const o=r??-1,s=e.length-1;let a=0;for(let l=void 0!==r?65535&n[18]:0;l<s;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[18]+=65536),(a<o||-1==o)&&(oO(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function oO(n,e,t,r){const i=t[r]<0,o=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class pc{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Rd(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{const o=i,s=t[++r];_x(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function vx(n){return 3===n||4===n||6===n}function _x(n){return 64===n.charCodeAt(0)}function Od(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Mx(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Mx(n,e,t,r,i){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}function xx(n){return-1!==n}function ya(n){return 32767&n}function va(n,e){let t=function uO(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let Hg=!0;function Fd(n){const e=Hg;return Hg=n,e}let dO=0;const xi={};function mc(n,e){const t=jg(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,zg(r.data,n),zg(e,null),zg(r.blueprint,null));const i=Ld(n,e),o=n.injectorIndex;if(xx(i)){const s=ya(i),a=va(i,e),l=a[1].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function zg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function jg(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Ld(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Nx(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function kd(n,e,t){!function hO(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(lc)&&(r=t[lc]),null==r&&(r=t[lc]=dO++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function Cx(n,e,t){if(t&Re.Optional||void 0!==n)return n;_d()}function Sx(n,e,t,r){if(t&Re.Optional&&void 0===r&&(r=null),0==(t&(Re.Self|Re.Host))){const i=n[9],o=Pr(void 0);try{return i?i.get(e,r,t&Re.Optional):$0(e,r,t&Re.Optional)}finally{Pr(o)}}return Cx(r,0,t)}function Ex(n,e,t,r=Re.Default,i){if(null!==n){if(1024&e[2]){const s=function yO(n,e,t,r,i){let o=n,s=e;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const a=Dx(o,s,t,r|Re.Self,xi);if(a!==xi)return a;let l=o.parent;if(!l){const c=s[21];if(c){const u=c.get(t,xi,r);if(u!==xi)return u}l=Nx(s),s=s[15]}o=l}return i}(n,e,t,r,xi);if(s!==xi)return s}const o=Dx(n,e,t,r,xi);if(o!==xi)return o}return Sx(e,t,r,i)}function Dx(n,e,t,r,i){const o=function gO(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(lc)?n[lc]:void 0;return"number"==typeof e?e>=0?255&e:mO:e}(t);if("function"==typeof o){if(!ux(e,n,r))return r&Re.Host?Cx(i,0,r):Sx(e,t,r,i);try{const s=o(r);if(null!=s||r&Re.Optional)return s;_d()}finally{px()}}else if("number"==typeof o){let s=null,a=jg(n,e),l=-1,c=r&Re.Host?e[16][6]:null;for((-1===a||r&Re.SkipSelf)&&(l=-1===a?Ld(n,e):e[a+8],-1!==l&&Ax(r,!1)?(s=e[1],a=ya(l),e=va(l,e)):a=-1);-1!==a;){const u=e[1];if(Tx(o,a,u.data)){const d=pO(a,e,t,s,r,c);if(d!==xi)return d}l=e[a+8],-1!==l&&Ax(r,e[1].data[a+8]===c)&&Tx(o,a,e)?(s=u,a=ya(l),e=va(l,e)):a=-1}}return i}function pO(n,e,t,r,i,o){const s=e[1],a=s.data[n+8],u=Bd(a,s,t,null==r?Ed(a)&&Hg:r!=s&&0!=(3&a.type),i&Re.Host&&o===a);return null!==u?yc(e,s,u,a):xi}function Bd(n,e,t,r,i){const o=n.providerIndexes,s=e.data,a=1048575&o,l=n.directiveStart,u=o>>20,h=i?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=s[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(i){const f=s[l];if(f&&ei(f)&&f.type===t)return l}return null}function yc(n,e,t,r){let i=n[t];const o=e.data;if(function sO(n){return n instanceof pc}(i)){const s=i;s.resolving&&function dR(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new se(-200,`Circular dependency in DI detected for ${n}${t}`)}(function wt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Xe(n)}(o[t]));const a=Fd(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Pr(s.injectImpl):null;ux(n,r,Re.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function iO(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=Q0(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o))}(t,o[t],e)}finally{null!==l&&Pr(l),Fd(a),s.resolving=!1,px()}}return i}function Tx(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function Ax(n,e){return!(n&Re.Self||n&Re.Host&&e)}class _a{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Ex(this._tNode,this._lView,e,r,t)}}function mO(){return new _a(wn(),J())}function pt(n){return Co(()=>{const e=n.prototype.constructor,t=e[zi]||Wg(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[zi]||Wg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Wg(n){return _g(n)?()=>{const e=Wg(ke(n));return e&&e()}:gs(n)}function Nx(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}const xa="__parameters__";function ba(n,e,t){return Co(()=>{const r=function $g(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(l,c,u){const d=l.hasOwnProperty(xa)?l[xa]:Object.defineProperty(l,xa,{value:[]})[xa];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class Pe{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ze({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function br(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),br(r,e)):e!==n&&e.push(r)}return e}function $i(n,e){n.forEach(t=>Array.isArray(t)?$i(t,e):e(t))}function Ix(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Vd(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function xc(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function Cr(n,e,t){let r=Ca(n,e);return r>=0?n[1|r]=t:(r=~r,function xO(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Xg(n,e){const t=Ca(n,e);if(t>=0)return n[1|t]}function Ca(n,e){return function Fx(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const wc={},Yg="__NG_DI_FLAG__",Ud="ngTempTokenPath",AO=/\n/gm,Lx="__source";let bc;function Sa(n){const e=bc;return bc=n,e}function PO(n,e=Re.Default){if(void 0===bc)throw new se(-203,!1);return null===bc?$0(n,void 0,e):bc.get(n,e&Re.Optional?null:void 0,e)}function De(n,e=Re.Default){return(function MR(){return xg}()||PO)(ke(n),e)}function yt(n,e=Re.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),De(n,e)}function Jg(n){const e=[];for(let t=0;t<n.length;t++){const r=ke(n[t]);if(Array.isArray(r)){if(0===r.length)throw new se(900,!1);let i,o=Re.Default;for(let s=0;s<r.length;s++){const a=r[s],l=IO(a);"number"==typeof l?-1===l?i=a.token:o|=l:i=a}e.push(De(i,o))}else e.push(De(r))}return e}function Cc(n,e){return n[Yg]=e,n.prototype[Yg]=e,n}function IO(n){return n[Yg]}const Sc=Cc(ba("Optional"),8),Ec=Cc(ba("SkipSelf"),4);let Qg;class Zx{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function To(n){return n instanceof Zx?n.changingThisBreaksApplicationSecurity:n}const nF=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var pn=(()=>((pn=pn||{})[pn.NONE=0]="NONE",pn[pn.HTML=1]="HTML",pn[pn.STYLE=2]="STYLE",pn[pn.SCRIPT=3]="SCRIPT",pn[pn.URL=4]="URL",pn[pn.RESOURCE_URL=5]="RESOURCE_URL",pn))();function sm(n){const e=function Pc(){const n=J();return n&&n[12]}();return e?e.sanitize(pn.URL,n)||"":function Ac(n,e){const t=function KO(n){return n instanceof Zx&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}(n,"URL")?To(n):function nm(n){return(n=String(n)).match(nF)?n:"unsafe:"+n}(Xe(n))}const am=new Pe("ENVIRONMENT_INITIALIZER"),rw=new Pe("INJECTOR",-1),iw=new Pe("INJECTOR_DEF_TYPES");class ow{get(e,t=wc){if(t===wc){const r=new Error(`NullInjectorError: No provider for ${Lt(e)}!`);throw r.name="NullInjectorError",r}return t}}function mF(...n){return{\u0275providers:sw(0,n)}}function sw(n,...e){const t=[],r=new Set;let i;return $i(e,o=>{const s=o;lm(s,t,[],r)&&(i||(i=[]),i.push(s))}),void 0!==i&&aw(i,t),t}function aw(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];$i(i,o=>{e.push(o)})}}function lm(n,e,t,r){if(!(n=ke(n)))return!1;let i=null,o=j0(n);const s=!o&&At(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const l=n.ngModule;if(o=j0(l),!o)return!1;i=l}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of l)lm(c,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;r.add(i);try{$i(o.imports,u=>{lm(u,e,t,r)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&aw(c,e)}if(!a){const c=gs(i)||(()=>new i);e.push({provide:i,useFactory:c,deps:bt},{provide:iw,useValue:i,multi:!0},{provide:am,useValue:()=>De(i),multi:!0})}const l=o.providers;null==l||a||$i(l,u=>{e.push(u)})}}return i!==n&&void 0!==n.providers}const yF=Ft({provide:String,useValue:Ft});function cm(n){return null!==n&&"object"==typeof n&&yF in n}function ms(n){return"function"==typeof n}const um=new Pe("Set Injector scope."),qd={},_F={};let dm;function Xd(){return void 0===dm&&(dm=new ow),dm}class Ao{}class uw extends Ao{constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fm(e,s=>this.processProvider(s)),this.records.set(rw,Ta(void 0,this)),i.has("environment")&&this.records.set(Ao,Ta(void 0,this));const o=this.records.get(um);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(iw.multi,bt,Re.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=Sa(this),r=Pr(void 0);try{return e()}finally{Sa(t),Pr(r)}}get(e,t=wc,r=Re.Default){this.assertNotDestroyed();const i=Sa(this),o=Pr(void 0);try{if(!(r&Re.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function CF(n){return"function"==typeof n||"object"==typeof n&&n instanceof Pe}(e)&&Md(e);a=l&&this.injectableDefInScope(l)?Ta(hm(e),qd):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Re.Self?Xd():this.parent).get(e,t=r&Re.Optional&&t===wc?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[Ud]=s[Ud]||[]).unshift(Lt(e)),i)throw s;return function RO(n,e,t,r){const i=n[Ud];throw e[Lx]&&i.unshift(e[Lx]),n.message=function OO(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Lt(e);if(Array.isArray(e))i=e.map(Lt).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Lt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(AO,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Ud]=null,n}(s,e,"R3InjectorError",this.source)}throw s}finally{Pr(o),Sa(i)}}resolveInjectorInitializers(){const e=Sa(this),t=Pr(void 0);try{const r=this.get(am.multi,bt,Re.Self);for(const i of r)i()}finally{Sa(e),Pr(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Lt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new se(205,!1)}processProvider(e){let t=ms(e=ke(e))?e:ke(e&&e.provide);const r=function xF(n){return cm(n)?Ta(void 0,n.useValue):Ta(dw(n),qd)}(e);if(ms(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Ta(void 0,qd,!0),i.factory=()=>Jg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===qd&&(t.value=_F,t.value=t.factory()),"object"==typeof t.value&&t.value&&function bF(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=ke(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function hm(n){const e=Md(n),t=null!==e?e.factory:gs(n);if(null!==t)return t;if(n instanceof Pe)throw new se(204,!1);if(n instanceof Function)return function MF(n){const e=n.length;if(e>0)throw xc(e,"?"),new se(204,!1);const t=function yR(n){const e=n&&(n[xd]||n[W0]);if(e){const t=function vR(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new se(204,!1)}function dw(n,e,t){let r;if(ms(n)){const i=ke(n);return gs(i)||hm(i)}if(cm(n))r=()=>ke(n.useValue);else if(function cw(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Jg(n.deps||[]));else if(function lw(n){return!(!n||!n.useExisting)}(n))r=()=>De(ke(n.useExisting));else{const i=ke(n&&(n.useClass||n.provide));if(!function wF(n){return!!n.deps}(n))return gs(i)||hm(i);r=()=>new i(...Jg(n.deps))}return r}function Ta(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function SF(n){return!!n.\u0275providers}function fm(n,e){for(const t of n)Array.isArray(t)?fm(t,e):SF(t)?fm(t.\u0275providers,e):e(t)}class hw{}class TF{resolveComponentFactory(e){throw function DF(n){const e=Error(`No component factory found for ${Lt(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Ic=(()=>{class n{}return n.NULL=new TF,n})();function AF(){return Aa(wn(),J())}function Aa(n,e){return new er(Fr(n,e))}let er=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=AF,n})();function NF(n){return n instanceof er?n.nativeElement:n}class pw{}let Xi=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function PF(){const n=J(),t=wr(wn().index,n);return(hr(t)?t:n)[11]}(),n})(),IF=(()=>{class n{}return n.\u0275prov=Ze({token:n,providedIn:"root",factory:()=>null}),n})();class Rc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const RF=new Rc("14.2.3"),pm={};function _m(n){return n.ngOriginalError}class Na{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&_m(e);for(;t&&_m(t);)t=_m(t);return t||null}}const Mm=new Map;let WF=0;const wm="__ngContext__";function jn(n,e){hr(e)?(n[wm]=e[20],function qF(n){Mm.set(n[20],n)}(e)):n[wm]=e}function Ew(n){return n.ownerDocument}function Zi(n){return n instanceof Function?n():n}var fr=(()=>((fr=fr||{})[fr.Important=1]="Important",fr[fr.DashCase=2]="DashCase",fr))();function Cm(n,e){return undefined(n,e)}function Fc(n){const e=n[3];return Qr(e)?e[3]:e}function Sm(n){return Aw(n[13])}function Em(n){return Aw(n[4])}function Aw(n){for(;null!==n&&!Qr(n);)n=n[4];return n}function Ia(n,e,t,r,i){if(null!=r){let o,s=!1;Qr(r)?o=r:hr(r)&&(s=!0,r=r[0]);const a=fn(r);0===n&&null!==t?null==i?Fw(e,t,a):ys(e,t,a,i||null,!0):1===n&&null!==t?ys(e,t,a,i||null,!0):2===n?function Hw(n,e,t){const r=Zd(n,e);r&&function _L(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function wL(n,e,t,r,i){const o=t[7];o!==fn(t)&&Ia(e,n,r,o,i);for(let a=10;a<t.length;a++){const l=t[a];Lc(l[1],l,n,e,r,o)}}(e,n,o,t,i)}}function Tm(n,e,t){return n.createElement(e,t)}function Pw(n,e){const t=n[9],r=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,Ig(i,-1)),t.splice(r,1)}function Am(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&Pw(i,r),e>0&&(n[t-1][4]=r[4]);const o=Vd(n,10+e);!function dL(n,e){Lc(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Iw(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&Lc(n,e,t,3,null,null),function pL(n){let e=n[13];if(!e)return Nm(n[1],n);for(;e;){let t=null;if(hr(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)hr(e)&&Nm(e[1],e),e=e[3];null===e&&(e=n),hr(e)&&Nm(e[1],e),t=e&&e[4]}e=t}}(e)}}function Nm(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function vL(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof pc)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],l=o[s+1];try{l.call(a)}finally{}}else try{o.call(i)}finally{}}}}(n,e),function yL(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+1],a="function"==typeof s?s(e):fn(e[s]),l=r[i=t[o+2]],c=t[o+3];"boolean"==typeof c?a.removeEventListener(t[o],l,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),o+=2}else{const s=r[i=t[o+1]];t[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)(0,r[o])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Qr(e[3])){t!==e[3]&&Pw(t,e);const r=e[19];null!==r&&r.detachView(n)}!function XF(n){Mm.delete(n[20])}(e)}}function Rw(n,e,t){return function Ow(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===vi.None||i===vi.Emulated)return null}return Fr(r,t)}(n,e.parent,t)}function ys(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Fw(n,e,t){n.appendChild(e,t)}function Lw(n,e,t,r,i){null!==r?ys(n,e,t,r,i):Fw(n,e,t)}function Zd(n,e){return n.parentNode(e)}function kw(n,e,t){return Vw(n,e,t)}let Vw=function Bw(n,e,t){return 40&n.type?Fr(n,t):null};function Yd(n,e,t,r){const i=Rw(n,r,e),o=e[11],a=kw(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)Lw(o,i,t[l],a,!1);else Lw(o,i,t,a,!1)}function Jd(n,e){if(null!==e){const t=e.type;if(3&t)return Fr(e,n);if(4&t)return Im(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Jd(n,r);{const i=n[e.index];return Qr(i)?Im(-1,i):fn(i)}}if(32&t)return Cm(e,n)()||fn(n[e.index]);{const r=Uw(n,e);return null!==r?Array.isArray(r)?r[0]:Jd(Fc(n[16]),r):Jd(n,e.next)}}return null}function Uw(n,e){return null!==e?n[16][6].projection[e.projection]:null}function Im(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return Jd(r,i)}return e[7]}function Rm(n,e,t,r,i,o,s){for(;null!=t;){const a=r[t.index],l=t.type;if(s&&0===e&&(a&&jn(fn(a),r),t.flags|=4),64!=(64&t.flags))if(8&l)Rm(n,e,t.child,r,i,o,!1),Ia(e,n,i,a,o);else if(32&l){const c=Cm(t,r);let u;for(;u=c();)Ia(e,n,i,u,o);Ia(e,n,i,a,o)}else 16&l?zw(n,e,r,t,i,o):Ia(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Lc(n,e,t,r,i,o){Rm(t,r,n.firstChild,e,i,o,!1)}function zw(n,e,t,r,i,o){const s=t[16],l=s[6].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Ia(e,n,i,l[c],o);else Rm(n,e,l,s[3],i,o,!0)}function jw(n,e,t){n.setAttribute(e,"style",t)}function Om(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Ww(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}const $w="ng-template";function CL(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==Ww(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function qw(n){return 4===n.type&&n.value!==$w}function SL(n,e,t){return e===(4!==n.type||t?n.value:$w)}function EL(n,e,t){let r=4;const i=n.attrs||[],o=function AL(n){for(let e=0;e<n.length;e++)if(vx(n[e]))return e;return n.length}(i);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!SL(n,l,t)||""===l&&1===e.length){if(ti(r))return!1;s=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!CL(n.attrs,c,t)){if(ti(r))return!1;s=!0}continue}const d=DL(8&r?"class":l,i,qw(n),t);if(-1===d){if(ti(r))return!1;s=!0;continue}if(""!==c){let h;h=d>o?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==Ww(f,c,0)||2&r&&c!==h){if(ti(r))return!1;s=!0}}}}else{if(!s&&!ti(r)&&!ti(l))return!1;if(s&&ti(l))continue;s=!1,r=l|1&r}}return ti(r)||s}function ti(n){return 0==(1&n)}function DL(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const s=e[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function NL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function Xw(n,e,t=!1){for(let r=0;r<e.length;r++)if(EL(n,e[r],t))return!0;return!1}function PL(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function Zw(n,e){return n?":not("+e.trim()+")":e}function IL(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!ti(s)&&(e+=Zw(o,i),i=""),r=s,o=o||!ti(r);t++}return""!==i&&(e+=Zw(o,i)),e}const Ye={};function Sr(n){Yw(mt(),J(),Qn()+n,!1)}function Yw(n,e,t,r){if(!r)if(3==(3&e[2])){const o=n.preOrderCheckHooks;null!==o&&Pd(e,o,t)}else{const o=n.preOrderHooks;null!==o&&Id(e,o,0,t)}Eo(t)}function eb(n,e=null,t=null,r){const i=tb(n,e,t,r);return i.resolveInjectorInitializers(),i}function tb(n,e=null,t=null,r,i=new Set){const o=[t||bt,mF(n)];return r=r||("object"==typeof n?void 0:Lt(n)),new uw(o,e||Xd(),r||null,i)}let Lr=(()=>{class n{static create(t,r){if(Array.isArray(t))return eb({name:""},r,t,"");{const i=t.name??"";return eb({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=wc,n.NULL=new ow,n.\u0275prov=Ze({token:n,providedIn:"any",factory:()=>De(rw)}),n.__NG_ELEMENT_ID__=-1,n})();function te(n,e=Re.Default){const t=J();return null===t?De(n,e):Ex(wn(),t,ke(n),e)}function Vm(){throw new Error("invalid")}function Qd(n,e){return n<<17|e<<2}function ni(n){return n>>17&32767}function Gm(n){return 2|n}function Yi(n){return(131068&n)>>2}function Um(n,e){return-131069&n|e<<2}function Hm(n){return 1|n}function vb(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],o=t[r+1];if(-1!==o){const s=n.data[o];kg(i),s.contentQueries(2,e[o],o)}}}function nh(n,e,t,r,i,o,s,a,l,c,u){const d=e.blueprint.slice();return d[0]=i,d[2]=76|r,(null!==u||n&&1024&n[2])&&(d[2]|=1024),nx(d),d[3]=d[15]=n,d[8]=t,d[10]=s||n&&n[10],d[11]=a||n&&n[11],d[12]=l||n&&n[12]||null,d[9]=c||n&&n[9]||null,d[6]=o,d[20]=function $F(){return WF++}(),d[21]=u,d[16]=2==e.type?n[16]:d,d}function Oa(n,e,t,r,i){let o=n.data[e];if(null===o)o=function Ym(n,e,t,r,i){const o=ox(),s=Rg(),l=n.data[e]=function p2(n,e,t,r,i,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l)),l}(n,e,t,r,i),function ZR(){return He.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function fc(){const n=He.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Mi(o,!0),o}function Fa(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Jm(n,e,t){Bg(e);try{const r=n.viewQuery;null!==r&&oy(1,r,t);const i=n.template;null!==i&&_b(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&vb(n,e),n.staticViewQueries&&oy(2,n.viewQuery,t);const o=n.components;null!==o&&function d2(n,e){for(let t=0;t<e.length;t++)N2(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,Vg()}}function rh(n,e,t,r){const i=e[2];if(128!=(128&i)){Bg(e);try{nx(e),function ax(n){return He.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&_b(n,e,t,2,r);const s=3==(3&i);if(s){const c=n.preOrderCheckHooks;null!==c&&Pd(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Id(e,c,0,null),Gg(e,0)}if(function T2(n){for(let e=Sm(n);null!==e;e=Em(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],o=i[3];0==(512&i[2])&&Ig(o,1),i[2]|=512}}}(e),function D2(n){for(let e=Sm(n);null!==e;e=Em(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];Ad(r)&&rh(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&vb(n,e),s){const c=n.contentCheckHooks;null!==c&&Pd(e,c)}else{const c=n.contentHooks;null!==c&&Id(e,c,1),Gg(e,1)}!function c2(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)Eo(~i);else{const o=i,s=t[++r],a=t[++r];YR(s,o),a(2,e[o])}}}finally{Eo(-1)}}(n,e);const a=n.components;null!==a&&function u2(n,e){for(let t=0;t<e.length;t++)A2(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&oy(2,l,r),s){const c=n.viewCheckHooks;null!==c&&Pd(e,c)}else{const c=n.viewHooks;null!==c&&Id(e,c,2),Gg(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Ig(e[3],-1))}finally{Vg()}}}function _b(n,e,t,r,i){const o=Qn(),s=2&r;try{Eo(-1),s&&e.length>22&&Yw(n,e,22,!1),t(r,i)}finally{Eo(o)}}function Mb(n,e,t){if(Eg(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const s=n.data[o];s.contentQueries&&s.contentQueries(1,t[o],o)}}}function Km(n,e,t){!ix()||(function _2(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;n.firstCreatePass||mc(t,e),jn(r,e);const s=t.initialInputs;for(let a=i;a<o;a++){const l=n.data[a],c=ei(l);c&&C2(e,t,l);const u=yc(e,n,a,t);jn(u,e),null!==s&&S2(0,a-i,u,l,0,s),c&&(wr(t.index,e)[8]=u)}}(n,e,t,Fr(t,e)),128==(128&t.flags)&&function M2(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function JR(){return He.lFrame.currentDirectiveIndex}();try{Eo(o);for(let a=r;a<i;a++){const l=n.data[a],c=e[a];Fg(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&Db(l,c)}}finally{Eo(-1),Fg(s)}}(n,e,t))}function Qm(n,e,t=Fr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(e,n):n[s];n[i++]=a}}}function xb(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=ey(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function ey(n,e,t,r,i,o,s,a,l,c){const u=22+r,d=u+i,h=function h2(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ye);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function wb(n,e,t,r){const i=Ib(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&Rb(n).push(r,i.length-1))}function bb(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function Cb(n,e){const r=e.directiveEnd,i=n.data,o=e.attrs,s=[];let a=null,l=null;for(let c=e.directiveStart;c<r;c++){const u=i[c],d=u.inputs,h=null===o||qw(e)?null:E2(d,o);s.push(h),a=bb(d,c,a),l=bb(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=a,e.outputs=l}function Sb(n,e){const t=wr(e,n);16&t[2]||(t[2]|=32)}function ty(n,e,t,r){let i=!1;if(ix()){const o=function x2(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Xw(t,s.selectors,!1)&&(i||(i=[]),kd(mc(t,e),n,s.type),ei(s)?(Tb(n,t),i.unshift(s)):i.push(s))}return i}(n,e,t),s=null===r?null:{"":-1};if(null!==o){i=!0,Ab(t,n.data.length,o.length);for(let u=0;u<o.length;u++){const d=o[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=Fa(n,e,o.length,null);for(let u=0;u<o.length;u++){const d=o[u];t.mergedAttrs=Od(t.mergedAttrs,d.hostAttrs),Nb(n,t,e,c,d),b2(c,d,s),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}Cb(n,t)}s&&function w2(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new se(-301,!1);r.push(e[i],o)}}}(t,r,s)}return t.mergedAttrs=Od(t.mergedAttrs,t.attrs),i}function Eb(n,e,t,r,i,o){const s=o.hostBindings;if(s){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function v2(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(r,i,s)}}function Db(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Tb(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function b2(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ei(e)&&(t[""]=n)}}function Ab(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Nb(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=gs(i.type)),s=new pc(o,ei(i),te);n.blueprint[r]=s,t[r]=s,Eb(n,e,0,r,Fa(n,t,i.hostVars,Ye),i)}function C2(n,e,t){const r=Fr(e,n),i=xb(t),o=n[10],s=ih(n,nh(n,i,null,t.onPush?32:16,r,e,o,o.createRenderer(r,t),null,null,null));n[e.index]=s}function wi(n,e,t,r,i,o){const s=Fr(n,e);!function ny(n,e,t,r,i,o,s){if(null==o)n.removeAttribute(e,i,t);else{const a=null==s?Xe(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}(e[11],s,o,n.value,t,r,i)}function S2(n,e,t,r,i,o){const s=o[e];if(null!==s){const a=r.setInput;for(let l=0;l<s.length;){const c=s[l++],u=s[l++],d=s[l++];null!==a?r.setInput(t,d,c,u):t[u]=d}}}function E2(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function Pb(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function A2(n,e){const t=wr(e,n);if(Ad(t)){const r=t[1];48&t[2]?rh(r,t,r.template,t[8]):t[5]>0&&ry(t)}}function ry(n){for(let r=Sm(n);null!==r;r=Em(r))for(let i=10;i<r.length;i++){const o=r[i];if(Ad(o))if(512&o[2]){const s=o[1];rh(s,o,s.template,o[8])}else o[5]>0&&ry(o)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=wr(t[r],n);Ad(i)&&i[5]>0&&ry(i)}}function N2(n,e){const t=wr(e,n),r=t[1];(function P2(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),Jm(r,t,t[8])}function ih(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function iy(n){for(;n;){n[2]|=32;const e=Fc(n);if(DR(n)&&!e)return n;n=e}return null}function oh(n,e,t,r=!0){const i=e[10];i.begin&&i.begin();try{rh(n,e,n.template,t)}catch(s){throw r&&Fb(e,s),s}finally{i.end&&i.end()}}function oy(n,e,t){kg(0),e(n,t)}function Ib(n){return n[7]||(n[7]=[])}function Rb(n){return n.cleanup||(n.cleanup=[])}function Fb(n,e){const t=n[9],r=t?t.get(Na,null):null;r&&r.handleError(e)}function sy(n,e,t,r,i){for(let o=0;o<t.length;){const s=t[o++],a=t[o++],l=e[s],c=n.data[s];null!==c.setInput?c.setInput(l,i,r,a):l[a]=i}}function sh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=vg(i,a):2==o&&(r=vg(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ah(n,e,t,r,i=!1){for(;null!==t;){const o=e[t.index];if(null!==o&&r.push(fn(o)),Qr(o))for(let a=10;a<o.length;a++){const l=o[a],c=l[1].firstChild;null!==c&&ah(l[1],l,c,r)}const s=t.type;if(8&s)ah(n,e,t.child,r);else if(32&s){const a=Cm(t,e);let l;for(;l=a();)r.push(l)}else if(16&s){const a=Uw(e,t);if(Array.isArray(a))r.push(...a);else{const l=Fc(e[16]);ah(l[1],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class kc{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return ah(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Qr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Am(e,r),Vd(t,r))}this._attachedToViewContainer=!1}Iw(this._lView[1],this._lView)}onDestroy(e){wb(this._lView[1],this._lView,null,e)}markForCheck(){iy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){oh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function fL(n,e){Lc(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=e}}class I2 extends kc{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;oh(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class ay extends Ic{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=At(e);return new Bc(t,this.ngModule)}}function Lb(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class O2{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){const i=this.injector.get(e,pm,r);return i!==pm||t===pm?i:this.parentInjector.get(e,t,r)}}class Bc extends hw{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function RL(n){return n.map(IL).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Lb(this.componentDef.inputs)}get outputs(){return Lb(this.componentDef.outputs)}create(e,t,r,i){let o=(i=i||this.ngModule)instanceof Ao?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new O2(e,o):e,a=s.get(pw,null);if(null===a)throw new se(407,!1);const l=s.get(IF,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=r?function f2(n,e,t){return n.selectRootElement(e,t===vi.ShadowDom)}(c,r,this.componentDef.encapsulation):Tm(a.createRenderer(null,this.componentDef),u,function R2(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),h=this.componentDef.onPush?288:272,f=ey(0,null,null,1,0,null,null,null,null,null),p=nh(null,f,null,h,null,null,a,c,l,s,null);let g,m;Bg(p);try{const y=function k2(n,e,t,r,i,o){const s=t[1];t[22]=n;const l=Oa(s,22,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(sh(l,c,!0),null!==n&&(Rd(i,n,c),null!==l.classes&&Om(i,n,l.classes),null!==l.styles&&jw(i,n,l.styles)));const u=r.createRenderer(n,e),d=nh(t,xb(e),null,e.onPush?32:16,t[22],l,r,u,o||null,null,null);return s.firstCreatePass&&(kd(mc(l,t),s,e.type),Tb(s,l),Ab(l,t.length,1)),ih(t,d),t[22]=d}(d,this.componentDef,p,a,c);if(d)if(r)Rd(c,d,["ng-version",RF.full]);else{const{attrs:v,classes:_}=function OL(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!ti(i))break;i=o}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);v&&Rd(c,d,v),_&&_.length>0&&Om(c,d,_.join(" "))}if(m=Pg(f,22),void 0!==t){const v=m.projection=[];for(let _=0;_<this.ngContentSelectors.length;_++){const M=t[_];v.push(null!=M?Array.from(M):null)}}g=function B2(n,e,t,r){const i=t[1],o=function y2(n,e,t){const r=wn();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),Nb(n,r,e,Fa(n,e,1,null),t),Cb(n,r));const i=yc(e,n,r.directiveStart,r);jn(i,e);const o=Fr(r,e);return o&&jn(o,e),i}(i,t,e);if(n[8]=t[8]=o,null!==r)for(const a of r)a(o,e);if(e.contentQueries){const a=wn();e.contentQueries(1,o,a.directiveStart)}const s=wn();return!i.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Eo(s.index),Eb(t[1],s,0,s.directiveStart,s.directiveEnd,e),Db(e,o)),o}(y,this.componentDef,p,[V2]),Jm(f,p,null)}finally{Vg()}return new L2(this.componentType,g,Aa(m,p),p,m)}}class L2 extends class EF{}{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new I2(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const o=this._rootLView;sy(o[1],o,i,e,t),Sb(o,this._tNode.index)}}get injector(){return new _a(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function V2(){const n=wn();Nd(J()[1],n)}function Oe(n){let e=function kb(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(ei(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new se(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const s=n;s.inputs=ly(n.inputs),s.declaredInputs=ly(n.declaredInputs),s.outputs=ly(n.outputs);const a=i.hostBindings;a&&z2(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&U2(n,l),c&&H2(n,c),yg(n.inputs,i.inputs),yg(n.declaredInputs,i.declaredInputs),yg(n.outputs,i.outputs),ei(i)&&i.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===Oe&&(t=!1)}}e=Object.getPrototypeOf(e)}!function G2(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Od(i.hostAttrs,t=Od(t,i.hostAttrs))}}(r)}function ly(n){return n===ua?{}:n===bt?[]:n}function U2(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function H2(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function z2(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let lh=null;function vs(){if(!lh){const n=kt.Symbol;if(n&&n.iterator)lh=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(lh=r)}}}return lh}function Vc(n){return!!function cy(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&vs()in n)}function Wn(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Ci(n,e,t,r){const i=J();return Wn(i,ma(),e)&&(mt(),wi(nn(),i,n,e,t,r)),Ci}function Io(n,e,t,r,i,o,s,a){const l=J(),c=mt(),u=n+22,d=c.firstCreatePass?function J2(n,e,t,r,i,o,s,a,l){const c=e.consts,u=Oa(e,n,4,s||null,So(c,a));ty(e,t,u,So(c,l)),Nd(e,u);const d=u.tViews=ey(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,r,i,o,s):c.data[u];Mi(d,!1);const h=l[11].createComment("");Yd(c,l,h,d),jn(h,l),ih(l,l[u]=Pb(h,l,h,d)),Dd(d)&&Km(c,l,d),null!=s&&Qm(l,d,a)}function Ki(n,e,t){const r=J();return Wn(r,ma(),e)&&function Er(n,e,t,r,i,o,s,a){const l=Fr(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(sy(n,t,u,r,i),Ed(e)&&Sb(t,e.index)):3&e.type&&(r=function g2(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(l,r,i))}(mt(),nn(),r,n,e,r[11],t,!1),Ki}function uy(n,e,t,r,i){const s=i?"class":"style";sy(n,t,e.inputs[s],s,r)}function I(n,e,t,r){const i=J(),o=mt(),s=22+n,a=i[11],l=i[s]=Tm(a,e,function rO(){return He.lFrame.currentNamespace}()),c=o.firstCreatePass?function Q2(n,e,t,r,i,o,s){const a=e.consts,c=Oa(e,n,2,i,So(a,o));return ty(e,t,c,So(a,s)),null!==c.attrs&&sh(c,c.attrs,!1),null!==c.mergedAttrs&&sh(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,i,0,e,t,r):o.data[s];Mi(c,!0);const u=c.mergedAttrs;null!==u&&Rd(a,l,u);const d=c.classes;null!==d&&Om(a,l,d);const h=c.styles;return null!==h&&jw(a,l,h),64!=(64&c.flags)&&Yd(o,i,l,c),0===function UR(){return He.lFrame.elementDepthCount}()&&jn(l,i),function HR(){He.lFrame.elementDepthCount++}(),Dd(c)&&(Km(o,i,c),Mb(o,c,i)),null!==r&&Qm(i,c),I}function R(){let n=wn();Rg()?Og():(n=n.parent,Mi(n,!1));const e=n;!function zR(){He.lFrame.elementDepthCount--}();const t=mt();return t.firstCreatePass&&(Nd(t,n),Eg(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function lO(n){return 0!=(16&n.flags)}(e)&&uy(t,e,J(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function cO(n){return 0!=(32&n.flags)}(e)&&uy(t,e,J(),e.stylesWithoutHost,!1),R}function ze(n,e,t,r){return I(n,e,t,r),R(),ze}function uh(n,e,t){const r=J(),i=mt(),o=n+22,s=i.firstCreatePass?function e3(n,e,t,r,i){const o=e.consts,s=So(o,r),a=Oa(e,n,8,"ng-container",s);return null!==s&&sh(a,s,!0),ty(e,t,a,So(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,t):i.data[o];Mi(s,!0);const a=r[o]=r[11].createComment("");return Yd(i,r,a,s),jn(a,r),Dd(s)&&(Km(i,r,s),Mb(i,s,r)),null!=t&&Qm(r,s),uh}function dh(){let n=wn();const e=mt();return Rg()?Og():(n=n.parent,Mi(n,!1)),e.firstCreatePass&&(Nd(e,n),Eg(n)&&e.queries.elementEnd(n)),dh}function dy(n,e,t){return uh(n,e,t),dh(),dy}function Uc(n){return!!n&&"function"==typeof n.then}const hy=function Xb(n){return!!n&&"function"==typeof n.subscribe};function Pn(n,e,t,r){const i=J(),o=mt(),s=wn();return function Yb(n,e,t,r,i,o,s,a){const l=Dd(r),u=n.firstCreatePass&&Rb(n),d=e[8],h=Ib(e);let f=!0;if(3&r.type||a){const m=Fr(r,e),y=a?a(m):m,v=h.length,_=a?w=>a(fn(w[r.index])):r.index;let M=null;if(!a&&l&&(M=function n3(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=e[7],l=i[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(n,e,i,r.index)),null!==M)(M.__ngLastListenerFn__||M).__ngNextListenerFn__=o,M.__ngLastListenerFn__=o,f=!1;else{o=Kb(r,e,d,o,!1);const w=t.listen(y,i,o);h.push(o,w),u&&u.push(i,_,v,v+1)}}else o=Kb(r,e,d,o,!1);const p=r.outputs;let g;if(f&&null!==p&&(g=p[i])){const m=g.length;if(m)for(let y=0;y<m;y+=2){const b=e[g[y]][g[y+1]].subscribe(o),A=h.length;h.push(o,b),u&&u.push(i,r.index,A,-(A+1))}}}(o,i,i[11],s,n,e,0,r),Pn}function Jb(n,e,t,r){try{return!1!==t(r)}catch(i){return Fb(n,i),!1}}function Kb(n,e,t,r,i){return function o(s){if(s===Function)return r;iy(2&n.flags?wr(n.index,e):e);let l=Jb(e,0,r,s),c=o.__ngNextListenerFn__;for(;c;)l=Jb(e,0,c,s)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function fy(n=1){return function QR(n){return(He.lFrame.contextLView=function eO(n,e){for(;n>0;)e=e[15],n--;return e}(n,He.lFrame.contextLView))[8]}(n)}function r3(n,e){let t=null;const r=function TL(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?Xw(n,o,!0):PL(r,o))return i}else t=i}return t}function Hc(n){const e=J()[16][6];if(!e.projection){const r=e.projection=xc(n?n.length:1,null),i=r.slice();let o=e.child;for(;null!==o;){const s=n?r3(o,n):0;null!==s&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o),o=o.next}}}function zc(n,e=0,t){const r=J(),i=mt(),o=Oa(i,22+n,16,null,t||null);null===o.projection&&(o.projection=e),Og(),64!=(64&o.flags)&&function xL(n,e,t){zw(e[11],0,e,t,Rw(n,t,e),kw(t.parent||e[6],t,e))}(i,r,o)}function lC(n,e,t,r,i){const o=n[t+1],s=null===e;let a=r?ni(o):Yi(o),l=!1;for(;0!==a&&(!1===l||s);){const u=n[a+1];s3(n[a],e)&&(l=!0,n[a+1]=r?Hm(u):Gm(u)),a=r?ni(u):Yi(u)}l&&(n[t+1]=r?Gm(o):Hm(o))}function s3(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ca(n,e)>=0}function $a(n,e){return function ri(n,e,t,r){const i=J(),o=mt(),s=function Wi(n){const e=He.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);o.firstUpdatePass&&function yC(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[Qn()],s=function mC(n,e){return e>=n.expandoStartIndex}(n,t);(function xC(n,e){return 0!=(n.flags&(e?16:32))})(o,r)&&null===e&&!s&&(e=!1),e=function g3(n,e,t,r){const i=function Lg(n){const e=He.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=jc(t=gy(null,n,e,t,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==i)if(t=gy(i,n,e,t,r),null===o){let l=function m3(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Yi(r))return n[ni(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=gy(null,n,e,l[1],r),l=jc(l,e.attrs,r),function y3(n,e,t,r){n[ni(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else o=function v3(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=jc(r,n[o].hostAttrs,t);return jc(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function i3(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ni(s),l=Yi(s);n[r]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||Ca(d,u)>0)&&(c=!0)}else u=t;if(i)if(0!==l){const h=ni(n[a+1]);n[r+1]=Qd(h,a),0!==h&&(n[h+1]=Um(n[h+1],r)),n[a+1]=function QL(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Qd(a,0),0!==a&&(n[a+1]=Um(n[a+1],r)),a=r;else n[r+1]=Qd(l,0),0===a?a=r:n[l+1]=Um(n[l+1],r),l=r;c&&(n[r+1]=Gm(n[r+1])),lC(n,u,r,!0),lC(n,u,r,!1),function o3(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Ca(o,e)>=0&&(t[r+1]=Hm(t[r+1]))}(e,u,n,r,o),s=Qd(a,l),o?e.classBindings=s:e.styleBindings=s}(i,o,e,t,s,r)}}(o,n,s,r),e!==Ye&&Wn(i,s,e)&&function _C(n,e,t,r,i,o,s,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];hh(function ub(n){return 1==(1&n)}(c)?MC(l,e,t,i,Yi(c),s):void 0)||(hh(o)||function cb(n){return 2==(2&n)}(c)&&(o=MC(l,null,t,i,a,s)),function bL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:fr.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=fr.Important),n.setStyle(t,r,i,o))}}(r,s,Td(Qn(),t),i,o))}(o,o.data[Qn()],i,i[11],n,i[s+1]=function x3(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Lt(To(n)))),n}(e,t),r,s)}(n,e,null,!0),$a}function gy(n,e,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],r=jc(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function jc(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Cr(n,s,!!t||e[++o]))}return void 0===n?null:n}function MC(n,e,t,r,i,o){const s=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[i+1];h===Ye&&(h=d?bt:void 0);let f=d?Xg(h,r):u===r?h:void 0;if(c&&!hh(f)&&(f=Xg(l,r)),hh(f)&&(a=f,s))return a;const p=n[i+1];i=s?ni(p):Yi(p)}if(null!==e){let l=o?e.residualClasses:e.residualStyles;null!=l&&(a=Xg(l,r))}return a}function hh(n){return void 0!==n}function L(n,e=""){const t=J(),r=mt(),i=n+22,o=r.firstCreatePass?Oa(r,i,1,e,null):r.data[i],s=t[i]=function Dm(n,e){return n.createText(e)}(t[11],e);Yd(r,t,s,o),Mi(o,!1)}function Qi(n,e,t){const r=J(),i=function ka(n,e,t,r){return Wn(n,ma(),t)?e+Xe(t)+r:Ye}(r,n,e,t);return i!==Ye&&function Ji(n,e,t){const r=Td(e,n);!function Nw(n,e,t){n.setValue(e,t)}(n[11],r,t)}(r,Qn(),i),Qi}const Xa="en-US";let jC=Xa;function vy(n,e,t,r,i){if(n=ke(n),Array.isArray(n))for(let o=0;o<n.length;o++)vy(n[o],e,t,r,i);else{const o=mt(),s=J();let a=ms(n)?n:ke(n.provide),l=dw(n);const c=wn(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(ms(n)||!n.multi){const f=new pc(l,i,te),p=My(a,e,i?u:u+h,d);-1===p?(kd(mc(c,s),o,a),_y(o,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(f),s.push(f)):(t[p]=f,s[p]=f)}else{const f=My(a,e,u+h,d),p=My(a,e,u,u+h),g=f>=0&&t[f],m=p>=0&&t[p];if(i&&!m||!i&&!g){kd(mc(c,s),o,a);const y=function Vk(n,e,t,r,i){const o=new pc(n,t,te);return o.multi=[],o.index=e,o.componentProviders=0,gS(o,i,r&&!t),o}(i?Bk:kk,t.length,i,r,l);!i&&m&&(t[p].providerFactory=y),_y(o,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(y),s.push(y)}else _y(o,n,f>-1?f:p,gS(t[i?p:f],l,!i&&r));!i&&r&&m&&t[p].componentProviders++}}}function _y(n,e,t,r){const i=ms(e),o=function vF(n){return!!n.useClass}(e);if(i||o){const l=(o?ke(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function gS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function My(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function kk(n,e,t,r){return xy(this.multi,[])}function Bk(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=yc(t,t[1],this.providerFactory.index,r);o=a.slice(0,s),xy(i,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],xy(i,o);return o}function xy(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Rt(n,e=[]){return t=>{t.providersResolver=(r,i)=>function Lk(n,e,t){const r=mt();if(r.firstCreatePass){const i=ei(n);vy(t,r.data,r.blueprint,i,!0),vy(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class xs{}class mS{}class yS extends xs{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ay(this);const r=Mr(e);this._bootstrapComponents=Zi(r.bootstrap),this._r3Injector=tb(e,t,[{provide:xs,useValue:this},{provide:Ic,useValue:this.componentFactoryResolver}],Lt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class wy extends mS{constructor(e){super(),this.moduleType=e}create(e){return new yS(this.moduleType,e)}}class Uk extends xs{constructor(e,t,r){super(),this.componentFactoryResolver=new ay(this),this.instance=null;const i=new uw([...e,{provide:xs,useValue:this},{provide:Ic,useValue:this.componentFactoryResolver}],t||Xd(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function yh(n,e,t=null){return new Uk(n,e,t).injector}let Hk=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=sw(0,t.type),i=r.length>0?yh([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Ze({token:n,providedIn:"environment",factory:()=>new n(De(Ao))}),n})();function Za(n){n.getStandaloneInjector=e=>e.get(Hk).getOrCreateStandaloneInjector(n)}function Cy(n){return e=>{setTimeout(n,void 0,e)}}const Ke=class pB extends yr{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=Cy(o),i&&(i=Cy(i)),s&&(s=Cy(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof mr&&e.add(a),a}};function gB(){return this._results[vs()]()}class Sy{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=vs(),r=Sy.prototype;r[t]||(r[t]=gB)}get changes(){return this._changes||(this._changes=new Ke)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=br(e);(this._changesDetected=!function _O(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let eo=(()=>{class n{}return n.__NG_ELEMENT_ID__=vB,n})();const mB=eo,yB=class extends mB{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tViews,i=nh(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(r)),Jm(r,i,e),new kc(i)}};function vB(){return vh(wn(),J())}function vh(n,e){return 4&n.type?new yB(e,n,Aa(n,e)):null}let oi=(()=>{class n{}return n.__NG_ELEMENT_ID__=_B,n})();function _B(){return PS(wn(),J())}const MB=oi,AS=class extends MB{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Aa(this._hostTNode,this._hostLView)}get injector(){return new _a(this._hostTNode,this._hostLView)}get parentInjector(){const e=Ld(this._hostTNode,this._hostLView);if(xx(e)){const t=va(e,this._hostLView),r=ya(e);return new _a(t[1].data[r+8],t)}return new _a(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=NS(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=e.createEmbeddedView(t||{},o);return this.insert(s,i),s}createComponent(e,t,r,i,o){const s=e&&!function Mc(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const d=t||{};a=d.index,r=d.injector,i=d.projectableNodes,o=d.environmentInjector||d.ngModuleRef}const l=s?e:new Bc(At(e)),c=r||this.parentInjector;if(!o&&null==l.ngModule){const h=(s?c:this.parentInjector).get(Ao,null);h&&(o=h)}const u=l.create(c,i,void 0,o);return this.insert(u.hostView,a),u}insert(e,t){const r=e._lView,i=r[1];if(function GR(n){return Qr(n[3])}(r)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=r[3],h=new AS(d,d[6],d[3]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;!function gL(n,e,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=e),r<o-10?(e[4]=t[i],Ix(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const s=e[17];null!==s&&t!==s&&function mL(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(i,r,s,o);const a=Im(o,s),l=r[11],c=Zd(l,s[7]);return null!==c&&function hL(n,e,t,r,i,o){r[0]=i,r[6]=e,Lc(n,r,t,1,i,o)}(i,s[6],l,r,c,a),e.attachToViewContainerRef(),Ix(Ey(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=NS(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Am(this._lContainer,t);r&&(Vd(Ey(this._lContainer),t),Iw(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=Am(this._lContainer,t);return r&&null!=Vd(Ey(this._lContainer),t)?new kc(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function NS(n){return n[8]}function Ey(n){return n[8]||(n[8]=[])}function PS(n,e){let t;const r=e[n.index];if(Qr(r))t=r;else{let i;if(8&n.type)i=fn(r);else{const o=e[11];i=o.createComment("");const s=Fr(n,e);ys(o,Zd(o,s),i,function ML(n,e){return n.nextSibling(e)}(o,s),!1)}e[n.index]=t=Pb(r,e,i,n),ih(e,t)}return new AS(t,n,e)}class Dy{constructor(e){this.queryList=e,this.matches=null}clone(){return new Dy(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ty{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const s=t.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new Ty(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==kS(e,t).matches&&this.queries[t].setDirty()}}class IS{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class Ay{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new Ay(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Ny{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Ny(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,t,bB(t,o)),this.matchTNodeWithReadOption(e,t,Bd(t,e,o,!1,!1))}else r===eo?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Bd(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===er||i===oi||i===eo&&4&t.type)this.addMatch(t.index,-2);else{const o=Bd(t,e,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function bB(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function SB(n,e,t,r){return-1===t?function CB(n,e){return 11&n.type?Aa(n,e):4&n.type?vh(n,e):null}(e,n):-2===t?function EB(n,e,t){return t===er?Aa(e,n):t===eo?vh(e,n):t===oi?PS(e,n):void 0}(n,e,r):yc(n,n[1],t,e)}function RS(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const o=n.data,s=t.matches,a=[];for(let l=0;l<s.length;l+=2){const c=s[l];a.push(c<0?null:SB(e,o[c],s[l+1],t.metadata.read))}i.matches=a}return i.matches}function Py(n,e,t,r){const i=n.queries.getByIndex(t),o=i.matches;if(null!==o){const s=RS(n,e,i,t);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)r.push(s[a/2]);else{const c=o[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&Py(h[1],h,c,r)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];Py(f[1],f,c,r)}}}}}return r}function _h(n){const e=J(),t=mt(),r=cx();kg(r+1);const i=kS(t,r);if(n.dirty&&function VR(n){return 4==(4&n[2])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const o=i.crossesNgTemplate?Py(t,e,r,[]):RS(t,e,i,r);n.reset(o,NF),n.notifyOnChanges()}return!0}return!1}function OS(n,e,t){const r=mt();r.firstCreatePass&&(function LS(n,e,t){null===n.queries&&(n.queries=new Ay),n.queries.track(new Ny(e,t))}(r,new IS(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),function FS(n,e,t){const r=new Sy(4==(4&t));wb(n,e,r,r.destroy),null===e[19]&&(e[19]=new Ty),e[19].queries.push(new Dy(r))}(r,J(),e)}function kS(n,e){return n.queries.getByIndex(e)}function BS(n,e){return vh(n,e)}function wh(...n){}const bh=new Pe("Application Initializer");let Ch=(()=>{class n{constructor(t){this.appInits=t,this.resolve=wh,this.reject=wh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Uc(o))t.push(o);else if(hy(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(De(bh,8))},n.\u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Qc=new Pe("AppId",{providedIn:"root",factory:function rE(){return`${ky()}${ky()}${ky()}`}});function ky(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const iE=new Pe("Platform Initializer"),oE=new Pe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),sE=new Pe("appBootstrapListener");let XB=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const to=new Pe("LocaleId",{providedIn:"root",factory:()=>yt(to,Re.Optional|Re.SkipSelf)||function ZB(){return typeof $localize<"u"&&$localize.locale||Xa}()});class JB{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let By=(()=>{class n{compileModuleSync(t){return new wy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=Zi(Mr(t).declarations).reduce((s,a)=>{const l=At(a);return l&&s.push(new Bc(l)),s},[]);return new JB(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eV=(()=>Promise.resolve(0))();function Vy(n){typeof Zone>"u"?eV.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Kt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ke(!1),this.onMicrotaskEmpty=new Ke(!1),this.onStable=new Ke(!1),this.onError=new Ke(!1),typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();const i=this;if(i._nesting=0,i._outer=i._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const o=Zone.AsyncStackTaggingZoneSpec;i._inner=i._inner.fork(new o("Angular"))}Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function tV(){let n=kt.requestAnimationFrame,e=kt.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function iV(n){const e=()=>{!function rV(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(kt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Uy(n),n.isCheckStableRunning=!0,Gy(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Uy(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{try{return cE(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),uE(n)}},onInvoke:(t,r,i,o,s,a,l)=>{try{return cE(n),t.invoke(i,o,s,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),uE(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,Uy(n),Gy(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Kt.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(Kt.isInAngularZone())throw new se(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,nV,wh,wh);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const nV={};function Gy(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Uy(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function cE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function uE(n){n._nesting--,Gy(n)}class oV{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ke,this.onMicrotaskEmpty=new Ke,this.onStable=new Ke,this.onError=new Ke}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const dE=new Pe(""),Sh=new Pe("");let jy,Hy=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,jy||(function sV(n){jy=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Kt.assertNotInAngularZone(),Vy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vy(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(De(Kt),De(zy),De(Sh))},n.\u0275prov=Ze({token:n,factory:n.\u0275fac}),n})(),zy=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return jy?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Ro=null;const hE=new Pe("AllowMultipleToken"),Wy=new Pe("PlatformDestroyListeners");class fE{constructor(e,t){this.name=e,this.token=t}}function gE(n,e,t=[]){const r=`Platform: ${e}`,i=new Pe(r);return(o=[])=>{let s=$y();if(!s||s.injector.get(hE,!1)){const a=[...t,...o,{provide:i,useValue:!0}];n?n(a):function cV(n){if(Ro&&!Ro.get(hE,!1))throw new se(400,!1);Ro=n;const e=n.get(yE);(function pE(n){const e=n.get(iE,null);e&&e.forEach(t=>t())})(n)}(function mE(n=[],e){return Lr.create({name:e,providers:[{provide:um,useValue:"platform"},{provide:Wy,useValue:new Set([()=>Ro=null])},...n]})}(a,r))}return function dV(n){const e=$y();if(!e)throw new se(401,!1);return e}()}}function $y(){return Ro?.get(yE)??null}let yE=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function _E(n,e){let t;return t="noop"===n?new oV:("zone.js"===n?void 0:n)||new Kt(e),t}(r?.ngZone,function vE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:Kt,useValue:i}];return i.run(()=>{const s=Lr.create({providers:o,parent:this.injector,name:t.moduleType.name}),a=t.create(s),l=a.injector.get(Na,null);if(!l)throw new se(402,!1);return i.runOutsideAngular(()=>{const c=i.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{Dh(this._modules,a),c.unsubscribe()})}),function ME(n,e,t){try{const r=t();return Uc(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(l,i,()=>{const c=a.injector.get(Ch);return c.runInitializers(),c.donePromise.then(()=>(function WC(n){_r(n,"Expected localeId to be defined"),"string"==typeof n&&(jC=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(to,Xa)||Xa),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const i=xE({},r);return function aV(n,e,t){const r=new wy(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(Eh);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new se(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new se(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(Wy,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(De(Lr))},n.\u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function xE(n,e){return Array.isArray(e)?e.reduce(xE,n):{...n,...e}}let Eh=(()=>{class n{constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new qt(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new qt(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Kt.assertNotInAngularZone(),Vy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{Kt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=function cR(...n){const e=sc(n),t=function rR(n,e){return"number"==typeof pg(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?Zn(r[0]):ca(t)(ln(r,e)):Ui}(o,s.pipe(ac()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof hw;if(!this._injector.get(Ch).done)throw!i&&function da(n){const e=At(n)||Yn(n)||Jn(n);return null!==e&&e.standalone}(t),new se(405,false);let s;s=i?t:this._injector.get(Ic).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function lV(n){return n.isBoundToModule}(s)?void 0:this._injector.get(xs),c=s.create(Lr.NULL,[],r||s.selector,a),u=c.location.nativeElement,d=c.injector.get(dE,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Dh(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new se(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Dh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(sE,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Dh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new se(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(De(Kt),De(Ao),De(Na))},n.\u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Dh(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let bE=!0,Th=(()=>{class n{}return n.__NG_ELEMENT_ID__=pV,n})();function pV(n){return function gV(n,e,t){if(Ed(n)&&!t){const r=wr(n.index,e);return new kc(r,r)}return 47&n.type?new kc(e[16],e):null}(wn(),J(),16==(16&n))}class TE{constructor(){}supports(e){return Vc(e)}create(e){return new xV(e)}}const MV=(n,e)=>e;class xV{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||MV}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<NE(r,i,o)?t:r,a=NE(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const c=a-i,u=l-i;if(c!=u){for(let h=0;h<c;h++){const f=h<o.length?o[h]:o[h]=0,p=f+h;u<=p&&p<c&&(o[h]=f+1)}o[s.previousIndex]=u-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Vc(e))throw new se(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),r=!0),t=t._next}else i=0,function X2(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[vs()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new wV(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new AE),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new AE),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class wV{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bV{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class AE{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new bV,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function NE(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function IE(){return new Ph([new TE])}let Ph=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||IE()),deps:[[n,new Ec,new Sc]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new se(901,!1)}}return n.\u0275prov=Ze({token:n,providedIn:"root",factory:IE}),n})();const TV=gE(null,"core",[]);let AV=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(De(Eh))},n.\u0275mod=_i({type:n}),n.\u0275inj=Yr({}),n})();function ro(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Ih=null;function Di(){return Ih}const kn=new Pe("DocumentToken");let Jy=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ze({token:n,factory:function(){return function RV(){return De(OE)}()},providedIn:"platform"}),n})();const OV=new Pe("Location Initialized");let OE=(()=>{class n extends Jy{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Di().getBaseHref(this._doc)}onPopState(t){const r=Di().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Di().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){FE()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){FE()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(De(kn))},n.\u0275prov=Ze({token:n,factory:function(){return function FV(){return new OE(De(kn))}()},providedIn:"platform"}),n})();function FE(){return!!window.history.pushState}function Ky(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function LE(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function io(n){return n&&"?"!==n[0]?"?"+n:n}let bs=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ze({token:n,factory:function(){return yt(BE)},providedIn:"root"}),n})();const kE=new Pe("appBaseHref");let BE=(()=>{class n extends bs{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??yt(kn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ky(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+io(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+io(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+io(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(De(Jy),De(kE,8))},n.\u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),LV=(()=>{class n extends bs{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ky(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+io(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+io(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(De(Jy),De(kE,8))},n.\u0275prov=Ze({token:n,factory:n.\u0275fac}),n})(),Qy=(()=>{class n{constructor(t){this._subject=new Ke,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=LE(VE(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+io(r))}normalize(t){return n.stripTrailingSlash(function BV(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,VE(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+io(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+io(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=io,n.joinWithSlash=Ky,n.stripTrailingSlash=LE,n.\u0275fac=function(t){return new(t||n)(De(bs))},n.\u0275prov=Ze({token:n,factory:function(){return function kV(){return new Qy(De(bs))}()},providedIn:"root"}),n})();function VE(n){return n.replace(/\/index.html$/,"")}class CG{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let YE=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new CG(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),JE(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{JE(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(te(oi),te(eo),te(Ph))},n.\u0275dir=_e({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function JE(n,e){n.context.$implicit=e.item}let Hh=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new EG,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){KE("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){KE("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(te(oi),te(eo))},n.\u0275dir=_e({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class EG{constructor(){this.$implicit=null,this.ngIf=null}}function KE(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Lt(e)}'.`)}let eD=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:o,ngTemplateOutletInjector:s}=this;this._viewRef=r.createEmbeddedView(i,o,s?{injector:s}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(te(oi))},n.\u0275dir=_e({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Rr]}),n})(),KG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_i({type:n}),n.\u0275inj=Yr({}),n})();let nU=(()=>{class n{}return n.\u0275prov=Ze({token:n,providedIn:"root",factory:()=>new rU(De(kn),window)}),n})();class rU{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function iU(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=rD(this.window.history)||rD(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function rD(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class gv extends class bU extends class IV{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function PV(n){Ih||(Ih=n)}(new gv)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function CU(){return iu=iu||document.querySelector("base"),iu?iu.getAttribute("href"):null}();return null==t?null:function SU(n){jh=jh||document.createElement("a"),jh.setAttribute("href",n);const e=jh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){iu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function xG(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let jh,iu=null;const aD=new Pe("TRANSITION_ID"),DU=[{provide:bh,useFactory:function EU(n,e,t){return()=>{t.get(Ch).donePromise.then(()=>{const r=Di(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[aD,kn,Lr],multi:!0}];let AU=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ze({token:n,factory:n.\u0275fac}),n})();const Wh=new Pe("EventManagerPlugins");let $h=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(t))return this._eventNameToPlugin.set(t,s),s}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(De(Wh),De(Kt))},n.\u0275prov=Ze({token:n,factory:n.\u0275fac}),n})();class lD{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Di().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let cD=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ze({token:n,factory:n.\u0275fac}),n})(),ou=(()=>{class n extends cD{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(uD),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(uD))}}return n.\u0275fac=function(t){return new(t||n)(De(kn))},n.\u0275prov=Ze({token:n,factory:n.\u0275fac}),n})();function uD(n){Di().remove(n)}const mv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yv=/%COMP%/g;function qh(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?qh(n,i,t):(i=i.replace(yv,n),t.push(i))}return t}function fD(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let vv=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new _v(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case vi.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new FU(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case vi.ShadowDom:return new LU(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=qh(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(De($h),De(ou),De(Qc))},n.\u0275prov=Ze({token:n,factory:n.\u0275fac}),n})();class _v{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(mv[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(gD(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(gD(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=mv[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=mv[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(fr.DashCase|fr.Important)?e.style.setProperty(t,r,i&fr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&fr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,fD(r)):this.eventManager.addEventListener(e,t,fD(r))}}function gD(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class FU extends _v{constructor(e,t,r,i){super(e),this.component=r;const o=qh(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function IU(n){return"_ngcontent-%COMP%".replace(yv,n)}(i+"-"+r.id),this.hostAttr=function RU(n){return"_nghost-%COMP%".replace(yv,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class LU extends _v{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=qh(i.id,i.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let kU=(()=>{class n extends lD{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(De(kn))},n.\u0275prov=Ze({token:n,factory:n.\u0275fac}),n})();const mD=["alt","control","meta","shift"],BU={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},VU={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let GU=(()=>{class n extends lD{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Di().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),mD.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),s+=c+".")}),s+=o,0!=r.length||0===o.length)return null;const l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,r){let i=BU[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),mD.forEach(s=>{s!==i&&(0,VU[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(De(kn))},n.\u0275prov=Ze({token:n,factory:n.\u0275fac}),n})();const jU=gE(TV,"browser",[{provide:oE,useValue:"browser"},{provide:iE,useValue:function UU(){gv.makeCurrent()},multi:!0},{provide:kn,useFactory:function zU(){return function jO(n){Qg=n}(document),document},deps:[]}]),_D=new Pe(""),MD=[{provide:Sh,useClass:class TU{addToWindow(e){kt.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},kt.getAllAngularTestabilities=()=>e.getAllTestabilities(),kt.getAllAngularRootElements=()=>e.getAllRootElements(),kt.frameworkStabilizers||(kt.frameworkStabilizers=[]),kt.frameworkStabilizers.push(r=>{const i=kt.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(l){s=s||l,o--,0==o&&r(s)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Di().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:dE,useClass:Hy,deps:[Kt,zy,Sh]},{provide:Hy,useClass:Hy,deps:[Kt,zy,Sh]}],xD=[{provide:um,useValue:"root"},{provide:Na,useFactory:function HU(){return new Na},deps:[]},{provide:Wh,useClass:kU,multi:!0,deps:[kn,Kt,oE]},{provide:Wh,useClass:GU,multi:!0,deps:[kn]},{provide:vv,useClass:vv,deps:[$h,ou,Qc]},{provide:pw,useExisting:vv},{provide:cD,useExisting:ou},{provide:ou,useClass:ou,deps:[kn]},{provide:$h,useClass:$h,deps:[Wh,Kt]},{provide:class oU{},useClass:AU,deps:[]},[]];let WU=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Qc,useValue:t.appId},{provide:aD,useExisting:Qc},DU]}}}return n.\u0275fac=function(t){return new(t||n)(De(_D,12))},n.\u0275mod=_i({type:n}),n.\u0275inj=Yr({providers:[...xD,...MD],imports:[KG,AV]}),n})(),wD=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(De(kn))},n.\u0275prov=Ze({token:n,factory:function(t){let r=null;return r=t?new t:function qU(){return new wD(De(kn))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;const{isArray:tH}=Array,{getPrototypeOf:nH,prototype:rH,keys:iH}=Object;function SD(n){if(1===n.length){const e=n[0];if(tH(e))return{args:e,keys:null};if(function oH(n){return n&&"object"==typeof n&&nH(n)===rH}(e)){const t=iH(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:sH}=Array;function wv(n){return nt(e=>function aH(n,e){return sH(e)?n(...e):n(e)}(n,e))}function ED(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let TD=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(te(Xi),te(er))},n.\u0275dir=_e({type:n}),n})(),Cs=(()=>{class n extends TD{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=_e({type:n,features:[Oe]}),n})();const Ti=new Pe("NgValueAccessor");let y1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_i({type:n}),n.\u0275inj=Yr({}),n})();const $H={provide:Ti,useExisting:Gt(()=>Gv),multi:!0};function C1(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Gv=(()=>{class n extends Cs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=C1(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function qH(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=_e({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&Pn("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Rt([$H]),Oe]}),n})(),S1=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(C1(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(te(er),te(Xi),te(Gv,9))},n.\u0275dir=_e({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const XH={provide:Ti,useExisting:Gt(()=>Uv),multi:!0};function E1(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Uv=(()=>{class n extends Cs{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],o=r.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const c=this._getOptionValue(s[a].value);i.push(c)}}else{const s=r.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const c=this._getOptionValue(l.value);i.push(c)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function ZH(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=_e({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&Pn("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Rt([XH]),Oe]}),n})(),D1=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(E1(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(E1(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(te(er),te(Xi),te(Uv,9))},n.\u0275dir=_e({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),iz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_i({type:n}),n.\u0275inj=Yr({imports:[y1]}),n})(),oz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_i({type:n}),n.\u0275inj=Yr({imports:[iz]}),n})();function Te(...n){return ln(n,sc(n))}class Gr extends yr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const rf=rc(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function zv(...n){const e=sc(n),t=gg(n),{args:r,keys:i}=SD(n);if(0===r.length)return ln([],e);const o=new qt(function az(n,e,t=yi){return r=>{k1(e,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let l=0;l<i;l++)k1(e,()=>{const c=ln(n[l],e);let u=!1;c.subscribe(Ot(r,d=>{o[l]=d,u||(u=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>ED(i,s):yi));return t?o.pipe(wv(t)):o}function k1(n,e,t){n?Gi(t,n,e):e()}function jv(...n){return function lz(){return ca(1)}()(ln(n,sc(n)))}function B1(n){return new qt(e=>{Zn(n()).subscribe(e)})}function uu(n,e){const t=ft(n)?n:()=>n,r=i=>i.error(t());return new qt(e?i=>e.schedule(r,0,i):r)}function Wv(){return Xt((n,e)=>{let t=null;n._refCount++;const r=Ot(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class V1 extends qt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,S0(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new mr;const t=this.getSubject();e.add(this.source.subscribe(Ot(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=mr.EMPTY)}return e}refCount(){return Wv()(this)}}function ci(n,e){return Xt((t,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();t.subscribe(Ot(r,l=>{i?.unsubscribe();let c=0;const u=o++;Zn(n(l,u)).subscribe(i=Ot(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Qa(n){return n<=0?()=>Ui:Xt((e,t)=>{let r=0;e.subscribe(Ot(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function sf(...n){const e=sc(n);return Xt((t,r)=>{(e?jv(n,t,e):jv(n,t)).subscribe(r)})}function ui(n,e){return Xt((t,r)=>{let i=0;t.subscribe(Ot(r,o=>n.call(e,o,i++)&&r.next(o)))})}function af(n){return Xt((e,t)=>{let r=!1;e.subscribe(Ot(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function G1(n=cz){return Xt((e,t)=>{let r=!1;e.subscribe(Ot(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function cz(){return new rf}function Bo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ui((i,o)=>n(i,o,r)):yi,Qa(1),t?af(e):G1(()=>new rf))}function Vo(n,e){return ft(e)?An(n,e,1):An(n,1)}function Yt(n,e,t){const r=ft(n)||e||t?{next:n,error:e,complete:t}:n;return r?Xt((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Ot(o,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),o.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),o.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),o.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):yi}function so(n){return Xt((e,t)=>{let o,r=null,i=!1;r=e.subscribe(Ot(t,void 0,void 0,s=>{o=Zn(n(s,so(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function uz(n,e,t,r,i){return(o,s)=>{let a=t,l=e,c=0;o.subscribe(Ot(s,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function U1(n,e){return Xt(uz(n,e,arguments.length>=2,!0))}function $v(n){return n<=0?()=>Ui:Xt((e,t)=>{let r=[];e.subscribe(Ot(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function H1(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ui((i,o)=>n(i,o,r)):yi,$v(1),t?af(e):G1(()=>new rf))}function qv(n){return Xt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const ot="primary",du=Symbol("RouteTitle");class fz{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function el(n){return new fz(n)}function pz(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ai(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!z1(n[i],e[i]))return!1;return!0}function z1(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function j1(n){return Array.prototype.concat.apply([],n)}function W1(n){return n.length>0?n[n.length-1]:null}function Bn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Go(n){return hy(n)?n:Uc(n)?ln(Promise.resolve(n)):Te(n)}const yz={exact:function X1(n,e,t){if(!Ds(n.segments,e.segments)||!lf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!X1(n.children[r],e.children[r],t))return!1;return!0},subset:Z1},$1={exact:function vz(n,e){return Ai(n,e)},subset:function _z(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>z1(n[t],e[t]))},ignored:()=>!0};function q1(n,e,t){return yz[t.paths](n.root,e.root,t.matrixParams)&&$1[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Z1(n,e,t){return Y1(n,e,e.segments,t)}function Y1(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ds(i,t)||e.hasChildren()||!lf(i,t,r))}if(n.segments.length===t.length){if(!Ds(n.segments,t)||!lf(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Z1(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Ds(n.segments,i)&&lf(n.segments,i,r)&&n.children[ot])&&Y1(n.children[ot],e,o,r)}}function lf(n,e,t){return e.every((r,i)=>$1[t](n[i].parameters,r.parameters))}class Es{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=el(this.queryParams)),this._queryParamMap}toString(){return wz.serialize(this)}}class lt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Bn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cf(this)}}class hu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=el(this.parameters)),this._parameterMap}toString(){return eT(this)}}function Ds(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let J1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ze({token:n,factory:function(){return new Zv},providedIn:"root"}),n})();class Zv{parse(e){const t=new Pz(e);return new Es(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${fu(e.root,!0)}`,r=function Sz(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${uf(t)}=${uf(i)}`).join("&"):`${uf(t)}=${uf(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function bz(n){return encodeURI(n)}(e.fragment)}`:""}`}}const wz=new Zv;function cf(n){return n.segments.map(e=>eT(e)).join("/")}function fu(n,e){if(!n.hasChildren())return cf(n);if(e){const t=n.children[ot]?fu(n.children[ot],!1):"",r=[];return Bn(n.children,(i,o)=>{o!==ot&&r.push(`${o}:${fu(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function xz(n,e){let t=[];return Bn(n.children,(r,i)=>{i===ot&&(t=t.concat(e(r,i)))}),Bn(n.children,(r,i)=>{i!==ot&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===ot?[fu(n.children[ot],!1)]:[`${i}:${fu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ot]?`${cf(n)}/${t[0]}`:`${cf(n)}/(${t.join("//")})`}}function K1(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function uf(n){return K1(n).replace(/%3B/gi,";")}function Yv(n){return K1(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function df(n){return decodeURIComponent(n)}function Q1(n){return df(n.replace(/\+/g,"%20"))}function eT(n){return`${Yv(n.path)}${function Cz(n){return Object.keys(n).map(e=>`;${Yv(e)}=${Yv(n[e])}`).join("")}(n.parameters)}`}const Ez=/^[^\/()?;=#]+/;function hf(n){const e=n.match(Ez);return e?e[0]:""}const Dz=/^[^=?&#]+/,Az=/^[^&#]+/;class Pz{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new lt([],{}):new lt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ot]=new lt(e,t)),r}parseSegment(){const e=hf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new se(4009,!1);return this.capture(e),new hu(df(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=hf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=hf(this.remaining);i&&(r=i,this.capture(r))}e[df(t)]=df(r)}parseQueryParam(e){const t=function Tz(n){const e=n.match(Dz);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function Nz(n){const e=n.match(Az);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=Q1(t),o=Q1(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=hf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new se(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ot);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[ot]:new lt([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new se(4011,!1)}}function Jv(n){return n.segments.length>0?new lt([],{[ot]:n}):n}function ff(n){const e={};for(const r of Object.keys(n.children)){const o=ff(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function Iz(n){if(1===n.numberOfChildren&&n.children[ot]){const e=n.children[ot];return new lt(n.segments.concat(e.segments),e.children)}return n}(new lt(n.segments,e))}function Ts(n){return n instanceof Es}function Fz(n,e,t,r,i){if(0===t.length)return tl(e.root,e.root,e.root,r,i);const o=function rT(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new nT(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Bn(o.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new nT(t,e,r)}(t);return o.toRoot()?tl(e.root,e.root,new lt([],{}),r,i):function s(l){const c=function kz(n,e,t,r){if(n.isAbsolute)return new nl(e.root,!0,0);if(-1===r)return new nl(t,t===e.root,0);return function iT(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new se(4005,!1);i=r.segments.length}return new nl(r,!1,i-o)}(t,r+(pu(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,l),u=c.processChildren?mu(c.segmentGroup,c.index,o.commands):Qv(c.segmentGroup,c.index,o.commands);return tl(e.root,c.segmentGroup,u,r,i)}(n.snapshot?._lastPathIndex)}function pu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function gu(n){return"object"==typeof n&&null!=n&&n.outlets}function tl(n,e,t,r,i){let s,o={};r&&Bn(r,(l,c)=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=n===e?t:tT(n,e,t);const a=Jv(ff(s));return new Es(a,o,i)}function tT(n,e,t){const r={};return Bn(n.children,(i,o)=>{r[o]=i===e?t:tT(i,e,t)}),new lt(n.segments,r)}class nT{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&pu(r[0]))throw new se(4003,!1);const i=r.find(gu);if(i&&i!==W1(r))throw new se(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class nl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Qv(n,e,t){if(n||(n=new lt([],{})),0===n.segments.length&&n.hasChildren())return mu(n,e,t);const r=function Vz(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const s=n.segments[i],a=t[r];if(gu(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!sT(l,c,s))return o;r+=2}else{if(!sT(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new lt(n.segments.slice(0,r.pathIndex),{});return o.children[ot]=new lt(n.segments.slice(r.pathIndex),n.children),mu(o,0,i)}return r.match&&0===i.length?new lt(n.segments,{}):r.match&&!n.hasChildren()?e_(n,e,t):r.match?mu(n,0,i):e_(n,e,t)}function mu(n,e,t){if(0===t.length)return new lt(n.segments,{});{const r=function Bz(n){return gu(n[0])?n[0].outlets:{[ot]:n}}(t),i={};return Bn(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=Qv(n.children[s],e,o))}),Bn(n.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new lt(n.segments,i)}}function e_(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(gu(o)){const l=Gz(o.outlets);return new lt(r,l)}if(0===i&&pu(t[0])){r.push(new hu(n.segments[e].path,oT(t[0]))),i++;continue}const s=gu(o)?o.outlets[ot]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&pu(a)?(r.push(new hu(s,oT(a))),i+=2):(r.push(new hu(s,{})),i++)}return new lt(r,{})}function Gz(n){const e={};return Bn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=e_(new lt([],{}),0,t))}),e}function oT(n){const e={};return Bn(n,(t,r)=>e[r]=`${t}`),e}function sT(n,e,t){return n==t.path&&Ai(e,t.parameters)}class ao{constructor(e,t){this.id=e,this.url=t}}class t_ extends ao{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class As extends ao{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class pf extends ao{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class aT extends ao{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Uz extends ao{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hz extends ao{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zz extends ao{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class jz extends ao{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wz extends ao{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $z{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class qz{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Xz{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zz{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yz{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jz{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lT{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class cT{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=n_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=n_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=r_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return r_(e,this._root).map(t=>t.value)}}function n_(n,e){if(n===e.value)return e;for(const t of e.children){const r=n_(n,t);if(r)return r}return null}function r_(n,e){if(n===e.value)return[e];for(const t of e.children){const r=r_(n,t);if(r.length)return r.unshift(e),r}return[]}class lo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function rl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class uT extends cT{constructor(e,t){super(e),this.snapshot=t,i_(this,e)}toString(){return this.snapshot.toString()}}function dT(n,e){const t=function Qz(n,e){const s=new gf([],{},{},"",{},ot,e,null,n.root,-1,{});return new fT("",new lo(s,[]))}(n,e),r=new Gr([new hu("",{})]),i=new Gr({}),o=new Gr({}),s=new Gr({}),a=new Gr(""),l=new Ns(r,i,s,a,o,ot,e,t.root);return l.snapshot=t.root,new uT(new lo(l,[]),t)}class Ns{constructor(e,t,r,i,o,s,a,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.pipe(nt(c=>c[du]))??Te(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(nt(e=>el(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(nt(e=>el(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function hT(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function e4(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class gf{constructor(e,t,r,i,o,s,a,l,c,u,d,h){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.[du],this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._correctedLastPathIndex=h??u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=el(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=el(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fT extends cT{constructor(e,t){super(t),this.url=e,i_(this,t)}toString(){return pT(this._root)}}function i_(n,e){e.value._routerState=n,e.children.forEach(t=>i_(n,t))}function pT(n){const e=n.children.length>0?` { ${n.children.map(pT).join(", ")} } `:"";return`${n.value}${e}`}function o_(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ai(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ai(e.params,t.params)||n.params.next(t.params),function gz(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ai(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ai(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function s_(n,e){const t=Ai(n.params,e.params)&&function Mz(n,e){return Ds(n,e)&&n.every((t,r)=>Ai(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||s_(n.parent,e.parent))}function yu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function n4(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return yu(n,r,i);return yu(n,r)})}(n,e,t);return new lo(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>yu(n,a)),s}}const r=function r4(n){return new Ns(new Gr(n.url),new Gr(n.params),new Gr(n.queryParams),new Gr(n.fragment),new Gr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>yu(n,o));return new lo(r,i)}}const a_="ngNavigationCancelingError";function gT(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ts(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=mT(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function mT(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[a_]=!0,r.cancellationCode=e,t&&(r.url=t),r}function yT(n){return vT(n)&&Ts(n.url)}function vT(n){return n&&n[a_]}class i4{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new vu,this.attachRef=null}}let vu=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new i4,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mf=!1;let _T=(()=>{class n{constructor(t,r,i,o,s){this.parentContexts=t,this.location=r,this.changeDetector=o,this.environmentInjector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ke,this.deactivateEvents=new Ke,this.attachEvents=new Ke,this.detachEvents=new Ke,this.name=i||ot,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new se(4012,mf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new se(4012,mf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new se(4012,mf);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new se(4013,mf);this._activatedRoute=t;const i=this.location,s=t._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new o4(t,a,i.injector);if(r&&function s4(n){return!!n.resolveComponentFactory}(r)){const c=r.resolveComponentFactory(s);this.activated=i.createComponent(c,i.length,l)}else this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(te(vu),te(oi),function vc(n){return function fO(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(vx(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===e)return t[i+1];i+=2}}}return null}(wn(),n)}("name"),te(Th),te(Ao))},n.\u0275dir=_e({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class o4{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ns?this.route:e===vu?this.childContexts:this.parent.get(e,t)}}let l_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ln({type:n,selectors:[["ng-component"]],standalone:!0,features:[Za],decls:1,vars:0,template:function(t,r){1&t&&ze(0,"router-outlet")},dependencies:[_T],encapsulation:2}),n})();function MT(n,e){return n.providers&&!n._injector&&(n._injector=yh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function u_(n){const e=n.children&&n.children.map(u_),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ot&&(t.component=l_),t}function Ur(n){return n.outlet||ot}function xT(n,e){const t=n.filter(r=>Ur(r)===e);return t.push(...n.filter(r=>Ur(r)!==e)),t}function _u(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class d4{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),o_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=rl(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Bn(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=rl(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=rl(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=rl(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Jz(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Zz(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(o_(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),o_(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=_u(i.snapshot),l=a?.get(Ic)??null;s.attachRef=null,s.route=i,s.resolver=l,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class wT{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class yf{constructor(e,t){this.component=e,this.route=t}}function h4(n,e,t){const r=n._root;return Mu(r,e?e._root:null,t,[r.value])}function il(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function mR(n){return null!==Md(n)}(n)?e.get(n):n:r}function Mu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=rl(e);return n.children.forEach(s=>{(function p4(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function g4(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ds(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ds(n.url,e.url)||!Ai(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!s_(n,e)||!Ai(n.queryParams,e.queryParams);default:return!s_(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new wT(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Mu(n,e,o.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new yf(a.outlet.component,s))}else s&&xu(e,a,i),i.canActivateChecks.push(new wT(r)),Mu(n,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Bn(o,(s,a)=>xu(s,t.getContext(a),i)),i}function xu(n,e,t){const r=rl(n),i=n.value;Bn(r,(o,s)=>{xu(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new yf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function wu(n){return"function"==typeof n}function d_(n){return n instanceof rf||"EmptyError"===n?.name}const vf=Symbol("INITIAL_VALUE");function ol(){return ci(n=>zv(n.map(e=>e.pipe(Qa(1),sf(vf)))).pipe(nt(e=>{for(const t of e)if(!0!==t){if(t===vf)return vf;if(!1===t||t instanceof Es)return t}return!0}),ui(e=>e!==vf),Qa(1)))}function bT(n){return dg(Yt(e=>{if(Ts(e))throw gT(0,e)}),nt(e=>!0===e))}const h_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function CT(n,e,t,r,i){const o=f_(n,e,t);return o.matched?function I4(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Te(i.map(s=>{const a=il(s,n);return Go(function x4(n){return n&&wu(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(ol(),bT()):Te(!0)}(r=MT(e,r),e,t).pipe(nt(s=>!0===s?o:{...h_})):Te(o)}function f_(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...h_}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||pz)(t,n,e);if(!i)return{...h_};const o={};Bn(i.posParams,(a,l)=>{o[l]=a.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function _f(n,e,t,r,i="corrected"){if(t.length>0&&function F4(n,e,t){return t.some(r=>Mf(n,e,r)&&Ur(r)!==ot)}(n,t,r)){const s=new lt(e,function O4(n,e,t,r){const i={};i[ot]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&Ur(o)!==ot){const s=new lt([],{});s._sourceSegment=n,s._segmentIndexShift=e.length,i[Ur(o)]=s}return i}(n,e,r,new lt(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function L4(n,e,t){return t.some(r=>Mf(n,e,r))}(n,t,r)){const s=new lt(n.segments,function R4(n,e,t,r,i,o){const s={};for(const a of r)if(Mf(n,t,a)&&!i[Ur(a)]){const l=new lt([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===o?n.segments.length:e.length,s[Ur(a)]=l}return{...i,...s}}(n,e,t,r,n.children,i));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const o=new lt(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function Mf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ST(n,e,t,r){return!!(Ur(n)===r||r!==ot&&Mf(e,t,n))&&("**"===n.path||f_(e,n,t).matched)}function ET(n,e,t){return 0===e.length&&!n.children[t]}const xf=!1;class wf{constructor(e){this.segmentGroup=e||null}}class DT{constructor(e){this.urlTree=e}}function bu(n){return uu(new wf(n))}function TT(n){return uu(new DT(n))}class G4{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=_f(this.urlTree.root,[],[],this.config).segmentGroup,t=new lt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,ot).pipe(nt(o=>this.createUrlTree(ff(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(so(o=>{if(o instanceof DT)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof wf?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,ot).pipe(nt(i=>this.createUrlTree(ff(i),e.queryParams,e.fragment))).pipe(so(i=>{throw i instanceof wf?this.noMatchError(i):i}))}noMatchError(e){return new se(4002,xf)}createUrlTree(e,t,r){const i=Jv(e);return new Es(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(nt(o=>new lt([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return ln(i).pipe(Vo(o=>{const s=r.children[o],a=xT(t,o);return this.expandSegmentGroup(e,a,s,o).pipe(nt(l=>({segment:l,outlet:o})))}),U1((o,s)=>(o[s.outlet]=s.segment,o),{}),H1())}expandSegment(e,t,r,i,o,s){return ln(r).pipe(Vo(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,o,s).pipe(so(c=>{if(c instanceof wf)return Te(null);throw c}))),Bo(a=>!!a),so((a,l)=>{if(d_(a))return ET(t,i,o)?Te(new lt([],{})):bu(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,o,s,a){return ST(i,t,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s):bu(t):bu(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?TT(o):this.lineralizeSegments(r,o).pipe(An(s=>{const a=new lt(s,{});return this.expandSegment(e,a,t,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=f_(t,i,o);if(!a)return bu(t);const d=this.applyRedirectCommands(l,i.redirectTo,u);return i.redirectTo.startsWith("/")?TT(d):this.lineralizeSegments(i,d).pipe(An(h=>this.expandSegment(e,t,r,h.concat(c),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){return"**"===r.path?(e=MT(r,e),r.loadChildren?(r._loadedRoutes?Te({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(nt(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new lt(i,{})))):Te(new lt(i,{}))):CT(t,r,i,e).pipe(ci(({matched:s,consumedSegments:a,remainingSegments:l})=>s?this.getChildConfig(e=r._injector??e,r,i).pipe(An(u=>{const d=u.injector??e,h=u.routes,{segmentGroup:f,slicedSegments:p}=_f(t,a,l,h),g=new lt(f.segments,f.children);if(0===p.length&&g.hasChildren())return this.expandChildren(d,h,g).pipe(nt(_=>new lt(a,_)));if(0===h.length&&0===p.length)return Te(new lt(a,{}));const m=Ur(r)===o;return this.expandSegment(d,g,h,p,m?ot:o,!0).pipe(nt(v=>new lt(a.concat(v.segments),v.children)))})):bu(t)))}getChildConfig(e,t,r){return t.children?Te({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Te({routes:t._loadedRoutes,injector:t._loadedInjector}):function P4(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Te(!0):Te(i.map(s=>{const a=il(s,n);return Go(function y4(n){return n&&wu(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(ol(),bT())}(e,t,r).pipe(An(i=>i?this.configLoader.loadChildren(e,t).pipe(Yt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function B4(n){return uu(mT(xf,3))}())):Te({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Te(r);if(i.numberOfChildren>1||!i.children[ot])return uu(new se(4e3,xf));i=i.children[ot]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Es(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Bn(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let s={};return Bn(t.children,(a,l)=>{s[l]=this.createSegmentGroup(e,a,r,i)}),new lt(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new se(4001,xf);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class H4{}class W4{constructor(e,t,r,i,o,s,a,l){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=a,this.urlSerializer=l}recognize(){const e=_f(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ot).pipe(nt(t=>{if(null===t)return null;const r=new gf([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ot,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new lo(r,t),o=new fT(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,r=hT(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return ln(Object.keys(r.children)).pipe(Vo(i=>{const o=r.children[i],s=xT(t,i);return this.processSegmentGroup(e,s,o,i)}),U1((i,o)=>i&&o?(i.push(...o),i):null),function dz(n,e=!1){return Xt((t,r)=>{let i=0;t.subscribe(Ot(r,o=>{const s=n(o,i++);(s||e)&&r.next(o),!s&&r.complete()}))})}(i=>null!==i),af(null),H1(),nt(i=>{if(null===i)return null;const o=AT(i);return function $4(n){n.sort((e,t)=>e.value.outlet===ot?-1:t.value.outlet===ot?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,r,i,o){return ln(t).pipe(Vo(s=>this.processSegmentAgainstRoute(s._injector??e,s,r,i,o)),Bo(s=>!!s),so(s=>{if(d_(s))return ET(r,i,o)?Te([]):Te(null);throw s}))}processSegmentAgainstRoute(e,t,r,i,o){if(t.redirectTo||!ST(t,r,i,o))return Te(null);let s;if("**"===t.path){const a=i.length>0?W1(i).parameters:{},l=PT(r)+i.length;s=Te({snapshot:new gf(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,RT(t),Ur(t),t.component??t._loadedComponent??null,t,NT(r),l,OT(t),l),consumedSegments:[],remainingSegments:[]})}else s=CT(r,t,i,e).pipe(nt(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=PT(r)+l.length;return{snapshot:new gf(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,RT(t),Ur(t),t.component??t._loadedComponent??null,t,NT(r),d,OT(t),d),consumedSegments:l,remainingSegments:c}}));return s.pipe(ci(a=>{if(null===a)return Te(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;e=t._injector??e;const d=t._loadedInjector??e,h=function q4(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:p}=_f(r,c,u,h.filter(m=>void 0===m.redirectTo),this.relativeLinkResolution);if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(nt(m=>null===m?null:[new lo(l,m)]));if(0===h.length&&0===p.length)return Te([new lo(l,[])]);const g=Ur(t)===o;return this.processSegment(d,h,f,p,g?ot:o).pipe(nt(m=>null===m?null:[new lo(l,m)]))}))}}function X4(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function AT(n){const e=[],t=new Set;for(const r of n){if(!X4(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=AT(r.children);e.push(new lo(r.value,i))}return e.filter(r=>!t.has(r))}function NT(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function PT(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function RT(n){return n.data||{}}function OT(n){return n.resolve||{}}function FT(n){return"string"==typeof n.title||null===n.title}function p_(n){return ci(e=>{const t=n(e);return t?ln(t).pipe(nt(()=>e)):Te(e)})}let LT=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ot);return r}getResolvedTitleForRoute(t){return t.data[du]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ze({token:n,factory:function(){return yt(kT)},providedIn:"root"}),n})(),kT=(()=>{class n extends LT{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(De(wD))},n.\u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class n5{}class i5 extends class r5{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Cf=new Pe("",{providedIn:"root",factory:()=>({})}),g_=new Pe("ROUTES");let m_=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Te(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Go(t.loadComponent()).pipe(Yt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),qv(()=>{this.componentLoaders.delete(t)})),i=new V1(r,()=>new yr).pipe(Wv());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Te({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(nt(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=j1(l.get(g_,[],Re.Self|Re.Optional)));return{routes:c.map(u_),injector:l}}),qv(()=>{this.childrenLoaders.delete(r)})),s=new V1(o,()=>new yr).pipe(Wv());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(t){return Go(t()).pipe(An(r=>r instanceof mS||Array.isArray(r)?Te(r):ln(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(De(Lr),De(By))},n.\u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class s5{}class a5{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function l5(n){throw n}function c5(n,e,t){return e.parse("/")}const u5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},d5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function VT(){const n=yt(J1),e=yt(vu),t=yt(Qy),r=yt(Lr),i=yt(By),o=yt(g_,{optional:!0})??[],s=yt(Cf,{optional:!0})??{},a=yt(kT),l=yt(LT,{optional:!0}),c=yt(s5,{optional:!0}),u=yt(n5,{optional:!0}),d=new Vn(null,n,e,t,r,i,j1(o));return c&&(d.urlHandlingStrategy=c),u&&(d.routeReuseStrategy=u),d.titleStrategy=l??a,function h5(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(s,d),d}let Vn=(()=>{class n{constructor(t,r,i,o,s,a,l){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new yr,this.errorHandler=l5,this.malformedUriErrorHandler=c5,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Te(void 0),this.urlHandlingStrategy=new a5,this.routeReuseStrategy=new i5,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=s.get(m_),this.configLoader.onLoadEndListener=h=>this.triggerEvent(new qz(h)),this.configLoader.onLoadStartListener=h=>this.triggerEvent(new $z(h)),this.ngModule=s.get(xs),this.console=s.get(XB);const d=s.get(Kt);this.isNgZoneEnabled=d instanceof Kt&&Kt.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function mz(){return new Es(new lt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=dT(this.currentUrlTree,this.rootComponentType),this.transitions=new Gr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ui(i=>0!==i.id),nt(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ci(i=>{let o=!1,s=!1;return Te(i).pipe(Yt(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ci(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return GT(a.source)&&(this.browserUrlTree=a.extractedUrl),Te(a).pipe(ci(d=>{const h=this.transitions.getValue();return r.next(new t_(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?Ui:Promise.resolve(d)}),function U4(n,e,t,r){return ci(i=>function V4(n,e,t,r,i){return new G4(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(nt(o=>({...i,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Yt(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},i.urlAfterRedirects=d.urlAfterRedirects}),function Y4(n,e,t,r,i,o){return An(s=>function j4(n,e,t,r,i,o,s="emptyOnly",a="legacy"){return new W4(n,e,t,r,i,s,a,o).recognize().pipe(ci(l=>null===l?function z4(n){return new qt(e=>e.error(n))}(new H4):Te(l)))}(n,e,t,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i,o).pipe(nt(a=>({...s,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Yt(d=>{if(i.targetSnapshot=d.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new Uz(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);r.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:p,restoredState:g,extras:m}=a,y=new t_(h,this.serializeUrl(f),p,g);r.next(y);const v=dT(f,this.rootComponentType).snapshot;return Te(i={...a,targetSnapshot:v,urlAfterRedirects:f,extras:{...m,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),Ui}),Yt(a=>{const l=new Hz(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),nt(a=>i={...a,guards:h4(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function b4(n,e){return An(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?Te({...t,guardsResult:!0}):function C4(n,e,t,r){return ln(n).pipe(An(i=>function N4(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Te(o.map(a=>{const l=_u(e)??i,c=il(a,l);return Go(function M4(n){return n&&wu(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):l.runInContext(()=>c(n,e,t,r))).pipe(Bo())})).pipe(ol()):Te(!0)}(i.component,i.route,t,e,r)),Bo(i=>!0!==i,!0))}(s,r,i,n).pipe(An(a=>a&&function m4(n){return"boolean"==typeof n}(a)?function S4(n,e,t,r){return ln(e).pipe(Vo(i=>jv(function D4(n,e){return null!==n&&e&&e(new Xz(n)),Te(!0)}(i.route.parent,r),function E4(n,e){return null!==n&&e&&e(new Yz(n)),Te(!0)}(i.route,r),function A4(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function f4(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>B1(()=>Te(s.guards.map(l=>{const c=_u(s.node)??t,u=il(l,c);return Go(function _4(n){return n&&wu(n.canActivateChild)}(u)?u.canActivateChild(r,n):c.runInContext(()=>u(r,n))).pipe(Bo())})).pipe(ol())));return Te(o).pipe(ol())}(n,i.path,t),function T4(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Te(!0);const i=r.map(o=>B1(()=>{const s=_u(e)??t,a=il(o,s);return Go(function v4(n){return n&&wu(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(Bo())}));return Te(i).pipe(ol())}(n,i.route,t))),Bo(i=>!0!==i,!0))}(r,o,n,e):Te(a)),nt(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Yt(a=>{if(i.guardsResult=a.guardsResult,Ts(a.guardsResult))throw gT(0,a.guardsResult);const l=new zz(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),ui(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),p_(a=>{if(a.guards.canActivateChecks.length)return Te(a).pipe(Yt(l=>{const c=new jz(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),ci(l=>{let c=!1;return Te(l).pipe(function J4(n,e){return An(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Te(t);let o=0;return ln(i).pipe(Vo(s=>function K4(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!FT(i)&&(o[du]=i.title),function Q4(n,e,t,r){const i=function e5(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Te({});const o={};return ln(i).pipe(An(s=>function t5(n,e,t,r){const i=_u(e)??r,o=il(n,i);return Go(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[s],e,t,r).pipe(Bo(),Yt(a=>{o[s]=a}))),$v(1),function hz(n){return nt(()=>n)}(o),so(s=>d_(s)?Ui:uu(s)))}(o,n,e,r).pipe(nt(s=>(n._resolvedData=s,n.data=hT(n,t).resolve,i&&FT(i)&&(n.data[du]=i.title),null)))}(s.route,r,n,e)),Yt(()=>o++),$v(1),An(s=>o===i.length?Te(t):Ui))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Yt({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),Yt(l=>{const c=new Wz(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),p_(a=>{const l=c=>{const u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(Yt(d=>{c.component=d}),nt(()=>{})));for(const d of c.children)u.push(...l(d));return u};return zv(l(a.targetSnapshot.root)).pipe(af(),Qa(1))}),p_(()=>this.afterPreactivation()),nt(a=>{const l=function t4(n,e,t){const r=yu(n,e._root,t?t._root:void 0);return new uT(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return i={...a,targetRouterState:l}}),Yt(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>nt(r=>(new d4(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Yt({next(){o=!0},complete(){o=!0}}),qv(()=>{o||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),so(a=>{if(s=!0,vT(a)){yT(a)||(this.navigated=!0,this.restoreHistory(i,!0));const l=new pf(i.id,this.serializeUrl(i.extractedUrl),a.message,a.cancellationCode);if(r.next(l),yT(a)){const c=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),u={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||GT(i.source)};this.scheduleNavigation(c,"imperative",null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const l=new aT(i.id,this.serializeUrl(i.extractedUrl),a,i.targetSnapshot??void 0);r.next(l);try{i.resolve(this.errorHandler(a))}catch(c){i.reject(c)}}return Ui}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(o){const a={...o};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(i.state=a)}const s=this.parseUrl(t.url);this.scheduleNavigation(s,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(u_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=i||this.routerState.root,u=l?this.currentUrlTree.fragment:s;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...o};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}return null!==d&&(d=this.removeEmptyProps(d)),Fz(c,this.currentUrlTree,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ts(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function f5(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new se(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...u5}:!1===r?{...d5}:r,Ts(t))return q1(this.currentUrlTree,t,i);const o=this.parseUrl(t);return q1(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new As(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((h,f)=>{a=h,l=f});const u=++this.navigationId;let d;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),d=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):d=0,this.setTransition({id:u,targetPageId:d,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const o=new pf(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){Vm()},n.\u0275prov=Ze({token:n,factory:function(){return VT()},providedIn:"root"}),n})();function GT(n){return"imperative"!==n}let Ef=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new yr,this.subscription=t.events.subscribe(o=>{o instanceof As&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=ro(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=ro(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=ro(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,o,s){return!!(0!==t||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(te(Vn),te(Ns),te(bs))},n.\u0275dir=_e({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&Pn("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&Ci("target",r.target)("href",r.href,sm)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Rr]}),n})();class UT{}let m5=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ui(t=>t instanceof As),Vo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=yh(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(s,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return ln(i).pipe(ca())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Te(null);const o=i.pipe(An(s=>null===s?Te(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?ln([o,this.loader.loadComponent(r)]).pipe(ca()):o})}}return n.\u0275fac=function(t){return new(t||n)(De(Vn),De(By),De(Ao),De(UT),De(m_))},n.\u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const v_=new Pe("");let HT=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof t_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof As&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof lT&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new lT(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Vm()},n.\u0275prov=Ze({token:n,factory:n.\u0275fac}),n})();function sl(n,e){return{\u0275kind:n,\u0275providers:e}}function __(n){return[{provide:g_,multi:!0,useValue:n}]}function jT(){const n=yt(Lr);return e=>{const t=n.get(Eh);if(e!==t.components[0])return;const r=n.get(Vn),i=n.get(WT);1===n.get(M_)&&r.initialNavigation(),n.get($T,null,Re.Optional)?.setUpPreloading(),n.get(v_,null,Re.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const WT=new Pe("",{factory:()=>new yr}),M_=new Pe("",{providedIn:"root",factory:()=>1});const $T=new Pe("");function M5(n){return sl(0,[{provide:$T,useExisting:m5},{provide:UT,useExisting:n}])}const qT=new Pe("ROUTER_FORROOT_GUARD"),x5=[Qy,{provide:J1,useClass:Zv},{provide:Vn,useFactory:VT},vu,{provide:Ns,useFactory:function zT(n){return n.routerState.root},deps:[Vn]},m_];function w5(){return new fE("Router",Vn)}let XT=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[x5,[],__(t),{provide:qT,useFactory:E5,deps:[[Vn,new Sc,new Ec]]},{provide:Cf,useValue:r||{}},r?.useHash?{provide:bs,useClass:LV}:{provide:bs,useClass:BE},{provide:v_,useFactory:()=>{const n=yt(Vn),e=yt(nU),t=yt(Cf);return t.scrollOffset&&e.setOffset(t.scrollOffset),new HT(n,e,t)}},r?.preloadingStrategy?M5(r.preloadingStrategy).\u0275providers:[],{provide:fE,multi:!0,useFactory:w5},r?.initialNavigation?D5(r):[],[{provide:ZT,useFactory:jT},{provide:sE,multi:!0,useExisting:ZT}]]}}static forChild(t){return{ngModule:n,providers:[__(t)]}}}return n.\u0275fac=function(t){return new(t||n)(De(qT,8))},n.\u0275mod=_i({type:n}),n.\u0275inj=Yr({imports:[l_]}),n})();function E5(n){return"guarded"}function D5(n){return["disabled"===n.initialNavigation?sl(3,[{provide:bh,multi:!0,useFactory:()=>{const e=yt(Vn);return()=>{e.setUpLocationChangeListener()}}},{provide:M_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?sl(2,[{provide:M_,useValue:0},{provide:bh,multi:!0,deps:[Lr],useFactory:e=>{const t=e.get(OV,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(o=>{const s=e.get(Vn),a=e.get(WT);(function i(o){e.get(Vn).events.pipe(ui(a=>a instanceof As||a instanceof pf||a instanceof aT),nt(a=>a instanceof As||a instanceof pf&&(0===a.code||1===a.code)&&null),ui(a=>null!==a),Qa(1)).subscribe(()=>{o()})})(()=>{o(!0),r=!0}),s.afterPreactivation=()=>(o(!0),r||a.closed?Te(void 0):a),s.initialNavigation()}))}}]).\u0275providers:[]]}const ZT=new Pe(""),A5=[];let N5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_i({type:n}),n.\u0275inj=Yr({imports:[XT.forRoot(A5),XT]}),n})();const x_={now:()=>(x_.delegate||Date).now(),delegate:void 0};class al extends yr{constructor(e=1/0,t=1/0,r=x_){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=t.now();let a=0;for(let l=1;l<r.length&&r[l]<=s;l+=2)a=l;a&&r.splice(0,a+1)}}}function YT(n,e=yi){return n=n??P5,Xt((t,r)=>{let i,o=!0;t.subscribe(Ot(r,s=>{const a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function P5(n,e){return n===e}function ll(n){return Xt((e,t)=>{Zn(n).subscribe(Ot(t,()=>t.complete(),ic)),!t.closed&&e.subscribe(t)})}function w_(n){return!!n&&(n instanceof qt||ft(n.lift)&&ft(n.subscribe))}class I5 extends mr{constructor(e,t){super()}schedule(e,t=0){return this}}const Af={setInterval(n,e,...t){const{delegate:r}=Af;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Af;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class JT extends I5{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Af.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Af.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,la(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}class Cu{constructor(e,t=Cu.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Cu.now=x_.now;class KT extends Cu{constructor(e,t=Cu.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const F5=new class O5 extends KT{}(class R5 extends JT{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});function QT(...n){const e=gg(n);return Xt((t,r)=>{const i=n.length,o=new Array(i);let s=n.map(()=>!1),a=!1;for(let l=0;l<i;l++)Zn(n[l]).subscribe(Ot(r,c=>{o[l]=c,!a&&!s[l]&&(s[l]=!0,(a=s.every(yi))&&(s=null))},ic));t.subscribe(Ot(r,l=>{if(a){const c=[l,...o];r.next(e?e(...c):c)}}))})}const eA=new KT(JT),L5=eA;function tA(n,e=eA){return Xt((t,r)=>{let i=null,o=null,s=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=o;o=null,r.next(c)}};function l(){const c=s+n,u=e.now();if(u<c)return i=this.schedule(void 0,c-u),void r.add(i);a()}t.subscribe(Ot(r,c=>{o=c,s=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}const k5=["addListener","removeListener"],B5=["addEventListener","removeEventListener"],V5=["on","off"];function Su(n,e,t,r){if(ft(t)&&(r=t,t=void 0),r)return Su(n,e,t).pipe(wv(r));const[i,o]=function H5(n){return ft(n.addEventListener)&&ft(n.removeEventListener)}(n)?B5.map(s=>a=>n[s](e,a,t)):function G5(n){return ft(n.addListener)&&ft(n.removeListener)}(n)?k5.map(nA(n,e)):function U5(n){return ft(n.on)&&ft(n.off)}(n)?V5.map(nA(n,e)):[];if(!i&&fg(n))return An(s=>Su(s,e,t))(Zn(n));if(!i)throw new TypeError("Invalid event target");return new qt(s=>{const a=(...l)=>s.next(1<l.length?l:l[0]);return i(a),()=>o(a)})}function nA(n,e){return t=>r=>n[t](e,r)}function rA(n,e,t,r,i,o,s){try{var a=n[o](s),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(r,i)}const gr=1001,En=1003,yn=1006,Rs=1009,Tu=1012,Ho=1015,Au=1016,pl=1020,zr=1023,Os=1026,gl=1027,ml=2400,yl=2401,co=3e3,zt=3001,uo="srgb",Fs="srgb-linear",Nu=35044,Pu=35048;class Ls{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const i=this._listeners[e];if(void 0!==i){const o=i.indexOf(t);-1!==o&&i.splice(o,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const r=this._listeners[e.type];if(void 0!==r){e.target=this;const i=r.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,e);e.target=null}}}const Gn=[];for(let n=0;n<256;n++)Gn[n]=(n<16?"0":"")+n.toString(16);let GA=1234567;const ks=Math.PI/180,Iu=180/Math.PI;function Dr(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Gn[255&n]+Gn[n>>8&255]+Gn[n>>16&255]+Gn[n>>24&255]+"-"+Gn[255&e]+Gn[e>>8&255]+"-"+Gn[e>>16&15|64]+Gn[e>>24&255]+"-"+Gn[63&t|128]+Gn[t>>8&255]+"-"+Gn[t>>16&255]+Gn[t>>24&255]+Gn[255&r]+Gn[r>>8&255]+Gn[r>>16&255]+Gn[r>>24&255]).toLowerCase()}function un(n,e,t){return Math.max(e,Math.min(t,n))}function L_(n,e){return(n%e+e)%e}function Ru(n,e,t){return(1-t)*n+t*e}function k_(n){return 0==(n&n-1)&&0!==n}function Vf(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}var o8=Object.freeze({__proto__:null,DEG2RAD:ks,RAD2DEG:Iu,generateUUID:Dr,clamp:un,euclideanModulo:L_,mapLinear:function jj(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)},inverseLerp:function Wj(n,e,t){return n!==e?(t-n)/(e-n):0},lerp:Ru,damp:function $j(n,e,t,r){return Ru(n,e,1-Math.exp(-t*r))},pingpong:function qj(n,e=1){return e-Math.abs(L_(n,2*e)-e)},smoothstep:function Xj(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*(3-2*n)},smootherstep:function Zj(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*n*(n*(6*n-15)+10)},randInt:function Yj(n,e){return n+Math.floor(Math.random()*(e-n+1))},randFloat:function Jj(n,e){return n+Math.random()*(e-n)},randFloatSpread:function Kj(n){return n*(.5-Math.random())},seededRandom:function Qj(n){void 0!==n&&(GA=n);let e=GA+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function e8(n){return n*ks},radToDeg:function t8(n){return n*Iu},isPowerOfTwo:k_,ceilPowerOfTwo:function UA(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))},floorPowerOfTwo:Vf,setQuaternionFromProperEuler:function n8(n,e,t,r,i){const o=Math.cos,s=Math.sin,a=o(t/2),l=s(t/2),c=o((e+r)/2),u=s((e+r)/2),d=o((e-r)/2),h=s((e-r)/2),f=o((r-e)/2),p=s((r-e)/2);switch(i){case"XYX":n.set(a*u,l*d,l*h,a*c);break;case"YZY":n.set(l*h,a*u,l*d,a*c);break;case"ZXZ":n.set(l*d,l*h,a*u,a*c);break;case"XZX":n.set(a*u,l*p,l*f,a*c);break;case"YXY":n.set(l*f,a*u,l*p,a*c);break;case"ZYZ":n.set(l*p,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:function i8(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}},denormalize:function r8(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}});class Z{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*r-s*i+e.x,this.y=o*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Z.prototype.isVector2=!0;class In{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,o,s,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=o,u[5]=l,u[6]=r,u[7]=s,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,o=this.elements,s=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],h=r[2],f=r[5],p=r[8],g=i[0],m=i[3],y=i[6],v=i[1],_=i[4],M=i[7],w=i[2],b=i[5],A=i[8];return o[0]=s*g+a*v+l*w,o[3]=s*m+a*_+l*b,o[6]=s*y+a*M+l*A,o[1]=c*g+u*v+d*w,o[4]=c*m+u*_+d*b,o[7]=c*y+u*M+d*A,o[2]=h*g+f*v+p*w,o[5]=h*m+f*_+p*b,o[8]=h*y+f*M+p*A,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*s*u-t*a*c-r*o*u+r*a*l+i*o*c-i*s*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*s-a*c,h=a*l-u*o,f=c*o-s*l,p=t*d+r*h+i*f;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const g=1/p;return e[0]=d*g,e[1]=(i*c-u*r)*g,e[2]=(a*r-i*s)*g,e[3]=h*g,e[4]=(u*t-i*l)*g,e[5]=(i*o-a*t)*g,e[6]=f*g,e[7]=(r*l-c*t)*g,e[8]=(s*t-r*o)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,o,s,a){const l=Math.cos(o),c=Math.sin(o);return this.set(r*l,r*c,-r*(l*s+c*a)+s+e,-i*c,i*l,-i*(-c*s+l*a)+a+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.elements,o=i[0],s=i[3],a=i[6],l=i[1],c=i[4],u=i[7];return i[0]=t*o+r*l,i[3]=t*s+r*c,i[6]=t*a+r*u,i[1]=-r*o+t*l,i[4]=-r*s+t*c,i[7]=-r*a+t*u,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function HA(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}function Ou(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Bs(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function Gf(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}In.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const B_={[uo]:{[Fs]:Bs},[Fs]:{[uo]:Gf}},jr={legacyMode:!0,get workingColorSpace(){return Fs},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(B_[e]&&void 0!==B_[e][t]){const r=B_[e][t];return n.r=r(n.r),n.g=r(n.g),n.b=r(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},zA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Dn={r:0,g:0,b:0},di={h:0,s:0,l:0},Uf={h:0,s:0,l:0};function V_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function Hf(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let Ml,pe=(()=>{class n{constructor(t,r,i){return void 0===r&&void 0===i?this.set(t):this.setRGB(t,r,i)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,r=uo){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,jr.toWorkingColorSpace(this,r),this}setRGB(t,r,i,o=Fs){return this.r=t,this.g=r,this.b=i,jr.toWorkingColorSpace(this,o),this}setHSL(t,r,i,o=Fs){if(t=L_(t,1),r=un(r,0,1),i=un(i,0,1),0===r)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+r):i+r-i*r,a=2*i-s;this.r=V_(a,s,t+1/3),this.g=V_(a,s,t),this.b=V_(a,s,t-1/3)}return jr.toWorkingColorSpace(this,o),this}setStyle(t,r=uo){function i(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let o;if(o=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let s;const l=o[2];switch(o[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,jr.toWorkingColorSpace(this,r),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,jr.toWorkingColorSpace(this,r),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const c=parseFloat(s[1])/360,u=parseInt(s[2],10)/100,d=parseInt(s[3],10)/100;return i(s[4]),this.setHSL(c,u,d,r)}}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(t)){const s=o[1],a=s.length;if(3===a)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,jr.toWorkingColorSpace(this,r),this;if(6===a)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,jr.toWorkingColorSpace(this,r),this}return t&&t.length>0?this.setColorName(t,r):this}setColorName(t,r=uo){const i=zA[t.toLowerCase()];return void 0!==i?this.setHex(i,r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Bs(t.r),this.g=Bs(t.g),this.b=Bs(t.b),this}copyLinearToSRGB(t){return this.r=Gf(t.r),this.g=Gf(t.g),this.b=Gf(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=uo){return jr.fromWorkingColorSpace(Hf(this,Dn),t),un(255*Dn.r,0,255)<<16^un(255*Dn.g,0,255)<<8^un(255*Dn.b,0,255)<<0}getHexString(t=uo){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,r=Fs){jr.fromWorkingColorSpace(Hf(this,Dn),r);const i=Dn.r,o=Dn.g,s=Dn.b,a=Math.max(i,o,s),l=Math.min(i,o,s);let c,u;const d=(l+a)/2;if(l===a)c=0,u=0;else{const h=a-l;switch(u=d<=.5?h/(a+l):h/(2-a-l),a){case i:c=(o-s)/h+(o<s?6:0);break;case o:c=(s-i)/h+2;break;case s:c=(i-o)/h+4}c/=6}return t.h=c,t.s=u,t.l=d,t}getRGB(t,r=Fs){return jr.fromWorkingColorSpace(Hf(this,Dn),r),t.r=Dn.r,t.g=Dn.g,t.b=Dn.b,t}getStyle(t=uo){return jr.fromWorkingColorSpace(Hf(this,Dn),t),t!==uo?`color(${t} ${Dn.r} ${Dn.g} ${Dn.b})`:`rgb(${255*Dn.r|0},${255*Dn.g|0},${255*Dn.b|0})`}offsetHSL(t,r,i){return this.getHSL(di),di.h+=t,di.s+=r,di.l+=i,this.setHSL(di.h,di.s,di.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,i){return this.r=t.r+(r.r-t.r)*i,this.g=t.g+(r.g-t.g)*i,this.b=t.b+(r.b-t.b)*i,this}lerpHSL(t,r){this.getHSL(di),t.getHSL(Uf);const i=Ru(di.h,Uf.h,r),o=Ru(di.s,Uf.s,r),s=Ru(di.l,Uf.l,r);return this.setHSL(i,o,s),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return n.NAMES=zA,n})();pe.prototype.isColor=!0,pe.prototype.r=1,pe.prototype.g=1,pe.prototype.b=1;class Vs{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Ml&&(Ml=Ou("canvas")),Ml.width=e.width,Ml.height=e.height;const r=Ml.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Ml}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Ou("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let s=0;s<o.length;s++)o[s]=255*Bs(o[s]/255);return r.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t[r]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Bs(t[r]/255)):Bs(t[r]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Gs{constructor(e=null){this.uuid=Dr(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(null!==i){let o;if(Array.isArray(i)){o=[];for(let s=0,a=i.length;s<a;s++)o.push(G_(i[s].isDataTexture?i[s].image:i[s]))}else o=G_(i);r.url=o}return t||(e.images[this.uuid]=r),r}}function G_(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Vs.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Gs.prototype.isSource=!0;let a8=0,or=(()=>{class n extends Ls{constructor(t=n.DEFAULT_IMAGE,r=n.DEFAULT_MAPPING,i=gr,o=gr,s=yn,a=1008,l=zr,c=Rs,u=1,d=co){super(),Object.defineProperty(this,"id",{value:a8++}),this.uuid=Dr(),this.name="",this.source=new Gs(t),this.mipmaps=[],this.mapping=r,this.wrapS=i,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Z(0,0),this.repeat=new Z(1,1),this.center=new Z(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new In,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const r=void 0===t||"string"==typeof t;if(!r&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),r||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case gr:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case gr:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n})();or.prototype.isTexture=!0;class Nt{constructor(e=0,t=0,r=0,i=1){this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*o,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*o,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*o,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,o;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],p=l[9],g=l[2],m=l[6],y=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-g)<.01&&Math.abs(p-m)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+g)<.1&&Math.abs(p+m)<.1&&Math.abs(c+f+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(c+1)/2,M=(f+1)/2,w=(y+1)/2,b=(u+h)/4,A=(d+g)/4,x=(p+m)/4;return _>M&&_>w?_<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(_),i=b/r,o=A/r):M>w?M<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(M),r=b/i,o=x/i):w<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(w),r=A/o,i=x/o),this.set(r,i,o,t),this}let v=Math.sqrt((m-p)*(m-p)+(d-g)*(d-g)+(h-u)*(h-u));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(d-g)/v,this.z=(h-u)/v,this.w=Math.acos((c+f+y-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Nt.prototype.isVector4=!0;class Tr extends Ls{constructor(e,t,r={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Nt(0,0,e,t),this.scissorTest=!1,this.viewport=new Nt(0,0,e,t),this.texture=new or({width:e,height:t,depth:1},r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.internalFormat=void 0!==r.internalFormat?r.internalFormat:null,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:yn,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0!==r.stencilBuffer&&r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null,this.samples=void 0!==r.samples?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Gs(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}Tr.prototype.isWebGLRenderTarget=!0;class zf extends or{constructor(e=null,t=1,r=1,i=1){super(null),this.image={data:e,width:t,height:r,depth:i},this.magFilter=En,this.minFilter=En,this.wrapR=gr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}zf.prototype.isDataArrayTexture=!0,class l8 extends Tr{constructor(e,t,r){super(e,t),this.depth=r,this.texture=new zf(null,e,t,r),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGLArrayRenderTarget=!0;class U_ extends or{constructor(e=null,t=1,r=1,i=1){super(null),this.image={data:e,width:t,height:r,depth:i},this.magFilter=En,this.minFilter=En,this.wrapR=gr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}U_.prototype.isData3DTexture=!0,class c8 extends Tr{constructor(e,t,r){super(e,t),this.depth=r,this.texture=new U_(null,e,t,r),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGL3DRenderTarget=!0,class u8 extends Tr{constructor(e,t,r,i={}){super(e,t,i);const o=this.texture;this.texture=[];for(let s=0;s<r;s++)this.texture[s]=o.clone(),this.texture[s].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,o=this.texture.length;i<o;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}.prototype.isWebGLMultipleRenderTargets=!0;class Rn{constructor(e=0,t=0,r=0,i=1){this._x=e,this._y=t,this._z=r,this._w=i}static slerp(e,t,r,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,i)}static slerpFlat(e,t,r,i,o,s,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const h=o[s+0],f=o[s+1],p=o[s+2],g=o[s+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=p,void(e[t+3]=g);if(d!==g||l!==h||c!==f||u!==p){let m=1-a;const y=l*h+c*f+u*p+d*g,v=y>=0?1:-1,_=1-y*y;if(_>Number.EPSILON){const w=Math.sqrt(_),b=Math.atan2(w,y*v);m=Math.sin(m*b)/w,a=Math.sin(a*b)/w}const M=a*v;if(l=l*m+h*M,c=c*m+f*M,u=u*m+p*M,d=d*m+g*M,m===1-a){const w=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=w,c*=w,u*=w,d*=w}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,o,s){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=o[s],h=o[s+1],f=o[s+2],p=o[s+3];return e[t]=a*p+u*d+l*f-c*h,e[t+1]=l*p+u*h+c*d-a*f,e[t+2]=c*p+u*f+a*h-l*d,e[t+3]=u*p-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,i=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(o/2),h=l(r/2),f=l(i/2),p=l(o/2);switch(s){case"XYZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"YXZ":this._x=h*u*d+c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"ZXY":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d-h*f*p;break;case"ZYX":this._x=h*u*d-c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d+h*f*p;break;case"YZX":this._x=h*u*d+c*f*p,this._y=c*f*d+h*u*p,this._z=c*u*p-h*f*d,this._w=c*u*d-h*f*p;break;case"XZY":this._x=h*u*d-c*f*p,this._y=c*f*d-h*u*p,this._z=c*u*p+h*f*d,this._w=c*u*d+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],o=t[8],s=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=r+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(o-c)*f,this._z=(s-i)*f}else if(r>a&&r>d){const f=2*Math.sqrt(1+r-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(i+s)/f,this._z=(o+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-r-d);this._w=(o-c)/f,this._x=(i+s)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-r-a);this._w=(s-i)/f,this._x=(o+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(un(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(0===r)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,o=e._z,s=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+s*a+i*c-o*l,this._y=i*u+s*l+o*a-r*c,this._z=o*u+s*c+r*l-i*a,this._w=s*u-r*a-i*l-o*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const r=this._x,i=this._y,o=this._z,s=this._w;let a=s*e._w+r*e._x+i*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=r,this._y=i,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*s+t*this._w,this._x=f*r+t*this._x,this._y=f*i+t*this._y,this._z=f*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=s*d+this._w*h,this._x=r*d+this._x*h,this._y=i*d+this._y*h,this._z=o*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(o),r*Math.cos(o),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}Rn.prototype.isQuaternion=!0;class C{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return void 0===r&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(jA.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(jA.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6]*i,this.y=o[1]*t+o[4]*r+o[7]*i,this.z=o[2]*t+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,o=e.elements,s=1/(o[3]*t+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*t+o[4]*r+o[8]*i+o[12])*s,this.y=(o[1]*t+o[5]*r+o[9]*i+o[13])*s,this.z=(o[2]*t+o[6]*r+o[10]*i+o[14])*s,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,o=e.x,s=e.y,a=e.z,l=e.w,c=l*t+s*i-a*r,u=l*r+a*t-o*i,d=l*i+o*r-s*t,h=-o*t-s*r-a*i;return this.x=c*l+h*-o+u*-a-d*-s,this.y=u*l+h*-s+d*-o-c*-a,this.z=d*l+h*-a+c*-s-u*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i,this.y=o[1]*t+o[5]*r+o[9]*i,this.z=o[2]*t+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,o=e.z,s=t.x,a=t.y,l=t.z;return this.x=i*l-o*a,this.y=o*s-r*l,this.z=r*a-i*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return H_.copy(this).projectOnVector(e),this.sub(H_)}reflect(e){return this.sub(H_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(un(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}C.prototype.isVector3=!0;const H_=new C,jA=new Rn;class Wr{constructor(e=new C(1/0,1/0,1/0),t=new C(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,o=-1/0,s=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],d=e[l+1],h=e[l+2];u<t&&(t=u),d<r&&(r=d),h<i&&(i=h),u>o&&(o=u),d>s&&(s=d),h>a&&(a=h)}return this.min.set(t,r,i),this.max.set(o,s,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,o=-1/0,s=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),d=e.getY(l),h=e.getZ(l);u<t&&(t=u),d<r&&(r=d),h<i&&(i=h),u>o&&(o=u),d>s&&(s=d),h>a&&(a=h)}return this.min.set(t,r,i),this.max.set(o,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Us.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(void 0!==r)if(t&&null!=r.attributes&&void 0!==r.attributes.position){const o=r.attributes.position;for(let s=0,a=o.count;s<a;s++)Us.fromBufferAttribute(o,s).applyMatrix4(e.matrixWorld),this.expandByPoint(Us)}else null===r.boundingBox&&r.computeBoundingBox(),z_.copy(r.boundingBox),z_.applyMatrix4(e.matrixWorld),this.union(z_);const i=e.children;for(let o=0,s=i.length;o<s;o++)this.expandByObject(i[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Us),Us.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Fu),jf.subVectors(this.max,Fu),xl.subVectors(e.a,Fu),wl.subVectors(e.b,Fu),bl.subVectors(e.c,Fu),zo.subVectors(wl,xl),jo.subVectors(bl,wl),Hs.subVectors(xl,bl);let t=[0,-zo.z,zo.y,0,-jo.z,jo.y,0,-Hs.z,Hs.y,zo.z,0,-zo.x,jo.z,0,-jo.x,Hs.z,0,-Hs.x,-zo.y,zo.x,0,-jo.y,jo.x,0,-Hs.y,Hs.x,0];return!(!j_(t,xl,wl,bl,jf)||(t=[1,0,0,0,1,0,0,0,1],!j_(t,xl,wl,bl,jf)))&&(Wf.crossVectors(zo,jo),t=[Wf.x,Wf.y,Wf.z],j_(t,xl,wl,bl,jf))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Us.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Us).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(ho[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ho[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ho[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ho[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ho[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ho[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ho[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ho[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ho)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Wr.prototype.isBox3=!0;const ho=[new C,new C,new C,new C,new C,new C,new C,new C],Us=new C,z_=new Wr,xl=new C,wl=new C,bl=new C,zo=new C,jo=new C,Hs=new C,Fu=new C,jf=new C,Wf=new C,zs=new C;function j_(n,e,t,r,i){for(let o=0,s=n.length-3;o<=s;o+=3){zs.fromArray(n,o);const a=i.x*Math.abs(zs.x)+i.y*Math.abs(zs.y)+i.z*Math.abs(zs.z),l=e.dot(zs),c=t.dot(zs),u=r.dot(zs);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const d8=new Wr,WA=new C,$f=new C,W_=new C;class js{constructor(e=new C,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;void 0!==t?r.copy(t):d8.setFromPoints(e).getCenter(r);let i=0;for(let o=0,s=e.length;o<s;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){W_.subVectors(e,this.center);const t=W_.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=.5*(r-this.radius);this.center.add(W_.multiplyScalar(i/r)),this.radius+=i}return this}union(e){return!0===this.center.equals(e.center)?$f.set(0,0,1).multiplyScalar(e.radius):$f.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(WA.copy(e.center).add($f)),this.expandByPoint(WA.copy(e.center).sub($f)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const fo=new C,$_=new C,qf=new C,Wo=new C,q_=new C,Xf=new C,X_=new C;class Ws{constructor(e=new C,t=new C(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,fo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=fo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(fo.copy(this.direction).multiplyScalar(t).add(this.origin),fo.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){$_.copy(e).add(t).multiplyScalar(.5),qf.copy(t).sub(e).normalize(),Wo.copy(this.origin).sub($_);const o=.5*e.distanceTo(t),s=-this.direction.dot(qf),a=Wo.dot(this.direction),l=-Wo.dot(qf),c=Wo.lengthSq(),u=Math.abs(1-s*s);let d,h,f,p;if(u>0)if(d=s*l-a,h=s*a-l,p=o*u,d>=0)if(h>=-p)if(h<=p){const g=1/u;d*=g,h*=g,f=d*(d+s*h+2*a)+h*(s*d+h+2*l)+c}else h=o,d=Math.max(0,-(s*h+a)),f=-d*d+h*(h+2*l)+c;else h=-o,d=Math.max(0,-(s*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-p?(d=Math.max(0,-(-s*o+a)),h=d>0?-o:Math.min(Math.max(-o,-l),o),f=-d*d+h*(h+2*l)+c):h<=p?(d=0,h=Math.min(Math.max(-o,-l),o),f=h*(h+2*l)+c):(d=Math.max(0,-(s*o+a)),h=d>0?o:Math.min(Math.max(-o,-l),o),f=-d*d+h*(h+2*l)+c);else h=s>0?-o:o,d=Math.max(0,-(s*h+a)),f=-d*d+h*(h+2*l)+c;return r&&r.copy(this.direction).multiplyScalar(d).add(this.origin),i&&i.copy(qf).multiplyScalar(h).add($_),f}intersectSphere(e,t){fo.subVectors(e.center,this.origin);const r=fo.dot(this.direction),i=fo.dot(fo)-r*r,o=e.radius*e.radius;if(i>o)return null;const s=Math.sqrt(o-i),a=r-s,l=r+s;return a<0&&l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return null===r?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,o,s,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),u>=0?(o=(e.min.y-h.y)*u,s=(e.max.y-h.y)*u):(o=(e.max.y-h.y)*u,s=(e.min.y-h.y)*u),r>s||o>i||((o>r||r!=r)&&(r=o),(s<i||i!=i)&&(i=s),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),r>l||a>i)||((a>r||r!=r)&&(r=a),(l<i||i!=i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return null!==this.intersectBox(e,fo)}intersectTriangle(e,t,r,i,o){q_.subVectors(t,e),Xf.subVectors(r,e),X_.crossVectors(q_,Xf);let a,s=this.direction.dot(X_);if(s>0){if(i)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}Wo.subVectors(this.origin,e);const l=a*this.direction.dot(Xf.crossVectors(Wo,Xf));if(l<0)return null;const c=a*this.direction.dot(q_.cross(Wo));if(c<0||l+c>s)return null;const u=-a*Wo.dot(X_);return u<0?null:this.at(u/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class be{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,o,s,a,l,c,u,d,h,f,p,g,m){const y=this.elements;return y[0]=e,y[4]=t,y[8]=r,y[12]=i,y[1]=o,y[5]=s,y[9]=a,y[13]=l,y[2]=c,y[6]=u,y[10]=d,y[14]=h,y[3]=f,y[7]=p,y[11]=g,y[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new be).fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Cl.setFromMatrixColumn(e,0).length(),o=1/Cl.setFromMatrixColumn(e,1).length(),s=1/Cl.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*o,t[5]=r[5]*o,t[6]=r[6]*o,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,r=e.x,i=e.y,o=e.z,s=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(o),d=Math.sin(o);if("XYZ"===e.order){const h=s*u,f=s*d,p=a*u,g=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+p*c,t[5]=h-g*c,t[9]=-a*l,t[2]=g-h*c,t[6]=p+f*c,t[10]=s*l}else if("YXZ"===e.order){const h=l*u,f=l*d,p=c*u,g=c*d;t[0]=h+g*a,t[4]=p*a-f,t[8]=s*c,t[1]=s*d,t[5]=s*u,t[9]=-a,t[2]=f*a-p,t[6]=g+h*a,t[10]=s*l}else if("ZXY"===e.order){const h=l*u,f=l*d,p=c*u,g=c*d;t[0]=h-g*a,t[4]=-s*d,t[8]=p+f*a,t[1]=f+p*a,t[5]=s*u,t[9]=g-h*a,t[2]=-s*c,t[6]=a,t[10]=s*l}else if("ZYX"===e.order){const h=s*u,f=s*d,p=a*u,g=a*d;t[0]=l*u,t[4]=p*c-f,t[8]=h*c+g,t[1]=l*d,t[5]=g*c+h,t[9]=f*c-p,t[2]=-c,t[6]=a*l,t[10]=s*l}else if("YZX"===e.order){const h=s*l,f=s*c,p=a*l,g=a*c;t[0]=l*u,t[4]=g-h*d,t[8]=p*d+f,t[1]=d,t[5]=s*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*d+p,t[10]=h-g*d}else if("XZY"===e.order){const h=s*l,f=s*c,p=a*l,g=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+g,t[5]=s*u,t[9]=f*d-p,t[2]=p*d-f,t[6]=a*u,t[10]=g*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(h8,e,f8)}lookAt(e,t,r){const i=this.elements;return Ar.subVectors(e,t),0===Ar.lengthSq()&&(Ar.z=1),Ar.normalize(),$o.crossVectors(r,Ar),0===$o.lengthSq()&&(1===Math.abs(r.z)?Ar.x+=1e-4:Ar.z+=1e-4,Ar.normalize(),$o.crossVectors(r,Ar)),$o.normalize(),Zf.crossVectors(Ar,$o),i[0]=$o.x,i[4]=Zf.x,i[8]=Ar.x,i[1]=$o.y,i[5]=Zf.y,i[9]=Ar.y,i[2]=$o.z,i[6]=Zf.z,i[10]=Ar.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,o=this.elements,s=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],h=r[9],f=r[13],p=r[2],g=r[6],m=r[10],y=r[14],v=r[3],_=r[7],M=r[11],w=r[15],b=i[0],A=i[4],x=i[8],E=i[12],N=i[1],F=i[5],q=i[9],re=i[13],O=i[2],z=i[6],B=i[10],K=i[14],ee=i[3],U=i[7],W=i[11],oe=i[15];return o[0]=s*b+a*N+l*O+c*ee,o[4]=s*A+a*F+l*z+c*U,o[8]=s*x+a*q+l*B+c*W,o[12]=s*E+a*re+l*K+c*oe,o[1]=u*b+d*N+h*O+f*ee,o[5]=u*A+d*F+h*z+f*U,o[9]=u*x+d*q+h*B+f*W,o[13]=u*E+d*re+h*K+f*oe,o[2]=p*b+g*N+m*O+y*ee,o[6]=p*A+g*F+m*z+y*U,o[10]=p*x+g*q+m*B+y*W,o[14]=p*E+g*re+m*K+y*oe,o[3]=v*b+_*N+M*O+w*ee,o[7]=v*A+_*F+M*z+w*U,o[11]=v*x+_*q+M*B+w*W,o[15]=v*E+_*re+M*K+w*oe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],o=e[12],s=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14];return e[3]*(+o*l*d-i*c*d-o*a*h+r*c*h+i*a*f-r*l*f)+e[7]*(+t*l*f-t*c*h+o*s*h-i*s*f+i*c*u-o*l*u)+e[11]*(+t*c*d-t*a*f-o*s*d+r*s*f+o*a*u-r*c*u)+e[15]*(-i*a*u-t*l*d+t*a*h+i*s*d-r*s*h+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],g=e[13],m=e[14],y=e[15],v=d*m*c-g*h*c+g*l*f-a*m*f-d*l*y+a*h*y,_=p*h*c-u*m*c-p*l*f+s*m*f+u*l*y-s*h*y,M=u*g*c-p*d*c+p*a*f-s*g*f-u*a*y+s*d*y,w=p*d*l-u*g*l-p*a*h+s*g*h+u*a*m-s*d*m,b=t*v+r*_+i*M+o*w;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/b;return e[0]=v*A,e[1]=(g*h*o-d*m*o-g*i*f+r*m*f+d*i*y-r*h*y)*A,e[2]=(a*m*o-g*l*o+g*i*c-r*m*c-a*i*y+r*l*y)*A,e[3]=(d*l*o-a*h*o-d*i*c+r*h*c+a*i*f-r*l*f)*A,e[4]=_*A,e[5]=(u*m*o-p*h*o+p*i*f-t*m*f-u*i*y+t*h*y)*A,e[6]=(p*l*o-s*m*o-p*i*c+t*m*c+s*i*y-t*l*y)*A,e[7]=(s*h*o-u*l*o+u*i*c-t*h*c-s*i*f+t*l*f)*A,e[8]=M*A,e[9]=(p*d*o-u*g*o-p*r*f+t*g*f+u*r*y-t*d*y)*A,e[10]=(s*g*o-p*a*o+p*r*c-t*g*c-s*r*y+t*a*y)*A,e[11]=(u*a*o-s*d*o-u*r*c+t*d*c+s*r*f-t*a*f)*A,e[12]=w*A,e[13]=(u*g*i-p*d*i+p*r*h-t*g*h-u*r*m+t*d*m)*A,e[14]=(p*a*i-s*g*i-p*r*l+t*g*l+s*r*m-t*a*m)*A,e[15]=(s*d*i-u*a*i+u*r*l-t*d*l-s*r*h+t*a*h)*A,this}scale(e){const t=this.elements,r=e.x,i=e.y,o=e.z;return t[0]*=r,t[4]*=i,t[8]*=o,t[1]*=r,t[5]*=i,t[9]*=o,t[2]*=r,t[6]*=i,t[10]*=o,t[3]*=r,t[7]*=i,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),o=1-r,s=e.x,a=e.y,l=e.z,c=o*s,u=o*a;return this.set(c*s+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*s,0,c*l-i*a,u*l+i*s,o*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,o,s){return this.set(1,r,o,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,o=t._x,s=t._y,a=t._z,l=t._w,c=o+o,u=s+s,d=a+a,h=o*c,f=o*u,p=o*d,g=s*u,m=s*d,y=a*d,v=l*c,_=l*u,M=l*d,w=r.x,b=r.y,A=r.z;return i[0]=(1-(g+y))*w,i[1]=(f+M)*w,i[2]=(p-_)*w,i[3]=0,i[4]=(f-M)*b,i[5]=(1-(h+y))*b,i[6]=(m+v)*b,i[7]=0,i[8]=(p+_)*A,i[9]=(m-v)*A,i[10]=(1-(h+g))*A,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let o=Cl.set(i[0],i[1],i[2]).length();const s=Cl.set(i[4],i[5],i[6]).length(),a=Cl.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],hi.copy(this);const c=1/o,u=1/s,d=1/a;return hi.elements[0]*=c,hi.elements[1]*=c,hi.elements[2]*=c,hi.elements[4]*=u,hi.elements[5]*=u,hi.elements[6]*=u,hi.elements[8]*=d,hi.elements[9]*=d,hi.elements[10]*=d,t.setFromRotationMatrix(hi),r.x=o,r.y=s,r.z=a,this}makePerspective(e,t,r,i,o,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,c=2*o/(r-i),u=(t+e)/(t-e),d=(r+i)/(r-i),h=-(s+o)/(s-o),f=-2*s*o/(s-o);return a[0]=2*o/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,o,s){const a=this.elements,l=1/(t-e),c=1/(r-i),u=1/(s-o),d=(t+e)*l,h=(r+i)*c,f=(s+o)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}be.prototype.isMatrix4=!0;const Cl=new C,hi=new be,h8=new C(0,0,0),f8=new C(1,1,1),$o=new C,Zf=new C,Ar=new C,$A=new be,qA=new Rn;class po{constructor(e=0,t=0,r=0,i=po.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,o=i[0],s=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],h=i[6],f=i[10];switch(t){case"XYZ":this._y=Math.asin(un(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-un(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,o),this._z=0);break;case"ZXY":this._x=Math.asin(un(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-un(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(un(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-un(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return $A.makeRotationFromQuaternion(e),this.setFromRotationMatrix($A,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return qA.setFromEuler(this),this.setFromQuaternion(qA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}po.prototype.isEuler=!0,po.DefaultOrder="XYZ",po.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Sl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let p8=0;const XA=new C,El=new Rn,go=new be,Yf=new C,Lu=new C,g8=new C,m8=new Rn,ZA=new C(1,0,0),YA=new C(0,1,0),JA=new C(0,0,1),y8={type:"added"},KA={type:"removed"};class St extends Ls{constructor(){super(),Object.defineProperty(this,"id",{value:p8++}),this.uuid=Dr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=St.DefaultUp.clone();const e=new C,t=new po,r=new Rn,i=new C(1,1,1);t._onChange(function o(){r.setFromEuler(t,!1)}),r._onChange(function s(){t.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new be},normalMatrix:{value:new In}}),this.matrix=new be,this.matrixWorld=new be,this.matrixAutoUpdate=St.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Sl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return El.setFromAxisAngle(e,t),this.quaternion.multiply(El),this}rotateOnWorldAxis(e,t){return El.setFromAxisAngle(e,t),this.quaternion.premultiply(El),this}rotateX(e){return this.rotateOnAxis(ZA,e)}rotateY(e){return this.rotateOnAxis(YA,e)}rotateZ(e){return this.rotateOnAxis(JA,e)}translateOnAxis(e,t){return XA.copy(e).applyQuaternion(this.quaternion),this.position.add(XA.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ZA,e)}translateY(e){return this.translateOnAxis(YA,e)}translateZ(e){return this.translateOnAxis(JA,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(go.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Yf.copy(e):Yf.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Lu.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?go.lookAt(Lu,Yf,this.up):go.lookAt(Yf,Lu,this.up),this.quaternion.setFromRotationMatrix(go),i&&(go.extractRotation(i.matrixWorld),El.setFromRotationMatrix(go),this.quaternion.premultiply(El.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(y8)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(KA)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(KA)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),go.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),go.multiply(e.parent.matrixWorld)),e.applyMatrix4(go),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,t);if(void 0!==s)return s}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lu,e,g8),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Lu,m8,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const i=this.children;for(let o=0,s=i.length;o<s;o++)i[o].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function o(a,l){return void 0===a[l.uuid]&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++)o(e.shapes,l[c]);else o(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(o(e.materials,this.material[l]));i.material=a}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++)i.animations.push(o(e.animations,this.animations[a]))}if(t){const a=s(e.geometries),l=s(e.materials),c=s(e.textures),u=s(e.images),d=s(e.shapes),h=s(e.skeletons),f=s(e.animations),p=s(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),h.length>0&&(r.skeletons=h),f.length>0&&(r.animations=f),p.length>0&&(r.nodes=p)}return r.object=i,r;function s(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}St.DefaultUp=new C(0,1,0),St.DefaultMatrixAutoUpdate=!0,St.prototype.isObject3D=!0;const fi=new C,mo=new C,Z_=new C,yo=new C,Dl=new C,Tl=new C,QA=new C,Y_=new C,J_=new C,K_=new C;class vn{constructor(e=new C,t=new C,r=new C){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),fi.subVectors(e,t),i.cross(fi);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,t,r,i,o){fi.subVectors(i,t),mo.subVectors(r,t),Z_.subVectors(e,t);const s=fi.dot(fi),a=fi.dot(mo),l=fi.dot(Z_),c=mo.dot(mo),u=mo.dot(Z_),d=s*c-a*a;if(0===d)return o.set(-2,-1,-1);const h=1/d,f=(c*l-a*u)*h,p=(s*u-a*l)*h;return o.set(1-f-p,p,f)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,yo),yo.x>=0&&yo.y>=0&&yo.x+yo.y<=1}static getUV(e,t,r,i,o,s,a,l){return this.getBarycoord(e,t,r,i,yo),l.set(0,0),l.addScaledVector(o,yo.x),l.addScaledVector(s,yo.y),l.addScaledVector(a,yo.z),l}static isFrontFacing(e,t,r,i){return fi.subVectors(r,t),mo.subVectors(e,t),fi.cross(mo).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return fi.subVectors(this.c,this.b),mo.subVectors(this.a,this.b),.5*fi.cross(mo).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return vn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return vn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,o){return vn.getUV(e,this.a,this.b,this.c,t,r,i,o)}containsPoint(e){return vn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return vn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,o=this.c;let s,a;Dl.subVectors(i,r),Tl.subVectors(o,r),Y_.subVectors(e,r);const l=Dl.dot(Y_),c=Tl.dot(Y_);if(l<=0&&c<=0)return t.copy(r);J_.subVectors(e,i);const u=Dl.dot(J_),d=Tl.dot(J_);if(u>=0&&d<=u)return t.copy(i);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return s=l/(l-u),t.copy(r).addScaledVector(Dl,s);K_.subVectors(e,o);const f=Dl.dot(K_),p=Tl.dot(K_);if(p>=0&&f<=p)return t.copy(o);const g=f*c-l*p;if(g<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(r).addScaledVector(Tl,a);const m=u*p-f*d;if(m<=0&&d-u>=0&&f-p>=0)return QA.subVectors(o,i),a=(d-u)/(d-u+(f-p)),t.copy(i).addScaledVector(QA,a);const y=1/(m+g+h);return s=g*y,a=h*y,t.copy(r).addScaledVector(Dl,s).addScaledVector(Tl,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let v8=0;class _n extends Ls{constructor(){super(),Object.defineProperty(this,"id",{value:v8++}),this.uuid=Dr(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const r=e[t];if(void 0===r){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r;continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),0!==this.side&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(r.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=this.flatShading),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),!1===this.fog&&(r.fog=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){const o=i(e.textures),s=i(e.images);o.length>0&&(r.textures=o),s.length>0&&(r.images=s)}return r}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(null!==t){const i=t.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=t[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}_n.prototype.isMaterial=!0,_n.fromType=function(){return null};class vo extends _n{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}vo.prototype.isMeshBasicMaterial=!0;const Mn=new C,Jf=new Z;class jt{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.usage=Nu,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let i=0,o=e.length;i<o;i++){let s=e[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new pe),t[r++]=s.r,t[r++]=s.g,t[r++]=s.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let i=0,o=e.length;i<o;i++){let s=e[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new Z),t[r++]=s.x,t[r++]=s.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let i=0,o=e.length;i<o;i++){let s=e[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new C),t[r++]=s.x,t[r++]=s.y,t[r++]=s.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let i=0,o=e.length;i<o;i++){let s=e[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new Nt),t[r++]=s.x,t[r++]=s.y,t[r++]=s.z,t[r++]=s.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,r=this.count;t<r;t++)Jf.fromBufferAttribute(this,t),Jf.applyMatrix3(e),this.setXY(t,Jf.x,Jf.y);else if(3===this.itemSize)for(let t=0,r=this.count;t<r;t++)Mn.fromBufferAttribute(this,t),Mn.applyMatrix3(e),this.setXYZ(t,Mn.x,Mn.y,Mn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Mn.fromBufferAttribute(this,t),Mn.applyMatrix4(e),this.setXYZ(t,Mn.x,Mn.y,Mn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Mn.fromBufferAttribute(this,t),Mn.applyNormalMatrix(e),this.setXYZ(t,Mn.x,Mn.y,Mn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Mn.fromBufferAttribute(this,t),Mn.transformDirection(e),this.setXYZ(t,Mn.x,Mn.y,Mn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,o){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Nu&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}jt.prototype.isBufferAttribute=!0;class eN extends jt{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class tN extends jt{constructor(e,t,r){super(new Uint32Array(e),t,r)}}(class _8 extends jt{constructor(e,t,r){super(new Uint16Array(e),t,r)}}).prototype.isFloat16BufferAttribute=!0;class we extends jt{constructor(e,t,r){super(new Float32Array(e),t,r)}}let M8=0;const $r=new be,Q_=new St,Al=new C,Nr=new Wr,ku=new Wr,On=new C;class Ve extends Ls{constructor(){super(),Object.defineProperty(this,"id",{value:M8++}),this.uuid=Dr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(HA(e)?tN:eN)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(void 0!==r){const o=(new In).getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return $r.makeRotationFromQuaternion(e),this.applyMatrix4($r),this}rotateX(e){return $r.makeRotationX(e),this.applyMatrix4($r),this}rotateY(e){return $r.makeRotationY(e),this.applyMatrix4($r),this}rotateZ(e){return $r.makeRotationZ(e),this.applyMatrix4($r),this}translate(e,t,r){return $r.makeTranslation(e,t,r),this.applyMatrix4($r),this}scale(e,t,r){return $r.makeScale(e,t,r),this.applyMatrix4($r),this}lookAt(e){return Q_.lookAt(e),Q_.updateMatrix(),this.applyMatrix4(Q_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Al).negate(),this.translate(Al.x,Al.y,Al.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new we(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Wr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new C(-1/0,-1/0,-1/0),new C(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++)Nr.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(On.addVectors(this.boundingBox.min,Nr.min),this.boundingBox.expandByPoint(On),On.addVectors(this.boundingBox.max,Nr.max),this.boundingBox.expandByPoint(On)):(this.boundingBox.expandByPoint(Nr.min),this.boundingBox.expandByPoint(Nr.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new js);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new C,1/0);if(e){const r=this.boundingSphere.center;if(Nr.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++)ku.setFromBufferAttribute(t[o]),this.morphTargetsRelative?(On.addVectors(Nr.min,ku.min),Nr.expandByPoint(On),On.addVectors(Nr.max,ku.max),Nr.expandByPoint(On)):(Nr.expandByPoint(ku.min),Nr.expandByPoint(ku.max));Nr.getCenter(r);let i=0;for(let o=0,s=e.count;o<s;o++)On.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(On));if(t)for(let o=0,s=t.length;o<s;o++){const a=t[o],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)On.fromBufferAttribute(a,c),l&&(Al.fromBufferAttribute(e,c),On.add(Al)),i=Math.max(i,r.distanceToSquared(On))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const r=e.array,i=t.position.array,o=t.normal.array,s=t.uv.array,a=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new jt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let N=0;N<a;N++)c[N]=new C,u[N]=new C;const d=new C,h=new C,f=new C,p=new Z,g=new Z,m=new Z,y=new C,v=new C;function _(N,F,q){d.fromArray(i,3*N),h.fromArray(i,3*F),f.fromArray(i,3*q),p.fromArray(s,2*N),g.fromArray(s,2*F),m.fromArray(s,2*q),h.sub(d),f.sub(d),g.sub(p),m.sub(p);const re=1/(g.x*m.y-m.x*g.y);!isFinite(re)||(y.copy(h).multiplyScalar(m.y).addScaledVector(f,-g.y).multiplyScalar(re),v.copy(f).multiplyScalar(g.x).addScaledVector(h,-m.x).multiplyScalar(re),c[N].add(y),c[F].add(y),c[q].add(y),u[N].add(v),u[F].add(v),u[q].add(v))}let M=this.groups;0===M.length&&(M=[{start:0,count:r.length}]);for(let N=0,F=M.length;N<F;++N){const q=M[N],re=q.start;for(let z=re,B=re+q.count;z<B;z+=3)_(r[z+0],r[z+1],r[z+2])}const w=new C,b=new C,A=new C,x=new C;function E(N){A.fromArray(o,3*N),x.copy(A);const F=c[N];w.copy(F),w.sub(A.multiplyScalar(A.dot(F))).normalize(),b.crossVectors(x,F);const re=b.dot(u[N])<0?-1:1;l[4*N]=w.x,l[4*N+1]=w.y,l[4*N+2]=w.z,l[4*N+3]=re}for(let N=0,F=M.length;N<F;++N){const q=M[N],re=q.start;for(let z=re,B=re+q.count;z<B;z+=3)E(r[z+0]),E(r[z+1]),E(r[z+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let r=this.getAttribute("normal");if(void 0===r)r=new jt(new Float32Array(3*t.count),3),this.setAttribute("normal",r);else for(let h=0,f=r.count;h<f;h++)r.setXYZ(h,0,0,0);const i=new C,o=new C,s=new C,a=new C,l=new C,c=new C,u=new C,d=new C;if(e)for(let h=0,f=e.count;h<f;h+=3){const p=e.getX(h+0),g=e.getX(h+1),m=e.getX(h+2);i.fromBufferAttribute(t,p),o.fromBufferAttribute(t,g),s.fromBufferAttribute(t,m),u.subVectors(s,o),d.subVectors(i,o),u.cross(d),a.fromBufferAttribute(r,p),l.fromBufferAttribute(r,g),c.fromBufferAttribute(r,m),a.add(u),l.add(u),c.add(u),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(g,l.x,l.y,l.z),r.setXYZ(m,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)i.fromBufferAttribute(t,h+0),o.fromBufferAttribute(t,h+1),s.fromBufferAttribute(t,h+2),u.subVectors(s,o),d.subVectors(i,o),u.cross(d),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const i in r){if(void 0===e.attributes[i])continue;const s=r[i].array,a=e.attributes[i],l=a.array,c=a.itemSize*t,u=Math.min(l.length,s.length-c);for(let d=0,h=c;d<u;d++,h++)s[h]=l[d]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)On.fromBufferAttribute(e,t),On.normalize(),e.setXYZ(t,On.x,On.y,On.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,p=0;for(let g=0,m=l.length;g<m;g++){f=a.isInterleavedBufferAttribute?l[g]*a.data.stride+a.offset:l[g]*u;for(let y=0;y<u;y++)h[p++]=c[f++]}return new jt(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ve,r=this.index.array,i=this.attributes;for(const a in i){const c=e(i[a],r);t.setAttribute(a,c)}const o=this.morphAttributes;for(const a in o){const l=[],c=o[a];for(let u=0,d=c.length;u<d;u++){const f=e(c[u],r);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const c=s[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r)e.data.attributes[l]=r[l].toJSON(e.data);const i={};let o=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++)u.push(c[d].toJSON(e.data));u.length>0&&(i[l]=u,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;null!==r&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i)this.setAttribute(c,i[c].clone(t));const o=e.morphAttributes;for(const c in o){const u=[],d=o[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let c=0,u=s.length;c<u;c++){const d=s[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Ve.prototype.isBufferGeometry=!0;const nN=new be,Nl=new Ws,eM=new js,qo=new C,Xo=new C,Zo=new C,tM=new C,nM=new C,rM=new C,Kf=new C,Qf=new C,ep=new C,tp=new Z,np=new Z,rp=new Z,iM=new C,ip=new C;class Tn extends St{constructor(e=new Ve,t=new vo){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const r=this.geometry,i=this.material,o=this.matrixWorld;if(void 0===i||(null===r.boundingSphere&&r.computeBoundingSphere(),eM.copy(r.boundingSphere),eM.applyMatrix4(o),!1===e.ray.intersectsSphere(eM))||(nN.copy(o).invert(),Nl.copy(e.ray).applyMatrix4(nN),null!==r.boundingBox&&!1===Nl.intersectsBox(r.boundingBox)))return;let s;if(r.isBufferGeometry){const a=r.index,l=r.attributes.position,c=r.morphAttributes.position,u=r.morphTargetsRelative,d=r.attributes.uv,h=r.attributes.uv2,f=r.groups,p=r.drawRange;if(null!==a)if(Array.isArray(i))for(let g=0,m=f.length;g<m;g++){const y=f[g],v=i[y.materialIndex];for(let w=Math.max(y.start,p.start),b=Math.min(a.count,Math.min(y.start+y.count,p.start+p.count));w<b;w+=3){const A=a.getX(w),x=a.getX(w+1),E=a.getX(w+2);s=op(this,v,e,Nl,l,c,u,d,h,A,x,E),s&&(s.faceIndex=Math.floor(w/3),s.face.materialIndex=y.materialIndex,t.push(s))}}else for(let y=Math.max(0,p.start),v=Math.min(a.count,p.start+p.count);y<v;y+=3){const _=a.getX(y),M=a.getX(y+1),w=a.getX(y+2);s=op(this,i,e,Nl,l,c,u,d,h,_,M,w),s&&(s.faceIndex=Math.floor(y/3),t.push(s))}else if(void 0!==l)if(Array.isArray(i))for(let g=0,m=f.length;g<m;g++){const y=f[g],v=i[y.materialIndex];for(let w=Math.max(y.start,p.start),b=Math.min(l.count,Math.min(y.start+y.count,p.start+p.count));w<b;w+=3)s=op(this,v,e,Nl,l,c,u,d,h,w,w+1,w+2),s&&(s.faceIndex=Math.floor(w/3),s.face.materialIndex=y.materialIndex,t.push(s))}else for(let y=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);y<v;y+=3)s=op(this,i,e,Nl,l,c,u,d,h,y,y+1,y+2),s&&(s.faceIndex=Math.floor(y/3),t.push(s))}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function op(n,e,t,r,i,o,s,a,l,c,u,d){qo.fromBufferAttribute(i,c),Xo.fromBufferAttribute(i,u),Zo.fromBufferAttribute(i,d);const h=n.morphTargetInfluences;if(o&&h){Kf.set(0,0,0),Qf.set(0,0,0),ep.set(0,0,0);for(let p=0,g=o.length;p<g;p++){const m=h[p],y=o[p];0!==m&&(tM.fromBufferAttribute(y,c),nM.fromBufferAttribute(y,u),rM.fromBufferAttribute(y,d),s?(Kf.addScaledVector(tM,m),Qf.addScaledVector(nM,m),ep.addScaledVector(rM,m)):(Kf.addScaledVector(tM.sub(qo),m),Qf.addScaledVector(nM.sub(Xo),m),ep.addScaledVector(rM.sub(Zo),m)))}qo.add(Kf),Xo.add(Qf),Zo.add(ep)}n.isSkinnedMesh&&(n.boneTransform(c,qo),n.boneTransform(u,Xo),n.boneTransform(d,Zo));const f=function x8(n,e,t,r,i,o,s,a){let l;if(l=1===e.side?r.intersectTriangle(s,o,i,!0,a):r.intersectTriangle(i,o,s,2!==e.side,a),null===l)return null;ip.copy(a),ip.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(ip);return c<t.near||c>t.far?null:{distance:c,point:ip.clone(),object:n}}(n,e,t,r,qo,Xo,Zo,iM);if(f){a&&(tp.fromBufferAttribute(a,c),np.fromBufferAttribute(a,u),rp.fromBufferAttribute(a,d),f.uv=vn.getUV(iM,qo,Xo,Zo,tp,np,rp,new Z)),l&&(tp.fromBufferAttribute(l,c),np.fromBufferAttribute(l,u),rp.fromBufferAttribute(l,d),f.uv2=vn.getUV(iM,qo,Xo,Zo,tp,np,rp,new Z));const p={a:c,b:u,c:d,normal:new C,materialIndex:0};vn.getNormal(qo,Xo,Zo,p.normal),f.face=p}return f}Tn.prototype.isMesh=!0;class Yo extends Ve{constructor(e=1,t=1,r=1,i=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:o,depthSegments:s};const a=this;i=Math.floor(i),o=Math.floor(o),s=Math.floor(s);const l=[],c=[],u=[],d=[];let h=0,f=0;function p(g,m,y,v,_,M,w,b,A,x,E){const N=M/A,F=w/x,q=M/2,re=w/2,O=b/2,z=A+1,B=x+1;let K=0,ee=0;const U=new C;for(let W=0;W<B;W++){const oe=W*F-re;for(let ne=0;ne<z;ne++)U[g]=(ne*N-q)*v,U[m]=oe*_,U[y]=O,c.push(U.x,U.y,U.z),U[g]=0,U[m]=0,U[y]=b>0?1:-1,u.push(U.x,U.y,U.z),d.push(ne/A),d.push(1-W/x),K+=1}for(let W=0;W<x;W++)for(let oe=0;oe<A;oe++){const he=h+oe+z*(W+1),Ae=h+(oe+1)+z*(W+1),Ne=h+(oe+1)+z*W;l.push(h+oe+z*W,he,Ne),l.push(he,Ae,Ne),ee+=6}a.addGroup(f,ee,E),f+=ee,h+=K}p("z","y","x",-1,-1,r,t,e,s,o,0),p("z","y","x",1,-1,r,t,-e,s,o,1),p("x","z","y",1,1,e,r,t,i,s,2),p("x","z","y",1,-1,e,r,-t,i,s,3),p("x","y","z",1,-1,e,t,r,i,o,4),p("x","y","z",-1,-1,e,t,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new we(c,3)),this.setAttribute("normal",new we(u,3)),this.setAttribute("uv",new we(d,2))}static fromJSON(e){return new Yo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Pl(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];e[t][r]=i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.clone():Array.isArray(i)?i.slice():i}}return e}function Xn(n){const e={};for(let t=0;t<n.length;t++){const r=Pl(n[t]);for(const i in r)e[i]=r[i]}return e}const w8={clone:Pl,merge:Xn};class pi extends _n{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Pl(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;t.uniforms[i]=s&&s.isTexture?{type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?{type:"c",value:s.getHex()}:s&&s.isVector2?{type:"v2",value:s.toArray()}:s&&s.isVector3?{type:"v3",value:s.toArray()}:s&&s.isVector4?{type:"v4",value:s.toArray()}:s&&s.isMatrix3?{type:"m3",value:s.toArray()}:s&&s.isMatrix4?{type:"m4",value:s.toArray()}:{value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)!0===this.extensions[i]&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}pi.prototype.isShaderMaterial=!0;class sp extends St{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new be,this.projectionMatrix=new be,this.projectionMatrixInverse=new be}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}sp.prototype.isCamera=!0;class Fn extends sp{constructor(e=50,t=1,r=.1,i=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Iu*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*ks*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Iu*Math.atan(Math.tan(.5*ks*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,o,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*ks*this.fov)/this.zoom,r=2*t,i=this.aspect*r,o=-.5*i;const s=this.view;if(null!==this.view&&this.view.enabled){const l=s.fullWidth,c=s.fullHeight;o+=s.offsetX*i/l,t-=s.offsetY*r/c,i*=s.width/l,r*=s.height/c}const a=this.filmOffset;0!==a&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Fn.prototype.isPerspectiveCamera=!0;class oM extends St{constructor(e,t,r){if(super(),this.type="CubeCamera",!0!==r.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=r;const i=new Fn(90,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new C(1,0,0)),this.add(i);const o=new Fn(90,1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new C(-1,0,0)),this.add(o);const s=new Fn(90,1,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new C(0,1,0)),this.add(s);const a=new Fn(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new C(0,-1,0)),this.add(a);const l=new Fn(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new C(0,0,1)),this.add(l);const c=new Fn(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new C(0,0,-1)),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const r=this.renderTarget,[i,o,s,a,l,c]=this.children,u=e.getRenderTarget(),d=e.toneMapping,h=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const f=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,o),e.setRenderTarget(r,2),e.render(t,s),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=f,e.setRenderTarget(r,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=d,e.xr.enabled=h,r.texture.needsPMREMUpdate=!0}}class Bu extends or{constructor(e,t,r,i,o,s,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,r,i,o,s,a,l,c,u),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Bu.prototype.isCubeTexture=!0;class rN extends Tr{constructor(e,t={}){super(e,e,t);const r={width:e,height:e,depth:1};this.texture=new Bu([r,r,r,r,r,r],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:yn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r_uniforms={tEquirect:{value:null}},r_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",i=new Yo(5,5,5),o=new pi({name:"CubemapFromEquirect",uniforms:Pl(r_uniforms),vertexShader:r_vertexShader,fragmentShader:r_fragmentShader,side:1,blending:0});o.uniforms.tEquirect.value=t;const s=new Tn(i,o),a=t.minFilter;return 1008===t.minFilter&&(t.minFilter=yn),new oM(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,r,i){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(o)}}rN.prototype.isWebGLCubeRenderTarget=!0;const sM=new C,S8=new C,E8=new In;class _o{constructor(e=new C(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=sM.subVectors(r,t).cross(S8.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(sM),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:t.copy(r).multiplyScalar(o).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||E8.getNormalMatrix(e),i=this.coplanarPoint(sM).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}_o.prototype.isPlane=!0;const Ol=new js,ap=new C;class lp{constructor(e=new _o,t=new _o,r=new _o,i=new _o,o=new _o,s=new _o){this.planes=[e,t,r,i,o,s]}set(e,t,r,i,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(o),a[5].copy(s),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],o=r[1],s=r[2],a=r[3],l=r[4],c=r[5],u=r[6],d=r[7],h=r[8],f=r[9],p=r[10],g=r[11],m=r[12],y=r[13],v=r[14],_=r[15];return t[0].setComponents(a-i,d-l,g-h,_-m).normalize(),t[1].setComponents(a+i,d+l,g+h,_+m).normalize(),t[2].setComponents(a+o,d+c,g+f,_+y).normalize(),t[3].setComponents(a-o,d-c,g-f,_-y).normalize(),t[4].setComponents(a-s,d-u,g-p,_-v).normalize(),t[5].setComponents(a+s,d+u,g+p,_+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Ol.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ol)}intersectsSprite(e){return Ol.center.set(0,0,0),Ol.radius=.7071067811865476,Ol.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ol)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(ap.x=i.normal.x>0?e.max.x:e.min.x,ap.y=i.normal.y>0?e.max.y:e.min.y,ap.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(ap)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function iN(){let n=null,e=!1,t=null,r=null;function i(o,s){t(o,s),r=n.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==t&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function D8(n,e){const t=e.isWebGL2,r=new WeakMap;return{get:function s(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(n.deleteBuffer(u.buffer),r.delete(c))},update:function l(c,u){if(c.isGLBufferAttribute){const h=r.get(c);return void((!h||h.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);void 0===d?r.set(c,function i(c,u){const d=c.array,h=c.usage,f=n.createBuffer();let p;if(n.bindBuffer(u,f),n.bufferData(u,d,h),c.onUploadCallback(),d instanceof Float32Array)p=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");p=5131}else p=5123;else if(d instanceof Int16Array)p=5122;else if(d instanceof Uint32Array)p=5125;else if(d instanceof Int32Array)p=5124;else if(d instanceof Int8Array)p=5120;else if(d instanceof Uint8Array)p=5121;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);p=5121}return{buffer:f,type:p,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}(c,u)):d.version<c.version&&(function o(c,u,d){const h=u.array,f=u.updateRange;n.bindBuffer(d,c),-1===f.count?n.bufferSubData(d,0,h):(t?n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}(d.buffer,c,u),d.version=c.version)}}}class Vu extends Ve{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const o=e/2,s=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,h=t/l,f=[],p=[],g=[],m=[];for(let y=0;y<u;y++){const v=y*h-s;for(let _=0;_<c;_++)p.push(_*d-o,-v,0),g.push(0,0,1),m.push(_/a),m.push(1-y/l)}for(let y=0;y<l;y++)for(let v=0;v<a;v++){const M=v+c*(y+1),w=v+1+c*(y+1),b=v+1+c*y;f.push(v+c*y,M,b),f.push(M,w,b)}this.setIndex(f),this.setAttribute("position",new we(p,3)),this.setAttribute("normal",new we(g,3)),this.setAttribute("uv",new we(m,2))}static fromJSON(e){return new Vu(e.width,e.height,e.widthSegments,e.heightSegments)}}const ht={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},de={common:{diffuse:{value:new pe(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new In},uv2Transform:{value:new In},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Z(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new pe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new In}},sprite:{diffuse:{value:new pe(16777215)},opacity:{value:1},center:{value:new Z(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new In}}},Pi={basic:{uniforms:Xn([de.common,de.specularmap,de.envmap,de.aomap,de.lightmap,de.fog]),vertexShader:ht.meshbasic_vert,fragmentShader:ht.meshbasic_frag},lambert:{uniforms:Xn([de.common,de.specularmap,de.envmap,de.aomap,de.lightmap,de.emissivemap,de.fog,de.lights,{emissive:{value:new pe(0)}}]),vertexShader:ht.meshlambert_vert,fragmentShader:ht.meshlambert_frag},phong:{uniforms:Xn([de.common,de.specularmap,de.envmap,de.aomap,de.lightmap,de.emissivemap,de.bumpmap,de.normalmap,de.displacementmap,de.fog,de.lights,{emissive:{value:new pe(0)},specular:{value:new pe(1118481)},shininess:{value:30}}]),vertexShader:ht.meshphong_vert,fragmentShader:ht.meshphong_frag},standard:{uniforms:Xn([de.common,de.envmap,de.aomap,de.lightmap,de.emissivemap,de.bumpmap,de.normalmap,de.displacementmap,de.roughnessmap,de.metalnessmap,de.fog,de.lights,{emissive:{value:new pe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ht.meshphysical_vert,fragmentShader:ht.meshphysical_frag},toon:{uniforms:Xn([de.common,de.aomap,de.lightmap,de.emissivemap,de.bumpmap,de.normalmap,de.displacementmap,de.gradientmap,de.fog,de.lights,{emissive:{value:new pe(0)}}]),vertexShader:ht.meshtoon_vert,fragmentShader:ht.meshtoon_frag},matcap:{uniforms:Xn([de.common,de.bumpmap,de.normalmap,de.displacementmap,de.fog,{matcap:{value:null}}]),vertexShader:ht.meshmatcap_vert,fragmentShader:ht.meshmatcap_frag},points:{uniforms:Xn([de.points,de.fog]),vertexShader:ht.points_vert,fragmentShader:ht.points_frag},dashed:{uniforms:Xn([de.common,de.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ht.linedashed_vert,fragmentShader:ht.linedashed_frag},depth:{uniforms:Xn([de.common,de.displacementmap]),vertexShader:ht.depth_vert,fragmentShader:ht.depth_frag},normal:{uniforms:Xn([de.common,de.bumpmap,de.normalmap,de.displacementmap,{opacity:{value:1}}]),vertexShader:ht.meshnormal_vert,fragmentShader:ht.meshnormal_frag},sprite:{uniforms:Xn([de.sprite,de.fog]),vertexShader:ht.sprite_vert,fragmentShader:ht.sprite_frag},background:{uniforms:{uvTransform:{value:new In},t2D:{value:null}},vertexShader:ht.background_vert,fragmentShader:ht.background_frag},cube:{uniforms:Xn([de.envmap,{opacity:{value:1}}]),vertexShader:ht.cube_vert,fragmentShader:ht.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ht.equirect_vert,fragmentShader:ht.equirect_frag},distanceRGBA:{uniforms:Xn([de.common,de.displacementmap,{referencePosition:{value:new C},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ht.distanceRGBA_vert,fragmentShader:ht.distanceRGBA_frag},shadow:{uniforms:Xn([de.lights,de.fog,{color:{value:new pe(0)},opacity:{value:1}}]),vertexShader:ht.shadow_vert,fragmentShader:ht.shadow_frag}};function b6(n,e,t,r,i,o){const s=new pe(0);let l,c,a=!0===i?0:1,u=null,d=0,h=null;function p(g,m){t.buffers.color.setClear(g.r,g.g,g.b,m,o)}return{getClearColor:function(){return s},setClearColor:function(g,m=1){s.set(g),a=m,p(s,a)},getClearAlpha:function(){return a},setClearAlpha:function(g){a=g,p(s,a)},render:function f(g,m){let y=!1,v=!0===m.isScene?m.background:null;v&&v.isTexture&&(v=e.get(v));const _=n.xr,M=_.getSession&&_.getSession();M&&"additive"===M.environmentBlendMode&&(v=null),null===v?p(s,a):v&&v.isColor&&(p(v,1),y=!0),(n.autoClear||y)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),v&&(v.isCubeTexture||306===v.mapping)?(void 0===c&&(c=new Tn(new Yo(1,1,1),new pi({name:"BackgroundCubeMaterial",uniforms:Pl(Pi.cube.uniforms),vertexShader:Pi.cube.vertexShader,fragmentShader:Pi.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(w,b,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,(u!==v||d!==v.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,u=v,d=v.version,h=n.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new Tn(new Vu(2,2),new pi({name:"BackgroundMaterial",uniforms:Pl(Pi.background.uniforms),vertexShader:Pi.background.vertexShader,fragmentShader:Pi.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=v,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),(u!==v||d!==v.version||h!==n.toneMapping)&&(l.material.needsUpdate=!0,u=v,d=v.version,h=n.toneMapping),l.layers.enableAll(),g.unshift(l,l.geometry,l.material,0,0,null))}}}function C6(n,e,t,r){const i=n.getParameter(34921),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||null!==o,a={},l=m(null);let c=l,u=!1;function f(O){return r.isWebGL2?n.bindVertexArray(O):o.bindVertexArrayOES(O)}function p(O){return r.isWebGL2?n.deleteVertexArray(O):o.deleteVertexArrayOES(O)}function m(O){const z=[],B=[],K=[];for(let ee=0;ee<i;ee++)z[ee]=0,B[ee]=0,K[ee]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:z,enabledAttributes:B,attributeDivisors:K,object:O,attributes:{},index:null}}function _(){const O=c.newAttributes;for(let z=0,B=O.length;z<B;z++)O[z]=0}function M(O){w(O,0)}function w(O,z){const K=c.enabledAttributes,ee=c.attributeDivisors;c.newAttributes[O]=1,0===K[O]&&(n.enableVertexAttribArray(O),K[O]=1),ee[O]!==z&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](O,z),ee[O]=z)}function b(){const O=c.newAttributes,z=c.enabledAttributes;for(let B=0,K=z.length;B<K;B++)z[B]!==O[B]&&(n.disableVertexAttribArray(B),z[B]=0)}function A(O,z,B,K,ee,U){!0!==r.isWebGL2||5124!==B&&5125!==B?n.vertexAttribPointer(O,z,B,K,ee,U):n.vertexAttribIPointer(O,z,B,ee,U)}function q(){re(),u=!0,c!==l&&(c=l,f(c.object))}function re(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function d(O,z,B,K,ee){let U=!1;if(s){const W=function g(O,z,B){const K=!0===B.wireframe;let ee=a[O.id];void 0===ee&&(ee={},a[O.id]=ee);let U=ee[z.id];void 0===U&&(U={},ee[z.id]=U);let W=U[K];return void 0===W&&(W=m(function h(){return r.isWebGL2?n.createVertexArray():o.createVertexArrayOES()}()),U[K]=W),W}(K,B,z);c!==W&&(c=W,f(c.object)),U=function y(O,z,B,K){const ee=c.attributes,U=z.attributes;let W=0;const oe=B.getAttributes();for(const ne in oe)if(oe[ne].location>=0){const Ae=ee[ne];let Ne=U[ne];if(void 0===Ne&&("instanceMatrix"===ne&&O.instanceMatrix&&(Ne=O.instanceMatrix),"instanceColor"===ne&&O.instanceColor&&(Ne=O.instanceColor)),void 0===Ae||Ae.attribute!==Ne||Ne&&Ae.data!==Ne.data)return!0;W++}return c.attributesNum!==W||c.index!==K}(O,K,B,ee),U&&function v(O,z,B,K){const ee={},U=z.attributes;let W=0;const oe=B.getAttributes();for(const ne in oe)if(oe[ne].location>=0){let Ae=U[ne];void 0===Ae&&("instanceMatrix"===ne&&O.instanceMatrix&&(Ae=O.instanceMatrix),"instanceColor"===ne&&O.instanceColor&&(Ae=O.instanceColor));const Ne={};Ne.attribute=Ae,Ae&&Ae.data&&(Ne.data=Ae.data),ee[ne]=Ne,W++}c.attributes=ee,c.attributesNum=W,c.index=K}(O,K,B,ee)}else{const W=!0===z.wireframe;(c.geometry!==K.id||c.program!==B.id||c.wireframe!==W)&&(c.geometry=K.id,c.program=B.id,c.wireframe=W,U=!0)}null!==ee&&t.update(ee,34963),(U||u)&&(u=!1,function x(O,z,B,K){if(!1===r.isWebGL2&&(O.isInstancedMesh||K.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;_();const ee=K.attributes,U=B.getAttributes(),W=z.defaultAttributeValues;for(const oe in U){const ne=U[oe];if(ne.location>=0){let he=ee[oe];if(void 0===he&&("instanceMatrix"===oe&&O.instanceMatrix&&(he=O.instanceMatrix),"instanceColor"===oe&&O.instanceColor&&(he=O.instanceColor)),void 0!==he){const Ae=he.normalized,Ne=he.itemSize,$=t.get(he);if(void 0===$)continue;const Dt=$.buffer,je=$.type,st=$.bytesPerElement;if(he.isInterleavedBufferAttribute){const ce=he.data,gt=ce.stride,Q=he.offset;if(ce.isInstancedInterleavedBuffer){for(let Y=0;Y<ne.locationSize;Y++)w(ne.location+Y,ce.meshPerAttribute);!0!==O.isInstancedMesh&&void 0===K._maxInstanceCount&&(K._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let Y=0;Y<ne.locationSize;Y++)M(ne.location+Y);n.bindBuffer(34962,Dt);for(let Y=0;Y<ne.locationSize;Y++)A(ne.location+Y,Ne/ne.locationSize,je,Ae,gt*st,(Q+Ne/ne.locationSize*Y)*st)}else{if(he.isInstancedBufferAttribute){for(let ce=0;ce<ne.locationSize;ce++)w(ne.location+ce,he.meshPerAttribute);!0!==O.isInstancedMesh&&void 0===K._maxInstanceCount&&(K._maxInstanceCount=he.meshPerAttribute*he.count)}else for(let ce=0;ce<ne.locationSize;ce++)M(ne.location+ce);n.bindBuffer(34962,Dt);for(let ce=0;ce<ne.locationSize;ce++)A(ne.location+ce,Ne/ne.locationSize,je,Ae,Ne*st,Ne/ne.locationSize*ce*st)}}else if(void 0!==W){const Ae=W[oe];if(void 0!==Ae)switch(Ae.length){case 2:n.vertexAttrib2fv(ne.location,Ae);break;case 3:n.vertexAttrib3fv(ne.location,Ae);break;case 4:n.vertexAttrib4fv(ne.location,Ae);break;default:n.vertexAttrib1fv(ne.location,Ae)}}}}b()}(O,z,B,K),null!==ee&&n.bindBuffer(34963,t.get(ee).buffer))},reset:q,resetDefaultState:re,dispose:function E(){q();for(const O in a){const z=a[O];for(const B in z){const K=z[B];for(const ee in K)p(K[ee].object),delete K[ee];delete z[B]}delete a[O]}},releaseStatesOfGeometry:function N(O){if(void 0===a[O.id])return;const z=a[O.id];for(const B in z){const K=z[B];for(const ee in K)p(K[ee].object),delete K[ee];delete z[B]}delete a[O.id]},releaseStatesOfProgram:function F(O){for(const z in a){const B=a[z];if(void 0===B[O.id])continue;const K=B[O.id];for(const ee in K)p(K[ee].object),delete K[ee];delete B[O.id]}},initAttributes:_,enableAttribute:M,disableUnusedAttributes:b}}function S6(n,e,t,r){const i=r.isWebGL2;let o;this.setMode=function s(c){o=c},this.render=function a(c,u){n.drawArrays(o,c,u),t.update(u,o,1)},this.renderInstances=function l(c,u,d){if(0===d)return;let h,f;if(i)h=n,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](o,c,u,d),t.update(u,o,d)}}function E6(n,e,t){let r;function o(A){if("highp"===A){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";A="mediump"}return"mediump"===A&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=s||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,d=n.getParameter(34930),h=n.getParameter(35660),f=n.getParameter(3379),p=n.getParameter(34076),g=n.getParameter(34921),m=n.getParameter(36347),y=n.getParameter(36348),v=n.getParameter(36349),_=h>0,M=s||e.has("OES_texture_float");return{isWebGL2:s,drawBuffers:c,getMaxAnisotropy:function i(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const A=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:o,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:p,maxAttributes:g,maxVertexUniforms:m,maxVaryings:y,maxFragmentUniforms:v,vertexTextures:_,floatFragmentTextures:M,floatVertexTextures:_&&M,maxSamples:s?n.getParameter(36183):0}}function D6(n){const e=this;let t=null,r=0,i=!1,o=!1;const s=new _o,a=new In,l={value:null,needsUpdate:!1};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,h,f,p){const g=null!==d?d.length:0;let m=null;if(0!==g){if(m=l.value,!0!==p||null===m){const y=f+4*g,v=h.matrixWorldInverse;a.getNormalMatrix(v),(null===m||m.length<y)&&(m=new Float32Array(y));for(let _=0,M=f;_!==g;++_,M+=4)s.copy(d[_]).applyMatrix4(v,a),s.normal.toArray(m,M),m[M+3]=s.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,m}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,f){const p=0!==d.length||h||0!==r||i;return i=h,t=u(d,f,0),r=d.length,p},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,c()},this.setState=function(d,h,f){const p=d.clippingPlanes,g=d.clipIntersection,m=d.clipShadows,y=n.get(d);if(!i||null===p||0===p.length||o&&!m)o?u(null):c();else{const v=o?0:r,_=4*v;let M=y.clippingState||null;l.value=M,M=u(p,h,_,f);for(let w=0;w!==_;++w)M[w]=t[w];y.clippingState=M,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=v}}}function T6(n){let e=new WeakMap;function t(s,a){return 303===a?s.mapping=301:304===a&&(s.mapping=302),s}function i(s){const a=s.target;a.removeEventListener("dispose",i);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function r(s){if(s&&s.isTexture&&!1===s.isRenderTargetTexture){const a=s.mapping;if(303===a||304===a){if(e.has(s))return t(e.get(s).texture,s.mapping);{const l=s.image;if(l&&l.height>0){const c=new rN(l.height/2);return c.fromEquirectangularTexture(n,s),e.set(s,c),s.addEventListener("dispose",i),t(c.texture,s.mapping)}return null}}}return s},dispose:function o(){e=new WeakMap}}}Pi.physical={uniforms:Xn([Pi.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Z(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new pe(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Z},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new pe(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new pe(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ht.meshphysical_vert,fragmentShader:ht.meshphysical_frag};class Gu extends sp{constructor(e=-1,t=1,r=1,i=-1,o=.1,s=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,o,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,s=r+e,a=i+t,l=i-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=c*this.view.offsetX,s=o+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}Gu.prototype.isOrthographicCamera=!0;const oN=[.125,.215,.35,.446,.526,.582],aM=new Gu,sN=new pe;let lM=null;const qs=(1+Math.sqrt(5))/2,Ll=1/qs,aN=[new C(1,1,1),new C(-1,1,1),new C(1,1,-1),new C(-1,1,-1),new C(0,qs,Ll),new C(0,qs,-Ll),new C(Ll,0,qs),new C(-Ll,0,qs),new C(qs,Ll,0),new C(-qs,Ll,0)];class lN{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){lM=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=dN(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=uN(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(lM),e.scissorTest=!1,cp(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),lM=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:yn,minFilter:yn,generateMipmaps:!1,type:Au,format:zr,encoding:co,depthBuffer:!1},i=cN(e,t,r);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=cN(e,t,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function A6(n){const e=[],t=[],r=[];let i=n;const o=n-4+1+oN.length;for(let s=0;s<o;s++){const a=Math.pow(2,i);t.push(a);let l=1/a;s>n-4?l=oN[s-n+4-1]:0===s&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,p=6,g=3,m=2,y=1,v=new Float32Array(g*p*f),_=new Float32Array(m*p*f),M=new Float32Array(y*p*f);for(let b=0;b<f;b++){const A=b%3*2/3-1,x=b>2?0:-1;v.set([A,x,0,A+2/3,x,0,A+2/3,x+1,0,A,x,0,A+2/3,x+1,0,A,x+1,0],g*p*b),_.set(h,m*p*b),M.set([b,b,b,b,b,b],y*p*b)}const w=new Ve;w.setAttribute("position",new jt(v,g)),w.setAttribute("uv",new jt(_,m)),w.setAttribute("faceIndex",new jt(M,y)),e.push(w),i>4&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}(o)),this._blurMaterial=function N6(n,e,t){const r=new Float32Array(20),i=new C(0,1,0);return new pi({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(o,e,t)}return i}_compileMaterial(e){const t=new Tn(this._lodPlanes[0],e);this._renderer.compile(t,aM)}_sceneToCubeUV(e,t,r,i){const a=new Fn(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(sN),u.toneMapping=0,u.autoClear=!1;const f=new vo({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new Tn(new Yo,f);let g=!1;const m=e.background;m?m.isColor&&(f.color.copy(m),e.background=null,g=!0):(f.color.copy(sN),g=!0);for(let y=0;y<6;y++){const v=y%3;0===v?(a.up.set(0,l[y],0),a.lookAt(c[y],0,0)):1===v?(a.up.set(0,0,l[y]),a.lookAt(0,c[y],0)):(a.up.set(0,l[y],0),a.lookAt(0,0,c[y]));const _=this._cubeSize;cp(i,v*_,y>2?_:0,_,_),u.setRenderTarget(i),g&&u.render(p,a),u.render(e,a)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=m}_textureToCubeUV(e,t){const r=this._renderer,i=301===e.mapping||302===e.mapping;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=dN()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=uN());const o=i?this._cubemapMaterial:this._equirectMaterial,s=new Tn(this._lodPlanes[0],o);o.uniforms.envMap.value=e;const l=this._cubeSize;cp(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(s,aM)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]);this._blur(e,i-1,i,o,aN[(i-1)%aN.length])}t.autoClear=r}_blur(e,t,r,i,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",o),this._halfBlur(s,e,r,r,i,"longitudinal",o)}_halfBlur(e,t,r,i,o,s,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new Tn(this._lodPlanes[i],c),h=c.uniforms,f=this._sizeLods[r]-1,p=isFinite(o)?Math.PI/(2*f):2*Math.PI/39,g=o/p,m=isFinite(o)?1+Math.floor(3*g):20;m>20&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const y=[];let v=0;for(let A=0;A<20;++A){const x=A/g,E=Math.exp(-x*x/2);y.push(E),0===A?v+=E:A<m&&(v+=2*E)}for(let A=0;A<y.length;A++)y[A]=y[A]/v;h.envMap.value=e.texture,h.samples.value=m,h.weights.value=y,h.latitudinal.value="latitudinal"===s,a&&(h.poleAxis.value=a);const{_lodMax:_}=this;h.dTheta.value=p,h.mipInt.value=_-r;const M=this._sizeLods[i];cp(t,3*M*(i>_-4?i-_+4:0),4*(this._cubeSize-M),3*M,2*M),l.setRenderTarget(t),l.render(d,aM)}}function cN(n,e,t){const r=new Tr(n,e,t);return r.texture.mapping=306,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function cp(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function uN(){return new pi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function dN(){return new pi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function P6(n){let e=new WeakMap,t=null;function o(a){const l=a.target;l.removeEventListener("dispose",o);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function r(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,u=301===l||302===l;if(c||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let d=e.get(a);return null===t&&(t=new lN(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&function i(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(d)){null===t&&(t=new lN(n));const h=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",o),h.texture}return null}}}return a},dispose:function s(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function I6(n){const e={};function t(r){if(void 0!==e[r])return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return null!==t(r)},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return null===i&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function R6(n,e,t,r){const i={},o=new WeakMap;function s(d){const h=d.target;null!==h.index&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",s),delete i[h.id];const f=o.get(h);f&&(e.remove(f),o.delete(h)),r.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function c(d){const h=[],f=d.index,p=d.attributes.position;let g=0;if(null!==f){const v=f.array;g=f.version;for(let _=0,M=v.length;_<M;_+=3){const w=v[_+0],b=v[_+1],A=v[_+2];h.push(w,b,b,A,A,w)}}else{g=p.version;for(let _=0,M=p.array.length/3-1;_<M;_+=3){const w=_+0,b=_+1,A=_+2;h.push(w,b,b,A,A,w)}}const m=new(HA(h)?tN:eN)(h,1);m.version=g;const y=o.get(d);y&&e.remove(y),o.set(d,m)}return{get:function a(d,h){return!0===i[h.id]||(h.addEventListener("dispose",s),i[h.id]=!0,t.memory.geometries++),h},update:function l(d){const h=d.attributes;for(const p in h)e.update(h[p],34962);const f=d.morphAttributes;for(const p in f){const g=f[p];for(let m=0,y=g.length;m<y;m++)e.update(g[m],34962)}},getWireframeAttribute:function u(d){const h=o.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&c(d)}else c(d);return o.get(d)}}}function O6(n,e,t,r){const i=r.isWebGL2;let o,a,l;this.setMode=function s(h){o=h},this.setIndex=function c(h){a=h.type,l=h.bytesPerElement},this.render=function u(h,f){n.drawElements(o,f,a,h*l),t.update(f,o,1)},this.renderInstances=function d(h,f,p){if(0===p)return;let g,m;if(i)g=n,m="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",null===g)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");g[m](o,f,a,h*l,p),t.update(f,o,p)}}function F6(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function r(o,s,a){switch(t.calls++,s){case 4:t.triangles+=a*(o/3);break;case 1:t.lines+=a*(o/2);break;case 3:t.lines+=a*(o-1);break;case 2:t.lines+=a*o;break;case 0:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s)}}}}function L6(n,e){return n[0]-e[0]}function k6(n,e){return Math.abs(e[1])-Math.abs(n[1])}function uM(n,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),n.divideScalar(t)}function B6(n,e,t){const r={},i=new Float32Array(8),o=new WeakMap,s=new Nt,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,d,h){const f=c.morphTargetInfluences;if(!0===e.isWebGL2){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,g=void 0!==p?p.length:0;let m=o.get(u);if(void 0===m||m.count!==g){let z=function(){re.dispose(),o.delete(u),u.removeEventListener("dispose",z)};void 0!==m&&m.texture.dispose();const _=void 0!==u.morphAttributes.position,M=void 0!==u.morphAttributes.normal,w=void 0!==u.morphAttributes.color,b=u.morphAttributes.position||[],A=u.morphAttributes.normal||[],x=u.morphAttributes.color||[];let E=0;!0===_&&(E=1),!0===M&&(E=2),!0===w&&(E=3);let N=u.attributes.position.count*E,F=1;N>e.maxTextureSize&&(F=Math.ceil(N/e.maxTextureSize),N=e.maxTextureSize);const q=new Float32Array(N*F*4*g),re=new zf(q,N,F,g);re.type=Ho,re.needsUpdate=!0;const O=4*E;for(let B=0;B<g;B++){const K=b[B],ee=A[B],U=x[B],W=N*F*4*B;for(let oe=0;oe<K.count;oe++){const ne=oe*O;!0===_&&(s.fromBufferAttribute(K,oe),!0===K.normalized&&uM(s,K),q[W+ne+0]=s.x,q[W+ne+1]=s.y,q[W+ne+2]=s.z,q[W+ne+3]=0),!0===M&&(s.fromBufferAttribute(ee,oe),!0===ee.normalized&&uM(s,ee),q[W+ne+4]=s.x,q[W+ne+5]=s.y,q[W+ne+6]=s.z,q[W+ne+7]=0),!0===w&&(s.fromBufferAttribute(U,oe),!0===U.normalized&&uM(s,U),q[W+ne+8]=s.x,q[W+ne+9]=s.y,q[W+ne+10]=s.z,q[W+ne+11]=4===U.itemSize?s.w:1)}}m={count:g,texture:re,size:new Z(N,F)},o.set(u,m),u.addEventListener("dispose",z)}let y=0;for(let _=0;_<f.length;_++)y+=f[_];const v=u.morphTargetsRelative?1:1-y;h.getUniforms().setValue(n,"morphTargetBaseInfluence",v),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",m.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}else{const p=void 0===f?0:f.length;let g=r[u.id];if(void 0===g||g.length!==p){g=[];for(let M=0;M<p;M++)g[M]=[M,0];r[u.id]=g}for(let M=0;M<p;M++){const w=g[M];w[0]=M,w[1]=f[M]}g.sort(k6);for(let M=0;M<8;M++)M<p&&g[M][1]?(a[M][0]=g[M][0],a[M][1]=g[M][1]):(a[M][0]=Number.MAX_SAFE_INTEGER,a[M][1]=0);a.sort(L6);const m=u.morphAttributes.position,y=u.morphAttributes.normal;let v=0;for(let M=0;M<8;M++){const w=a[M],b=w[0],A=w[1];b!==Number.MAX_SAFE_INTEGER&&A?(m&&u.getAttribute("morphTarget"+M)!==m[b]&&u.setAttribute("morphTarget"+M,m[b]),y&&u.getAttribute("morphNormal"+M)!==y[b]&&u.setAttribute("morphNormal"+M,y[b]),i[M]=A,v+=A):(m&&!0===u.hasAttribute("morphTarget"+M)&&u.deleteAttribute("morphTarget"+M),y&&!0===u.hasAttribute("morphNormal"+M)&&u.deleteAttribute("morphNormal"+M),i[M]=0)}const _=u.morphTargetsRelative?1:1-v;h.getUniforms().setValue(n,"morphTargetBaseInfluence",_),h.getUniforms().setValue(n,"morphTargetInfluences",i)}}}}function V6(n,e,t,r){let i=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function o(l){const c=r.render.frame,d=e.get(l,l.geometry);return i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),null!==l.instanceColor&&t.update(l.instanceColor,34962)),d},dispose:function s(){i=new WeakMap}}}const hN=new or,fN=new zf,pN=new U_,gN=new Bu,mN=[],yN=[],vN=new Float32Array(16),_N=new Float32Array(9),MN=new Float32Array(4);function kl(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let o=mN[i];if(void 0===o&&(o=new Float32Array(i),mN[i]=o),0!==e){r.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function sr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function ar(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function up(n,e){let t=yN[e];void 0===t&&(t=new Int32Array(e),yN[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function G6(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function U6(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(sr(t,e))return;n.uniform2fv(this.addr,e),ar(t,e)}}function H6(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(sr(t,e))return;n.uniform3fv(this.addr,e),ar(t,e)}}function z6(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(sr(t,e))return;n.uniform4fv(this.addr,e),ar(t,e)}}function j6(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(sr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ar(t,e)}else{if(sr(t,r))return;MN.set(r),n.uniformMatrix2fv(this.addr,!1,MN),ar(t,r)}}function W6(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(sr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ar(t,e)}else{if(sr(t,r))return;_N.set(r),n.uniformMatrix3fv(this.addr,!1,_N),ar(t,r)}}function $6(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(sr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ar(t,e)}else{if(sr(t,r))return;vN.set(r),n.uniformMatrix4fv(this.addr,!1,vN),ar(t,r)}}function q6(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function X6(n,e){const t=this.cache;sr(t,e)||(n.uniform2iv(this.addr,e),ar(t,e))}function Z6(n,e){const t=this.cache;sr(t,e)||(n.uniform3iv(this.addr,e),ar(t,e))}function Y6(n,e){const t=this.cache;sr(t,e)||(n.uniform4iv(this.addr,e),ar(t,e))}function J6(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function K6(n,e){const t=this.cache;sr(t,e)||(n.uniform2uiv(this.addr,e),ar(t,e))}function Q6(n,e){const t=this.cache;sr(t,e)||(n.uniform3uiv(this.addr,e),ar(t,e))}function e$(n,e){const t=this.cache;sr(t,e)||(n.uniform4uiv(this.addr,e),ar(t,e))}function t$(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||hN,i)}function n$(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||pN,i)}function r$(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||gN,i)}function i$(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||fN,i)}function s$(n,e){n.uniform1fv(this.addr,e)}function a$(n,e){const t=kl(e,this.size,2);n.uniform2fv(this.addr,t)}function l$(n,e){const t=kl(e,this.size,3);n.uniform3fv(this.addr,t)}function c$(n,e){const t=kl(e,this.size,4);n.uniform4fv(this.addr,t)}function u$(n,e){const t=kl(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function d$(n,e){const t=kl(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function h$(n,e){const t=kl(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function f$(n,e){n.uniform1iv(this.addr,e)}function p$(n,e){n.uniform2iv(this.addr,e)}function g$(n,e){n.uniform3iv(this.addr,e)}function m$(n,e){n.uniform4iv(this.addr,e)}function y$(n,e){n.uniform1uiv(this.addr,e)}function v$(n,e){n.uniform2uiv(this.addr,e)}function _$(n,e){n.uniform3uiv(this.addr,e)}function M$(n,e){n.uniform4uiv(this.addr,e)}function x$(n,e,t){const r=e.length,i=up(t,r);n.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)t.setTexture2D(e[o]||hN,i[o])}function w$(n,e,t){const r=e.length,i=up(t,r);n.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)t.setTexture3D(e[o]||pN,i[o])}function b$(n,e,t){const r=e.length,i=up(t,r);n.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)t.setTextureCube(e[o]||gN,i[o])}function C$(n,e,t){const r=e.length,i=up(t,r);n.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||fN,i[o])}function E$(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=function o$(n){switch(n){case 5126:return G6;case 35664:return U6;case 35665:return H6;case 35666:return z6;case 35674:return j6;case 35675:return W6;case 35676:return $6;case 5124:case 35670:return q6;case 35667:case 35671:return X6;case 35668:case 35672:return Z6;case 35669:case 35673:return Y6;case 5125:return J6;case 36294:return K6;case 36295:return Q6;case 36296:return e$;case 35678:case 36198:case 36298:case 36306:case 35682:return t$;case 35679:case 36299:case 36307:return n$;case 35680:case 36300:case 36308:case 36293:return r$;case 36289:case 36303:case 36311:case 36292:return i$}}(e.type)}function D$(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=function S$(n){switch(n){case 5126:return s$;case 35664:return a$;case 35665:return l$;case 35666:return c$;case 35674:return u$;case 35675:return d$;case 35676:return h$;case 5124:case 35670:return f$;case 35667:case 35671:return p$;case 35668:case 35672:return g$;case 35669:case 35673:return m$;case 5125:return y$;case 36294:return v$;case 36295:return _$;case 36296:return M$;case 35678:case 36198:case 36298:case 36306:case 35682:return x$;case 35679:case 36299:case 36307:return w$;case 35680:case 36300:case 36308:case 36293:return b$;case 36289:case 36303:case 36311:case 36292:return C$}}(e.type)}function xN(n){this.id=n,this.seq=[],this.map={}}xN.prototype.setValue=function(n,e,t){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const s=r[i];s.setValue(n,e[s.id],t)}};const dM=/(\w+)(\])?(\[|\.)?/g;function wN(n,e){n.seq.push(e),n.map[e.id]=e}function T$(n,e,t){const r=n.name,i=r.length;for(dM.lastIndex=0;;){const o=dM.exec(r),s=dM.lastIndex;let a=o[1];const c=o[3];if("]"===o[2]&&(a|=0),void 0===c||"["===c&&s+2===i){wN(t,void 0===c?new E$(a,n,e):new D$(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new xN(a),wN(t,d)),t=d}}}function Jo(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let r=0;r<t;++r){const i=n.getActiveUniform(e,r);T$(i,n.getUniformLocation(e,i.name),this)}}function bN(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}Jo.prototype.setValue=function(n,e,t,r){const i=this.map[e];void 0!==i&&i.setValue(n,t,r)},Jo.prototype.setOptional=function(n,e,t){const r=e[t];void 0!==r&&this.setValue(n,t,r)},Jo.upload=function(n,e,t,r){for(let i=0,o=e.length;i!==o;++i){const s=e[i],a=t[s.id];!1!==a.needsUpdate&&s.setValue(n,a.value,r)}},Jo.seqWithValue=function(n,e){const t=[];for(let r=0,i=n.length;r!==i;++r){const o=n[r];o.id in e&&t.push(o)}return t};let A$=0;function CN(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const s=parseInt(o[0]);return t.toUpperCase()+"\n\n"+i+"\n\n"+function N$(n,e){const t=n.split("\n"),r=[],i=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=i;s<o;s++)r.push(s+1+": "+t[s]);return r.join("\n")}(n.getShaderSource(e),s)}return i}function I$(n,e){const t=function P$(n){switch(n){case co:return["Linear","( value )"];case zt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function R$(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Uu(n){return""!==n}function SN(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function EN(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const k$=/^[ \t]*#include +<([\w\d./]+)>/gm;function hM(n){return n.replace(k$,B$)}function B$(n,e){const t=ht[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return hM(t)}const V$=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,G$=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function DN(n){return n.replace(G$,TN).replace(V$,U$)}function U$(n,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),TN(0,e,t,r)}function TN(n,e,t,r){let i="";for(let o=parseInt(e);o<parseInt(t);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function AN(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function q$(n,e,t,r){const i=n.getContext(),o=t.defines;let s=t.vertexShader,a=t.fragmentShader;const l=function H$(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function z$(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function j$(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function W$(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),h=function $$(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:r,maxMip:t}}(t),f=t.isWebGL2?"":function O$(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Uu).join("\n")}(t),p=function F$(n){const e=[];for(const t in n){const r=n[t];!1!==r&&e.push("#define "+t+" "+r)}return e.join("\n")}(o),g=i.createProgram();let m,y,v=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(m=[p].filter(Uu).join("\n"),m.length>0&&(m+="\n"),y=[f,p].filter(Uu).join("\n"),y.length>0&&(y+="\n")):(m=[AN(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Uu).join("\n"),y=[f,AN(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?ht.tonemapping_pars_fragment:"",0!==t.toneMapping?R$("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ht.encodings_pars_fragment,I$("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Uu).join("\n")),s=hM(s),s=SN(s,t),s=EN(s,t),a=hM(a),a=SN(a,t),a=EN(a,t),s=DN(s),a=DN(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(v="#version 300 es\n",m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,y=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const M=v+y+a,w=bN(i,35633,v+m+s),b=bN(i,35632,M);if(i.attachShader(g,w),i.attachShader(g,b),void 0!==t.index0AttributeName?i.bindAttribLocation(g,0,t.index0AttributeName):!0===t.morphTargets&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g),n.debug.checkShaderErrors){const E=i.getProgramInfoLog(g).trim(),N=i.getShaderInfoLog(w).trim(),F=i.getShaderInfoLog(b).trim();let q=!0,re=!0;if(!1===i.getProgramParameter(g,35714)){q=!1;const O=CN(i,w,"vertex"),z=CN(i,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(g,35715)+"\n\nProgram Info Log: "+E+"\n"+O+"\n"+z)}else""!==E?console.warn("THREE.WebGLProgram: Program Info Log:",E):(""===N||""===F)&&(re=!1);re&&(this.diagnostics={runnable:q,programLog:E,vertexShader:{log:N,prefix:m},fragmentShader:{log:F,prefix:y}})}let A,x;return i.deleteShader(w),i.deleteShader(b),this.getUniforms=function(){return void 0===A&&(A=new Jo(i,g)),A},this.getAttributes=function(){return void 0===x&&(x=function L$(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const o=n.getActiveAttrib(e,i),s=o.name;let a=1;35674===o.type&&(a=2),35675===o.type&&(a=3),35676===o.type&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}(i,g)),x},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(g),this.program=void 0},this.name=t.shaderName,this.id=A$++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=w,this.fragmentShader=b,this}let X$=0;class Z${constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.fragmentShader,i=this._getShaderStage(e.vertexShader),o=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return!1===s.has(i)&&(s.add(i),i.usedTimes++),!1===s.has(o)&&(s.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const r=new Y$(e);t.set(e,r)}return t.get(e)}}class Y${constructor(e){this.id=X$++,this.code=e,this.usedTimes=0}}function J$(n,e,t,r,i,o,s){const a=new Sl,l=new Z$,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let f=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function g(x,E,N,F,q){const re=F.fog,O=q.geometry,B=(x.isMeshStandardMaterial?t:e).get(x.envMap||(x.isMeshStandardMaterial?F.environment:null)),K=B&&306===B.mapping?B.image.height:null,ee=p[x.type];null!==x.precision&&(f=i.getMaxPrecision(x.precision),f!==x.precision&&console.warn("THREE.WebGLProgram.getParameters:",x.precision,"not supported, using",f,"instead."));const U=O.morphAttributes.position||O.morphAttributes.normal||O.morphAttributes.color,W=void 0!==U?U.length:0;let ne,he,Ae,Ne,oe=0;if(void 0!==O.morphAttributes.position&&(oe=1),void 0!==O.morphAttributes.normal&&(oe=2),void 0!==O.morphAttributes.color&&(oe=3),ee){const ce=Pi[ee];ne=ce.vertexShader,he=ce.fragmentShader}else ne=x.vertexShader,he=x.fragmentShader,l.update(x),Ae=l.getVertexShaderID(x),Ne=l.getFragmentShaderID(x);const $=n.getRenderTarget(),je=x.clearcoat>0;return{isWebGL2:u,shaderID:ee,shaderName:x.type,vertexShader:ne,fragmentShader:he,defines:x.defines,customVertexShaderID:Ae,customFragmentShaderID:Ne,isRawShaderMaterial:!0===x.isRawShaderMaterial,glslVersion:x.glslVersion,precision:f,instancing:!0===q.isInstancedMesh,instancingColor:!0===q.isInstancedMesh&&null!==q.instanceColor,supportsVertexTextures:h,outputEncoding:null===$?n.outputEncoding:!0===$.isXRRenderTarget?$.texture.encoding:co,map:!!x.map,matcap:!!x.matcap,envMap:!!B,envMapMode:B&&B.mapping,envMapCubeUVHeight:K,lightMap:!!x.lightMap,aoMap:!!x.aoMap,emissiveMap:!!x.emissiveMap,bumpMap:!!x.bumpMap,normalMap:!!x.normalMap,objectSpaceNormalMap:1===x.normalMapType,tangentSpaceNormalMap:0===x.normalMapType,decodeVideoTexture:!!x.map&&!0===x.map.isVideoTexture&&x.map.encoding===zt,clearcoat:je,clearcoatMap:je&&!!x.clearcoatMap,clearcoatRoughnessMap:je&&!!x.clearcoatRoughnessMap,clearcoatNormalMap:je&&!!x.clearcoatNormalMap,displacementMap:!!x.displacementMap,roughnessMap:!!x.roughnessMap,metalnessMap:!!x.metalnessMap,specularMap:!!x.specularMap,specularIntensityMap:!!x.specularIntensityMap,specularColorMap:!!x.specularColorMap,opaque:!1===x.transparent&&1===x.blending,alphaMap:!!x.alphaMap,alphaTest:x.alphaTest>0,gradientMap:!!x.gradientMap,sheen:x.sheen>0,sheenColorMap:!!x.sheenColorMap,sheenRoughnessMap:!!x.sheenRoughnessMap,transmission:x.transmission>0,transmissionMap:!!x.transmissionMap,thicknessMap:!!x.thicknessMap,combine:x.combine,vertexTangents:!!x.normalMap&&!!O.attributes.tangent,vertexColors:x.vertexColors,vertexAlphas:!0===x.vertexColors&&!!O.attributes.color&&4===O.attributes.color.itemSize,vertexUvs:!!(x.map||x.bumpMap||x.normalMap||x.specularMap||x.alphaMap||x.emissiveMap||x.roughnessMap||x.metalnessMap||x.clearcoatMap||x.clearcoatRoughnessMap||x.clearcoatNormalMap||x.displacementMap||x.transmissionMap||x.thicknessMap||x.specularIntensityMap||x.specularColorMap||x.sheenColorMap||x.sheenRoughnessMap),uvsVertexOnly:!(x.map||x.bumpMap||x.normalMap||x.specularMap||x.alphaMap||x.emissiveMap||x.roughnessMap||x.metalnessMap||x.clearcoatNormalMap||x.transmission>0||x.transmissionMap||x.thicknessMap||x.specularIntensityMap||x.specularColorMap||x.sheen>0||x.sheenColorMap||x.sheenRoughnessMap||!x.displacementMap),fog:!!re,useFog:!0===x.fog,fogExp2:re&&re.isFogExp2,flatShading:!!x.flatShading,sizeAttenuation:x.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===q.isSkinnedMesh,morphTargets:void 0!==O.morphAttributes.position,morphNormals:void 0!==O.morphAttributes.normal,morphColors:void 0!==O.morphAttributes.color,morphTargetsCount:W,morphTextureStride:oe,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:x.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:x.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:x.premultipliedAlpha,doubleSided:2===x.side,flipSided:1===x.side,useDepthPacking:!!x.depthPacking,depthPacking:x.depthPacking||0,index0AttributeName:x.index0AttributeName,extensionDerivatives:x.extensions&&x.extensions.derivatives,extensionFragDepth:x.extensions&&x.extensions.fragDepth,extensionDrawBuffers:x.extensions&&x.extensions.drawBuffers,extensionShaderTextureLOD:x.extensions&&x.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:x.customProgramCacheKey()}},getProgramCacheKey:function m(x){const E=[];if(x.shaderID?E.push(x.shaderID):(E.push(x.customVertexShaderID),E.push(x.customFragmentShaderID)),void 0!==x.defines)for(const N in x.defines)E.push(N),E.push(x.defines[N]);return!1===x.isRawShaderMaterial&&(function y(x,E){x.push(E.precision),x.push(E.outputEncoding),x.push(E.envMapMode),x.push(E.envMapCubeUVHeight),x.push(E.combine),x.push(E.vertexUvs),x.push(E.fogExp2),x.push(E.sizeAttenuation),x.push(E.morphTargetsCount),x.push(E.morphAttributeCount),x.push(E.numDirLights),x.push(E.numPointLights),x.push(E.numSpotLights),x.push(E.numHemiLights),x.push(E.numRectAreaLights),x.push(E.numDirLightShadows),x.push(E.numPointLightShadows),x.push(E.numSpotLightShadows),x.push(E.shadowMapType),x.push(E.toneMapping),x.push(E.numClippingPlanes),x.push(E.numClipIntersection),x.push(E.depthPacking)}(E,x),function v(x,E){a.disableAll(),E.isWebGL2&&a.enable(0),E.supportsVertexTextures&&a.enable(1),E.instancing&&a.enable(2),E.instancingColor&&a.enable(3),E.map&&a.enable(4),E.matcap&&a.enable(5),E.envMap&&a.enable(6),E.lightMap&&a.enable(7),E.aoMap&&a.enable(8),E.emissiveMap&&a.enable(9),E.bumpMap&&a.enable(10),E.normalMap&&a.enable(11),E.objectSpaceNormalMap&&a.enable(12),E.tangentSpaceNormalMap&&a.enable(13),E.clearcoat&&a.enable(14),E.clearcoatMap&&a.enable(15),E.clearcoatRoughnessMap&&a.enable(16),E.clearcoatNormalMap&&a.enable(17),E.displacementMap&&a.enable(18),E.specularMap&&a.enable(19),E.roughnessMap&&a.enable(20),E.metalnessMap&&a.enable(21),E.gradientMap&&a.enable(22),E.alphaMap&&a.enable(23),E.alphaTest&&a.enable(24),E.vertexColors&&a.enable(25),E.vertexAlphas&&a.enable(26),E.vertexUvs&&a.enable(27),E.vertexTangents&&a.enable(28),E.uvsVertexOnly&&a.enable(29),E.fog&&a.enable(30),x.push(a.mask),a.disableAll(),E.useFog&&a.enable(0),E.flatShading&&a.enable(1),E.logarithmicDepthBuffer&&a.enable(2),E.skinning&&a.enable(3),E.morphTargets&&a.enable(4),E.morphNormals&&a.enable(5),E.morphColors&&a.enable(6),E.premultipliedAlpha&&a.enable(7),E.shadowMapEnabled&&a.enable(8),E.physicallyCorrectLights&&a.enable(9),E.doubleSided&&a.enable(10),E.flipSided&&a.enable(11),E.useDepthPacking&&a.enable(12),E.dithering&&a.enable(13),E.specularIntensityMap&&a.enable(14),E.specularColorMap&&a.enable(15),E.transmission&&a.enable(16),E.transmissionMap&&a.enable(17),E.thicknessMap&&a.enable(18),E.sheen&&a.enable(19),E.sheenColorMap&&a.enable(20),E.sheenRoughnessMap&&a.enable(21),E.decodeVideoTexture&&a.enable(22),E.opaque&&a.enable(23),x.push(a.mask)}(E,x),E.push(n.outputEncoding)),E.push(x.customProgramCacheKey),E.join()},getUniforms:function _(x){const E=p[x.type];let N;return N=E?w8.clone(Pi[E].uniforms):x.uniforms,N},acquireProgram:function M(x,E){let N;for(let F=0,q=c.length;F<q;F++){const re=c[F];if(re.cacheKey===E){N=re,++N.usedTimes;break}}return void 0===N&&(N=new q$(n,E,x,o),c.push(N)),N},releaseProgram:function w(x){if(0==--x.usedTimes){const E=c.indexOf(x);c[E]=c[c.length-1],c.pop(),x.destroy()}},releaseShaderCache:function b(x){l.remove(x)},programs:c,dispose:function A(){l.dispose()}}}function K$(){let n=new WeakMap;return{get:function e(o){let s=n.get(o);return void 0===s&&(s={},n.set(o,s)),s},remove:function t(o){n.delete(o)},update:function r(o,s,a){n.get(o)[s]=a},dispose:function i(){n=new WeakMap}}}function Q$(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function NN(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function PN(){const n=[];let e=0;const t=[],r=[],i=[];function s(d,h,f,p,g,m){let y=n[e];return void 0===y?(y={id:d.id,object:d,geometry:h,material:f,groupOrder:p,renderOrder:d.renderOrder,z:g,group:m},n[e]=y):(y.id=d.id,y.object=d,y.geometry=h,y.material=f,y.groupOrder=p,y.renderOrder=d.renderOrder,y.z=g,y.group=m),e++,y}return{opaque:t,transmissive:r,transparent:i,init:function o(){e=0,t.length=0,r.length=0,i.length=0},push:function a(d,h,f,p,g,m){const y=s(d,h,f,p,g,m);f.transmission>0?r.push(y):!0===f.transparent?i.push(y):t.push(y)},unshift:function l(d,h,f,p,g,m){const y=s(d,h,f,p,g,m);f.transmission>0?r.unshift(y):!0===f.transparent?i.unshift(y):t.unshift(y)},finish:function u(){for(let d=e,h=n.length;d<h;d++){const f=n[d];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(d,h){t.length>1&&t.sort(d||Q$),r.length>1&&r.sort(h||NN),i.length>1&&i.sort(h||NN)}}}function e9(){let n=new WeakMap;return{get:function e(r,i){let o;return!1===n.has(r)?(o=new PN,n.set(r,[o])):i>=n.get(r).length?(o=new PN,n.get(r).push(o)):o=n.get(r)[i],o},dispose:function t(){n=new WeakMap}}}function t9(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new C,color:new pe};break;case"SpotLight":t={position:new C,direction:new C,color:new pe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new C,color:new pe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new C,skyColor:new pe,groundColor:new pe};break;case"RectAreaLight":t={color:new pe,position:new C,halfWidth:new C,halfHeight:new C}}return n[e.id]=t,t}}}let r9=0;function i9(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function o9(n,e){const t=new t9,r=function n9(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Z};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Z,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)i.probe.push(new C);const o=new C,s=new be,a=new be;return{setup:function l(u,d){let h=0,f=0,p=0;for(let E=0;E<9;E++)i.probe[E].set(0,0,0);let g=0,m=0,y=0,v=0,_=0,M=0,w=0,b=0;u.sort(i9);const A=!0!==d?Math.PI:1;for(let E=0,N=u.length;E<N;E++){const F=u[E],q=F.color,re=F.intensity,O=F.distance,z=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)h+=q.r*re*A,f+=q.g*re*A,p+=q.b*re*A;else if(F.isLightProbe)for(let B=0;B<9;B++)i.probe[B].addScaledVector(F.sh.coefficients[B],re);else if(F.isDirectionalLight){const B=t.get(F);if(B.color.copy(F.color).multiplyScalar(F.intensity*A),F.castShadow){const K=F.shadow,ee=r.get(F);ee.shadowBias=K.bias,ee.shadowNormalBias=K.normalBias,ee.shadowRadius=K.radius,ee.shadowMapSize=K.mapSize,i.directionalShadow[g]=ee,i.directionalShadowMap[g]=z,i.directionalShadowMatrix[g]=F.shadow.matrix,M++}i.directional[g]=B,g++}else if(F.isSpotLight){const B=t.get(F);if(B.position.setFromMatrixPosition(F.matrixWorld),B.color.copy(q).multiplyScalar(re*A),B.distance=O,B.coneCos=Math.cos(F.angle),B.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),B.decay=F.decay,F.castShadow){const K=F.shadow,ee=r.get(F);ee.shadowBias=K.bias,ee.shadowNormalBias=K.normalBias,ee.shadowRadius=K.radius,ee.shadowMapSize=K.mapSize,i.spotShadow[y]=ee,i.spotShadowMap[y]=z,i.spotShadowMatrix[y]=F.shadow.matrix,b++}i.spot[y]=B,y++}else if(F.isRectAreaLight){const B=t.get(F);B.color.copy(q).multiplyScalar(re),B.halfWidth.set(.5*F.width,0,0),B.halfHeight.set(0,.5*F.height,0),i.rectArea[v]=B,v++}else if(F.isPointLight){const B=t.get(F);if(B.color.copy(F.color).multiplyScalar(F.intensity*A),B.distance=F.distance,B.decay=F.decay,F.castShadow){const K=F.shadow,ee=r.get(F);ee.shadowBias=K.bias,ee.shadowNormalBias=K.normalBias,ee.shadowRadius=K.radius,ee.shadowMapSize=K.mapSize,ee.shadowCameraNear=K.camera.near,ee.shadowCameraFar=K.camera.far,i.pointShadow[m]=ee,i.pointShadowMap[m]=z,i.pointShadowMatrix[m]=F.shadow.matrix,w++}i.point[m]=B,m++}else if(F.isHemisphereLight){const B=t.get(F);B.skyColor.copy(F.color).multiplyScalar(re*A),B.groundColor.copy(F.groundColor).multiplyScalar(re*A),i.hemi[_]=B,_++}}v>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(i.rectAreaLTC1=de.LTC_FLOAT_1,i.rectAreaLTC2=de.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=de.LTC_HALF_1,i.rectAreaLTC2=de.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=f,i.ambient[2]=p;const x=i.hash;(x.directionalLength!==g||x.pointLength!==m||x.spotLength!==y||x.rectAreaLength!==v||x.hemiLength!==_||x.numDirectionalShadows!==M||x.numPointShadows!==w||x.numSpotShadows!==b)&&(i.directional.length=g,i.spot.length=y,i.rectArea.length=v,i.point.length=m,i.hemi.length=_,i.directionalShadow.length=M,i.directionalShadowMap.length=M,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=b,i.spotShadowMap.length=b,i.directionalShadowMatrix.length=M,i.pointShadowMatrix.length=w,i.spotShadowMatrix.length=b,x.directionalLength=g,x.pointLength=m,x.spotLength=y,x.rectAreaLength=v,x.hemiLength=_,x.numDirectionalShadows=M,x.numPointShadows=w,x.numSpotShadows=b,i.version=r9++)},setupView:function c(u,d){let h=0,f=0,p=0,g=0,m=0;const y=d.matrixWorldInverse;for(let v=0,_=u.length;v<_;v++){const M=u[v];if(M.isDirectionalLight){const w=i.directional[h];w.direction.setFromMatrixPosition(M.matrixWorld),o.setFromMatrixPosition(M.target.matrixWorld),w.direction.sub(o),w.direction.transformDirection(y),h++}else if(M.isSpotLight){const w=i.spot[p];w.position.setFromMatrixPosition(M.matrixWorld),w.position.applyMatrix4(y),w.direction.setFromMatrixPosition(M.matrixWorld),o.setFromMatrixPosition(M.target.matrixWorld),w.direction.sub(o),w.direction.transformDirection(y),p++}else if(M.isRectAreaLight){const w=i.rectArea[g];w.position.setFromMatrixPosition(M.matrixWorld),w.position.applyMatrix4(y),a.identity(),s.copy(M.matrixWorld),s.premultiply(y),a.extractRotation(s),w.halfWidth.set(.5*M.width,0,0),w.halfHeight.set(0,.5*M.height,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),g++}else if(M.isPointLight){const w=i.point[f];w.position.setFromMatrixPosition(M.matrixWorld),w.position.applyMatrix4(y),f++}else if(M.isHemisphereLight){const w=i.hemi[m];w.direction.setFromMatrixPosition(M.matrixWorld),w.direction.transformDirection(y),m++}}},state:i}}function IN(n,e){const t=new o9(n,e),r=[],i=[];return{init:function o(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:function l(d){t.setup(r,d)},setupLightsView:function c(d){t.setupView(r,d)},pushLight:function s(d){r.push(d)},pushShadow:function a(d){i.push(d)}}}function s9(n,e){let t=new WeakMap;return{get:function r(o,s=0){let a;return!1===t.has(o)?(a=new IN(n,e),t.set(o,[a])):s>=t.get(o).length?(a=new IN(n,e),t.get(o).push(a)):a=t.get(o)[s],a},dispose:function i(){t=new WeakMap}}}class fM extends _n{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}fM.prototype.isMeshDepthMaterial=!0;class pM extends _n{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new C,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function RN(n,e,t){let r=new lp;const i=new Z,o=new Z,s=new Nt,a=new fM({depthPacking:3201}),l=new pM,c={},u=t.maxTextureSize,d={0:1,1:0,2:2},h=new pi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Z},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const p=new Ve;p.setAttribute("position",new jt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new Tn(p,h),m=this;function y(M,w){const b=e.update(g);h.defines.VSM_SAMPLES!==M.blurSamples&&(h.defines.VSM_SAMPLES=M.blurSamples,f.defines.VSM_SAMPLES=M.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),h.uniforms.shadow_pass.value=M.map.texture,h.uniforms.resolution.value=M.mapSize,h.uniforms.radius.value=M.radius,n.setRenderTarget(M.mapPass),n.clear(),n.renderBufferDirect(w,null,b,h,g,null),f.uniforms.shadow_pass.value=M.mapPass.texture,f.uniforms.resolution.value=M.mapSize,f.uniforms.radius.value=M.radius,n.setRenderTarget(M.map),n.clear(),n.renderBufferDirect(w,null,b,f,g,null)}function v(M,w,b,A,x,E){let N=null;const F=!0===b.isPointLight?M.customDistanceMaterial:M.customDepthMaterial;if(N=void 0!==F?F:!0===b.isPointLight?l:a,n.localClippingEnabled&&!0===w.clipShadows&&0!==w.clippingPlanes.length||w.displacementMap&&0!==w.displacementScale||w.alphaMap&&w.alphaTest>0){const q=N.uuid,re=w.uuid;let O=c[q];void 0===O&&(O={},c[q]=O);let z=O[re];void 0===z&&(z=N.clone(),O[re]=z),N=z}return N.visible=w.visible,N.wireframe=w.wireframe,N.side=3===E?null!==w.shadowSide?w.shadowSide:w.side:null!==w.shadowSide?w.shadowSide:d[w.side],N.alphaMap=w.alphaMap,N.alphaTest=w.alphaTest,N.clipShadows=w.clipShadows,N.clippingPlanes=w.clippingPlanes,N.clipIntersection=w.clipIntersection,N.displacementMap=w.displacementMap,N.displacementScale=w.displacementScale,N.displacementBias=w.displacementBias,N.wireframeLinewidth=w.wireframeLinewidth,N.linewidth=w.linewidth,!0===b.isPointLight&&!0===N.isMeshDistanceMaterial&&(N.referencePosition.setFromMatrixPosition(b.matrixWorld),N.nearDistance=A,N.farDistance=x),N}function _(M,w,b,A,x){if(!1===M.visible)return;if(M.layers.test(w.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&3===x)&&(!M.frustumCulled||r.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,M.matrixWorld);const F=e.update(M),q=M.material;if(Array.isArray(q)){const re=F.groups;for(let O=0,z=re.length;O<z;O++){const B=re[O],K=q[B.materialIndex];if(K&&K.visible){const ee=v(M,K,A,b.near,b.far,x);n.renderBufferDirect(b,null,F,ee,M,B)}}}else if(q.visible){const re=v(M,q,A,b.near,b.far,x);n.renderBufferDirect(b,null,F,re,M,null)}}const N=M.children;for(let F=0,q=N.length;F<q;F++)_(N[F],w,b,A,x)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(M,w,b){if(!1===m.enabled||!1===m.autoUpdate&&!1===m.needsUpdate||0===M.length)return;const A=n.getRenderTarget(),x=n.getActiveCubeFace(),E=n.getActiveMipmapLevel(),N=n.state;N.setBlending(0),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);for(let F=0,q=M.length;F<q;F++){const re=M[F],O=re.shadow;if(void 0===O){console.warn("THREE.WebGLShadowMap:",re,"has no shadow.");continue}if(!1===O.autoUpdate&&!1===O.needsUpdate)continue;i.copy(O.mapSize);const z=O.getFrameExtents();i.multiply(z),o.copy(O.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/z.x),i.x=o.x*z.x,O.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/z.y),i.y=o.y*z.y,O.mapSize.y=o.y)),null===O.map&&!O.isPointLightShadow&&3===this.type&&(O.map=new Tr(i.x,i.y),O.map.texture.name=re.name+".shadowMap",O.mapPass=new Tr(i.x,i.y),O.camera.updateProjectionMatrix()),null===O.map&&(O.map=new Tr(i.x,i.y,{minFilter:En,magFilter:En,format:zr}),O.map.texture.name=re.name+".shadowMap",O.camera.updateProjectionMatrix()),n.setRenderTarget(O.map),n.clear();const B=O.getViewportCount();for(let K=0;K<B;K++){const ee=O.getViewport(K);s.set(o.x*ee.x,o.y*ee.y,o.x*ee.z,o.y*ee.w),N.viewport(s),O.updateMatrices(re,K),r=O.getFrustum(),_(w,b,O.camera,re,this.type)}!O.isPointLightShadow&&3===this.type&&y(O,b),O.needsUpdate=!1}m.needsUpdate=!1,n.setRenderTarget(A,x,E)}}function c9(n,e,t){const r=t.isWebGL2,a=new function i(){let P=!1;const ge=new Nt;let ue=null;const We=new Nt(0,0,0,0);return{setMask:function(xe){ue!==xe&&!P&&(n.colorMask(xe,xe,xe,xe),ue=xe)},setLocked:function(xe){P=xe},setClear:function(xe,Ue,le,$e,Pt){!0===Pt&&(xe*=$e,Ue*=$e,le*=$e),ge.set(xe,Ue,le,$e),!1===We.equals(ge)&&(n.clearColor(xe,Ue,le,$e),We.copy(ge))},reset:function(){P=!1,ue=null,We.set(-1,0,0,0)}}},l=new function o(){let P=!1,ge=null,ue=null,We=null;return{setTest:function(xe){xe?Ne(2929):$(2929)},setMask:function(xe){ge!==xe&&!P&&(n.depthMask(xe),ge=xe)},setFunc:function(xe){if(ue!==xe){if(xe)switch(xe){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);ue=xe}},setLocked:function(xe){P=xe},setClear:function(xe){We!==xe&&(n.clearDepth(xe),We=xe)},reset:function(){P=!1,ge=null,ue=null,We=null}}},c=new function s(){let P=!1,ge=null,ue=null,We=null,xe=null,Ue=null,le=null,$e=null,Pt=null;return{setTest:function(_t){P||(_t?Ne(2960):$(2960))},setMask:function(_t){ge!==_t&&!P&&(n.stencilMask(_t),ge=_t)},setFunc:function(_t,Fi,Li){(ue!==_t||We!==Fi||xe!==Li)&&(n.stencilFunc(_t,Fi,Li),ue=_t,We=Fi,xe=Li)},setOp:function(_t,Fi,Li){(Ue!==_t||le!==Fi||$e!==Li)&&(n.stencilOp(_t,Fi,Li),Ue=_t,le=Fi,$e=Li)},setLocked:function(_t){P=_t},setClear:function(_t){Pt!==_t&&(n.clearStencil(_t),Pt=_t)},reset:function(){P=!1,ge=null,ue=null,We=null,xe=null,Ue=null,le=null,$e=null,Pt=null}}};let u={},d={},h=new WeakMap,f=[],p=null,g=!1,m=null,y=null,v=null,_=null,M=null,w=null,b=null,A=!1,x=null,E=null,N=null,F=null,q=null;const re=n.getParameter(35661);let O=!1,z=0;const B=n.getParameter(7938);-1!==B.indexOf("WebGL")?(z=parseFloat(/^WebGL (\d)/.exec(B)[1]),O=z>=1):-1!==B.indexOf("OpenGL ES")&&(z=parseFloat(/^OpenGL ES (\d)/.exec(B)[1]),O=z>=2);let K=null,ee={};const U=n.getParameter(3088),W=n.getParameter(2978),oe=(new Nt).fromArray(U),ne=(new Nt).fromArray(W);function he(P,ge,ue){const We=new Uint8Array(4),xe=n.createTexture();n.bindTexture(P,xe),n.texParameteri(P,10241,9728),n.texParameteri(P,10240,9728);for(let Ue=0;Ue<ue;Ue++)n.texImage2D(ge+Ue,0,6408,1,1,0,6408,5121,We);return xe}const Ae={};function Ne(P){!0!==u[P]&&(n.enable(P),u[P]=!0)}function $(P){!1!==u[P]&&(n.disable(P),u[P]=!1)}Ae[3553]=he(3553,3553,1),Ae[34067]=he(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Ne(2929),l.setFunc(3),ae(!1),Ce(1),Ne(2884),Q(0);const ce={100:32774,101:32778,102:32779};if(r)ce[103]=32775,ce[104]=32776;else{const P=e.get("EXT_blend_minmax");null!==P&&(ce[103]=P.MIN_EXT,ce[104]=P.MAX_EXT)}const gt={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function Q(P,ge,ue,We,xe,Ue,le,$e){if(0!==P){if(!1===g&&(Ne(3042),g=!0),5===P)xe=xe||ge,Ue=Ue||ue,le=le||We,(ge!==y||xe!==M)&&(n.blendEquationSeparate(ce[ge],ce[xe]),y=ge,M=xe),(ue!==v||We!==_||Ue!==w||le!==b)&&(n.blendFuncSeparate(gt[ue],gt[We],gt[Ue],gt[le]),v=ue,_=We,w=Ue,b=le),m=P,A=null;else if(P!==m||$e!==A){if((100!==y||100!==M)&&(n.blendEquation(32774),y=100,M=100),$e)switch(P){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",P)}else switch(P){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",P)}v=null,_=null,w=null,b=null,m=P,A=$e}}else!0===g&&($(3042),g=!1)}function ae(P){x!==P&&(n.frontFace(P?2304:2305),x=P)}function Ce(P){0!==P?(Ne(2884),P!==E&&n.cullFace(1===P?1029:2===P?1028:1032)):$(2884),E=P}function et(P,ge,ue){P?(Ne(32823),(F!==ge||q!==ue)&&(n.polygonOffset(ge,ue),F=ge,q=ue)):$(32823)}function Fe(P){void 0===P&&(P=33984+re-1),K!==P&&(n.activeTexture(P),K=P)}return{buffers:{color:a,depth:l,stencil:c},enable:Ne,disable:$,bindFramebuffer:function Dt(P,ge){return d[P]!==ge&&(n.bindFramebuffer(P,ge),d[P]=ge,r&&(36009===P&&(d[36160]=ge),36160===P&&(d[36009]=ge)),!0)},drawBuffers:function je(P,ge){let ue=f,We=!1;if(P)if(ue=h.get(ge),void 0===ue&&(ue=[],h.set(ge,ue)),P.isWebGLMultipleRenderTargets){const xe=P.texture;if(ue.length!==xe.length||36064!==ue[0]){for(let Ue=0,le=xe.length;Ue<le;Ue++)ue[Ue]=36064+Ue;ue.length=xe.length,We=!0}}else 36064!==ue[0]&&(ue[0]=36064,We=!0);else 1029!==ue[0]&&(ue[0]=1029,We=!0);We&&(t.isWebGL2?n.drawBuffers(ue):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ue))},useProgram:function st(P){return p!==P&&(n.useProgram(P),p=P,!0)},setBlending:Q,setMaterial:function Y(P,ge){2===P.side?$(2884):Ne(2884);let ue=1===P.side;ge&&(ue=!ue),ae(ue),1===P.blending&&!1===P.transparent?Q(0):Q(P.blending,P.blendEquation,P.blendSrc,P.blendDst,P.blendEquationAlpha,P.blendSrcAlpha,P.blendDstAlpha,P.premultipliedAlpha),l.setFunc(P.depthFunc),l.setTest(P.depthTest),l.setMask(P.depthWrite),a.setMask(P.colorWrite);const We=P.stencilWrite;c.setTest(We),We&&(c.setMask(P.stencilWriteMask),c.setFunc(P.stencilFunc,P.stencilRef,P.stencilFuncMask),c.setOp(P.stencilFail,P.stencilZFail,P.stencilZPass)),et(P.polygonOffset,P.polygonOffsetFactor,P.polygonOffsetUnits),!0===P.alphaToCoverage?Ne(32926):$(32926)},setFlipSided:ae,setCullFace:Ce,setLineWidth:function ve(P){P!==N&&(O&&n.lineWidth(P),N=P)},setPolygonOffset:et,setScissorTest:function Ge(P){P?Ne(3089):$(3089)},activeTexture:Fe,bindTexture:function $t(P,ge){null===K&&Fe();let ue=ee[K];void 0===ue&&(ue={type:void 0,texture:void 0},ee[K]=ue),(ue.type!==P||ue.texture!==ge)&&(n.bindTexture(P,ge||Ae[P]),ue.type=P,ue.texture=ge)},unbindTexture:function Vt(){const P=ee[K];void 0!==P&&void 0!==P.type&&(n.bindTexture(P.type,null),P.type=void 0,P.texture=void 0)},compressedTexImage2D:function T(){try{n.compressedTexImage2D.apply(n,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},texImage2D:function Be(){try{n.texImage2D.apply(n,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},texImage3D:function j(){try{n.texImage3D.apply(n,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},texStorage2D:function ye(){try{n.texStorage2D.apply(n,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},texStorage3D:function Me(){try{n.texStorage3D.apply(n,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},texSubImage2D:function S(){try{n.texSubImage2D.apply(n,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},texSubImage3D:function H(){try{n.texSubImage3D.apply(n,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},compressedTexSubImage2D:function ie(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(P){console.error("THREE.WebGLState:",P)}},scissor:function it(P){!1===oe.equals(P)&&(n.scissor(P.x,P.y,P.z,P.w),oe.copy(P))},viewport:function ct(P){!1===ne.equals(P)&&(n.viewport(P.x,P.y,P.z,P.w),ne.copy(P))},reset:function Se(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===r&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},K=null,ee={},d={},h=new WeakMap,f=[],p=null,g=!1,m=null,y=null,v=null,_=null,M=null,w=null,b=null,A=!1,x=null,E=null,N=null,F=null,q=null,oe.set(0,0,n.canvas.width,n.canvas.height),ne.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function u9(n,e,t,r,i,o,s){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,d=i.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let g;const m=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function v(T,S){return y?new OffscreenCanvas(T,S):Ou("canvas")}function _(T,S,H,ie){let ye=1;if((T.width>ie||T.height>ie)&&(ye=ie/Math.max(T.width,T.height)),ye<1||!0===S){if(typeof HTMLImageElement<"u"&&T instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&T instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&T instanceof ImageBitmap){const Me=S?Vf:Math.floor,Be=Me(ye*T.width),j=Me(ye*T.height);void 0===g&&(g=v(Be,j));const it=H?v(Be,j):g;return it.width=Be,it.height=j,it.getContext("2d").drawImage(T,0,0,Be,j),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+T.width+"x"+T.height+") to ("+Be+"x"+j+")."),it}return"data"in T&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+T.width+"x"+T.height+")."),T}return T}function M(T){return k_(T.width)&&k_(T.height)}function b(T,S){return T.generateMipmaps&&S&&T.minFilter!==En&&T.minFilter!==yn}function A(T){n.generateMipmap(T)}function x(T,S,H,ie,ye=!1){if(!1===a)return S;if(null!==T){if(void 0!==n[T])return n[T];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+T+"'")}let Me=S;return 6403===S&&(5126===H&&(Me=33326),5131===H&&(Me=33325),5121===H&&(Me=33321)),33319===S&&(5126===H&&(Me=33328),5131===H&&(Me=33327),5121===H&&(Me=33323)),6408===S&&(5126===H&&(Me=34836),5131===H&&(Me=34842),5121===H&&(Me=ie===zt&&!1===ye?35907:32856),32819===H&&(Me=32854),32820===H&&(Me=32855)),(33325===Me||33326===Me||33327===Me||33328===Me||34842===Me||34836===Me)&&e.get("EXT_color_buffer_float"),Me}function E(T,S,H){return!0===b(T,H)||T.isFramebufferTexture&&T.minFilter!==En&&T.minFilter!==yn?Math.log2(Math.max(S.width,S.height))+1:void 0!==T.mipmaps&&T.mipmaps.length>0?T.mipmaps.length:T.isCompressedTexture&&Array.isArray(T.image)?S.mipmaps.length:1}function N(T){return T===En||1004===T||1005===T?9728:9729}function F(T){const S=T.target;S.removeEventListener("dispose",F),function re(T){const S=r.get(T);if(void 0===S.__webglInit)return;const H=T.source,ie=m.get(H);if(ie){const ye=ie[S.__cacheKey];ye.usedTimes--,0===ye.usedTimes&&O(T),0===Object.keys(ie).length&&m.delete(H)}r.remove(T)}(S),S.isVideoTexture&&p.delete(S)}function q(T){const S=T.target;S.removeEventListener("dispose",q),function z(T){const S=T.texture,H=r.get(T),ie=r.get(S);if(void 0!==ie.__webglTexture&&(n.deleteTexture(ie.__webglTexture),s.memory.textures--),T.depthTexture&&T.depthTexture.dispose(),T.isWebGLCubeRenderTarget)for(let ye=0;ye<6;ye++)n.deleteFramebuffer(H.__webglFramebuffer[ye]),H.__webglDepthbuffer&&n.deleteRenderbuffer(H.__webglDepthbuffer[ye]);else n.deleteFramebuffer(H.__webglFramebuffer),H.__webglDepthbuffer&&n.deleteRenderbuffer(H.__webglDepthbuffer),H.__webglMultisampledFramebuffer&&n.deleteFramebuffer(H.__webglMultisampledFramebuffer),H.__webglColorRenderbuffer&&n.deleteRenderbuffer(H.__webglColorRenderbuffer),H.__webglDepthRenderbuffer&&n.deleteRenderbuffer(H.__webglDepthRenderbuffer);if(T.isWebGLMultipleRenderTargets)for(let ye=0,Me=S.length;ye<Me;ye++){const Be=r.get(S[ye]);Be.__webglTexture&&(n.deleteTexture(Be.__webglTexture),s.memory.textures--),r.remove(S[ye])}r.remove(S),r.remove(T)}(S)}function O(T){const S=r.get(T);n.deleteTexture(S.__webglTexture),delete m.get(T.source)[S.__cacheKey],s.memory.textures--}let B=0;function W(T,S){const H=r.get(T);if(T.isVideoTexture&&function $t(T){const S=s.render.frame;p.get(T)!==S&&(p.set(T,S),T.update())}(T),!1===T.isRenderTargetTexture&&T.version>0&&H.__version!==T.version){const ie=T.image;if(null===ie)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==ie.complete)return void je(H,T,S);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+S),t.bindTexture(3553,H.__webglTexture)}const Ae={1e3:10497,[gr]:33071,1002:33648},Ne={[En]:9728,1004:9984,1005:9986,[yn]:9729,1007:9985,1008:9987};function $(T,S,H){if(H?(n.texParameteri(T,10242,Ae[S.wrapS]),n.texParameteri(T,10243,Ae[S.wrapT]),(32879===T||35866===T)&&n.texParameteri(T,32882,Ae[S.wrapR]),n.texParameteri(T,10240,Ne[S.magFilter]),n.texParameteri(T,10241,Ne[S.minFilter])):(n.texParameteri(T,10242,33071),n.texParameteri(T,10243,33071),(32879===T||35866===T)&&n.texParameteri(T,32882,33071),(S.wrapS!==gr||S.wrapT!==gr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(T,10240,N(S.magFilter)),n.texParameteri(T,10241,N(S.minFilter)),S.minFilter!==En&&S.minFilter!==yn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const ie=e.get("EXT_texture_filter_anisotropic");if(S.type===Ho&&!1===e.has("OES_texture_float_linear")||!1===a&&S.type===Au&&!1===e.has("OES_texture_half_float_linear"))return;(S.anisotropy>1||r.get(S).__currentAnisotropy)&&(n.texParameterf(T,ie.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(S.anisotropy,i.getMaxAnisotropy())),r.get(S).__currentAnisotropy=S.anisotropy)}}function Dt(T,S){let H=!1;void 0===T.__webglInit&&(T.__webglInit=!0,S.addEventListener("dispose",F));const ie=S.source;let ye=m.get(ie);void 0===ye&&(ye={},m.set(ie,ye));const Me=function U(T){const S=[];return S.push(T.wrapS),S.push(T.wrapT),S.push(T.magFilter),S.push(T.minFilter),S.push(T.anisotropy),S.push(T.internalFormat),S.push(T.format),S.push(T.type),S.push(T.generateMipmaps),S.push(T.premultiplyAlpha),S.push(T.flipY),S.push(T.unpackAlignment),S.push(T.encoding),S.join()}(S);if(Me!==T.__cacheKey){void 0===ye[Me]&&(ye[Me]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,H=!0),ye[Me].usedTimes++;const Be=ye[T.__cacheKey];void 0!==Be&&(ye[T.__cacheKey].usedTimes--,0===Be.usedTimes&&O(S)),T.__cacheKey=Me,T.__webglTexture=ye[Me].texture}return H}function je(T,S,H){let ie=3553;S.isDataArrayTexture&&(ie=35866),S.isData3DTexture&&(ie=32879);const ye=Dt(T,S),Me=S.source;if(t.activeTexture(33984+H),t.bindTexture(ie,T.__webglTexture),Me.version!==Me.__currentVersion||!0===ye){n.pixelStorei(37440,S.flipY),n.pixelStorei(37441,S.premultiplyAlpha),n.pixelStorei(3317,S.unpackAlignment),n.pixelStorei(37443,0);const Be=function w(T){return!a&&(T.wrapS!==gr||T.wrapT!==gr||T.minFilter!==En&&T.minFilter!==yn)}(S)&&!1===M(S.image);let j=_(S.image,Be,!1,u);j=Vt(S,j);const it=M(j)||a,ct=o.convert(S.format,S.encoding);let ge,Se=o.convert(S.type),P=x(S.internalFormat,ct,Se,S.encoding,S.isVideoTexture);$(ie,S,it);const ue=S.mipmaps,We=a&&!0!==S.isVideoTexture,xe=void 0===T.__version||!0===ye,Ue=E(S,j,it);if(S.isDepthTexture)P=6402,a?P=S.type===Ho?36012:1014===S.type?33190:S.type===pl?35056:33189:S.type===Ho&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),S.format===Os&&6402===P&&S.type!==Tu&&1014!==S.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),S.type=Tu,Se=o.convert(S.type)),S.format===gl&&6402===P&&(P=34041,S.type!==pl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),S.type=pl,Se=o.convert(S.type))),xe&&(We?t.texStorage2D(3553,1,P,j.width,j.height):t.texImage2D(3553,0,P,j.width,j.height,0,ct,Se,null));else if(S.isDataTexture)if(ue.length>0&&it){We&&xe&&t.texStorage2D(3553,Ue,P,ue[0].width,ue[0].height);for(let le=0,$e=ue.length;le<$e;le++)ge=ue[le],We?t.texSubImage2D(3553,le,0,0,ge.width,ge.height,ct,Se,ge.data):t.texImage2D(3553,le,P,ge.width,ge.height,0,ct,Se,ge.data);S.generateMipmaps=!1}else We?(xe&&t.texStorage2D(3553,Ue,P,j.width,j.height),t.texSubImage2D(3553,0,0,0,j.width,j.height,ct,Se,j.data)):t.texImage2D(3553,0,P,j.width,j.height,0,ct,Se,j.data);else if(S.isCompressedTexture){We&&xe&&t.texStorage2D(3553,Ue,P,ue[0].width,ue[0].height);for(let le=0,$e=ue.length;le<$e;le++)ge=ue[le],S.format!==zr?null!==ct?We?t.compressedTexSubImage2D(3553,le,0,0,ge.width,ge.height,ct,ge.data):t.compressedTexImage2D(3553,le,P,ge.width,ge.height,0,ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):We?t.texSubImage2D(3553,le,0,0,ge.width,ge.height,ct,Se,ge.data):t.texImage2D(3553,le,P,ge.width,ge.height,0,ct,Se,ge.data)}else if(S.isDataArrayTexture)We?(xe&&t.texStorage3D(35866,Ue,P,j.width,j.height,j.depth),t.texSubImage3D(35866,0,0,0,0,j.width,j.height,j.depth,ct,Se,j.data)):t.texImage3D(35866,0,P,j.width,j.height,j.depth,0,ct,Se,j.data);else if(S.isData3DTexture)We?(xe&&t.texStorage3D(32879,Ue,P,j.width,j.height,j.depth),t.texSubImage3D(32879,0,0,0,0,j.width,j.height,j.depth,ct,Se,j.data)):t.texImage3D(32879,0,P,j.width,j.height,j.depth,0,ct,Se,j.data);else if(S.isFramebufferTexture){if(xe)if(We)t.texStorage2D(3553,Ue,P,j.width,j.height);else{let le=j.width,$e=j.height;for(let Pt=0;Pt<Ue;Pt++)t.texImage2D(3553,Pt,P,le,$e,0,ct,Se,null),le>>=1,$e>>=1}}else if(ue.length>0&&it){We&&xe&&t.texStorage2D(3553,Ue,P,ue[0].width,ue[0].height);for(let le=0,$e=ue.length;le<$e;le++)ge=ue[le],We?t.texSubImage2D(3553,le,0,0,ct,Se,ge):t.texImage2D(3553,le,P,ct,Se,ge);S.generateMipmaps=!1}else We?(xe&&t.texStorage2D(3553,Ue,P,j.width,j.height),t.texSubImage2D(3553,0,0,0,ct,Se,j)):t.texImage2D(3553,0,P,ct,Se,j);b(S,it)&&A(ie),Me.__currentVersion=Me.version,S.onUpdate&&S.onUpdate(S)}T.__version=S.version}function ce(T,S,H,ie,ye){const Me=o.convert(H.format,H.encoding),Be=o.convert(H.type),j=x(H.internalFormat,Me,Be,H.encoding);r.get(S).__hasExternalTextures||(32879===ye||35866===ye?t.texImage3D(ye,0,j,S.width,S.height,S.depth,0,Me,Be,null):t.texImage2D(ye,0,j,S.width,S.height,0,Me,Be,null)),t.bindFramebuffer(36160,T),Fe(S)?h.framebufferTexture2DMultisampleEXT(36160,ie,ye,r.get(H).__webglTexture,0,Ge(S)):n.framebufferTexture2D(36160,ie,ye,r.get(H).__webglTexture,0),t.bindFramebuffer(36160,null)}function gt(T,S,H){if(n.bindRenderbuffer(36161,T),S.depthBuffer&&!S.stencilBuffer){let ie=33189;if(H||Fe(S)){const ye=S.depthTexture;ye&&ye.isDepthTexture&&(ye.type===Ho?ie=36012:1014===ye.type&&(ie=33190));const Me=Ge(S);Fe(S)?h.renderbufferStorageMultisampleEXT(36161,Me,ie,S.width,S.height):n.renderbufferStorageMultisample(36161,Me,ie,S.width,S.height)}else n.renderbufferStorage(36161,ie,S.width,S.height);n.framebufferRenderbuffer(36160,36096,36161,T)}else if(S.depthBuffer&&S.stencilBuffer){const ie=Ge(S);H&&!1===Fe(S)?n.renderbufferStorageMultisample(36161,ie,35056,S.width,S.height):Fe(S)?h.renderbufferStorageMultisampleEXT(36161,ie,35056,S.width,S.height):n.renderbufferStorage(36161,34041,S.width,S.height),n.framebufferRenderbuffer(36160,33306,36161,T)}else{const ie=!0===S.isWebGLMultipleRenderTargets?S.texture[0]:S.texture,ye=o.convert(ie.format,ie.encoding),Me=o.convert(ie.type),Be=x(ie.internalFormat,ye,Me,ie.encoding),j=Ge(S);H&&!1===Fe(S)?n.renderbufferStorageMultisample(36161,j,Be,S.width,S.height):Fe(S)?h.renderbufferStorageMultisampleEXT(36161,j,Be,S.width,S.height):n.renderbufferStorage(36161,Be,S.width,S.height)}n.bindRenderbuffer(36161,null)}function Y(T){const S=r.get(T),H=!0===T.isWebGLCubeRenderTarget;if(T.depthTexture&&!S.__autoAllocateDepthBuffer){if(H)throw new Error("target.depthTexture not supported in Cube render targets");!function Q(T,S){if(S&&S.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,T),!S.depthTexture||!S.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(S.depthTexture).__webglTexture||S.depthTexture.image.width!==S.width||S.depthTexture.image.height!==S.height)&&(S.depthTexture.image.width=S.width,S.depthTexture.image.height=S.height,S.depthTexture.needsUpdate=!0),W(S.depthTexture,0);const ie=r.get(S.depthTexture).__webglTexture,ye=Ge(S);if(S.depthTexture.format===Os)Fe(S)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,ie,0,ye):n.framebufferTexture2D(36160,36096,3553,ie,0);else{if(S.depthTexture.format!==gl)throw new Error("Unknown depthTexture format");Fe(S)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,ie,0,ye):n.framebufferTexture2D(36160,33306,3553,ie,0)}}(S.__webglFramebuffer,T)}else if(H){S.__webglDepthbuffer=[];for(let ie=0;ie<6;ie++)t.bindFramebuffer(36160,S.__webglFramebuffer[ie]),S.__webglDepthbuffer[ie]=n.createRenderbuffer(),gt(S.__webglDepthbuffer[ie],T,!1)}else t.bindFramebuffer(36160,S.__webglFramebuffer),S.__webglDepthbuffer=n.createRenderbuffer(),gt(S.__webglDepthbuffer,T,!1);t.bindFramebuffer(36160,null)}function Ge(T){return Math.min(d,T.samples)}function Fe(T){const S=r.get(T);return a&&T.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==S.__useRenderToTexture}function Vt(T,S){const H=T.encoding,ie=T.format,ye=T.type;return!0===T.isCompressedTexture||!0===T.isVideoTexture||1035===T.format||H!==co&&(H===zt?!1===a?!0===e.has("EXT_sRGB")&&ie===zr?(T.format=1035,T.minFilter=yn,T.generateMipmaps=!1):S=Vs.sRGBToLinear(S):(ie!==zr||ye!==Rs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",H)),S}this.allocateTextureUnit=function ee(){const T=B;return T>=l&&console.warn("THREE.WebGLTextures: Trying to use "+T+" texture units while this GPU supports only "+l),B+=1,T},this.resetTextureUnits=function K(){B=0},this.setTexture2D=W,this.setTexture2DArray=function oe(T,S){const H=r.get(T);T.version>0&&H.__version!==T.version?je(H,T,S):(t.activeTexture(33984+S),t.bindTexture(35866,H.__webglTexture))},this.setTexture3D=function ne(T,S){const H=r.get(T);T.version>0&&H.__version!==T.version?je(H,T,S):(t.activeTexture(33984+S),t.bindTexture(32879,H.__webglTexture))},this.setTextureCube=function he(T,S){const H=r.get(T);T.version>0&&H.__version!==T.version?function st(T,S,H){if(6!==S.image.length)return;const ie=Dt(T,S),ye=S.source;if(t.activeTexture(33984+H),t.bindTexture(34067,T.__webglTexture),ye.version!==ye.__currentVersion||!0===ie){n.pixelStorei(37440,S.flipY),n.pixelStorei(37441,S.premultiplyAlpha),n.pixelStorei(3317,S.unpackAlignment),n.pixelStorei(37443,0);const Me=S.isCompressedTexture||S.image[0].isCompressedTexture,Be=S.image[0]&&S.image[0].isDataTexture,j=[];for(let le=0;le<6;le++)j[le]=Me||Be?Be?S.image[le].image:S.image[le]:_(S.image[le],!1,!0,c),j[le]=Vt(S,j[le]);const it=j[0],ct=M(it)||a,Se=o.convert(S.format,S.encoding),P=o.convert(S.type),ge=x(S.internalFormat,Se,P,S.encoding),ue=a&&!0!==S.isVideoTexture,We=void 0===T.__version;let Ue,xe=E(S,it,ct);if($(34067,S,ct),Me){ue&&We&&t.texStorage2D(34067,xe,ge,it.width,it.height);for(let le=0;le<6;le++){Ue=j[le].mipmaps;for(let $e=0;$e<Ue.length;$e++){const Pt=Ue[$e];S.format!==zr?null!==Se?ue?t.compressedTexSubImage2D(34069+le,$e,0,0,Pt.width,Pt.height,Se,Pt.data):t.compressedTexImage2D(34069+le,$e,ge,Pt.width,Pt.height,0,Pt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ue?t.texSubImage2D(34069+le,$e,0,0,Pt.width,Pt.height,Se,P,Pt.data):t.texImage2D(34069+le,$e,ge,Pt.width,Pt.height,0,Se,P,Pt.data)}}}else{Ue=S.mipmaps,ue&&We&&(Ue.length>0&&xe++,t.texStorage2D(34067,xe,ge,j[0].width,j[0].height));for(let le=0;le<6;le++)if(Be){ue?t.texSubImage2D(34069+le,0,0,0,j[le].width,j[le].height,Se,P,j[le].data):t.texImage2D(34069+le,0,ge,j[le].width,j[le].height,0,Se,P,j[le].data);for(let $e=0;$e<Ue.length;$e++){const _t=Ue[$e].image[le].image;ue?t.texSubImage2D(34069+le,$e+1,0,0,_t.width,_t.height,Se,P,_t.data):t.texImage2D(34069+le,$e+1,ge,_t.width,_t.height,0,Se,P,_t.data)}}else{ue?t.texSubImage2D(34069+le,0,0,0,Se,P,j[le]):t.texImage2D(34069+le,0,ge,Se,P,j[le]);for(let $e=0;$e<Ue.length;$e++){const Pt=Ue[$e];ue?t.texSubImage2D(34069+le,$e+1,0,0,Se,P,Pt.image[le]):t.texImage2D(34069+le,$e+1,ge,Se,P,Pt.image[le])}}}b(S,ct)&&A(34067),ye.__currentVersion=ye.version,S.onUpdate&&S.onUpdate(S)}T.__version=S.version}(H,T,S):(t.activeTexture(33984+S),t.bindTexture(34067,H.__webglTexture))},this.rebindTextures=function ae(T,S,H){const ie=r.get(T);void 0!==S&&ce(ie.__webglFramebuffer,T,T.texture,36064,3553),void 0!==H&&Y(T)},this.setupRenderTarget=function Ce(T){const S=T.texture,H=r.get(T),ie=r.get(S);T.addEventListener("dispose",q),!0!==T.isWebGLMultipleRenderTargets&&(void 0===ie.__webglTexture&&(ie.__webglTexture=n.createTexture()),ie.__version=S.version,s.memory.textures++);const ye=!0===T.isWebGLCubeRenderTarget,Me=!0===T.isWebGLMultipleRenderTargets,Be=M(T)||a;if(ye){H.__webglFramebuffer=[];for(let j=0;j<6;j++)H.__webglFramebuffer[j]=n.createFramebuffer()}else if(H.__webglFramebuffer=n.createFramebuffer(),Me)if(i.drawBuffers){const j=T.texture;for(let it=0,ct=j.length;it<ct;it++){const Se=r.get(j[it]);void 0===Se.__webglTexture&&(Se.__webglTexture=n.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(a&&T.samples>0&&!1===Fe(T)){H.__webglMultisampledFramebuffer=n.createFramebuffer(),H.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,H.__webglColorRenderbuffer);const j=o.convert(S.format,S.encoding),it=o.convert(S.type),ct=x(S.internalFormat,j,it,S.encoding),Se=Ge(T);n.renderbufferStorageMultisample(36161,Se,ct,T.width,T.height),t.bindFramebuffer(36160,H.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,H.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),T.depthBuffer&&(H.__webglDepthRenderbuffer=n.createRenderbuffer(),gt(H.__webglDepthRenderbuffer,T,!0)),t.bindFramebuffer(36160,null)}if(ye){t.bindTexture(34067,ie.__webglTexture),$(34067,S,Be);for(let j=0;j<6;j++)ce(H.__webglFramebuffer[j],T,S,36064,34069+j);b(S,Be)&&A(34067),t.unbindTexture()}else if(Me){const j=T.texture;for(let it=0,ct=j.length;it<ct;it++){const Se=j[it],P=r.get(Se);t.bindTexture(3553,P.__webglTexture),$(3553,Se,Be),ce(H.__webglFramebuffer,T,Se,36064+it,3553),b(Se,Be)&&A(3553)}t.unbindTexture()}else{let j=3553;(T.isWebGL3DRenderTarget||T.isWebGLArrayRenderTarget)&&(a?j=T.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(j,ie.__webglTexture),$(j,S,Be),ce(H.__webglFramebuffer,T,S,36064,j),b(S,Be)&&A(j),t.unbindTexture()}T.depthBuffer&&Y(T)},this.updateRenderTargetMipmap=function ve(T){const S=M(T)||a,H=!0===T.isWebGLMultipleRenderTargets?T.texture:[T.texture];for(let ie=0,ye=H.length;ie<ye;ie++){const Me=H[ie];if(b(Me,S)){const Be=T.isWebGLCubeRenderTarget?34067:3553,j=r.get(Me).__webglTexture;t.bindTexture(Be,j),A(Be),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function et(T){if(a&&T.samples>0&&!1===Fe(T)){const S=T.width,H=T.height;let ie=16384;const ye=[36064],Me=T.stencilBuffer?33306:36096;T.depthBuffer&&ye.push(Me);const Be=r.get(T),j=void 0!==Be.__ignoreDepthValues&&Be.__ignoreDepthValues;!1===j&&(T.depthBuffer&&(ie|=256),T.stencilBuffer&&(ie|=1024)),t.bindFramebuffer(36008,Be.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Be.__webglFramebuffer),!0===j&&(n.invalidateFramebuffer(36008,[Me]),n.invalidateFramebuffer(36009,[Me])),n.blitFramebuffer(0,0,S,H,0,0,S,H,ie,9728),f&&n.invalidateFramebuffer(36008,ye),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,Be.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Y,this.setupFrameBufferTexture=ce,this.useMultisampledRTT=Fe}function d9(n,e,t){const r=t.isWebGL2;return{convert:function i(o,s=null){let a;if(o===Rs)return 5121;if(1017===o)return 32819;if(1018===o)return 32820;if(1010===o)return 5120;if(1011===o)return 5122;if(o===Tu)return 5123;if(1013===o)return 5124;if(1014===o)return 5125;if(o===Ho)return 5126;if(o===Au)return r?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===o)return 6406;if(o===zr)return 6408;if(1024===o)return 6409;if(1025===o)return 6410;if(o===Os)return 6402;if(o===gl)return 34041;if(1028===o)return 6403;if(1022===o)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===o)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===o)return 36244;if(1030===o)return 33319;if(1031===o)return 33320;if(1033===o)return 36249;if(33776===o||33777===o||33778===o||33779===o)if(s===zt){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===o)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===o)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===o)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===o)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===o)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===o)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===o)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===o)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===o||35841===o||35842===o||35843===o){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===o)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===o)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===o)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===o)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===o)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===o||37496===o){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===o)return s===zt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===o)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===o||37809===o||37810===o||37811===o||37812===o||37813===o||37814===o||37815===o||37816===o||37817===o||37818===o||37819===o||37820===o||37821===o){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===o)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===o)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===o)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===o)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===o)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===o)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===o)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===o)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===o)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===o)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===o)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===o)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===o)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===o)return s===zt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===o){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===o)return s===zt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return o===pl?r?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[o]?n[o]:null}}}pM.prototype.isMeshDistanceMaterial=!0;class ON extends Fn{constructor(e=[]){super(),this.cameras=e}}ON.prototype.isArrayCamera=!0;class Bl extends St{constructor(){super(),this.type="Group"}}Bl.prototype.isGroup=!0;const h9={type:"move"};class gM{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Bl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Bl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new C,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new C),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Bl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new C,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new C),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,r){let i=null,o=null,s=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(i=t.getPose(e.targetRaySpace,r),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(h9))),c&&e.hand){s=!0;for(const g of e.hand.values()){const m=t.getJointPose(g,r);if(void 0===c.joints[g.jointName]){const v=new Bl;v.matrixAutoUpdate=!1,v.visible=!1,c.joints[g.jointName]=v,c.add(v)}const y=c.joints[g.jointName];null!==m&&(y.matrix.fromArray(m.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.jointRadius=m.radius),y.visible=null!==m}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,p=.005;c.inputState.pinching&&h>f+p?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-p&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(o=t.getPose(e.gripSpace,r),null!==o&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==i),null!==l&&(l.visible=null!==o),null!==c&&(c.visible=null!==s),this}}class FN extends or{constructor(e,t,r,i,o,s,a,l,c,u){if((u=void 0!==u?u:Os)!==Os&&u!==gl)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&u===Os&&(r=Tu),void 0===r&&u===gl&&(r=pl),super(null,i,o,s,a,l,u,r,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:En,this.minFilter=void 0!==l?l:En,this.flipY=!1,this.generateMipmaps=!1}}FN.prototype.isDepthTexture=!0;class f9 extends Ls{constructor(e,t){super();const r=this;let i=null,o=1,s=null,a="local-floor",l=null,c=null,u=null,d=null,h=null,f=null;const p=t.getContextAttributes();let g=null,m=null;const y=[],v=new Map,_=new Fn;_.layers.enable(1),_.viewport=new Nt;const M=new Fn;M.layers.enable(2),M.viewport=new Nt;const w=[_,M],b=new ON;b.layers.enable(1),b.layers.enable(2);let A=null,x=null;function E(U){const W=v.get(U.inputSource);W&&W.dispatchEvent({type:U.type,data:U.inputSource})}function N(){v.forEach(function(U,W){U.disconnect(W)}),v.clear(),A=null,x=null,e.setRenderTarget(g),h=null,d=null,u=null,i=null,m=null,ee.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}function F(U){const W=i.inputSources;for(let oe=0;oe<W.length;oe++)v.set(W[oe],y["right"===W[oe].handedness?1:0]);for(let oe=0;oe<U.removed.length;oe++){const ne=U.removed[oe],he=v.get(ne);he&&(he.dispatchEvent({type:"disconnected",data:ne}),v.delete(ne))}for(let oe=0;oe<U.added.length;oe++){const ne=U.added[oe],he=v.get(ne);he&&he.dispatchEvent({type:"connected",data:ne})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(U){let W=y[U];return void 0===W&&(W=new gM,y[U]=W),W.getTargetRaySpace()},this.getControllerGrip=function(U){let W=y[U];return void 0===W&&(W=new gM,y[U]=W),W.getGripSpace()},this.getHand=function(U){let W=y[U];return void 0===W&&(W=new gM,y[U]=W),W.getHandSpace()},this.setFramebufferScaleFactor=function(U){o=U,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(U){a=U,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(U){l=U},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=function(){var U=function q5(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function s(l){rA(o,r,i,s,a,"next",l)}function a(l){rA(o,r,i,s,a,"throw",l)}s(void 0)})}}(function*(W){if(i=W,null!==i){if(g=e.getRenderTarget(),i.addEventListener("select",E),i.addEventListener("selectstart",E),i.addEventListener("selectend",E),i.addEventListener("squeeze",E),i.addEventListener("squeezestart",E),i.addEventListener("squeezeend",E),i.addEventListener("end",N),i.addEventListener("inputsourceschange",F),!0!==p.xrCompatible&&(yield t.makeXRCompatible()),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2)h=new XRWebGLLayer(i,t,{antialias:void 0!==i.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:o}),i.updateRenderState({baseLayer:h}),m=new Tr(h.framebufferWidth,h.framebufferHeight,{format:zr,type:Rs,encoding:e.outputEncoding});else{let oe=null,ne=null,he=null;p.depth&&(he=p.stencil?35056:33190,oe=p.stencil?gl:Os,ne=p.stencil?pl:Tu);const Ae={colorFormat:e.outputEncoding===zt?35907:32856,depthFormat:he,scaleFactor:o};u=new XRWebGLBinding(i,t),d=u.createProjectionLayer(Ae),i.updateRenderState({layers:[d]}),m=new Tr(d.textureWidth,d.textureHeight,{format:zr,type:Rs,depthTexture:new FN(d.textureWidth,d.textureHeight,ne,void 0,void 0,void 0,void 0,void 0,void 0,oe),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0}),e.properties.get(m).__ignoreDepthValues=d.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),s=yield i.requestReferenceSpace(a),ee.setContext(i),ee.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}});return function(W){return U.apply(this,arguments)}}();const q=new C,re=new C;function z(U,W){null===W?U.matrixWorld.copy(U.matrix):U.matrixWorld.multiplyMatrices(W.matrixWorld,U.matrix),U.matrixWorldInverse.copy(U.matrixWorld).invert()}this.updateCamera=function(U){if(null===i)return;b.near=M.near=_.near=U.near,b.far=M.far=_.far=U.far,(A!==b.near||x!==b.far)&&(i.updateRenderState({depthNear:b.near,depthFar:b.far}),A=b.near,x=b.far);const W=U.parent,oe=b.cameras;z(b,W);for(let he=0;he<oe.length;he++)z(oe[he],W);b.matrixWorld.decompose(b.position,b.quaternion,b.scale),U.position.copy(b.position),U.quaternion.copy(b.quaternion),U.scale.copy(b.scale),U.matrix.copy(b.matrix),U.matrixWorld.copy(b.matrixWorld);const ne=U.children;for(let he=0,Ae=ne.length;he<Ae;he++)ne[he].updateMatrixWorld(!0);2===oe.length?function O(U,W,oe){q.setFromMatrixPosition(W.matrixWorld),re.setFromMatrixPosition(oe.matrixWorld);const ne=q.distanceTo(re),he=W.projectionMatrix.elements,Ae=oe.projectionMatrix.elements,Ne=he[14]/(he[10]-1),$=he[14]/(he[10]+1),Dt=(he[9]+1)/he[5],je=(he[9]-1)/he[5],st=(he[8]-1)/he[0],ce=(Ae[8]+1)/Ae[0],gt=Ne*st,Q=Ne*ce,Y=ne/(-st+ce),ae=Y*-st;W.matrixWorld.decompose(U.position,U.quaternion,U.scale),U.translateX(ae),U.translateZ(Y),U.matrixWorld.compose(U.position,U.quaternion,U.scale),U.matrixWorldInverse.copy(U.matrixWorld).invert();const Ce=Ne+Y,ve=$+Y;U.projectionMatrix.makePerspective(gt-ae,Q+(ne-ae),Dt*$/ve*Ce,je*$/ve*Ce,Ce,ve)}(b,_,M):b.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return b},this.getFoveation=function(){return null!==d?d.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(U){null!==d&&(d.fixedFoveation=U),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=U)};let B=null;const ee=new iN;ee.setAnimationLoop(function K(U,W){if(c=W.getViewerPose(l||s),f=W,null!==c){const ne=c.views;null!==h&&(e.setRenderTargetFramebuffer(m,h.framebuffer),e.setRenderTarget(m));let he=!1;ne.length!==b.cameras.length&&(b.cameras.length=0,he=!0);for(let Ae=0;Ae<ne.length;Ae++){const Ne=ne[Ae];let $=null;if(null!==h)$=h.getViewport(Ne);else{const je=u.getViewSubImage(d,Ne);$=je.viewport,0===Ae&&(e.setRenderTargetTextures(m,je.colorTexture,d.ignoreDepthValues?void 0:je.depthStencilTexture),e.setRenderTarget(m))}const Dt=w[Ae];Dt.matrix.fromArray(Ne.transform.matrix),Dt.projectionMatrix.fromArray(Ne.projectionMatrix),Dt.viewport.set($.x,$.y,$.width,$.height),0===Ae&&b.matrix.copy(Dt.matrix),!0===he&&b.cameras.push(Dt)}}const oe=i.inputSources;for(let ne=0;ne<y.length;ne++){const he=oe[ne],Ae=v.get(he);void 0!==Ae&&Ae.update(he,W,l||s)}B&&B(U,W),f=null}),this.setAnimationLoop=function(U){B=U},this.dispose=function(){}}}function p9(n,e){function i(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map),m.alphaMap&&(g.alphaMap.value=m.alphaMap),m.bumpMap&&(g.bumpMap.value=m.bumpMap,g.bumpScale.value=m.bumpScale,1===m.side&&(g.bumpScale.value*=-1)),m.displacementMap&&(g.displacementMap.value=m.displacementMap,g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap),m.normalMap&&(g.normalMap.value=m.normalMap,g.normalScale.value.copy(m.normalScale),1===m.side&&g.normalScale.value.negate()),m.specularMap&&(g.specularMap.value=m.specularMap),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);const y=e.get(m).envMap;if(y&&(g.envMap.value=y,g.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,g.reflectivity.value=m.reflectivity,g.ior.value=m.ior,g.refractionRatio.value=m.refractionRatio),m.lightMap){g.lightMap.value=m.lightMap;const M=!0!==n.physicallyCorrectLights?Math.PI:1;g.lightMapIntensity.value=m.lightMapIntensity*M}let v,_;m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity),m.map?v=m.map:m.specularMap?v=m.specularMap:m.displacementMap?v=m.displacementMap:m.normalMap?v=m.normalMap:m.bumpMap?v=m.bumpMap:m.roughnessMap?v=m.roughnessMap:m.metalnessMap?v=m.metalnessMap:m.alphaMap?v=m.alphaMap:m.emissiveMap?v=m.emissiveMap:m.clearcoatMap?v=m.clearcoatMap:m.clearcoatNormalMap?v=m.clearcoatNormalMap:m.clearcoatRoughnessMap?v=m.clearcoatRoughnessMap:m.specularIntensityMap?v=m.specularIntensityMap:m.specularColorMap?v=m.specularColorMap:m.transmissionMap?v=m.transmissionMap:m.thicknessMap?v=m.thicknessMap:m.sheenColorMap?v=m.sheenColorMap:m.sheenRoughnessMap&&(v=m.sheenRoughnessMap),void 0!==v&&(v.isWebGLRenderTarget&&(v=v.texture),!0===v.matrixAutoUpdate&&v.updateMatrix(),g.uvTransform.value.copy(v.matrix)),m.aoMap?_=m.aoMap:m.lightMap&&(_=m.lightMap),void 0!==_&&(_.isWebGLRenderTarget&&(_=_.texture),!0===_.matrixAutoUpdate&&_.updateMatrix(),g.uv2Transform.value.copy(_.matrix))}return{refreshFogUniforms:function t(g,m){g.fogColor.value.copy(m.color),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)},refreshMaterialUniforms:function r(g,m,y,v,_){m.isMeshBasicMaterial||m.isMeshLambertMaterial?i(g,m):m.isMeshToonMaterial?(i(g,m),function u(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap)}(g,m)):m.isMeshPhongMaterial?(i(g,m),function c(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4)}(g,m)):m.isMeshStandardMaterial?(i(g,m),function d(g,m){g.roughness.value=m.roughness,g.metalness.value=m.metalness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap),e.get(m).envMap&&(g.envMapIntensity.value=m.envMapIntensity)}(g,m),m.isMeshPhysicalMaterial&&function h(g,m,y){g.ior.value=m.ior,m.sheen>0&&(g.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),g.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(g.sheenColorMap.value=m.sheenColorMap),m.sheenRoughnessMap&&(g.sheenRoughnessMap.value=m.sheenRoughnessMap)),m.clearcoat>0&&(g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),g.clearcoatNormalMap.value=m.clearcoatNormalMap,1===m.side&&g.clearcoatNormalScale.value.negate())),m.transmission>0&&(g.transmission.value=m.transmission,g.transmissionSamplerMap.value=y.texture,g.transmissionSamplerSize.value.set(y.width,y.height),m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap),g.thickness.value=m.thickness,m.thicknessMap&&(g.thicknessMap.value=m.thicknessMap),g.attenuationDistance.value=m.attenuationDistance,g.attenuationColor.value.copy(m.attenuationColor)),g.specularIntensity.value=m.specularIntensity,g.specularColor.value.copy(m.specularColor),m.specularIntensityMap&&(g.specularIntensityMap.value=m.specularIntensityMap),m.specularColorMap&&(g.specularColorMap.value=m.specularColorMap)}(g,m,_)):m.isMeshMatcapMaterial?(i(g,m),function f(g,m){m.matcap&&(g.matcap.value=m.matcap)}(g,m)):m.isMeshDepthMaterial?i(g,m):m.isMeshDistanceMaterial?(i(g,m),function p(g,m){g.referencePosition.value.copy(m.referencePosition),g.nearDistance.value=m.nearDistance,g.farDistance.value=m.farDistance}(g,m)):m.isMeshNormalMaterial?i(g,m):m.isLineBasicMaterial?(function o(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity}(g,m),m.isLineDashedMaterial&&function s(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}(g,m)):m.isPointsMaterial?function a(g,m,y,v){let _;g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*y,g.scale.value=.5*v,m.map&&(g.map.value=m.map),m.alphaMap&&(g.alphaMap.value=m.alphaMap),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest),m.map?_=m.map:m.alphaMap&&(_=m.alphaMap),void 0!==_&&(!0===_.matrixAutoUpdate&&_.updateMatrix(),g.uvTransform.value.copy(_.matrix))}(g,m,y,v):m.isSpriteMaterial?function l(g,m){let y;g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map),m.alphaMap&&(g.alphaMap.value=m.alphaMap),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest),m.map?y=m.map:m.alphaMap&&(y=m.alphaMap),void 0!==y&&(!0===y.matrixAutoUpdate&&y.updateMatrix(),g.uvTransform.value.copy(y.matrix))}(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}}}function Et(n={}){const e=void 0!==n.canvas?n.canvas:function g9(){const n=Ou("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,r=void 0===n.depth||n.depth,i=void 0===n.stencil||n.stencil,o=void 0!==n.antialias&&n.antialias,s=void 0===n.premultipliedAlpha||n.premultipliedAlpha,a=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,l=void 0!==n.powerPreference?n.powerPreference:"default",c=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let u;u=null!==t?t.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let d=null,h=null;const f=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=co,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const g=this;let m=!1,y=0,v=0,_=null,M=-1,w=null;const b=new Nt,A=new Nt;let x=null,E=e.width,N=e.height,F=1,q=null,re=null;const O=new Nt(0,0,E,N),z=new Nt(0,0,E,N);let B=!1;const K=new lp;let ee=!1,U=!1,W=null;const oe=new be,ne=new Z,he=new C,Ae={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ne(){return null===_?F:1}let je,st,ce,gt,Q,Y,ae,Ce,ve,et,Ge,Fe,$t,Vt,T,S,H,ie,ye,Me,Be,j,it,$=t;function Dt(D,k){for(let G=0;G<D.length;G++){const X=e.getContext(D[G],k);if(null!==X)return X}return null}try{const D={alpha:!0,depth:r,stencil:i,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r140"),e.addEventListener("webglcontextlost",P,!1),e.addEventListener("webglcontextrestored",ge,!1),null===$){const k=["webgl2","webgl","experimental-webgl"];if(!0===g.isWebGL1Renderer&&k.shift(),$=Dt(k,D),null===$)throw Dt(k)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===$.getShaderPrecisionFormat&&($.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(D){throw console.error("THREE.WebGLRenderer: "+D.message),D}function ct(){je=new I6($),st=new E6($,je,n),je.init(st),j=new d9($,je,st),ce=new c9($,je,st),gt=new F6($),Q=new K$,Y=new u9($,je,ce,Q,st,j,gt),ae=new T6(g),Ce=new P6(g),ve=new D8($,st),it=new C6($,je,ve,st),et=new R6($,ve,gt,it),Ge=new V6($,et,ve,gt),ye=new B6($,st,Y),S=new D6(Q),Fe=new J$(g,ae,Ce,je,st,it,S),$t=new p9(g,Q),Vt=new e9,T=new s9(je,st),ie=new b6(g,ae,ce,Ge,u,s),H=new RN(g,Ge,st),Me=new S6($,je,gt,st),Be=new O6($,je,gt,st),gt.programs=Fe.programs,g.capabilities=st,g.extensions=je,g.properties=Q,g.renderLists=Vt,g.shadowMap=H,g.state=ce,g.info=gt}ct();const Se=new f9(g,$);function P(D){D.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;const D=gt.autoReset,k=H.enabled,G=H.autoUpdate,V=H.needsUpdate,X=H.type;ct(),gt.autoReset=D,H.enabled=k,H.autoUpdate=G,H.needsUpdate=V,H.type=X}function ue(D){const k=D.target;k.removeEventListener("dispose",ue),function We(D){(function xe(D){const k=Q.get(D).programs;void 0!==k&&(k.forEach(function(G){Fe.releaseProgram(G)}),D.isShaderMaterial&&Fe.releaseShaderCache(D))})(D),Q.remove(D)}(k)}this.xr=Se,this.getContext=function(){return $},this.getContextAttributes=function(){return $.getContextAttributes()},this.forceContextLoss=function(){const D=je.get("WEBGL_lose_context");D&&D.loseContext()},this.forceContextRestore=function(){const D=je.get("WEBGL_lose_context");D&&D.restoreContext()},this.getPixelRatio=function(){return F},this.setPixelRatio=function(D){void 0!==D&&(F=D,this.setSize(E,N,!1))},this.getSize=function(D){return D.set(E,N)},this.setSize=function(D,k,G){Se.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=D,N=k,e.width=Math.floor(D*F),e.height=Math.floor(k*F),!1!==G&&(e.style.width=D+"px",e.style.height=k+"px"),this.setViewport(0,0,D,k))},this.getDrawingBufferSize=function(D){return D.set(E*F,N*F).floor()},this.setDrawingBufferSize=function(D,k,G){E=D,N=k,F=G,e.width=Math.floor(D*G),e.height=Math.floor(k*G),this.setViewport(0,0,D,k)},this.getCurrentViewport=function(D){return D.copy(b)},this.getViewport=function(D){return D.copy(O)},this.setViewport=function(D,k,G,V){D.isVector4?O.set(D.x,D.y,D.z,D.w):O.set(D,k,G,V),ce.viewport(b.copy(O).multiplyScalar(F).floor())},this.getScissor=function(D){return D.copy(z)},this.setScissor=function(D,k,G,V){D.isVector4?z.set(D.x,D.y,D.z,D.w):z.set(D,k,G,V),ce.scissor(A.copy(z).multiplyScalar(F).floor())},this.getScissorTest=function(){return B},this.setScissorTest=function(D){ce.setScissorTest(B=D)},this.setOpaqueSort=function(D){q=D},this.setTransparentSort=function(D){re=D},this.getClearColor=function(D){return D.copy(ie.getClearColor())},this.setClearColor=function(){ie.setClearColor.apply(ie,arguments)},this.getClearAlpha=function(){return ie.getClearAlpha()},this.setClearAlpha=function(){ie.setClearAlpha.apply(ie,arguments)},this.clear=function(D=!0,k=!0,G=!0){let V=0;D&&(V|=16384),k&&(V|=256),G&&(V|=1024),$.clear(V)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",P,!1),e.removeEventListener("webglcontextrestored",ge,!1),Vt.dispose(),T.dispose(),Q.dispose(),ae.dispose(),Ce.dispose(),Ge.dispose(),it.dispose(),Fe.dispose(),Se.dispose(),Se.removeEventListener("sessionstart",$e),Se.removeEventListener("sessionend",Pt),W&&(W.dispose(),W=null),_t.stop()},this.renderBufferDirect=function(D,k,G,V,X,qe){null===k&&(k=Ae);const tt=X.isMesh&&X.matrixWorld.determinant()<0,ut=function qq(D,k,G,V,X){!0!==k.isScene&&(k=Ae),Y.resetTextureUnits();const qe=k.fog,ut=null===_?g.outputEncoding:!0===_.isXRRenderTarget?_.texture.encoding:co,at=(V.isMeshStandardMaterial?Ce:ae).get(V.envMap||(V.isMeshStandardMaterial?k.environment:null)),It=!0===V.vertexColors&&!!G.attributes.color&&4===G.attributes.color.itemSize,Mt=!!V.normalMap&&!!G.attributes.tangent,xt=!!G.morphAttributes.position,an=!!G.morphAttributes.normal,aa=!!G.morphAttributes.color,ec=V.toneMapped?g.toneMapping:0,tc=G.morphAttributes.position||G.morphAttributes.normal||G.morphAttributes.color,ki=void 0!==tc?tc.length:0,Tt=Q.get(V),nc=h.state.lights;!0!==ee||!0!==U&&D===w||S.setState(V,D,D===w&&V.id===M);let xn=!1;V.version===Tt.__version?(Tt.needsLights&&Tt.lightsStateVersion!==nc.state.version||Tt.outputEncoding!==ut||X.isInstancedMesh&&!1===Tt.instancing||!X.isInstancedMesh&&!0===Tt.instancing||X.isSkinnedMesh&&!1===Tt.skinning||!X.isSkinnedMesh&&!0===Tt.skinning||Tt.envMap!==at||!0===V.fog&&Tt.fog!==qe||void 0!==Tt.numClippingPlanes&&(Tt.numClippingPlanes!==S.numPlanes||Tt.numIntersection!==S.numIntersection)||Tt.vertexAlphas!==It||Tt.vertexTangents!==Mt||Tt.morphTargets!==xt||Tt.morphNormals!==an||Tt.morphColors!==aa||Tt.toneMapping!==ec||!0===st.isWebGL2&&Tt.morphTargetsCount!==ki)&&(xn=!0):(xn=!0,Tt.__version=V.version);let Bi=Tt.currentProgram;!0===xn&&(Bi=g0(V,k,X));let as=!1,hd=!1,m0=!1;const ur=Bi.getUniforms(),fd=Tt.uniforms;if(ce.useProgram(Bi.program)&&(as=!0,hd=!0,m0=!0),V.id!==M&&(M=V.id,hd=!0),as||w!==D){if(ur.setValue($,"projectionMatrix",D.projectionMatrix),st.logarithmicDepthBuffer&&ur.setValue($,"logDepthBufFC",2/(Math.log(D.far+1)/Math.LN2)),w!==D&&(w=D,hd=!0,m0=!0),V.isShaderMaterial||V.isMeshPhongMaterial||V.isMeshToonMaterial||V.isMeshStandardMaterial||V.envMap){const Vi=ur.map.cameraPosition;void 0!==Vi&&Vi.setValue($,he.setFromMatrixPosition(D.matrixWorld))}(V.isMeshPhongMaterial||V.isMeshToonMaterial||V.isMeshLambertMaterial||V.isMeshBasicMaterial||V.isMeshStandardMaterial||V.isShaderMaterial)&&ur.setValue($,"isOrthographic",!0===D.isOrthographicCamera),(V.isMeshPhongMaterial||V.isMeshToonMaterial||V.isMeshLambertMaterial||V.isMeshBasicMaterial||V.isMeshStandardMaterial||V.isShaderMaterial||V.isShadowMaterial||X.isSkinnedMesh)&&ur.setValue($,"viewMatrix",D.matrixWorldInverse)}if(X.isSkinnedMesh){ur.setOptional($,X,"bindMatrix"),ur.setOptional($,X,"bindMatrixInverse");const Vi=X.skeleton;Vi&&(st.floatVertexTextures?(null===Vi.boneTexture&&Vi.computeBoneTexture(),ur.setValue($,"boneTexture",Vi.boneTexture,Y),ur.setValue($,"boneTextureSize",Vi.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const y0=G.morphAttributes;return(void 0!==y0.position||void 0!==y0.normal||void 0!==y0.color&&!0===st.isWebGL2)&&ye.update(X,G,V,Bi),(hd||Tt.receiveShadow!==X.receiveShadow)&&(Tt.receiveShadow=X.receiveShadow,ur.setValue($,"receiveShadow",X.receiveShadow)),hd&&(ur.setValue($,"toneMappingExposure",g.toneMappingExposure),Tt.needsLights&&function Xq(D,k){D.ambientLightColor.needsUpdate=k,D.lightProbe.needsUpdate=k,D.directionalLights.needsUpdate=k,D.directionalLightShadows.needsUpdate=k,D.pointLights.needsUpdate=k,D.pointLightShadows.needsUpdate=k,D.spotLights.needsUpdate=k,D.spotLightShadows.needsUpdate=k,D.rectAreaLights.needsUpdate=k,D.hemisphereLights.needsUpdate=k}(fd,m0),qe&&!0===V.fog&&$t.refreshFogUniforms(fd,qe),$t.refreshMaterialUniforms(fd,V,F,N,W),Jo.upload($,Tt.uniformsList,fd,Y)),V.isShaderMaterial&&!0===V.uniformsNeedUpdate&&(Jo.upload($,Tt.uniformsList,fd,Y),V.uniformsNeedUpdate=!1),V.isSpriteMaterial&&ur.setValue($,"center",X.center),ur.setValue($,"modelViewMatrix",X.modelViewMatrix),ur.setValue($,"normalMatrix",X.normalMatrix),ur.setValue($,"modelMatrix",X.matrixWorld),Bi}(D,k,G,V,X);ce.setMaterial(V,tt);let at=G.index;const It=G.attributes.position;if(null===at){if(void 0===It||0===It.count)return}else if(0===at.count)return;let Mt=1;!0===V.wireframe&&(at=et.getWireframeAttribute(G),Mt=2),it.setup(X,V,ut,G,at);let xt,an=Me;null!==at&&(xt=ve.get(at),an=Be,an.setIndex(xt));const aa=null!==at?at.count:It.count,ec=G.drawRange.start*Mt,tc=G.drawRange.count*Mt,ki=null!==qe?qe.start*Mt:0,Tt=null!==qe?qe.count*Mt:1/0,nc=Math.max(ec,ki),xn=Math.min(aa,ec+tc,ki+Tt)-1,Bi=Math.max(0,xn-nc+1);if(0!==Bi){if(X.isMesh)!0===V.wireframe?(ce.setLineWidth(V.wireframeLinewidth*Ne()),an.setMode(1)):an.setMode(4);else if(X.isLine){let as=V.linewidth;void 0===as&&(as=1),ce.setLineWidth(as*Ne()),an.setMode(X.isLineSegments?1:X.isLineLoop?2:3)}else X.isPoints?an.setMode(0):X.isSprite&&an.setMode(4);if(X.isInstancedMesh)an.renderInstances(nc,Bi,X.count);else if(G.isInstancedBufferGeometry){const as=Math.min(G.instanceCount,G._maxInstanceCount);an.renderInstances(nc,Bi,as)}else an.render(nc,Bi)}},this.compile=function(D,k){h=T.get(D),h.init(),p.push(h),D.traverseVisible(function(G){G.isLight&&G.layers.test(k.layers)&&(h.pushLight(G),G.castShadow&&h.pushShadow(G))}),h.setupLights(g.physicallyCorrectLights),D.traverse(function(G){const V=G.material;if(V)if(Array.isArray(V))for(let X=0;X<V.length;X++)g0(V[X],D,G);else g0(V,D,G)}),p.pop(),h=null};let Ue=null;function $e(){_t.stop()}function Pt(){_t.start()}const _t=new iN;function Fi(D,k,G,V){if(!1===D.visible)return;if(D.layers.test(k.layers))if(D.isGroup)G=D.renderOrder;else if(D.isLOD)!0===D.autoUpdate&&D.update(k);else if(D.isLight)h.pushLight(D),D.castShadow&&h.pushShadow(D);else if(D.isSprite){if(!D.frustumCulled||K.intersectsSprite(D)){V&&he.setFromMatrixPosition(D.matrixWorld).applyMatrix4(oe);const tt=Ge.update(D),ut=D.material;ut.visible&&d.push(D,tt,ut,G,he.z,null)}}else if((D.isMesh||D.isLine||D.isPoints)&&(D.isSkinnedMesh&&D.skeleton.frame!==gt.render.frame&&(D.skeleton.update(),D.skeleton.frame=gt.render.frame),!D.frustumCulled||K.intersectsObject(D))){V&&he.setFromMatrixPosition(D.matrixWorld).applyMatrix4(oe);const tt=Ge.update(D),ut=D.material;if(Array.isArray(ut)){const at=tt.groups;for(let It=0,Mt=at.length;It<Mt;It++){const xt=at[It],an=ut[xt.materialIndex];an&&an.visible&&d.push(D,tt,an,G,he.z,xt)}}else ut.visible&&d.push(D,tt,ut,G,he.z,null)}const qe=D.children;for(let tt=0,ut=qe.length;tt<ut;tt++)Fi(qe[tt],k,G,V)}function Li(D,k,G,V){const X=D.opaque,qe=D.transmissive,tt=D.transparent;h.setupLightsView(G),qe.length>0&&function Wq(D,k,G){const V=st.isWebGL2;null===W&&(W=new Tr(1,1,{generateMipmaps:!0,type:je.has("EXT_color_buffer_half_float")?Au:Rs,minFilter:1008,samples:V&&!0===o?4:0})),g.getDrawingBufferSize(ne),V?W.setSize(ne.x,ne.y):W.setSize(Vf(ne.x),Vf(ne.y));const X=g.getRenderTarget();g.setRenderTarget(W),g.clear();const qe=g.toneMapping;g.toneMapping=0,og(D,k,G),g.toneMapping=qe,Y.updateMultisampleRenderTarget(W),Y.updateRenderTargetMipmap(W),g.setRenderTarget(X)}(X,k,G),V&&ce.viewport(b.copy(V)),X.length>0&&og(X,k,G),qe.length>0&&og(qe,k,G),tt.length>0&&og(tt,k,G),ce.buffers.depth.setTest(!0),ce.buffers.depth.setMask(!0),ce.buffers.color.setMask(!0),ce.setPolygonOffset(!1)}function og(D,k,G){const V=!0===k.isScene?k.overrideMaterial:null;for(let X=0,qe=D.length;X<qe;X++){const tt=D[X],ut=tt.object,at=tt.geometry,It=null===V?tt.material:V,Mt=tt.group;ut.layers.test(G.layers)&&$q(ut,k,G,at,It,Mt)}}function $q(D,k,G,V,X,qe){D.onBeforeRender(g,k,G,V,X,qe),D.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,D.matrixWorld),D.normalMatrix.getNormalMatrix(D.modelViewMatrix),X.onBeforeRender(g,k,G,V,D,qe),!0===X.transparent&&2===X.side?(X.side=1,X.needsUpdate=!0,g.renderBufferDirect(G,k,V,X,D,qe),X.side=0,X.needsUpdate=!0,g.renderBufferDirect(G,k,V,X,D,qe),X.side=2):g.renderBufferDirect(G,k,V,X,D,qe),D.onAfterRender(g,k,G,V,X,qe)}function g0(D,k,G){!0!==k.isScene&&(k=Ae);const V=Q.get(D),X=h.state.lights,tt=X.state.version,ut=Fe.getParameters(D,X.state,h.state.shadowsArray,k,G),at=Fe.getProgramCacheKey(ut);let It=V.programs;V.environment=D.isMeshStandardMaterial?k.environment:null,V.fog=k.fog,V.envMap=(D.isMeshStandardMaterial?Ce:ae).get(D.envMap||V.environment),void 0===It&&(D.addEventListener("dispose",ue),It=new Map,V.programs=It);let Mt=It.get(at);if(void 0!==Mt){if(V.currentProgram===Mt&&V.lightsStateVersion===tt)return AI(D,ut),Mt}else ut.uniforms=Fe.getUniforms(D),D.onBuild(G,ut,g),D.onBeforeCompile(ut,g),Mt=Fe.acquireProgram(ut,at),It.set(at,Mt),V.uniforms=ut.uniforms;const xt=V.uniforms;(!D.isShaderMaterial&&!D.isRawShaderMaterial||!0===D.clipping)&&(xt.clippingPlanes=S.uniform),AI(D,ut),V.needsLights=function Zq(D){return D.isMeshLambertMaterial||D.isMeshToonMaterial||D.isMeshPhongMaterial||D.isMeshStandardMaterial||D.isShadowMaterial||D.isShaderMaterial&&!0===D.lights}(D),V.lightsStateVersion=tt,V.needsLights&&(xt.ambientLightColor.value=X.state.ambient,xt.lightProbe.value=X.state.probe,xt.directionalLights.value=X.state.directional,xt.directionalLightShadows.value=X.state.directionalShadow,xt.spotLights.value=X.state.spot,xt.spotLightShadows.value=X.state.spotShadow,xt.rectAreaLights.value=X.state.rectArea,xt.ltc_1.value=X.state.rectAreaLTC1,xt.ltc_2.value=X.state.rectAreaLTC2,xt.pointLights.value=X.state.point,xt.pointLightShadows.value=X.state.pointShadow,xt.hemisphereLights.value=X.state.hemi,xt.directionalShadowMap.value=X.state.directionalShadowMap,xt.directionalShadowMatrix.value=X.state.directionalShadowMatrix,xt.spotShadowMap.value=X.state.spotShadowMap,xt.spotShadowMatrix.value=X.state.spotShadowMatrix,xt.pointShadowMap.value=X.state.pointShadowMap,xt.pointShadowMatrix.value=X.state.pointShadowMatrix);const an=Mt.getUniforms(),aa=Jo.seqWithValue(an.seq,xt);return V.currentProgram=Mt,V.uniformsList=aa,Mt}function AI(D,k){const G=Q.get(D);G.outputEncoding=k.outputEncoding,G.instancing=k.instancing,G.skinning=k.skinning,G.morphTargets=k.morphTargets,G.morphNormals=k.morphNormals,G.morphColors=k.morphColors,G.morphTargetsCount=k.morphTargetsCount,G.numClippingPlanes=k.numClippingPlanes,G.numIntersection=k.numClipIntersection,G.vertexAlphas=k.vertexAlphas,G.vertexTangents=k.vertexTangents,G.toneMapping=k.toneMapping}_t.setAnimationLoop(function le(D){Ue&&Ue(D)}),typeof self<"u"&&_t.setContext(self),this.setAnimationLoop=function(D){Ue=D,Se.setAnimationLoop(D),null===D?_t.stop():_t.start()},Se.addEventListener("sessionstart",$e),Se.addEventListener("sessionend",Pt),this.render=function(D,k){if(void 0===k||!0===k.isCamera){if(!0!==m){if(!0===D.autoUpdate&&D.updateMatrixWorld(),null===k.parent&&k.updateMatrixWorld(),!0===Se.enabled&&!0===Se.isPresenting&&(!0===Se.cameraAutoUpdate&&Se.updateCamera(k),k=Se.getCamera()),!0===D.isScene&&D.onBeforeRender(g,D,k,_),h=T.get(D,p.length),h.init(),p.push(h),oe.multiplyMatrices(k.projectionMatrix,k.matrixWorldInverse),K.setFromProjectionMatrix(oe),U=this.localClippingEnabled,ee=S.init(this.clippingPlanes,U,k),d=Vt.get(D,f.length),d.init(),f.push(d),Fi(D,k,0,g.sortObjects),d.finish(),!0===g.sortObjects&&d.sort(q,re),!0===ee&&S.beginShadows(),H.render(h.state.shadowsArray,D,k),!0===ee&&S.endShadows(),!0===this.info.autoReset&&this.info.reset(),ie.render(d,D),h.setupLights(g.physicallyCorrectLights),k.isArrayCamera){const V=k.cameras;for(let X=0,qe=V.length;X<qe;X++){const tt=V[X];Li(d,D,tt,tt.viewport)}}else Li(d,D,k);null!==_&&(Y.updateMultisampleRenderTarget(_),Y.updateRenderTargetMipmap(_)),!0===D.isScene&&D.onAfterRender(g,D,k),it.resetDefaultState(),M=-1,w=null,p.pop(),h=p.length>0?p[p.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return v},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(D,k,G){Q.get(D.texture).__webglTexture=k,Q.get(D.depthTexture).__webglTexture=G;const V=Q.get(D);V.__hasExternalTextures=!0,V.__hasExternalTextures&&(V.__autoAllocateDepthBuffer=void 0===G,V.__autoAllocateDepthBuffer||!0===je.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),V.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(D,k){const G=Q.get(D);G.__webglFramebuffer=k,G.__useDefaultFramebuffer=void 0===k},this.setRenderTarget=function(D,k=0,G=0){_=D,y=k,v=G;let V=!0;if(D){const at=Q.get(D);void 0!==at.__useDefaultFramebuffer?(ce.bindFramebuffer(36160,null),V=!1):void 0===at.__webglFramebuffer?Y.setupRenderTarget(D):at.__hasExternalTextures&&Y.rebindTextures(D,Q.get(D.texture).__webglTexture,Q.get(D.depthTexture).__webglTexture)}let X=null,qe=!1,tt=!1;if(D){const at=D.texture;(at.isData3DTexture||at.isDataArrayTexture)&&(tt=!0);const It=Q.get(D).__webglFramebuffer;D.isWebGLCubeRenderTarget?(X=It[k],qe=!0):X=st.isWebGL2&&D.samples>0&&!1===Y.useMultisampledRTT(D)?Q.get(D).__webglMultisampledFramebuffer:It,b.copy(D.viewport),A.copy(D.scissor),x=D.scissorTest}else b.copy(O).multiplyScalar(F).floor(),A.copy(z).multiplyScalar(F).floor(),x=B;if(ce.bindFramebuffer(36160,X)&&st.drawBuffers&&V&&ce.drawBuffers(D,X),ce.viewport(b),ce.scissor(A),ce.setScissorTest(x),qe){const at=Q.get(D.texture);$.framebufferTexture2D(36160,36064,34069+k,at.__webglTexture,G)}else if(tt){const at=Q.get(D.texture);$.framebufferTextureLayer(36160,36064,at.__webglTexture,G||0,k||0)}M=-1},this.readRenderTargetPixels=function(D,k,G,V,X,qe,tt){if(!D||!D.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ut=Q.get(D).__webglFramebuffer;if(D.isWebGLCubeRenderTarget&&void 0!==tt&&(ut=ut[tt]),ut){ce.bindFramebuffer(36160,ut);try{const at=D.texture,It=at.format,Mt=at.type;if(It!==zr&&j.convert(It)!==$.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const xt=Mt===Au&&(je.has("EXT_color_buffer_half_float")||st.isWebGL2&&je.has("EXT_color_buffer_float"));if(!(Mt===Rs||j.convert(Mt)===$.getParameter(35738)||Mt===Ho&&(st.isWebGL2||je.has("OES_texture_float")||je.has("WEBGL_color_buffer_float"))||xt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");k>=0&&k<=D.width-V&&G>=0&&G<=D.height-X&&$.readPixels(k,G,V,X,j.convert(It),j.convert(Mt),qe)}finally{const at=null!==_?Q.get(_).__webglFramebuffer:null;ce.bindFramebuffer(36160,at)}}},this.copyFramebufferToTexture=function(D,k,G=0){if(!0!==k.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const V=Math.pow(2,-G),X=Math.floor(k.image.width*V),qe=Math.floor(k.image.height*V);Y.setTexture2D(k,0),$.copyTexSubImage2D(3553,G,0,0,D.x,D.y,X,qe),ce.unbindTexture()},this.copyTextureToTexture=function(D,k,G,V=0){const X=k.image.width,qe=k.image.height,tt=j.convert(G.format),ut=j.convert(G.type);Y.setTexture2D(G,0),$.pixelStorei(37440,G.flipY),$.pixelStorei(37441,G.premultiplyAlpha),$.pixelStorei(3317,G.unpackAlignment),k.isDataTexture?$.texSubImage2D(3553,V,D.x,D.y,X,qe,tt,ut,k.image.data):k.isCompressedTexture?$.compressedTexSubImage2D(3553,V,D.x,D.y,k.mipmaps[0].width,k.mipmaps[0].height,tt,k.mipmaps[0].data):$.texSubImage2D(3553,V,D.x,D.y,tt,ut,k.image),0===V&&G.generateMipmaps&&$.generateMipmap(3553),ce.unbindTexture()},this.copyTextureToTexture3D=function(D,k,G,V,X=0){if(g.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const qe=D.max.x-D.min.x+1,tt=D.max.y-D.min.y+1,ut=D.max.z-D.min.z+1,at=j.convert(V.format),It=j.convert(V.type);let Mt;if(V.isData3DTexture)Y.setTexture3D(V,0),Mt=32879;else{if(!V.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Y.setTexture2DArray(V,0),Mt=35866}$.pixelStorei(37440,V.flipY),$.pixelStorei(37441,V.premultiplyAlpha),$.pixelStorei(3317,V.unpackAlignment);const xt=$.getParameter(3314),an=$.getParameter(32878),aa=$.getParameter(3316),ec=$.getParameter(3315),tc=$.getParameter(32877),ki=G.isCompressedTexture?G.mipmaps[0]:G.image;$.pixelStorei(3314,ki.width),$.pixelStorei(32878,ki.height),$.pixelStorei(3316,D.min.x),$.pixelStorei(3315,D.min.y),$.pixelStorei(32877,D.min.z),G.isDataTexture||G.isData3DTexture?$.texSubImage3D(Mt,X,k.x,k.y,k.z,qe,tt,ut,at,It,ki.data):G.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),$.compressedTexSubImage3D(Mt,X,k.x,k.y,k.z,qe,tt,ut,at,ki.data)):$.texSubImage3D(Mt,X,k.x,k.y,k.z,qe,tt,ut,at,It,ki),$.pixelStorei(3314,xt),$.pixelStorei(32878,an),$.pixelStorei(3316,aa),$.pixelStorei(3315,ec),$.pixelStorei(32877,tc),0===X&&V.generateMipmaps&&$.generateMipmap(Mt),ce.unbindTexture()},this.initTexture=function(D){Y.setTexture2D(D,0),ce.unbindTexture()},this.resetState=function(){y=0,v=0,_=null,ce.reset(),it.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Et.prototype.isWebGLRenderer=!0,class m9 extends Et{}.prototype.isWebGL1Renderer=!0;class dp{constructor(e,t=25e-5){this.name="",this.color=new pe(e),this.density=t}clone(){return new dp(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}dp.prototype.isFogExp2=!0;class hp{constructor(e,t=1,r=1e3){this.name="",this.color=new pe(e),this.near=t,this.far=r}clone(){return new hp(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}hp.prototype.isFog=!0;class fp extends St{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}fp.prototype.isScene=!0;class Vl{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Nu,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Dr()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,o=this.stride;i<o;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Dr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Dr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Vl.prototype.isInterleavedBuffer=!0;const lr=new C;class Xs{constructor(e,t,r,i=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)lr.fromBufferAttribute(this,t),lr.applyMatrix4(e),this.setXYZ(t,lr.x,lr.y,lr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)lr.fromBufferAttribute(this,t),lr.applyNormalMatrix(e),this.setXYZ(t,lr.x,lr.y,lr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)lr.fromBufferAttribute(this,t),lr.transformDirection(e),this.setXYZ(t,lr.x,lr.y,lr.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,o){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=o,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[i+o])}return new jt(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Xs(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[i+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Xs.prototype.isInterleavedBufferAttribute=!0;class mM extends _n{constructor(e){super(),this.type="SpriteMaterial",this.color=new pe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Gl;mM.prototype.isSpriteMaterial=!0;const Hu=new C,Ul=new C,Hl=new C,zl=new Z,zu=new Z,LN=new be,pp=new C,ju=new C,gp=new C,kN=new Z,yM=new Z,BN=new Z;function mp(n,e,t,r,i,o){zl.subVectors(n,t).addScalar(.5).multiply(r),void 0!==i?(zu.x=o*zl.x-i*zl.y,zu.y=i*zl.x+o*zl.y):zu.copy(zl),n.copy(e),n.x+=zu.x,n.y+=zu.y,n.applyMatrix4(LN)}(class VN extends St{constructor(e){if(super(),this.type="Sprite",void 0===Gl){Gl=new Ve;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Vl(t,5);Gl.setIndex([0,1,2,0,2,3]),Gl.setAttribute("position",new Xs(r,3,0,!1)),Gl.setAttribute("uv",new Xs(r,2,3,!1))}this.geometry=Gl,this.material=void 0!==e?e:new mM,this.center=new Z(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ul.setFromMatrixScale(this.matrixWorld),LN.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Hl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Ul.multiplyScalar(-Hl.z);const r=this.material.rotation;let i,o;0!==r&&(o=Math.cos(r),i=Math.sin(r));const s=this.center;mp(pp.set(-.5,-.5,0),Hl,s,Ul,i,o),mp(ju.set(.5,-.5,0),Hl,s,Ul,i,o),mp(gp.set(.5,.5,0),Hl,s,Ul,i,o),kN.set(0,0),yM.set(1,0),BN.set(1,1);let a=e.ray.intersectTriangle(pp,ju,gp,!1,Hu);if(null===a&&(mp(ju.set(-.5,.5,0),Hl,s,Ul,i,o),yM.set(0,1),a=e.ray.intersectTriangle(pp,gp,ju,!1,Hu),null===a))return;const l=e.ray.origin.distanceTo(Hu);l<e.near||l>e.far||t.push({distance:l,point:Hu.clone(),uv:vn.getUV(Hu,pp,ju,gp,kN,yM,BN,new Z),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const UN=new C,HN=new Nt,zN=new Nt,v9=new C,jN=new be;class vM extends Tn{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new be,this.bindMatrixInverse=new be}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Nt,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;HN.fromBufferAttribute(i.attributes.skinIndex,e),zN.fromBufferAttribute(i.attributes.skinWeight,e),UN.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const s=zN.getComponent(o);if(0!==s){const a=HN.getComponent(o);jN.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(v9.copy(UN).applyMatrix4(jN),s)}}return t.applyMatrix4(this.bindMatrixInverse)}}vM.prototype.isSkinnedMesh=!0;(class _M extends St{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class jl extends or{constructor(e=null,t=1,r=1,i,o,s,a,l,c=En,u=En,d,h){super(null,s,a,l,c,u,i,o,d,h),this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}).prototype.isDataTexture=!0;class Wl extends jt{constructor(e,t,r,i=1){"number"==typeof r&&(i=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,r),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Wl.prototype.isInstancedBufferAttribute=!0;const $N=new be,qN=new be,vp=[],Wu=new Tn;(class XN extends Tn{constructor(e,t,r){super(e,t),this.instanceMatrix=new Wl(new Float32Array(16*r),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(Wu.geometry=this.geometry,Wu.material=this.material,void 0!==Wu.material)for(let o=0;o<i;o++){this.getMatrixAt(o,$N),qN.multiplyMatrices(r,$N),Wu.matrixWorld=qN,Wu.raycast(e,vp);for(let s=0,a=vp.length;s<a;s++){const l=vp[s];l.instanceId=o,l.object=this,t.push(l)}vp.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Wl(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class Un extends _n{constructor(e){super(),this.type="LineBasicMaterial",this.color=new pe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}Un.prototype.isLineBasicMaterial=!0;const ZN=new C,YN=new C,JN=new be,xM=new Ws,_p=new js;class Zs extends St{constructor(e=new Ve,t=new Un){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[0];for(let i=1,o=t.count;i<o;i++)ZN.fromBufferAttribute(t,i-1),YN.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=ZN.distanceTo(YN);e.setAttribute("lineDistance",new we(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,o=e.params.Line.threshold,s=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),_p.copy(r.boundingSphere),_p.applyMatrix4(i),_p.radius+=o,!1===e.ray.intersectsSphere(_p))return;JN.copy(i).invert(),xM.copy(e.ray).applyMatrix4(JN);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new C,u=new C,d=new C,h=new C,f=this.isLineSegments?2:1;if(r.isBufferGeometry){const p=r.index,m=r.attributes.position;if(null!==p)for(let _=Math.max(0,s.start),M=Math.min(p.count,s.start+s.count)-1;_<M;_+=f){const w=p.getX(_),b=p.getX(_+1);if(c.fromBufferAttribute(m,w),u.fromBufferAttribute(m,b),xM.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const x=e.ray.origin.distanceTo(h);x<e.near||x>e.far||t.push({distance:x,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}else for(let _=Math.max(0,s.start),M=Math.min(m.count,s.start+s.count)-1;_<M;_+=f){if(c.fromBufferAttribute(m,_),u.fromBufferAttribute(m,_+1),xM.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(h);b<e.near||b>e.far||t.push({distance:b,point:d.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Zs.prototype.isLine=!0;const KN=new C,QN=new C;class $l extends Zs{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[];for(let i=0,o=t.count;i<o;i+=2)KN.fromBufferAttribute(t,i),QN.fromBufferAttribute(t,i+1),r[i]=0===i?0:r[i-1],r[i+1]=r[i]+KN.distanceTo(QN);e.setAttribute("lineDistance",new we(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}$l.prototype.isLineSegments=!0;(class eP extends Zs{constructor(e,t){super(e,t),this.type="LineLoop"}}).prototype.isLineLoop=!0;class wM extends _n{constructor(e){super(),this.type="PointsMaterial",this.color=new pe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}wM.prototype.isPointsMaterial=!0;const tP=new be,bM=new Ws,Mp=new js,xp=new C;function rP(n,e,t,r,i,o,s){const a=bM.distanceSqToPoint(n);if(a<t){const l=new C;bM.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:s})}}(class nP extends St{constructor(e=new Ve,t=new wM){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,s=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),Mp.copy(r.boundingSphere),Mp.applyMatrix4(i),Mp.radius+=o,!1===e.ray.intersectsSphere(Mp))return;tP.copy(i).invert(),bM.copy(e.ray).applyMatrix4(tP);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(r.isBufferGeometry){const c=r.index,d=r.attributes.position;if(null!==c)for(let p=Math.max(0,s.start),g=Math.min(c.count,s.start+s.count);p<g;p++){const m=c.getX(p);xp.fromBufferAttribute(d,m),rP(xp,m,l,i,e,t,this)}else for(let p=Math.max(0,s.start),g=Math.min(d.count,s.start+s.count);p<g;p++)xp.fromBufferAttribute(d,p),rP(xp,p,l,i,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}).prototype.isPoints=!0,class M9 extends or{constructor(e,t,r,i,o,s,a,l,c){super(e,t,r,i,o,s,a,l,c),this.minFilter=void 0!==s?s:yn,this.magFilter=void 0!==o?o:yn,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class x9 extends or{constructor(e,t,r){super({width:e,height:t}),this.format=r,this.magFilter=En,this.minFilter=En,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class iP extends or{constructor(e,t,r,i,o,s,a,l,c,u,d,h){super(null,s,a,l,c,u,i,o,d,h),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class w9 extends or{constructor(e,t,r,i,o,s,a,l,c){super(e,t,r,i,o,s,a,l,c),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0;class qr{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),o=0;t.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),o+=r.distanceTo(i),t.push(o),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const o=r.length;let s;s=t||e*r[o-1];let c,a=0,l=o-1;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-s,c<0)a=i+1;else{if(!(c>0)){l=i;break}l=i-1}if(i=l,r[i]===s)return i/(o-1);const u=r[i];return(i+(s-u)/(r[i+1]-u))/(o-1)}getTangent(e,t){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);const s=this.getPoint(i),a=this.getPoint(o),l=t||(s.isVector2?new Z:new C);return l.copy(a).sub(s).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new C,i=[],o=[],s=[],a=new C,l=new be;for(let f=0;f<=e;f++)i[f]=this.getTangentAt(f/e,new C);o[0]=new C,s[0]=new C;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),h=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),h<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],a),s[0].crossVectors(i[0],o[0]);for(let f=1;f<=e;f++){if(o[f]=o[f-1].clone(),s[f]=s[f-1].clone(),a.crossVectors(i[f-1],i[f]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(un(i[f-1].dot(i[f]),-1,1));o[f].applyMatrix4(l.makeRotationAxis(a,p))}s[f].crossVectors(i[f],o[f])}if(!0===t){let f=Math.acos(un(o[0].dot(o[e]),-1,1));f/=e,i[0].dot(a.crossVectors(o[0],o[e]))>0&&(f=-f);for(let p=1;p<=e;p++)o[p].applyMatrix4(l.makeRotationAxis(i[p],f*p)),s[p].crossVectors(i[p],o[p])}return{tangents:i,normals:o,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class wp extends qr{constructor(e=0,t=0,r=1,i=1,o=0,s=2*Math.PI,a=!1,l=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new Z,i=2*Math.PI;let o=this.aEndAngle-this.aStartAngle;const s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(o=s?0:i),!0===this.aClockwise&&!s&&(o===i?o=-i:o-=i);const a=this.aStartAngle+e*o;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*u-f*d+this.aX,c=h*d+f*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}wp.prototype.isEllipseCurve=!0;class oP extends wp{constructor(e,t,r,i,o,s){super(e,t,r,r,i,o,s),this.type="ArcCurve"}}function CM(){let n=0,e=0,t=0,r=0;function i(o,s,a,l){n=o,e=a,t=-3*o+3*s-2*a-l,r=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,c){i(s,a,c*(a-o),c*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,c,u,d){let h=(s-o)/c-(a-o)/(c+u)+(a-s)/u,f=(a-s)/u-(l-s)/(u+d)+(l-a)/d;h*=u,f*=u,i(s,a,h,f)},calc:function(o){const s=o*o;return n+e*o+t*s+r*(s*o)}}}oP.prototype.isArcCurve=!0;const bp=new C,SM=new CM,EM=new CM,DM=new CM;class sP extends qr{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new C){const r=t,i=this.points,o=i.length,s=(o-(this.closed?0:1))*e;let c,u,a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:0===l&&a===o-1&&(a=o-2,l=1),this.closed||a>0?c=i[(a-1)%o]:(bp.subVectors(i[0],i[1]).add(i[0]),c=bp);const d=i[a%o],h=i[(a+1)%o];if(this.closed||a+2<o?u=i[(a+2)%o]:(bp.subVectors(i[o-1],i[o-2]).add(i[o-1]),u=bp),"centripetal"===this.curveType||"chordal"===this.curveType){const f="chordal"===this.curveType?.5:.25;let p=Math.pow(c.distanceToSquared(d),f),g=Math.pow(d.distanceToSquared(h),f),m=Math.pow(h.distanceToSquared(u),f);g<1e-4&&(g=1),p<1e-4&&(p=g),m<1e-4&&(m=g),SM.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,p,g,m),EM.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,p,g,m),DM.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,p,g,m)}else"catmullrom"===this.curveType&&(SM.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),EM.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),DM.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return r.set(SM.calc(l),EM.calc(l),DM.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push((new C).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function aP(n,e,t,r,i){const o=.5*(r-e),s=.5*(i-t),a=n*n;return(2*t-2*r+o+s)*(n*a)+(-3*t+3*r-2*o-s)*a+o*n+t}function $u(n,e,t,r){return function b9(n,e){const t=1-n;return t*t*e}(n,e)+function C9(n,e){return 2*(1-n)*n*e}(n,t)+function S9(n,e){return n*n*e}(n,r)}function qu(n,e,t,r,i){return function E9(n,e){const t=1-n;return t*t*t*e}(n,e)+function D9(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function T9(n,e){return 3*(1-n)*n*n*e}(n,r)+function A9(n,e){return n*n*n*e}(n,i)}sP.prototype.isCatmullRomCurve3=!0;class TM extends qr{constructor(e=new Z,t=new Z,r=new Z,i=new Z){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Z){const r=t,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(qu(e,i.x,o.x,s.x,a.x),qu(e,i.y,o.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}TM.prototype.isCubicBezierCurve=!0;class lP extends qr{constructor(e=new C,t=new C,r=new C,i=new C){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new C){const r=t,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(qu(e,i.x,o.x,s.x,a.x),qu(e,i.y,o.y,s.y,a.y),qu(e,i.z,o.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}lP.prototype.isCubicBezierCurve3=!0;class Cp extends qr{constructor(e=new Z,t=new Z){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Z){const r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new Z;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Cp.prototype.isLineCurve=!0;class AM extends qr{constructor(e=new Z,t=new Z,r=new Z){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Z){const r=t,i=this.v0,o=this.v1,s=this.v2;return r.set($u(e,i.x,o.x,s.x),$u(e,i.y,o.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}AM.prototype.isQuadraticBezierCurve=!0;class NM extends qr{constructor(e=new C,t=new C,r=new C){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new C){const r=t,i=this.v0,o=this.v1,s=this.v2;return r.set($u(e,i.x,o.x,s.x),$u(e,i.y,o.y,s.y),$u(e,i.z,o.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}NM.prototype.isQuadraticBezierCurve3=!0;class PM extends qr{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new Z){const r=t,i=this.points,o=(i.length-1)*e,s=Math.floor(o),a=o-s,l=i[0===s?s:s-1],c=i[s],u=i[s>i.length-2?i.length-1:s+1],d=i[s>i.length-3?i.length-1:s+2];return r.set(aP(a,l.x,c.x,u.x,d.x),aP(a,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push((new Z).fromArray(i))}return this}}PM.prototype.isSplineCurve=!0;var IM=Object.freeze({__proto__:null,ArcCurve:oP,CatmullRomCurve3:sP,CubicBezierCurve:TM,CubicBezierCurve3:lP,EllipseCurve:wp,LineCurve:Cp,LineCurve3:class N9 extends qr{constructor(e=new C,t=new C){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new C){const r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:AM,QuadraticBezierCurve3:NM,SplineCurve:PM});class P9 extends qr{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Cp(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let o=0;for(;o<i.length;){if(i[o]>=r){const s=i[o]-r,a=this.curves[o],l=a.getLength();return a.getPointAt(0===l?0:1-s/l,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,o=this.curves;i<o.length;i++){const s=o[i],l=s.getPoints(s.isEllipseCurve?2*e:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push((new IM[i.type]).fromJSON(i))}return this}}class Xu extends P9{constructor(e){super(),this.type="Path",this.currentPoint=new Z,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new Cp(this.currentPoint.clone(),new Z(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const o=new AM(this.currentPoint.clone(),new Z(e,t),new Z(r,i));return this.curves.push(o),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,o,s){const a=new TM(this.currentPoint.clone(),new Z(e,t),new Z(r,i),new Z(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new PM(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,o,s){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,r,i,o,s),this}absarc(e,t,r,i,o,s){return this.absellipse(e,t,r,r,i,o,s),this}ellipse(e,t,r,i,o,s,a,l){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,r,i,o,s,a,l),this}absellipse(e,t,r,i,o,s,a,l){const c=new wp(e,t,r,i,o,s,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}new C,new C,new C,new vn;class Mo extends Xu{constructor(e){super(e),this.uuid=Dr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push((new Xu).fromJSON(i))}return this}}function uP(n,e,t,r,i){let o,s;if(i===function X9(n,e,t,r){let i=0;for(let o=e,s=t-r;o<t;o+=r)i+=(n[s]-n[o])*(n[o+1]+n[s+1]),s=o;return i}(n,e,t,r)>0)for(o=e;o<t;o+=r)s=fP(o,n[o],n[o+1],s);else for(o=t-r;o>=e;o-=r)s=fP(o,n[o],n[o+1],s);return s&&Ip(s,s.next)&&(Ku(s),s=s.next),s}function Qo(n,e){if(!n)return n;e||(e=n);let r,t=n;do{if(r=!1,t.steiner||!Ip(t,t.next)&&0!==en(t.prev,t,t.next))t=t.next;else{if(Ku(t),t=e=t.prev,t===t.next)break;r=!0}}while(r||t!==e);return e}function Yu(n,e,t,r,i,o,s){if(!n)return;!s&&o&&function H9(n,e,t,r){let i=n;do{null===i.z&&(i.z=OM(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,function z9(n){let e,t,r,i,o,s,a,l,c=1;do{for(t=n,n=null,o=null,s=0;t;){for(s++,r=t,a=0,e=0;e<c&&(a++,r=r.nextZ,r);e++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:n=i,i.prevZ=o,o=i;t=r}o.nextZ=null,c*=2}while(s>1)}(i)}(n,r,i,o);let l,c,a=n;for(;n.prev!==n.next;)if(l=n.prev,c=n.next,o?O9(n,r,i,o):R9(n))e.push(l.i/t),e.push(n.i/t),e.push(c.i/t),Ku(n),n=c.next,a=c.next;else if((n=c)===a){s?1===s?Yu(n=F9(Qo(n),e,t),e,t,r,i,o,2):2===s&&L9(n,e,t,r,i,o):Yu(Qo(n),e,t,r,i,o,1);break}}function R9(n){const e=n.prev,t=n,r=n.next;if(en(e,t,r)>=0)return!1;let i=n.next.next;for(;i!==n.prev;){if(Xl(e.x,e.y,t.x,t.y,r.x,r.y,i.x,i.y)&&en(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function O9(n,e,t,r){const i=n.prev,o=n,s=n.next;if(en(i,o,s)>=0)return!1;const c=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,u=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,d=OM(i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,e,t,r),h=OM(c,u,e,t,r);let f=n.prevZ,p=n.nextZ;for(;f&&f.z>=d&&p&&p.z<=h;){if(f!==n.prev&&f!==n.next&&Xl(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&en(f.prev,f,f.next)>=0||(f=f.prevZ,p!==n.prev&&p!==n.next&&Xl(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&en(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;f&&f.z>=d;){if(f!==n.prev&&f!==n.next&&Xl(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&en(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=h;){if(p!==n.prev&&p!==n.next&&Xl(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&en(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function F9(n,e,t){let r=n;do{const i=r.prev,o=r.next.next;!Ip(i,o)&&dP(i,r,r.next,o)&&Ju(i,o)&&Ju(o,i)&&(e.push(i.i/t),e.push(r.i/t),e.push(o.i/t),Ku(r),Ku(r.next),r=n=o),r=r.next}while(r!==n);return Qo(r)}function L9(n,e,t,r,i,o){let s=n;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&W9(s,a)){let l=hP(s,a);return s=Qo(s,s.next),l=Qo(l,l.next),Yu(s,e,t,r,i,o),void Yu(l,e,t,r,i,o)}a=a.next}s=s.next}while(s!==n)}function B9(n,e){return n.x-e.x}function V9(n,e){if(e=function G9(n,e){let t=e;const r=n.x,i=n.y;let s,o=-1/0;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const h=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=r&&h>o){if(o=h,h===r){if(i===t.y)return t;if(i===t.next.y)return t.next}s=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!s)return null;if(r===o)return s;const a=s,l=s.x,c=s.y;let d,u=1/0;t=s;do{r>=t.x&&t.x>=l&&r!==t.x&&Xl(i<c?r:o,i,l,c,i<c?o:r,i,t.x,t.y)&&(d=Math.abs(i-t.y)/(r-t.x),Ju(t,n)&&(d<u||d===u&&(t.x>s.x||t.x===s.x&&U9(s,t)))&&(s=t,u=d)),t=t.next}while(t!==a);return s}(n,e),e){const t=hP(e,n);Qo(e,e.next),Qo(t,t.next)}}function U9(n,e){return en(n.prev,n,e.prev)<0&&en(e.next,n,n.next)<0}function OM(n,e,t,r,i){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-t)*i)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function j9(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function Xl(n,e,t,r,i,o,s,a){return(i-s)*(e-a)-(n-s)*(o-a)>=0&&(n-s)*(r-a)-(t-s)*(e-a)>=0&&(t-s)*(o-a)-(i-s)*(r-a)>=0}function W9(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function $9(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&dP(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(Ju(n,e)&&Ju(e,n)&&function q9(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,o=(n.y+e.y)/2;do{t.y>o!=t.next.y>o&&t.next.y!==t.y&&i<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==n);return r}(n,e)&&(en(n.prev,n,e.prev)||en(n,e.prev,e))||Ip(n,e)&&en(n.prev,n,n.next)>0&&en(e.prev,e,e.next)>0)}function en(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Ip(n,e){return n.x===e.x&&n.y===e.y}function dP(n,e,t,r){const i=Op(en(n,e,t)),o=Op(en(n,e,r)),s=Op(en(t,r,n)),a=Op(en(t,r,e));return!!(i!==o&&s!==a||0===i&&Rp(n,t,e)||0===o&&Rp(n,r,e)||0===s&&Rp(t,n,r)||0===a&&Rp(t,e,r))}function Rp(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Op(n){return n>0?1:n<0?-1:0}function Ju(n,e){return en(n.prev,n,n.next)<0?en(n,e,n.next)>=0&&en(n,n.prev,e)>=0:en(n,e,n.prev)<0||en(n,n.next,e)<0}function hP(n,e){const t=new FM(n.i,n.x,n.y),r=new FM(e.i,e.x,e.y),i=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,o.next=r,r.prev=o,r}function fP(n,e,t,r){const i=new FM(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ku(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function FM(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class xo{static area(e){const t=e.length;let r=0;for(let i=t-1,o=0;o<t;i=o++)r+=e[i].x*e[o].y-e[o].x*e[i].y;return.5*r}static isClockWise(e){return xo.area(e)<0}static triangulateShape(e,t){const r=[],i=[],o=[];pP(e),gP(r,e);let s=e.length;t.forEach(pP);for(let l=0;l<t.length;l++)i.push(s),s+=t[l].length,gP(r,t[l]);const a=function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let o=uP(n,0,i,t,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,c,u,d,h,f;if(r&&(o=function k9(n,e,t,r){const i=[];let o,s,a,l,c;for(o=0,s=e.length;o<s;o++)a=e[o]*r,l=o<s-1?e[o+1]*r:n.length,c=uP(n,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(j9(c));for(i.sort(B9),o=0;o<i.length;o++)V9(i[o],t),t=Qo(t,t.next);return t}(n,e,o,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let p=t;p<i;p+=t)d=n[p],h=n[p+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-a,u-l),f=0!==f?1/f:0}return Yu(o,s,t,a,l,f),s}(r,i);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}}function pP(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function gP(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class es extends Ve{constructor(e=new Mo([new Z(.5,.5),new Z(-.5,.5),new Z(-.5,-.5),new Z(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],o=[];for(let a=0,l=e.length;a<l;a++)s(e[a]);function s(a){const l=[],c=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1;let d=void 0!==t.depth?t.depth:1,h=void 0===t.bevelEnabled||t.bevelEnabled,f=void 0!==t.bevelThickness?t.bevelThickness:.2,p=void 0!==t.bevelSize?t.bevelSize:f-.1,g=void 0!==t.bevelOffset?t.bevelOffset:0,m=void 0!==t.bevelSegments?t.bevelSegments:3;const y=t.extrudePath,v=void 0!==t.UVGenerator?t.UVGenerator:Z9;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),d=t.amount);let _,w,b,A,x,M=!1;y&&(_=y.getSpacedPoints(u),M=!0,h=!1,w=y.computeFrenetFrames(u,!1),b=new C,A=new C,x=new C),h||(m=0,f=0,p=0,g=0);const E=a.extractPoints(c);let N=E.shape;const F=E.holes;if(!xo.isClockWise(N)){N=N.reverse();for(let Q=0,Y=F.length;Q<Y;Q++){const ae=F[Q];xo.isClockWise(ae)&&(F[Q]=ae.reverse())}}const re=xo.triangulateShape(N,F),O=N;for(let Q=0,Y=F.length;Q<Y;Q++)N=N.concat(F[Q]);function z(Q,Y,ae){return Y||console.error("THREE.ExtrudeGeometry: vec does not exist"),Y.clone().multiplyScalar(ae).add(Q)}const B=N.length,K=re.length;function ee(Q,Y,ae){let Ce,ve,et;const Ge=Q.x-Y.x,Fe=Q.y-Y.y,$t=ae.x-Q.x,Vt=ae.y-Q.y,T=Ge*Ge+Fe*Fe;if(Math.abs(Ge*Vt-Fe*$t)>Number.EPSILON){const H=Math.sqrt(T),ie=Math.sqrt($t*$t+Vt*Vt),ye=Y.x-Fe/H,Me=Y.y+Ge/H,it=((ae.x-Vt/ie-ye)*Vt-(ae.y+$t/ie-Me)*$t)/(Ge*Vt-Fe*$t);Ce=ye+Ge*it-Q.x,ve=Me+Fe*it-Q.y;const ct=Ce*Ce+ve*ve;if(ct<=2)return new Z(Ce,ve);et=Math.sqrt(ct/2)}else{let H=!1;Ge>Number.EPSILON?$t>Number.EPSILON&&(H=!0):Ge<-Number.EPSILON?$t<-Number.EPSILON&&(H=!0):Math.sign(Fe)===Math.sign(Vt)&&(H=!0),H?(Ce=-Fe,ve=Ge,et=Math.sqrt(T)):(Ce=Ge,ve=Fe,et=Math.sqrt(T/2))}return new Z(Ce/et,ve/et)}const U=[];for(let Q=0,Y=O.length,ae=Y-1,Ce=Q+1;Q<Y;Q++,ae++,Ce++)ae===Y&&(ae=0),Ce===Y&&(Ce=0),U[Q]=ee(O[Q],O[ae],O[Ce]);const W=[];let oe,ne=U.concat();for(let Q=0,Y=F.length;Q<Y;Q++){const ae=F[Q];oe=[];for(let Ce=0,ve=ae.length,et=ve-1,Ge=Ce+1;Ce<ve;Ce++,et++,Ge++)et===ve&&(et=0),Ge===ve&&(Ge=0),oe[Ce]=ee(ae[Ce],ae[et],ae[Ge]);W.push(oe),ne=ne.concat(oe)}for(let Q=0;Q<m;Q++){const Y=Q/m,ae=f*Math.cos(Y*Math.PI/2),Ce=p*Math.sin(Y*Math.PI/2)+g;for(let ve=0,et=O.length;ve<et;ve++){const Ge=z(O[ve],U[ve],Ce);Dt(Ge.x,Ge.y,-ae)}for(let ve=0,et=F.length;ve<et;ve++){const Ge=F[ve];oe=W[ve];for(let Fe=0,$t=Ge.length;Fe<$t;Fe++){const Vt=z(Ge[Fe],oe[Fe],Ce);Dt(Vt.x,Vt.y,-ae)}}}const he=p+g;for(let Q=0;Q<B;Q++){const Y=h?z(N[Q],ne[Q],he):N[Q];M?(A.copy(w.normals[0]).multiplyScalar(Y.x),b.copy(w.binormals[0]).multiplyScalar(Y.y),x.copy(_[0]).add(A).add(b),Dt(x.x,x.y,x.z)):Dt(Y.x,Y.y,0)}for(let Q=1;Q<=u;Q++)for(let Y=0;Y<B;Y++){const ae=h?z(N[Y],ne[Y],he):N[Y];M?(A.copy(w.normals[Q]).multiplyScalar(ae.x),b.copy(w.binormals[Q]).multiplyScalar(ae.y),x.copy(_[Q]).add(A).add(b),Dt(x.x,x.y,x.z)):Dt(ae.x,ae.y,d/u*Q)}for(let Q=m-1;Q>=0;Q--){const Y=Q/m,ae=f*Math.cos(Y*Math.PI/2),Ce=p*Math.sin(Y*Math.PI/2)+g;for(let ve=0,et=O.length;ve<et;ve++){const Ge=z(O[ve],U[ve],Ce);Dt(Ge.x,Ge.y,d+ae)}for(let ve=0,et=F.length;ve<et;ve++){const Ge=F[ve];oe=W[ve];for(let Fe=0,$t=Ge.length;Fe<$t;Fe++){const Vt=z(Ge[Fe],oe[Fe],Ce);M?Dt(Vt.x,Vt.y+_[u-1].y,_[u-1].x+ae):Dt(Vt.x,Vt.y,d+ae)}}}function $(Q,Y){let ae=Q.length;for(;--ae>=0;){const Ce=ae;let ve=ae-1;ve<0&&(ve=Q.length-1);for(let et=0,Ge=u+2*m;et<Ge;et++){const Fe=B*et,$t=B*(et+1);st(Y+Ce+Fe,Y+ve+Fe,Y+ve+$t,Y+Ce+$t)}}}function Dt(Q,Y,ae){l.push(Q),l.push(Y),l.push(ae)}function je(Q,Y,ae){ce(Q),ce(Y),ce(ae);const Ce=i.length/3,ve=v.generateTopUV(r,i,Ce-3,Ce-2,Ce-1);gt(ve[0]),gt(ve[1]),gt(ve[2])}function st(Q,Y,ae,Ce){ce(Q),ce(Y),ce(Ce),ce(Y),ce(ae),ce(Ce);const ve=i.length/3,et=v.generateSideWallUV(r,i,ve-6,ve-3,ve-2,ve-1);gt(et[0]),gt(et[1]),gt(et[3]),gt(et[1]),gt(et[2]),gt(et[3])}function ce(Q){i.push(l[3*Q+0]),i.push(l[3*Q+1]),i.push(l[3*Q+2])}function gt(Q){o.push(Q.x),o.push(Q.y)}(function Ae(){const Q=i.length/3;if(h){let Y=0,ae=B*Y;for(let Ce=0;Ce<K;Ce++){const ve=re[Ce];je(ve[2]+ae,ve[1]+ae,ve[0]+ae)}Y=u+2*m,ae=B*Y;for(let Ce=0;Ce<K;Ce++){const ve=re[Ce];je(ve[0]+ae,ve[1]+ae,ve[2]+ae)}}else{for(let Y=0;Y<K;Y++){const ae=re[Y];je(ae[2],ae[1],ae[0])}for(let Y=0;Y<K;Y++){const ae=re[Y];je(ae[0]+B*u,ae[1]+B*u,ae[2]+B*u)}}r.addGroup(Q,i.length/3-Q,0)})(),function Ne(){const Q=i.length/3;let Y=0;$(O,Y),Y+=O.length;for(let ae=0,Ce=F.length;ae<Ce;ae++){const ve=F[ae];$(ve,Y),Y+=ve.length}r.addGroup(Q,i.length/3-Q,1)}()}this.setAttribute("position",new we(i,3)),this.setAttribute("uv",new we(o,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function Y9(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++)t.shapes.push(n[r].uuid);else t.shapes.push(n.uuid);return void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const r=[];for(let o=0,s=e.shapes.length;o<s;o++)r.push(t[e.shapes[o]]);const i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=(new IM[i.type]).fromJSON(i)),new es(r,e.options)}}const Z9={generateTopUV:function(n,e,t,r,i){const a=e[3*r],l=e[3*r+1],c=e[3*i],u=e[3*i+1];return[new Z(e[3*t],e[3*t+1]),new Z(a,l),new Z(c,u)]},generateSideWallUV:function(n,e,t,r,i,o){const s=e[3*t],a=e[3*t+1],l=e[3*t+2],c=e[3*r],u=e[3*r+1],d=e[3*r+2],h=e[3*i],f=e[3*i+1],p=e[3*i+2],g=e[3*o],m=e[3*o+1],y=e[3*o+2];return Math.abs(a-u)<Math.abs(s-c)?[new Z(s,1-l),new Z(c,1-d),new Z(h,1-p),new Z(g,1-y)]:[new Z(a,1-l),new Z(u,1-d),new Z(f,1-p),new Z(m,1-y)]}};class ed extends Ve{constructor(e=new Mo([new Z(0,.5),new Z(-.5,-.5),new Z(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],o=[],s=[];let a=0,l=0;if(!1===Array.isArray(e))c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;function c(u){const d=i.length/3,h=u.extractPoints(t);let f=h.shape;const p=h.holes;!1===xo.isClockWise(f)&&(f=f.reverse());for(let m=0,y=p.length;m<y;m++){const v=p[m];!0===xo.isClockWise(v)&&(p[m]=v.reverse())}const g=xo.triangulateShape(f,p);for(let m=0,y=p.length;m<y;m++)f=f.concat(p[m]);for(let m=0,y=f.length;m<y;m++){const v=f[m];i.push(v.x,v.y,0),o.push(0,0,1),s.push(v.x,v.y)}for(let m=0,y=g.length;m<y;m++){const v=g[m];r.push(v[0]+d,v[1]+d,v[2]+d),l+=3}}this.setIndex(r),this.setAttribute("position",new we(i,3)),this.setAttribute("normal",new we(o,3)),this.setAttribute("uv",new we(s,2))}toJSON(){const e=super.toJSON();return function J9(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++)e.shapes.push(n[t].uuid);else e.shapes.push(n.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const r=[];for(let i=0,o=e.shapes.length;i<o;i++)r.push(t[e.shapes[i]]);return new ed(r,e.curveSegments)}}class _P extends _n{constructor(e){super(),this.type="ShadowMaterial",this.color=new pe(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}_P.prototype.isShadowMaterial=!0;class MP extends pi{constructor(e){super(e),this.type="RawShaderMaterial"}}MP.prototype.isRawShaderMaterial=!0;class LM extends _n{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new pe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}LM.prototype.isMeshStandardMaterial=!0;class xP extends LM{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Z(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return un(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new pe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new pe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new pe(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}xP.prototype.isMeshPhysicalMaterial=!0;class wP extends _n{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new pe(16777215),this.specular=new pe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}wP.prototype.isMeshPhongMaterial=!0;class bP extends _n{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new pe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}bP.prototype.isMeshToonMaterial=!0;class CP extends _n{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}CP.prototype.isMeshNormalMaterial=!0;class SP extends _n{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}SP.prototype.isMeshLambertMaterial=!0;class EP extends _n{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new pe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Z(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}EP.prototype.isMeshMatcapMaterial=!0;class DP extends Un{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}DP.prototype.isLineDashedMaterial=!0;const K9={ShadowMaterial:_P,SpriteMaterial:mM,RawShaderMaterial:MP,ShaderMaterial:pi,PointsMaterial:wM,MeshPhysicalMaterial:xP,MeshStandardMaterial:LM,MeshPhongMaterial:wP,MeshToonMaterial:bP,MeshNormalMaterial:CP,MeshLambertMaterial:SP,MeshDepthMaterial:fM,MeshDistanceMaterial:pM,MeshBasicMaterial:vo,MeshMatcapMaterial:EP,LineDashedMaterial:DP,LineBasicMaterial:Un,Material:_n};_n.fromType=function(n){return new K9[n]};const Jt={arraySlice:function(n,e,t){return Jt.isTypedArray(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(function e(i,o){return n[i]-n[o]}),r},sortedArray:function(n,e,t){const r=n.length,i=new n.constructor(r);for(let o=0,s=0;s!==r;++o){const a=t[o]*e;for(let l=0;l!==e;++l)i[s++]=n[a+l]}return i},flattenJSON:function(n,e,t,r){let i=1,o=n[0];for(;void 0!==o&&void 0===o[r];)o=n[i++];if(void 0===o)return;let s=o[r];if(void 0!==s)if(Array.isArray(s))do{s=o[r],void 0!==s&&(e.push(o.time),t.push.apply(t,s)),o=n[i++]}while(void 0!==o);else if(void 0!==s.toArray)do{s=o[r],void 0!==s&&(e.push(o.time),s.toArray(t,t.length)),o=n[i++]}while(void 0!==o);else do{s=o[r],void 0!==s&&(e.push(o.time),t.push(s)),o=n[i++]}while(void 0!==o)},subclip:function(n,e,t,r,i=30){const o=n.clone();o.name=e;const s=[];for(let l=0;l<o.tracks.length;++l){const c=o.tracks[l],u=c.getValueSize(),d=[],h=[];for(let f=0;f<c.times.length;++f){const p=c.times[f]*i;if(!(p<t||p>=r)){d.push(c.times[f]);for(let g=0;g<u;++g)h.push(c.values[f*u+g])}}0!==d.length&&(c.times=Jt.convertArray(d,c.times.constructor),c.values=Jt.convertArray(h,c.values.constructor),s.push(c))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o},makeClipAdditive:function(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,o=e/r;for(let s=0;s<i;++s){const a=t.tracks[s],l=a.ValueTypeName;if("bool"===l||"string"===l)continue;const c=n.tracks.find(function(y){return y.name===a.name&&y.ValueTypeName===l});if(void 0===c)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const p=a.times.length-1;let g;if(o<=a.times[0])g=Jt.arraySlice(a.values,u,d-u);else if(o>=a.times[p]){const y=p*d+u;g=Jt.arraySlice(a.values,y,y+d-u)}else{const y=a.createInterpolant(),v=u,_=d-u;y.evaluate(o),g=Jt.arraySlice(y.resultBuffer,v,_)}"quaternion"===l&&(new Rn).fromArray(g).normalize().conjugate().toArray(g);const m=c.times.length;for(let y=0;y<m;++y){const v=y*f+h;if("quaternion"===l)Rn.multiplyQuaternionsFlat(c.values,v,g,0,c.values,v);else{const _=f-2*h;for(let M=0;M<_;++M)c.values[v+M]-=g[M]}}}return n.blendMode=2501,n}};class ts{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],o=t[r-1];e:{t:{let s;n:{r:if(!(e<i)){for(let a=r+2;;){if(void 0===i){if(e<o)break r;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,o)}if(r===a)break;if(o=i,i=t[++r],e<i)break t}s=t.length;break n}if(e>=o)break e;{const a=t[1];e<a&&(r=2,o=a);for(let l=r-2;;){if(void 0===o)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(r===l)break;if(i=o,o=t[--r-1],e>=o)break t}s=r,r=0}}for(;r<s;){const a=r+s>>>1;e<t[a]?s=a:r=a+1}if(i=t[r],o=t[r-1],void 0===o)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,o,e)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=e*i;for(let s=0;s!==i;++s)t[s]=r[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}ts.prototype.beforeStart_=ts.prototype.copySampleValue_,ts.prototype.afterEnd_=ts.prototype.copySampleValue_;class Q9 extends ts{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ml,endingEnd:ml}}intervalChanged_(e,t,r){const i=this.parameterPositions;let o=e-2,s=e+1,a=i[o],l=i[s];if(void 0===a)switch(this.getSettings_().endingStart){case yl:o=e,a=2*t-r;break;case 2402:o=i.length-2,a=t+i[o]-i[o+1];break;default:o=e,a=r}if(void 0===l)switch(this.getSettings_().endingEnd){case yl:s=e,l=2*r-t;break;case 2402:s=1,l=r+i[1]-i[0];break;default:s=e-1,l=t}const c=.5*(r-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=o*u,this._offsetNext=s*u}interpolate_(e,t,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(r-t)/(i-t),g=p*p,m=g*p,y=-h*m+2*h*g-h*p,v=(1+h)*m+(-1.5-2*h)*g+(-.5+h)*p+1,_=(-1-f)*m+(1.5+f)*g+.5*p,M=f*m-f*g;for(let w=0;w!==a;++w)o[w]=y*s[u+w]+v*s[c+w]+_*s[l+w]+M*s[d+w];return o}}class TP extends ts{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-t)/(i-t),d=1-u;for(let h=0;h!==a;++h)o[h]=s[c+h]*d+s[l+h]*u;return o}}class e7 extends ts{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ii{constructor(e,t,r,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Jt.convertArray(t,this.TimeBufferType),this.values=Jt.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Jt.convertArray(e.times,Array),values:Jt.convertArray(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new e7(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new TP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Q9(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let o=0,s=i-1;for(;o!==i&&r[o]<e;)++o;for(;-1!==s&&r[s]>t;)--s;if(++s,0!==o||s!==i){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=Jt.arraySlice(r,o,s),this.values=Jt.arraySlice(this.values,o*a,s*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,o=r.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){const l=r[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==s&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(void 0!==i&&Jt.isTypedArray(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=Jt.arraySlice(this.times),t=Jt.arraySlice(this.values),r=this.getValueSize(),i=2302===this.getInterpolation(),o=e.length-1;let s=1;for(let a=1;a<o;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(i)l=!0;else{const d=a*r,h=d-r,f=d+r;for(let p=0;p!==r;++p){const g=t[d+p];if(g!==t[h+p]||g!==t[f+p]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];const d=a*r,h=s*r;for(let f=0;f!==r;++f)t[h+f]=t[d+f]}++s}}if(o>0){e[s]=e[o];for(let a=o*r,l=s*r,c=0;c!==r;++c)t[l+c]=t[a+c];++s}return s!==e.length?(this.times=Jt.arraySlice(e,0,s),this.values=Jt.arraySlice(t,0,s*r)):(this.times=e,this.values=t),this}clone(){const e=Jt.arraySlice(this.times,0),t=Jt.arraySlice(this.values,0),i=new(0,this.constructor)(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Ii.prototype.TimeBufferType=Float32Array,Ii.prototype.ValueBufferType=Float32Array,Ii.prototype.DefaultInterpolation=2301;class Zl extends Ii{}Zl.prototype.ValueTypeName="bool",Zl.prototype.ValueBufferType=Array,Zl.prototype.DefaultInterpolation=2300,Zl.prototype.InterpolantFactoryMethodLinear=void 0,Zl.prototype.InterpolantFactoryMethodSmooth=void 0;class AP extends Ii{}AP.prototype.ValueTypeName="color";class Up extends Ii{}Up.prototype.ValueTypeName="number";class t7 extends ts{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Rn.slerpFlat(o,0,s,c-a,s,c,l);return o}}class nd extends Ii{InterpolantFactoryMethodLinear(e){return new t7(this.times,this.values,this.getValueSize(),e)}}nd.prototype.ValueTypeName="quaternion",nd.prototype.DefaultInterpolation=2301,nd.prototype.InterpolantFactoryMethodSmooth=void 0;class Yl extends Ii{}Yl.prototype.ValueTypeName="string",Yl.prototype.ValueBufferType=Array,Yl.prototype.DefaultInterpolation=2300,Yl.prototype.InterpolantFactoryMethodLinear=void 0,Yl.prototype.InterpolantFactoryMethodSmooth=void 0;class Hp extends Ii{}Hp.prototype.ValueTypeName="vector";class zp{constructor(e,t=-1,r,i=2500){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Dr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,a=r.length;s!==a;++s)t.push(r7(r[s]).scale(i));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=r.length;o!==s;++o)t.push(Ii.toJSON(r[o]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const o=t.length,s=[];for(let a=0;a<o;a++){let l=[],c=[];l.push((a+o-1)%o,a,(a+1)%o),c.push(0,1,0);const u=Jt.getKeyframeOrder(l);l=Jt.sortedArray(l,1,u),c=Jt.sortedArray(c,1,u),!i&&0===l[0]&&(l.push(o),c.push(c[0])),s.push(new Up(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,s)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(o);if(u&&u.length>1){const d=u[1];let h=i[d];h||(i[d]=h=[]),h.push(c)}}const s=[];for(const a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,h,f,p,g){if(0!==f.length){const m=[],y=[];Jt.flattenJSON(f,m,y,p),0!==m.length&&g.push(new d(h,m,y))}},i=[],o=e.name||"default",s=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let g=0;g<h[p].morphTargets.length;g++)f[h[p].morphTargets[g]]=-1;for(const g in f){const m=[],y=[];for(let v=0;v!==h[p].morphTargets.length;++v){const _=h[p];m.push(_.time),y.push(_.morphTarget===g?1:0)}i.push(new Up(".morphTargetInfluence["+g+"]",m,y))}l=f.length*s}else{const f=".bones["+t[d].name+"]";r(Hp,f+".position",h,"pos",i),r(nd,f+".quaternion",h,"rot",i),r(Hp,f+".scale",h,"scl",i)}}return 0===i.length?null:new this(o,l,i,a)}resetDuration(){let t=0;for(let r=0,i=this.tracks.length;r!==i;++r){const o=this.tracks[r];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function r7(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function n7(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Up;case"vector":case"vector2":case"vector3":case"vector4":return Hp;case"color":return AP;case"quaternion":return nd;case"bool":case"boolean":return Zl;case"string":return Yl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],r=[];Jt.flattenJSON(n.keys,t,r,"value"),n.times=t,n.values=r}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Jl={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};const i7=new class NP{constructor(e,t,r){const i=this;let l,o=!1,s=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,!1===o&&void 0!==i.onStart&&i.onStart(u,s,a),o=!0},this.itemEnd=function(u){s++,void 0!==i.onProgress&&i.onProgress(u,s,a),s===a&&(o=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(u){void 0!==i.onError&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return-1!==d&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const f=c[d],p=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return p}return null}}};class ns{constructor(e){this.manager=void 0!==e?e:i7,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,o){r.load(e,i,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const wo={};class rs extends ns{constructor(e){super(e)}load(e,t,r,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=Jl.get(e);if(void 0!==o)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(void 0!==wo[e])return void wo[e].push({onLoad:t,onProgress:r,onError:i});wo[e]=[],wo[e].push({onLoad:t,onProgress:r,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===c.body||void 0===c.body.getReader)return c;const u=wo[e],d=c.body.getReader(),h=c.headers.get("Content-Length"),f=h?parseInt(h):0,p=0!==f;let g=0;const m=new ReadableStream({start(y){!function v(){d.read().then(({done:_,value:M})=>{if(_)y.close();else{g+=M.byteLength;const w=new ProgressEvent("progress",{lengthComputable:p,loaded:g,total:f});for(let b=0,A=u.length;b<A;b++){const x=u[b];x.onProgress&&x.onProgress(w)}y.enqueue(M),v()}})}()}});return new Response(m)}throw Error(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return c.json();default:if(void 0===a)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(p=>f.decode(p))}}}).then(c=>{Jl.add(e,c);const u=wo[e];delete wo[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=wo[e];if(void 0===u)throw this.manager.itemError(e),c;delete wo[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class jp extends ns{constructor(e){super(e)}load(e,t,r,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=Jl.get(e);if(void 0!==s)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const a=Ou("img");function l(){u(),Jl.add(e,this),t&&t(this),o.manager.itemEnd(e)}function c(d){u(),i&&i(d),o.manager.itemError(e),o.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}}class o7 extends ns{constructor(e){super(e)}load(e,t,r,i){const o=new Bu,s=new jp(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function l(c){s.load(e[c],function(u){o.images[c]=u,a++,6===a&&(o.needsUpdate=!0,t&&t(o))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return o}}class s7 extends ns{constructor(e){super(e)}load(e,t,r,i){const o=new or,s=new jp(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,void 0!==t&&t(o)},r,i),o}}class Ri extends St{constructor(e,t=1){super(),this.type="Light",this.color=new pe(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Ri.prototype.isLight=!0;(class PP extends Ri{constructor(e,t,r){super(e,r),this.type="HemisphereLight",this.position.copy(St.DefaultUp),this.updateMatrix(),this.groundColor=new pe(t)}copy(e){return Ri.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const IP=new be,RP=new C,OP=new C;class kM{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Z(512,512),this.map=null,this.mapPass=null,this.matrix=new be,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new lp,this._frameExtents=new Z(1,1),this._viewportCount=1,this._viewports=[new Nt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;RP.setFromMatrixPosition(e.matrixWorld),t.position.copy(RP),OP.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(OP),t.updateMatrixWorld(),IP.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(IP),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class FP extends kM{constructor(){super(new Fn(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,r=2*Iu*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(r!==t.fov||i!==t.aspect||o!==t.far)&&(t.fov=r,t.aspect=i,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}FP.prototype.isSpotLightShadow=!0;(class LP extends Ri{constructor(e,t,r=0,i=Math.PI/3,o=0,s=1){super(e,t),this.type="SpotLight",this.position.copy(St.DefaultUp),this.updateMatrix(),this.target=new St,this.distance=r,this.angle=i,this.penumbra=o,this.decay=s,this.shadow=new FP}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isSpotLight=!0;const kP=new be,rd=new C,BM=new C;class BP extends kM{constructor(){super(new Fn(90,1,.5,500)),this._frameExtents=new Z(4,2),this._viewportCount=6,this._viewports=[new Nt(2,1,1,1),new Nt(0,1,1,1),new Nt(3,1,1,1),new Nt(1,1,1,1),new Nt(3,0,1,1),new Nt(1,0,1,1)],this._cubeDirections=[new C(1,0,0),new C(-1,0,0),new C(0,0,1),new C(0,0,-1),new C(0,1,0),new C(0,-1,0)],this._cubeUps=[new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,0,1),new C(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),rd.setFromMatrixPosition(e.matrixWorld),r.position.copy(rd),BM.copy(r.position),BM.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(BM),r.updateMatrixWorld(),i.makeTranslation(-rd.x,-rd.y,-rd.z),kP.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(kP)}}BP.prototype.isPointLightShadow=!0;(class VP extends Ri{constructor(e,t,r=0,i=1){super(e,t),this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new BP}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}).prototype.isPointLight=!0;class GP extends kM{constructor(){super(new Gu(-5,5,5,-5,.5,500))}}GP.prototype.isDirectionalLightShadow=!0;(class UP extends Ri{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(St.DefaultUp),this.updateMatrix(),this.target=new St,this.shadow=new GP}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isDirectionalLight=!0;(class HP extends Ri{constructor(e,t){super(e,t),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class zP extends Ri{constructor(e,t,r=10,i=10){super(e,t),this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class jP{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new C)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,o=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*i),t.addScaledVector(s[2],.488603*o),t.addScaledVector(s[3],.488603*r),t.addScaledVector(s[4],r*i*1.092548),t.addScaledVector(s[5],i*o*1.092548),t.addScaledVector(s[6],.315392*(3*o*o-1)),t.addScaledVector(s[7],r*o*1.092548),t.addScaledVector(s[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,o=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],1.023328*i),t.addScaledVector(s[2],1.023328*o),t.addScaledVector(s[3],1.023328*r),t.addScaledVector(s[4],.858086*r*i),t.addScaledVector(s[5],.858086*i*o),t.addScaledVector(s[6],.743125*o*o-.247708),t.addScaledVector(s[7],.858086*r*o),t.addScaledVector(s[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+3*i);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const r=e.x,i=e.y,o=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*o,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*r*o,t[8]=.546274*(r*r-i*i)}}jP.prototype.isSphericalHarmonics3=!0;class Wp extends Ri{constructor(e=new jP,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}Wp.prototype.isLightProbe=!0;let $p;(class WP extends Ve{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0,class u7 extends ns{constructor(e){super(e),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=Jl.get(e);if(void 0!==s)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(l){Jl.add(e,l),t&&t(l),o.manager.itemEnd(e)}).catch(function(l){i&&i(l),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}.prototype.isImageBitmapLoader=!0;class d7 extends ns{constructor(e){super(e)}load(e,t,r,i){const o=this,s=new rs(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{const l=a.slice(0);(void 0===$p&&($p=new(window.AudioContext||window.webkitAudioContext)),$p).decodeAudioData(l,function(u){t(u)})}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}}(class h7 extends Wp{constructor(e,t,r=1){super(void 0,r);const i=(new pe).set(e),o=(new pe).set(t),s=new C(i.r,i.g,i.b),a=new C(o.r,o.g,o.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(s).sub(a).multiplyScalar(c)}}).prototype.isHemisphereLightProbe=!0,class f7 extends Wp{constructor(e,t=1){super(void 0,t);const r=(new pe).set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class JP{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=KP(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=KP();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function KP(){return(typeof performance>"u"?Date:performance).now()}class v7{constructor(e,t,r){let i,o,s;switch(this.binding=e,this.valueSize=r,t){case"quaternion":i=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:i=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,o=e*i+i;let s=this.cumulativeWeight;if(0===s){for(let a=0;a!==i;++a)r[o+a]=r[a];s=t}else s+=t,this._mixBufferRegion(r,o,0,t/s,i);this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1&&this._mixBufferRegion(r,i,t*this._origIndex,1-o,t),s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const t=this.buffer,r=this.valueSize,i=r*this._origIndex;this.binding.getValue(t,i);for(let o=r,s=i;o!==s;++o)t[o]=t[i+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,o){if(i>=.5)for(let s=0;s!==o;++s)e[t+s]=e[r+s]}_slerp(e,t,r,i){Rn.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,o){const s=this._workIndex*o;Rn.multiplyQuaternionsFlat(e,s,e,t,e,r),Rn.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,r,i,o){const s=1-i;for(let a=0;a!==o;++a){const l=t+a;e[l]=e[l]*s+e[r+a]*i}}_lerpAdditive(e,t,r,i,o){for(let s=0;s!==o;++s){const a=t+s;e[a]=e[a]+e[r+s]*i}}}const GM="\\[\\]\\.:\\/",_7=new RegExp("["+GM+"]","g"),UM="[^"+GM+"]",M7="[^"+GM.replace("\\.","")+"]",x7=/((?:WC+[\/:])*)/.source.replace("WC",UM),w7=/(WCOD+)?/.source.replace("WCOD",M7),b7=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",UM),C7=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",UM),S7=new RegExp("^"+x7+w7+b7+C7+"$"),E7=["material","materials","bones"];class D7{constructor(e,t,r){const i=r||Wt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=r.length;i!==o;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}let Wt=(()=>{class n{constructor(t,r,i){this.path=r,this.parsedPath=i||n.parseTrackName(r),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,i){return t&&t.isAnimationObjectGroup?new n.Composite(t,r,i):new n(t,r,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(_7,"")}static parseTrackName(t){const r=S7.exec(t);if(null===r)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},o=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==o&&-1!==o){const s=i.nodeName.substring(o+1);-1!==E7.indexOf(s)&&(i.nodeName=i.nodeName.substring(0,o),i.objectName=s)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,r){if(void 0===r||""===r||"."===r||-1===r||r===t.name||r===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(r);if(void 0!==i)return i}if(t.children){const i=function(s){for(let a=0;a<s.length;a++){const l=s[a];if(l.name===r||l.uuid===r)return l;const c=i(l.children);if(c)return c}return null},o=i(t.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){const i=this.resolvedProperty;for(let o=0,s=i.length;o!==s;++o)t[r++]=i[o]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){const i=this.resolvedProperty;for(let o=0,s=i.length;o!==s;++o)i[o]=t[r++]}_setValue_array_setNeedsUpdate(t,r){const i=this.resolvedProperty;for(let o=0,s=i.length;o!==s;++o)i[o]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){const i=this.resolvedProperty;for(let o=0,s=i.length;o!==s;++o)i[o]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node;const r=this.parsedPath,i=r.objectName,o=r.propertyName;let s=r.propertyIndex;if(t||(t=n.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){let u=r.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[o];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+r.nodeName+"."+o+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===o){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[s]&&(s=t.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=D7,n})();Wt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Wt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Wt.prototype.GetterByBindingType=[Wt.prototype._getValue_direct,Wt.prototype._getValue_array,Wt.prototype._getValue_arrayElement,Wt.prototype._getValue_toArray],Wt.prototype.SetterByBindingTypeAndVersioning=[[Wt.prototype._setValue_direct,Wt.prototype._setValue_direct_setNeedsUpdate,Wt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Wt.prototype._setValue_array,Wt.prototype._setValue_array_setNeedsUpdate,Wt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Wt.prototype._setValue_arrayElement,Wt.prototype._setValue_arrayElement_setNeedsUpdate,Wt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Wt.prototype._setValue_fromArray,Wt.prototype._setValue_fromArray_setNeedsUpdate,Wt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class A7{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const o=t.tracks,s=o.length,a=new Array(s),l={endingStart:ml,endingEnd:ml};for(let c=0;c!==s;++c){const u=o[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,o=e._clip.duration,a=i/o;e.warp(1,o/i,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,o=i.time,s=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=o,l[1]=o+r,c[0]=e/s,c[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled)return void this._updateWeight(e);const o=this._startTime;if(null!==o){const l=(e-o)*r;if(l<0||0===r)return;this._startTime=null,t=r*l}t*=this._updateTimeScale(e);const s=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;if(2501===this.blendMode)for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(s),c[u].accumulateAdditive(a);else for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(s),c[u].accumulate(i,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(null!==r){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;null!==r&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,o=this._loopCount;const s=2202===r;if(0===e)return-1===o?i:s&&1==(1&o)?t-i:i;if(2200===r){-1===o&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===o&&(e>=0?(o=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,o+=Math.abs(a);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===l){const c=e<0;this._setEndings(c,!c,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(s&&1==(1&o))return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=yl,i.endingEnd=yl):(i.endingStart=e?this.zeroSlopeAtStart?yl:ml:2402,i.endingEnd=t?this.zeroSlopeAtEnd?yl:ml:2402)}_scheduleFading(e,t,r){const i=this._mixer,o=i.time;let s=this._weightInterpolant;null===s&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=t,a[1]=o+e,l[1]=r,this}}(class N7 extends Ls{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,o=i.length,s=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];void 0===u&&(u={},c[l]=u);for(let d=0;d!==o;++d){const h=i[d],f=h.name;let p=u[f];if(void 0!==p)++p.referenceCount,s[d]=p;else{if(p=s[d],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}p=new v7(Wt.create(r,f,t&&t._propertyBindings[d].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),s[d]=p}a[d].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,o=this._actionsByClip[i];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const o=t[r];0==o.useCount++&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const o=t[r];0==--o.useCount&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,o=this._actionsByClip;let s=o[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=s;else{const a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,s=this._actionsByClip,a=s[o],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===l.length&&delete s[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const o=t[r];0==--o.referenceCount&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,o=this._bindings;let s=i[t];void 0===s&&(s={},i[t]=s),s[r]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,o=r.path,s=this._bindingsByRootAndName,a=s[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[o],0===Object.keys(a).length&&delete s[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return void 0===r&&(r=new TP(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,o=t[i];e.__cacheIndex=i,t[i]=e,o.__cacheIndex=r,t[r]=o}clipAction(e,t,r){const i=t||this._root,o=i.uuid;let s="string"==typeof e?zp.findByName(i,e):e;const a=null!==s?s.uuid:e,l=this._actionsByClip[a];let c=null;if(void 0===r&&(r=null!==s?s.blendMode:2500),void 0!==l){const d=l.actionByRoot[o];if(void 0!==d&&d.blendMode===r)return d;c=l.knownActions[0],null===s&&(s=c._clip)}if(null===s)return null;const u=new A7(this,s,t,r);return this._bindAction(u,c),this._addInactiveAction(u,a,o),u}existingAction(e,t){const r=t||this._root,i=r.uuid,o="string"==typeof e?zp.findByName(r,e):e,a=this._actionsByClip[o?o.uuid:e];return void 0!==a&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions;for(let r=this._nActiveActions-1;r>=0;--r)e[r].stop();return this}update(e){const t=this._actions,r=this._nActiveActions,i=this.time+=e*=this.timeScale,o=Math.sign(e),s=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,o,s);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,o=i[r];if(void 0!==o){const s=o.knownActions;for(let a=0,l=s.length;a!==l;++a){const c=s[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const s in r){const l=r[s].actionByRoot[t];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}const o=this._bindingsByRootAndName[t];if(void 0!==o)for(const s in o){const a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class HM{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new HM(void 0===this.value.clone?this.value:this.value.clone())}}(class P7 extends Vl{constructor(e,t,r=1){super(e,t),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;class R7{constructor(e,t,r=0,i=1/0){this.ray=new Ws(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Sl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return zM(e,this,r,t),r.sort(tI),r}intersectObjects(e,t=!0,r=[]){for(let i=0,o=e.length;i<o;i++)zM(e[i],this,r,t);return r.sort(tI),r}}function tI(n,e){return n.distance-e.distance}function zM(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),!0===r){const i=n.children;for(let o=0,s=i.length;o<s;o++)zM(i[o],e,t,!0)}}const nI=new Z;class id{constructor(e=new Z(1/0,1/0),t=new Z(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=nI.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return nI.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}id.prototype.isBox2=!0;const is=new C,Xp=new be,jM=new be;function oI(n){const e=[];!0===n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,oI(n.children[t]));return e}const dI=new ArrayBuffer(4),gi=(new Float32Array(dI),new Uint32Array(dI),new Uint32Array(512)),mi=new Uint32Array(512);for(let n=0;n<256;++n){const e=n-127;e<-27?(gi[n]=0,gi[256|n]=32768,mi[n]=24,mi[256|n]=24):e<-14?(gi[n]=1024>>-e-14,gi[256|n]=1024>>-e-14|32768,mi[n]=-e-1,mi[256|n]=-e-1):e<=15?(gi[n]=e+15<<10,gi[256|n]=e+15<<10|32768,mi[n]=13,mi[256|n]=13):e<128?(gi[n]=31744,gi[256|n]=64512,mi[n]=24,mi[256|n]=24):(gi[n]=31744,gi[256|n]=64512,mi[n]=13,mi[256|n]=13)}const $M=new Uint32Array(2048),Kl=new Uint32Array(64),pI=new Uint32Array(64);for(let n=1;n<1024;++n){let e=n<<13,t=0;for(;0==(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,$M[n]=e|t}for(let n=1024;n<2048;++n)$M[n]=939524096+(n-1024<<13);for(let n=1;n<31;++n)Kl[n]=n<<23;Kl[31]=1199570944,Kl[32]=2147483648;for(let n=33;n<63;++n)Kl[n]=2147483648+(n-32<<23);Kl[63]=3347054592;for(let n=1;n<64;++n)32!==n&&(pI[n]=1024);qr.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(qr.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n},Xu.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)},class k7 extends $l{constructor(e=10,t=10,r=4473924,i=8947848){r=new pe(r),i=new pe(i);const o=t/2,s=e/t,a=e/2,l=[],c=[];for(let h=0,f=0,p=-a;h<=t;h++,p+=s){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const g=h===o?r:i;g.toArray(c,f),f+=3,g.toArray(c,f),f+=3,g.toArray(c,f),f+=3,g.toArray(c,f),f+=3}const u=new Ve;u.setAttribute("position",new we(l,3)),u.setAttribute("color",new we(c,3)),super(u,new Un({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class F7 extends $l{constructor(e){const t=oI(e),r=new Ve,i=[],o=[],s=new pe(0,0,1),a=new pe(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),o.push(s.r,s.g,s.b),o.push(a.r,a.g,a.b))}r.setAttribute("position",new we(i,3)),r.setAttribute("color",new we(o,3)),super(r,new Un({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");jM.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<t.length;o++){const a=t[o];a.parent&&a.parent.isBone&&(Xp.multiplyMatrices(jM,a.matrixWorld),is.setFromMatrixPosition(Xp),i.setXYZ(s,is.x,is.y,is.z),Xp.multiplyMatrices(jM,a.parent.matrixWorld),is.setFromMatrixPosition(Xp),i.setXYZ(s+1,is.x,is.y,is.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},ns.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),class VM{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}.extractUrlBase(n)},ns.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},id.prototype.center=function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)},id.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},id.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},id.prototype.size=function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)},Wr.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)},Wr.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Wr.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},Wr.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},Wr.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)},po.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")},js.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},lp.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)},In.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},In.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},In.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},In.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},In.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},In.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},be.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)},be.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},be.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new C).setFromMatrixColumn(this,3)},be.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)},be.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},be.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},be.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},be.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},be.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)},be.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},be.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},be.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},be.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},be.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},be.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},be.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},be.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},be.prototype.makeFrustum=function(n,e,t,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,r,t,i,o)},be.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},_o.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)},Rn.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)},Rn.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Ws.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},Ws.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)},Ws.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},vn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},vn.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)},vn.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)},vn.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)},vn.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)},vn.barycoordFromPoint=function(n,e,t,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),vn.getBarycoord(n,e,t,r,i)},vn.normal=function(n,e,t,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),vn.getNormal(n,e,t,r)},Mo.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)},Mo.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new es(this,n)},Mo.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ed(this,n)},Z.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},Z.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},Z.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},C.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},C.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},C.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)},C.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)},C.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)},C.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)},C.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},C.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},C.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Nt.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},Nt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},St.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)},St.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},St.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)},St.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},St.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(St.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Tn.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Tn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),vM.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Fn.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(n)},Object.defineProperties(Ri.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}}),Object.defineProperties(jt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Pu},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Pu)}}}),jt.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?Pu:Nu),this},jt.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},jt.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Ve.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)},Ve.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===n?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new jt(arguments[1],arguments[2])))},Ve.prototype.addDrawCall=function(n,e,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)},Ve.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Ve.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Ve.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)},Ve.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(Ve.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Vl.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?Pu:Nu),this},Vl.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},es.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},es.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},es.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},fp.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},HM.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(_n.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new pe}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(pi.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}}),Et.prototype.clearTarget=function(n,e,t,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,r)},Et.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)},Et.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Et.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Et.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Et.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Et.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Et.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Et.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Et.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Et.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Et.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Et.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Et.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Et.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)},Et.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Et.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Et.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Et.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Et.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Et.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Et.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Et.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Et.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Et.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Et.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===n?zt:co}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(RN.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Tr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}}),class g7 extends St{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new d7).load(n,function(r){e.setBuffer(r)}),this},oM.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)},oM.prototype.clear=function(n,e,t,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,r)},Vs.crossOrigin=void 0,Vs.loadTexture=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new s7;i.setCrossOrigin(this.crossOrigin);const o=i.load(n,t,void 0,r);return e&&(o.mapping=e),o},Vs.loadTextureCube=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new o7;i.setCrossOrigin(this.crossOrigin);const o=i.load(n,t,void 0,r);return e&&(o.mapping=e),o},Vs.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Vs.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"140"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="140");const B7=["rendererCanvas"];function V7(n,e){1&n&&dy(0,3),2&n&&(fy(),Ki("ngTemplateOutlet",function qb(n){return function ga(n,e){return n[e]}(function XR(){return He.lFrame.contextLView}(),22+n)}(4)))}function G7(n,e){1&n&&zc(0)}const U7=["*"];class Ql extends Gr{constructor(e){super(e||null)}set(e){this.next("function"==typeof e?e(this.value):e)}}const Ee={obj:n=>n===Object(n)&&!Ee.arr(n)&&"function"!=typeof n,material:n=>!!n&&n.isMaterial,geometry:n=>!!n&&n.isBufferGeometry,mesh:n=>!!n&&n.isMesh,orthographic:n=>!!n&&n.isOrthographicCamera,perspective:n=>!!n&&n.isPerspectiveCamera,camera:n=>!!n&&n.isCamera,glRenderer:n=>!!n&&n instanceof Et,scene:n=>!!n&&n.isScene,object3d:n=>!!n&&n.isObject3D,instance:n=>!!n&&!!n.__ngt__,ref:n=>!!n&&n instanceof Ql,vector3:n=>!!n&&n.isVector3,color:n=>!!n&&n.isColor,supportColorManagement:()=>!0,fun:n=>"function"==typeof n,str:n=>"string"==typeof n,num:n=>"number"==typeof n,boo:n=>"boolean"==typeof n,und:n=>void 0===n,eventEmitter:n=>n instanceof Ke,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Ee.str(n)||Ee.num(n))return n===e;const o=Ee.obj(n);if(o&&"reference"===r)return n===e;const s=Ee.arr(n);if(s&&"reference"===t)return n===e;if((s||o)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;for(a in i?e:n)if(n[a]!==e[a])return!1;if(Ee.und(a)){if(s&&0===n.length&&0===e.length||o&&0===Object.keys(n).length&&0===Object.keys(e).length)return!0;if(n!==e)return!1}return!0}};function cr(n,...e){return t=>[...(e||[]).map(r=>r(t)),{provide:n,useExisting:t}]}function od(n,{defaultValueOrFactory:e,provideValueFactory:t}={}){const i=new Pe(n,{factory:e&&"function"==typeof e?e:()=>e});return[function o(a={}){return yt(i,a)},function s(a){return{provide:i,useValue:t?t(a):a}},i]}function sn(n,e,...t){Ee.fun(e)&&(t=[e,...t]);const r=new Pe(n);return[function i(s={}){return yt(r,s)},function o(s,a){return[...(t||[]).map(l=>l(s,a)),{provide:r,useFactory:l=>a?()=>a(l):Ee.boo(e)?l.parentRef:()=>l.instance,deps:[s]}]},r]}const[z7,ta,Dne]=sn("NgtInstance ref"),[j7,W7,Tne]=sn("NgtInstance host ref");let qM=(()=>{class n{constructor(){this.destroySubject$=new al(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new al(1)}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}get(t){let r;return this.stateSubject$.pipe(Qa(1),sd(),nt(i=>t?t(i):i),sd()).subscribe(i=>{r=i}),r}set(t){const r="function"==typeof t?t(this.get()):t;this.updateState((i,o)=>({...i,...o}))(r)}select(...t){if(0===t.length)return this.stateSubject$.pipe(sd(),YT(),ac({connector:()=>new al(1),resetOnComplete:!0,resetOnRefCountZero:!0,resetOnError:!0}),ll(this.destroy$));w_(t[t.length-1])&&t.push(()=>({}));const{observables:r,projector:i}=function $7(n){const e=Array.from(n),t=e.pop();return{observables:e,projector:t}}(t);let o;return o=0===r.length?this.stateSubject$.pipe(sd(),nt(i)):zv(r).pipe(nt(s=>i(...s))),o.pipe(sd(),YT(),ac({connector:()=>new al(1),resetOnComplete:!0,resetOnRefCountZero:!0,resetOnError:!0}),ll(this.destroy$))}effect(t){const r=new yr;return t(r).pipe(ll(this.destroy$)).subscribe(),i=>(w_(i)?i:Te(i)).pipe(ll(this.destroy$)).subscribe(s=>{r.next(s)})}updateState(t){return r=>(w_(r)?r:Te(r)).pipe(Vo(o=>H0([o],F5).pipe(QT(this.stateSubject$.pipe(sf({}))))),ll(this.destroy$)).subscribe({next:([o,s])=>{this.stateSubject$.next(t(s||{},o))},error:o=>{this.stateSubject$.error(o)}})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=_e({type:n}),n})();function Xr(n){let r,e=ic,t=!1;const i=o=>()=>{e&&e({prev:r,complete:!0,error:o})};return Yt({next:o=>{e&&t&&e({prev:r,complete:!1,error:!1});const s=n(o);s&&(e=s),r=o,t||(t=!0)},complete:i(!1),unsubscribe:i(!1),error:i(!0)})}function sd(){return ui(n=>void 0!==n)}const gI={current:1,min:.5,max:1,debounce:200},[Ane,Nne,q7]=od("NgtPerformance options",{defaultValueOrFactory:gI,provideValueFactory:n=>({...gI,...n})}),[ZM,,X7]=od("window",{defaultValueOrFactory:()=>{const{defaultView:n}=yt(kn);if(!n)throw"window is not available!";return n}}),mI={box:"content-box",scroll:!1,offsetSize:!1,debounce:{scroll:50,resize:0}},[Z7,Pne,Ine]=od("ngtResize Options",{defaultValueOrFactory:mI,provideValueFactory:n=>({...mI,...n})}),[Y7]=od("Resize Observer API support",{defaultValueOrFactory:()=>{const n=ZM();return"ResizeObserver"in n&&null!=n.ResizeObserver}});let yI=(()=>{class n extends qt{constructor(){const{nativeElement:t}=yt(er),r=yt(Kt),i=ZM(),o=Y7(),{box:s,offsetSize:a,scroll:l,debounce:c}=Z7();let u,d,h=[];const f=new yr,p=vI(t),g=c?"number"==typeof c?c:c.scroll:null,m=c?"number"==typeof c?c:c.resize:null,y=v=>dg(tA(v??0),ll(f));return super(v=>{if(o)return r.runOutsideAngular(()=>{const _=w=>{h=w;const{left:b,top:A,width:x,height:E,bottom:N,right:F,x:q,y:re}=t.getBoundingClientRect(),O={left:b,top:A,width:x,height:E,bottom:N,right:F,x:q,y:re};t instanceof HTMLElement&&a&&(O.height=t.offsetHeight,O.width=t.offsetWidth),Object.freeze(O),v.next({entries:w,dpr:i.devicePixelRatio,...O}),K7(d||{},O)||(d=O)},M=()=>{_(h)};u=new ResizeObserver(_),u.observe(t,{box:s}),l&&(p&&p.forEach(w=>{Su(w,"scroll",{capture:!0,passive:!0}).pipe(y(g)).subscribe(M)}),Su(i,"scroll",{capture:!0,passive:!0}).pipe(y(g)).subscribe(M)),Su(i,"resize").pipe(y(m)).subscribe(M)}),()=>{u&&(u.unobserve(t),u.disconnect()),f.next(),f.complete()};v.error("ResizeObserver is not supported in your browser. Please use a polyfill")}),this.pipe(tA(g||0),ac({connector:()=>new al(1),resetOnRefCountZero:!0,resetOnComplete:!0}))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ze({token:n,factory:n.\u0275fac}),n})();function vI(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(o=>"auto"===o||"scroll"===o)&&e.push(n),[...e,...vI(n.parentElement)]}const J7=["x","y","top","bottom","left","right","width","height"],K7=(n,e)=>J7.every(t=>n[t]===e[t]);function na(n){null!==n&&"object"==typeof n&&"needsUpdate"in n&&(n.needsUpdate=!0,"uniformsNeedUpdate"in n&&(n.uniformsNeedUpdate=!0))}function Zr(n){if(n)return n.__ngt__}function YM(n,e,t,r,i=!1){const o=Zr(r?.value),s=t||(o?o.parent:void 0);return Ee.scene(n)&&bo(n,{dispose:null}),Object.assign(n,{__ngt__:{root:e,primitive:i||o?.primitive,eventCount:o?.eventCount??0,handlers:o?.handlers??{},objects:o?.objects??new Ql([]),parent:s?s===n?null:s:null}})}function Q7(n,e,t=!1){const r=Object.entries(e);return 0===r.length?Te({}):n.select(...r.map(([i,o])=>{const s=n.select(a=>a[i]);return o?s.pipe(function XM(){return sf(void 0)}()):s}),(...i)=>i.reduce((o,s,a)=>(o[r[a][0]]=s,o),{})).pipe(sf({}),function z5(){return Xt((n,e)=>{let t,r=!1;n.subscribe(Ot(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}(),nt(([i,o])=>Object.entries(o).reduce((s,[a,l])=>((!Ee.equ(i[a],l)||t&&Ee.equ(i[a],l))&&(s[a]=l),s),{})))}function JM(n){Ee.object3d(n)?n.updateMatrix():Ee.camera(n)&&((Ee.perspective(n)||Ee.orthographic(n))&&n.updateProjectionMatrix(),n.updateMatrixWorld()),na(n)}function bo(n,e){if(!Object.keys(e).length)return;const r=(Zr(n)||{}).root?.()??{};"__ngt__"in e&&(n.__ngt__=Zr(e));for(const i of Object.entries(e)){const o=i[0];let s=i[1];if("raycast"===o&&null==s)continue;Ee.ref(s)&&(s=s.value);const a=n,l=a[o];if(l&&l.set&&(l.copy||l instanceof Sl)){if(Ee.arr(s))l.fromArray?l.fromArray(s):l.set(...s);else if(l.copy&&s&&s.constructor&&l.constructor.name===s.constructor.name)l.copy(s);else if(void 0!==s){const c=l instanceof pe;!c&&l.setScalar?l.setScalar(s):l instanceof Sl&&s instanceof Sl?l.mask=s.mask:l.set(s),!Ee.supportColorManagement()&&!r.linear&&c&&l.convertSRGBToLinear()}}else a[o]=s,!r.linear&&a[o]instanceof or&&(a[o].encoding=zt);na(s),na(l)}}function ra(n,e){return e?e instanceof n?e:(Ee.arr(e)||(e="number"==typeof e?[e,e,e]:[e]),new n(...e)):new n}function KM(n){return Ee.arr(n)?Math.min(Math.max(n[0],window.devicePixelRatio),n[1]):n}const _I={};function ad(n){if(n)return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId;const e=o8.generateUUID();return _I[e]?ad():(_I[e]=!0,e)}function MI(n,e,t,r){const i=t.get(e);i&&(t.delete(e),0===t.size&&(n.delete(r),i.target.releasePointerCapture(r)))}var ld,Qp,QM,eg,cd,e0,ud,t0,n0,r0,o0,s0,a0,xI,wI,bI;const CI={click:!1,contextmenu:!1,dblclick:!1,wheel:!1,pointerdown:!0,pointerup:!0,pointerleave:!0,pointermove:!0,pointercancel:!0,lostpointercapture:!0},l0={objects:"shallow",strict:!1};class Oi extends qM{constructor({nativeElement:{clientWidth:e,clientHeight:t}},r,{devicePixelRatio:i},o,s,a){super(),this.parentStore=o,this.resizeResult$=s,this.zone=a,ld.add(this),Qp.set(this,new Z),QM.set(this,new C),eg.set(this,new C),cd.set(this,new C),this.ready$=this.select(l=>l.ready).pipe(ui(l=>l)),e0.set(this,this.select(this.select(l=>l.camera),this.select(l=>l.scene),this.select(l=>l.gl),this.select(l=>l.raycaster),this.select(l=>l.internal.active),(l,c,u,d,h)=>({ready:!!(l&&u&&c&&d&&!0===h)}))),ud.set(this,void 0),t0.set(this,this.select(this.select(l=>l.size),this.select(l=>l.viewport))),this.startLoop=this.effect(Yt(({invalidate:l})=>{l()})),n0.set(this,this.effect(Xr(({canvasElement:l,rootStateMap:c,advance:u,invalidate:d})=>{const h=this.get(),f=YM(new fp,()=>this.get(),this.parentStore?.get(b=>b.sceneRef));bo(f,h.sceneOptions),this.get(b=>b.sceneRef).set(f);let p=h.gl;h.gl||(p=function iq(n,e){const t="function"==typeof n?n(e):n;return null!=t?.render?t:new Et({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})}(h.glOptions,l)),this.set({gl:p});let g=h.raycaster;h.raycaster||(g=new R7);const{params:m,...y}=h.raycasterOptions||{};Ee.equ(y,g,l0)||bo(g,{...y}),Ee.equ(m,g.params,l0)||bo(g,{params:{...g.params,...m||{}}});let v=h.camera;if(!h.camera){const b=Ee.camera(h.cameraOptions);v=b?h.cameraOptions:function tq(n){return n.orthographic?new Gu(0,0,0,0,.1,1e3):new Fn(75,n.size.width/n.size.height,.1,1e3)}(h),b||(h.cameraOptions&&bo(v,h.cameraOptions),h.cameraOptions?.position||(v.position.z=5),h.cameraOptions?.rotation||v.lookAt(h.lookAt??ra(C)),v.updateProjectionMatrix()),Ee.instance(v)||(v=YM(v,()=>this.get(),this.parentStore?.get(A=>A.cameraRef))),this.get(A=>A.cameraRef).set(v)}let _=h.xr;if(!h.xr){const b=(x,E)=>{"never"!==this.get().frameloop&&u(x,!0,this.get.bind(this),E)},A=()=>{const x=this.get(E=>E.gl);x.xr.enabled=x.xr.isPresenting,x.xr.setAnimationLoop(x.xr.isPresenting?b:null),x.xr.isPresenting||d(this.get.bind(this))};_={connect:()=>{const x=this.get(E=>E.gl);x.xr.addEventListener("sessionstart",A),x.xr.addEventListener("sessionend",A)},disconnect:()=>{const x=this.get(E=>E.gl);x.xr.removeEventListener("sessionstart",A),x.xr.removeEventListener("sessionend",A)}},p.xr&&_.connect(),this.set({xr:_})}if(p.shadowMap){const b=Ee.boo(h.shadows);if(b&&p.shadowMap.enabled!==h.shadows||!Ee.equ(h.shadows,p.shadowMap,l0)){const A=p.shadowMap.enabled;p.shadowMap.enabled=!!h.shadows,b?p.shadowMap.type=2:Object.assign(p.shadowMap,h.shadows),A!==p.shadowMap.enabled&&na(p.shadowMap)}}Ee.supportColorManagement()&&(jr.legacyMode=h.legacy);const M=h.linear?co:zt,w=h.flat?0:4;return p.outputEncoding!==M&&(p.outputEncoding=M),p.toneMapping!==w&&(p.toneMapping=w),p.setClearAlpha(0),p.setPixelRatio(KM(h.viewport.dpr)),p.setSize(h.size.width,h.size.height),Ee.obj(h.glOptions)&&!Ee.fun(h.glOptions)&&!Ee.glRenderer(h.glOptions)&&bo(p,h.glOptions),this.set({gl:p,camera:v,scene:f,raycaster:g}),()=>{const{gl:b,xr:A,cameraRef:x,sceneRef:E,events:N}=this.get();b&&(N.disconnect&&N.disconnect(),b.renderLists.dispose(),b.forceContextLoss(),b.xr&&b.xr.enabled&&(b.xr.setAnimationLoop(null),A.disconnect()),x.complete(),E.complete(),this.set(F=>({...F,internal:{...F.internal,active:!1}})),c.delete(l))}}))),r0.set(this,this.effect(Yt(({width:l,height:c,dpr:u})=>{this.set(({viewport:d,camera:h})=>{const f={width:l,height:c};return{size:f,viewport:{...d,...d.getCurrentViewport(h,hn(this,eg,"f"),f),dpr:KM(u)}}})}))),o0.set(this,this.effect(Yt(()=>{const{camera:l,gl:c,ready:u,cameraOptions:d,size:h,viewport:f}=this.get();u&&(function eq(n,e,t){Ee.camera(n)||e.manual||(Ee.orthographic(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}(d,l,h),c.setPixelRatio(f.dpr),c.setSize(h.width,h.height))}))),s0.set(this,this.effect(Xr(({uuid:l,...c})=>(l&&this.set(u=>({internal:{...u.internal,animations:new Map(u.internal.animations).set(l,c),priority:u.internal.priority+((c.priority||0)>0?1:0)}})),({prev:{uuid:u}={},complete:d})=>{(u!==l||d)&&this.unregisterBeforeRender(l)})))),a0.set(this,this.effect(Yt(()=>{const l=this.get(u=>u.internal);if(!l.animations.size)return;const c=Array.from(l.animations.values());c.sort((u,d)=>(u.priority||0)-(d.priority||0)),this.set(u=>({internal:{...u.internal,subscribers:c}}))}))),this.set({ready:!1,clock:new JP,frameloop:"always",legacy:!1,linear:!1,flat:!1,orthographic:!1,shadows:!1,controls:null,pointer:hn(this,Qp,"f"),mouse:hn(this,Qp,"f"),sceneRef:new Ql,cameraRef:new Ql,events:{priority:1,enabled:!0,connected:void 0,handlers:{},compute:(l,c)=>{c.pointer.set(l.offsetX/c.size.width*2-1,-l.offsetY/c.size.height*2+1),c.raycaster.setFromCamera(c.pointer,c.camera)}},cameraOptions:{},glOptions:{},raycasterOptions:{},sceneOptions:{},pointerMissed:()=>{},internal:{active:!1,lastEvent:null,priority:0,frames:0,interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,animations:new Map},dpr:[1,2],size:{width:e,height:t},viewport:{initialDpr:i||1,dpr:i||1,width:e,height:t,aspect:e/t,distance:0,factor:0,getCurrentViewport:(l=this.get(d=>d.camera),c=hn(this,eg,"f"),u=this.get(d=>d.size))=>{const{width:d,height:h}=u,f=d/h;c instanceof C?hn(this,cd,"f").copy(c):hn(this,cd,"f").set(...c);const p=l.getWorldPosition(hn(this,QM,"f")).distanceTo(hn(this,cd,"f"));if(Ee.orthographic(l))return{width:d/l.zoom,height:h/l.zoom,factor:1,distance:p,aspect:f};const g=l.fov*Math.PI/180,m=2*Math.tan(g/2)*p,y=m*(d/h);return{width:y,height:m,factor:d/y,distance:p,aspect:f}}},performance:{...r,regress:()=>{this.zone.runOutsideAngular(()=>{const l=this.get(c=>c.performance);hn(this,ud,"f")&&clearTimeout(hn(this,ud,"f")),l.current!==l.min&&this.set(c=>({performance:{...c.performance,current:l.min}})),function qI(n,e,t,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?i.call(n,t):i?i.value=t:e.set(n,t)}(this,ud,setTimeout(()=>this.set(c=>({performance:{...c.performance,current:this.get(u=>u.performance.max)}})),l.debounce),"f")})}},previousState:o?.get()})}init(e,t,r,i){hn(this,ld,"m",xI).call(this,e),hn(this,r0,"f").call(this,this.resizeResult$),hn(this,o0,"f").call(this,hn(this,t0,"f")),hn(this,n0,"f").call(this,{canvasElement:e,rootStateMap:t,advance:i,invalidate:r}),hn(this,a0,"f").call(this,this.select(this.select(o=>o.internal.animations),this.select(o=>o.internal.priority))),this.set(o=>({invalidate:()=>r(this.get.bind(this)),advance:(s,a)=>i(s,a,this.get.bind(this)),internal:{...o.internal,active:!0}})),this.set(hn(this,e0,"f"))}onReady(e){return this.effect(Xr(e))(this.ready$)}registerBeforeRender(e){const t=Ee.object3d(e.obj)?e.obj.uuid:Ee.ref(e.obj)?e.obj.value.uuid:ad();return hn(this,s0,"f").call(this,{...e,uuid:t}),()=>{this.unregisterBeforeRender(t)}}unregisterBeforeRender(e){if(!e)return;const t=this.get(o=>o.internal.animations),r=t.get(e);t.delete(e)&&r&&this.set(o=>({internal:{...o.internal,animations:t,priority:o.internal.priority-((r.priority||0)>0?1:0)}}))}addInteraction(e){this.set(t=>({...t,internal:{...t.internal,interaction:[...t.internal.interaction,e]}}))}removeInteraction(e){this.set(t=>({...t,internal:{...t.internal,interaction:t.internal.interaction.filter(r=>r.uuid!==e)}}))}setFrameloop(e="always"){const t=this.get(r=>r.clock);t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),this.set({frameloop:e})}setDpr(e){const t=KM(e);this.set(({viewport:r})=>({dpr:t,viewport:{...r,dpr:t,initialDpr:r.initialDpr||t}}))}ngOnDestroy(){hn(this,ld,"m",bI).call(this),super.ngOnDestroy()}}function vt(n){return null!=n&&"false"!=`${n}`}function Bt(n,e=0){return function oq(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):Bt(e)}function c0(n,e,t){const{decomposedPath:r,base:i}=function sq(n){return n.length<1?{base:"",decomposedPath:[]}:{base:n[0],decomposedPath:n}}(e);void 0!==i&&(function aq(n,e){!Object.prototype.hasOwnProperty.call(n,e)&&Reflect&&Reflect.has&&!Reflect.has(n,e)&&(n[e]={})}(n,i),r.length<=1?bo(n,{[i]:t}):c0(n[i],r.slice(1),t))}Qp=new WeakMap,QM=new WeakMap,eg=new WeakMap,cd=new WeakMap,e0=new WeakMap,ud=new WeakMap,t0=new WeakMap,n0=new WeakMap,r0=new WeakMap,o0=new WeakMap,s0=new WeakMap,a0=new WeakMap,ld=new WeakSet,xI=function(e){const{handlePointer:t}=function rq(n){const e=new C;function r(c){return c.filter(u=>["move","over","enter","out","leave"].some(d=>Zr(u)?.handlers?.["pointer"+d]))}function s(c){const u=n().internal;Array.from(u.hovered.values()).forEach(d=>{if(!c.length||!c.find(h=>h.object===d.object&&h.index===d.index&&h.instanceId===d.instanceId)){const f=Zr(d.eventObject),p=f?.handlers;if(u.hovered.delete(ad(d)),f?.eventCount){const g={...d,intersections:c||[]};p.pointerout?.(g),p.pointerleave?.(g)}}})}function l(c,u){u.forEach(d=>Zr(d)?.handlers?.pointermissed?.(c))}return{handlePointer:c=>{switch(c){case"pointerleave":case"pointercancel":return()=>s([]);case"lostpointercapture":return u=>{const d=n().internal;"pointerId"in u&&!d.capturedMap.has(u.pointerId)&&(d.capturedMap.delete(u.pointerId),s([]))}}return u=>{const{pointerMissed:d,internal:h}=n();h.lastEvent=u;const f="pointermove"===c,p="click"===c||"contextmenu"===c||"dblclick"===c,m=function i(c,u){const d=n(),h=new Set,f=[],p=u?u(d.internal.interaction):d.internal.interaction;p.forEach(m=>{const y=Zr(m)?.root();y&&(y.raycaster.camera=void 0)}),d.previousState||d.events.compute?.(c,d);let g=p.flatMap(m=>{const y=Zr(m)?.root();return y&&y.events.enabled&&null!==y.raycaster.camera?(void 0===y.raycaster.camera&&(y.events.compute?.(c,y,y.previousState),void 0===y.raycaster.camera&&(y.raycaster.camera=null)),y.raycaster.camera?y.raycaster.intersectObject(m,!0):[]):[]}).sort((m,y)=>{const v=Zr(m.object)?.root(),_=Zr(y.object)?.root();return v&&_?_.events.priority-v.events.priority||m.distance-y.distance:0}).filter(m=>{const y=ad(m);return!h.has(y)&&(h.add(y),!0)});d.events.filter&&(g=d.events.filter(g,d));for(const m of g){let y=m.object;for(;y;)Zr(y)?.eventCount&&f.push({...m,eventObject:y}),y=y.parent}if("pointerId"in c&&d.internal.capturedMap.has(c.pointerId))for(const m of d.internal.capturedMap.get(c.pointerId).values())f.push(m.intersection);return f}(u,f?r:void 0),y=p?function t(c){const u=n().internal,d=c.offsetX-u.initialClick[0],h=c.offsetY-u.initialClick[1];return Math.round(Math.sqrt(d*d+h*h))}(u):0;"pointerdown"===c&&(h.initialClick=[u.offsetX,u.offsetY],h.initialHits=m.map(v=>v.eventObject)),p&&!m.length&&y<=2&&(l(u,h.interaction),d&&d(u)),f&&s(m),function o(c,u,d,h){const{raycaster:f,pointer:p,camera:g,internal:m}=n();if(c.length){const y=e.set(p.x,p.y,0).unproject(g),v={stopped:!1};for(const _ of c){const M=E=>m.capturedMap.get(E)?.has(_.eventObject)??!1,w=E=>{const N={intersection:_,target:u.target};m.capturedMap.has(E)?m.capturedMap.get(E).set(_.eventObject,N):m.capturedMap.set(E,new Map([[_.eventObject,N]])),u.target.setPointerCapture(E)},b=E=>{const N=m.capturedMap.get(E);N&&MI(m.capturedMap,_.eventObject,N,E)},A={};for(const E in u){const N=u[E];"function"!=typeof N&&(A[E]=N)}const x={..._,...A,pointer:p,intersections:c,stopped:v.stopped,delta:d,unprojectedPoint:y,ray:f.ray,camera:g,stopPropagation:()=>{const E="pointerId"in u&&m.capturedMap.get(u.pointerId);(!E||E.has(_.eventObject))&&(x.stopped=v.stopped=!0,m.hovered.size&&Array.from(m.hovered.values()).find(N=>N.eventObject===_.eventObject))&&s([...c.slice(0,c.indexOf(_)),_])},target:{hasPointerCapture:M,setPointerCapture:w,releasePointerCapture:b},currentTarget:{hasPointerCapture:M,setPointerCapture:w,releasePointerCapture:b},nativeEvent:u};if(h(x),!0===v.stopped)break}}}(m,u,y,v=>{const _=v.eventObject,M=Zr(_),w=M?.handlers;if(M?.eventCount)if(f){if(w.pointerover||w.pointerenter||w.pointerout||w.pointerleave){const b=ad(v),A=h.hovered.get(b);A?A.stopped&&v.stopPropagation():(h.hovered.set(b,v),w.pointerover?.(v),w.pointerenter?.(v))}w.pointermove?.(v)}else{const b=w[c];b?(!p||h.initialHits.includes(_))&&(l(u,h.interaction.filter(A=>!h.initialHits.includes(A))),b(v)):p&&h.initialHits.includes(_)&&l(u,h.interaction.filter(A=>!h.initialHits.includes(A)))}})}}}}(()=>this.get());this.set(r=>({events:{...r.events,handlers:Object.keys(CI).reduce((i,o)=>(i[o]=t(o),i),{})}})),hn(this,ld,"m",wI).call(this,e)},wI=function(e){this.set(r=>({events:{...r.events,connected:e}}));const t=this.get(r=>r.events.handlers);Object.entries(t??{}).forEach(([r,i])=>{e.addEventListener(r,i,{passive:CI[r]})})},bI=function(){const{handlers:e,connected:t}=this.get(r=>r.events);t&&Object.entries(e??{}).forEach(([r,i])=>{t instanceof HTMLElement&&t.removeEventListener(r,i)})},Oi.\u0275fac=function(e){return new(e||Oi)(De(er),De(q7),De(X7),De(Oi,12),De(yI),De(Kt))},Oi.\u0275prov=Ze({token:Oi,factory:Oi.\u0275fac});let os=(()=>{class n extends qM{constructor(t=!1){super(),this.skipSelfStore=t,this.ready=new Ke,this.hasEmittedAlready=!1,this.update=new Ke,this.instance$=this.select(r=>r.instance).pipe(ci(r=>r.pipe(ui(i=>null!=i)))),this.instanceArgs$=this.select(r=>r.instanceArgs),this.zone=yt(Kt),this.store=this.skipSelfStore?yt(Oi,{skipSelf:!0}):yt(Oi),this.document=yt(kn),this.parentRef=z7({skipSelf:!0,optional:!0}),this.parentHostRef=j7({skipSelf:!0,optional:!0}),this.isPrimitive=!1,this.isWrapper=!1,this.isRaw=!1,this.instanceReady=this.effect(Xr(()=>{const r=this.setOptions(this.select(Q7(this,this.optionFields,Ee.material(this.instanceValue)),this.setOptionsTrigger$,i=>i));return this.get(i=>i.noAttach)||this.attachToParent(),()=>{r.unsubscribe()}})),this.setOptions=this.effect(Yt(r=>{if(0!==Object.keys(r).length&&this.instanceValue){const i=this.get(),o={},{rotation:s,quaternion:a,...l}=r;s?o.rotation=i.rotation:a&&(o.quaternion=i.quaternion);for(const c of Object.keys(l))(Ee.material(this.instanceValue)?void 0!==i[c]:null!=i[c])&&(o[c]=i[c]);Ee.material(this.instanceValue)?(o.uniforms={},"uniforms"in this.instanceValue&&"uniforms"in l&&(o.uniforms={...this.instanceValue.uniforms,...l.uniforms}),this.instanceValue.setValues(o)):bo(this.instanceValue,o),this.postSetOptions(this.instanceValue),JM(this.instanceValue),this.update.observed&&this.update.emit(this.instanceValue)}})),this.attachToParent=this.effect(dg(QT(this.select(r=>r.attach)),Yt(([,r])=>{let i=this.__ngt__.parent;if(!i||!i.value){if(!this.parent?.value)return;this.__ngt__.parent=this.parent,i=this.parent}if("function"==typeof r){const o=r(i,this.instance);o&&(this.__ngt__.previousAttach=o)}else{const o=[...r];if(0===o.length||("material"===o[0]&&o[1]&&Ee.num(Number(o[1]))&&Ee.material(this.instanceValue)&&(Ee.arr(i.value.material)||(i.value.material=[])),("material"===o[0]||"geometry"===o[0])&&!Ee.mesh(i.value)))return;this.__ngt__.previousAttachValue=o.reduce((s,a)=>s[a],i.value),c0(i.value,o,this.instanceValue),this.__ngt__&&this.__ngt__.root().invalidate(),i.value.__ngt__&&i.value.__ngt__.root().invalidate(),this.__ngt__.previousAttach=o,this.set({attach:o})}JM(i.value),JM(this.instanceValue)}))),this.set({instance:new Ql(null),instanceArgs:[],attach:[],noAttach:!1,skipParent:!1})}set ref(t){this.set({instance:t})}set skipParent(t){this.set({attachExplicit:!0,skipParent:vt(t)})}get skipParent(){return this.get(t=>t.skipParent)}set noAttach(t){this.set({noAttachExplicit:!0,noAttach:vt(t)})}get noAttach(){return this.get(t=>t.noAttach)}set attach(t){t&&this.set({skipParentExplicit:!0,attach:"function"==typeof t||Ee.arr(t)?t:[t]})}get attach(){return this.get(t=>t.attach)}get instance(){return this.get(t=>t.instance)}get instanceValue(){return this.isRaw?this.instance.value.valueOf():this.instance.value}get __ngt__(){return this.instance.value.__ngt__}get parent(){return this.skipParent&&this.parentHostRef?.()||this.parentRef?.()}set instanceArgs(t){this.set({instanceArgs:Ee.arr(t)?t:[t]})}get instanceArgs(){return this.get(t=>t.instanceArgs)}ngOnInit(){this.zone.runOutsideAngular(()=>{this.preInit(),this.store.onReady(()=>{this.instanceReady(this.instance$)})})}preInit(){}postInit(){}emitReady(){this.hasEmittedAlready||(this.ready.emit(this.instanceValue),this.hasEmittedAlready=!0)}prepareInstance(t,r){r&&"uuid"in t&&(t.uuid=r);const i=YM(t,()=>this.store.get(),this.parent,this.instance,this.isPrimitive);if(this.postPrepare(i),this.instance.set(i),this.emitReady(),!Ee.object3d(i)&&!this.noAttach&&!this.skipParent){const o=i.__ngt__.parent?.value?.__ngt__?.objects;o&&o.set([...o.value,this.instance])}return i}adjustCtorParams(t){return t}get ctorParams$(){return this.instanceArgs$.pipe(nt(()=>({})))}destroy(){if(this.instanceValue){if(Ee.object3d(this.instanceValue)){const r=this.parent;r&&Ee.object3d(r.value)&&function nq(n,e){const t=n().internal;t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{MI(t.capturedMap,e,r,i)})}(this.__ngt__.root.bind(this.__ngt__),this.instanceValue),null!=this.instanceValue.clear&&this.instanceValue.clear()}else{const r=this.__ngt__.previousAttach;if(null!=r)if("function"==typeof r)r(),this.__ngt__.parent&&this.__ngt__.parent.value&&na(this.__ngt__.parent.value);else{const i=this.__ngt__.previousAttachValue;this.__ngt__.parent&&this.__ngt__.parent.value&&(c0(this.__ngt__.parent.value,r,i),na(this.__ngt__.parent.value))}}const t=this.instanceValue.dispose;t&&"function"==typeof t&&t.apply(this.instanceValue)}this.set({attach:[]}),this.instance.complete()}postPrepare(t){}get optionFields(){return{}}ngOnDestroy(){this.zone.runOutsideAngular(()=>{this.destroy()}),super.ngOnDestroy()}postSetOptions(t){}get setOptionsTrigger$(){return Te({})}}return n.\u0275fac=function(t){return new(t||n)(te("NGT_SKIP_SELF_STORE",8))},n.\u0275dir=_e({type:n,inputs:{ref:"ref",skipParent:"skipParent",noAttach:"noAttach",attach:"attach"},outputs:{ready:"ready",update:"update"},features:[Oe]}),n})();const ia=cr(os),[tg,ss,Rne]=sn("NgtObject ref",ta),[ng,One,Fne]=sn("NgtObject host ref",!0,W7),[Lne,lq,kne]=sn("NgtCamera ref"),[Bne,cq,Vne]=sn("NgtScene ref"),uq=["click","contextmenu","dblclick","pointerup","pointerdown","pointerover","pointerout","pointerenter","pointerleave","pointermove","pointermissed","pointercancel","wheel"];let dq=(()=>{class n extends os{constructor(){super(),this.click=new Ke,this.contextmenu=new Ke,this.dblclick=new Ke,this.pointerup=new Ke,this.pointerdown=new Ke,this.pointerover=new Ke,this.pointerout=new Ke,this.pointerenter=new Ke,this.pointerleave=new Ke,this.pointermove=new Ke,this.pointermissed=new Ke,this.pointercancel=new Ke,this.wheel=new Ke,this.shouldPassThroughRef=!0,this.parentRef=tg({optional:!0,skipSelf:!0}),this.parentHostRef=ng({optional:!0,skipSelf:!0}),this.set({name:"",position:new C,rotation:new po,quaternion:new Rn,scale:new C(1,1,1),color:new pe,castShadow:!1,receiveShadow:!1,priority:0,visible:!0,matrixAutoUpdate:!0,appendMode:"immediate",userData:{}})}set name(t){this.set({nameExplicit:!0,name:t})}get name(){return this.get(t=>t.name)}set position(t){this.set({positionExplicit:!0,position:ra(C,t)})}get position(){return this.get(t=>t.position)}get rotation(){return this.get(t=>t.rotation)}set rotation(t){this.set({rotationExplicit:!0,rotation:ra(po,t)})}get quaternion(){return this.get(t=>t.quaternion)}set quaternion(t){this.set({quaternionExplicit:!0,quaternion:ra(Rn,t)})}get scale(){return this.get(t=>t.scale)}set scale(t){this.set({scaleExplicit:!0,scale:ra(C,t)})}get color(){return this.get(t=>t.color)}set color(t){this.set({colorExplicit:!0,color:ra(pe,t)})}get castShadow(){return this.get(t=>t.castShadow)}set castShadow(t){this.set({castShadowExplicit:!0,castShadow:vt(t)})}get receiveShadow(){return this.get(t=>t.receiveShadow)}set receiveShadow(t){this.set({receiveShadowExplicit:!0,receiveShadow:vt(t)})}get priority(){return this.get(t=>t.priority)}set priority(t){this.set({priorityExplicit:!0,priority:Bt(t)})}get visible(){return this.get(t=>t.visible)}set visible(t){this.set({visibleExplicit:!0,visible:vt(t)})}get matrixAutoUpdate(){return this.get(t=>t.matrixAutoUpdate)}set matrixAutoUpdate(t){this.set({matrixAutoUpdateExplicit:!0,matrixAutoUpdate:vt(t)})}get userData(){return this.get(t=>t.userData)}set userData(t){this.set({userDataExplicit:!0,userData:t})}get dispose(){return this.get(t=>t.dispose)}set dispose(t){this.set({disposeExplicit:!0,dispose:t})}get raycast(){return this.get(t=>t.raycast)}set raycast(t){this.set({raycastExplicit:!0,raycast:t})}get appendMode(){return this.get(t=>t.appendMode)}set appendMode(t){this.set({appendModeExplicit:!0,appendMode:t})}get appendTo(){return this.get(t=>t.appendTo)}set appendTo(t){this.set({appendToExplicit:!0,appendTo:t?Ee.ref(t)?t:new Ql(t):void 0})}get optionFields(){return{name:!1,position:!1,rotation:!1,quaternion:!1,scale:!1,color:!1,castShadow:!1,receiveShadow:!1,visible:!1,matrixAutoUpdate:!1,userData:!1,dispose:!0,raycast:!0}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=_e({type:n,inputs:{name:"name",position:"position",rotation:"rotation",quaternion:"quaternion",scale:"scale",color:"color",castShadow:"castShadow",receiveShadow:"receiveShadow",priority:"priority",visible:"visible",matrixAutoUpdate:"matrixAutoUpdate",userData:"userData",dispose:"dispose",raycast:"raycast",appendMode:"appendMode",appendTo:"appendTo"},outputs:{click:"click",contextmenu:"contextmenu",dblclick:"dblclick",pointerup:"pointerup",pointerdown:"pointerdown",pointerover:"pointerover",pointerout:"pointerout",pointerenter:"pointerenter",pointerleave:"pointerleave",pointermove:"pointermove",pointermissed:"pointermissed",pointercancel:"pointercancel",wheel:"wheel"},features:[Oe]}),n})(),oa=(()=>{class n extends dq{constructor(){super(...arguments),this.appended=new Ke,this.beforeRender=new Ke,this.animateReady=this.beforeRender,this.init=this.effect(Xr(()=>{if(this.instance.value&&this.__ngt__?this.switch():this.prepareInstance(this.objectInitFn(),this.instance?.value?.uuid),this.instance.value){this.postInit&&this.postInit();const t=uq.reduce((r,i)=>{const o=this[i].observed?this[i]:null;return o&&(r.handlers[i]=this.eventNameToHandler(o),r.eventCount+=1),r},{handlers:{},eventCount:0});bo(this.__ngt__,{handlers:t.handlers,eventCount:t.eventCount}),t.eventCount>0&&this.store.addInteraction(this.instance.value),Ee.object3d(this.instance.value)&&this.appendToParent(),this.beforeRender.observed&&this.store.registerBeforeRender({obj:this.instance,callback:r=>{this.beforeRender.emit({state:r,object:this.instance.value})},priority:this.get(r=>r.priority)})}return()=>{this.destroy()}}))}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.store.onReady(()=>{this.preObjectInit?this.preObjectInit(()=>this.init(this.instanceArgs$)):this.init(this.instanceArgs$)})})}get preObjectInit(){}destroy(){this.instance.value&&(this.store.unregisterBeforeRender(this.instance.value.uuid),this.__ngt__.eventCount>0&&this.store.removeInteraction(this.instance.value.uuid),this.remove()),super.destroy()}appendToParent(){const t=()=>{const i=this.get(s=>s.appendTo);if(i&&i.value)return i.value.add(this.instance.value),void this.appended.emit(this.instance.value);const o=this.get(s=>s.appendMode);if("none"!==o){if("root"===o)return this.addToScene(),void this.appended.emit(this.instance.value);"immediate"===o&&(this.addToParent(),this.appended.emit(this.instance.value))}},r=this.store.get(i=>i.gl);r.xr.enabled?r.xr.getSession()?.requestAnimationFrame(t):requestAnimationFrame(t)}addToScene(){const t=this.store.get(r=>r.scene);t&&t.add(this.instance.value)}addToParent(){let t=this.parent;this.shouldUseParent(t)?t.value.add(this.instance.value):(t=this.parentHostRef?.(),this.shouldUseParent(t)?t.value.add(this.instance.value):this.addToScene())}shouldUseParent(t){return t&&t.value&&t.value.uuid!==this.instance.value.uuid}remove(){const{appendMode:t,appendTo:r}=this.get();if(r&&r.value)r.value.remove(this.instance.value);else if(this.shouldUseParent(this.parent)&&"immediate"===t)this.parent.value.remove(this.instance.value);else{const i=this.store.get(o=>o.scene);i&&i.remove(this.instance.value)}}switch(){const t=this.objectInitFn();this.instance.value.children&&(this.instance.value.traverse(r=>{r!==this.instance.value&&r.parent===this.instance.value&&(r.parent=t)}),this.instance.value.children=[]),this.__ngt__.eventCount>0&&this.store.removeInteraction(this.instance.value.uuid),this.remove(),this.prepareInstance(t)}eventNameToHandler(t){return r=>{this.zone.run(()=>{t.emit(r)})}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=_e({type:n,outputs:{appended:"appended",beforeRender:"beforeRender",animateReady:"animateReady"},features:[Oe]}),n})();const sa=cr(oa,ia);let SI=(()=>{class n extends oa{set material(t){this.set({material:t})}set geometry(t){this.set({geometry:t})}set morphTargetInfluences(t){this.set({morphTargetInfluences:t})}set morphTargetDictionary(t){this.set({morphTargetDictionary:t})}objectInitFn(){const t=this.get(),r=this.argsKeys.reduce((o,s)=>(o.push(t[s]),o),[]),i=new this.objectType(Ee.ref(t.geometry)?t.geometry.value:t.geometry,Ee.arr(t.material)?t.material.map(o=>Ee.ref(o)?o.value:o):Ee.ref(t.material)?t.material.value:t.material,...r);return t.morphTargetDictionary&&"morphTargetDictionary"in i&&(i.morphTargetDictionary=t.morphTargetDictionary),t.morphTargetInfluences&&"morphTargetInfluences"in i&&(i.morphTargetInfluences=t.morphTargetInfluences),i}get argsKeys(){return[]}get optionFields(){return{...super.optionFields,material:!0,geometry:!0,morphTargetInfluences:!0,morphTargetDictionary:!0}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=_e({type:n,inputs:{material:"material",geometry:"geometry",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary"},features:[Oe]}),n})(),fq=(()=>{class n{constructor(){this.cached=new Map}use(t,r,i,o){const s=Ee.arr(r)?r:[r],a=new t;i&&i(a);const l=s.map(c=>(this.cached.has(c)||this.cached.set(c,ln(a.loadAsync(c,o)).pipe(Yt(u=>{u.scene&&Object.assign(u,function hq(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}(u.scene))}),function $5(n=1/0){let e;e=n&&"object"==typeof n?n:{count:n};const{count:t=1/0,delay:r,resetOnSuccess:i=!1}=e;return t<=0?yi:Xt((o,s)=>{let l,a=0;const c=()=>{let u=!1;l=o.subscribe(Ot(s,d=>{i&&(a=0),s.next(d)},void 0,d=>{if(a++<t){const h=()=>{l?(l.unsubscribe(),l=null,c()):u=!0};if(null!=r){const f="number"==typeof r?function W5(n=0,e,t=L5){let r=-1;return null!=e&&(B0(e)?t=e:r=e),new qt(i=>{let o=function j5(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}(r):Zn(r(d,a)),p=Ot(s,()=>{p.unsubscribe(),h()},()=>{s.complete()});f.subscribe(p)}else h()}else s.error(d)})),u&&(l.unsubscribe(),l=null,c())};c()})}({count:2}),so(u=>(console.error(`Error loading ${c}: ${u.message}`),Te(null))),ac({connector:()=>new al,resetOnComplete:!0,resetOnRefCountZero:!0,resetOnError:!0}))),this.cached.get(c)));return function DD(...n){const e=gg(n),{args:t,keys:r}=SD(n),i=new qt(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let l=s,c=s;for(let u=0;u<s;u++){let d=!1;Zn(t[u]).subscribe(Ot(o,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(r?ED(r,a):a),o.complete())}))}});return e?i.pipe(wv(e)):i}(l).pipe(nt(c=>Ee.arr(r)?c:c[0]))}destroy(){this.cached.clear()}ngOnDestroy(){this.destroy()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Ze({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rg=new Set,ig=new Set,u0=new Set;function dd(n,e){n.forEach(({callback:t})=>t(e))}function h0(n,e,t){const r=e();let i=r.clock.getDelta();"never"===r.frameloop&&"number"==typeof n&&(i=n-r.clock.elapsedTime,r.clock.oldTime=r.clock.elapsedTime,r.clock.elapsedTime=n);for(const o of r.internal.subscribers){const s=Ee.ref(o.obj)?o.obj.value:o.obj;o.callback({...r,delta:i,frame:t},s)}return!r.internal.priority&&r.gl.render&&r.gl.render(r.scene,r.camera),r.internal.frames=Math.max(0,r.internal.frames-1),"always"===r.frameloop?1:r.internal.frames}const f0=new Map,{invalidate:gq,advance:mq}=function pq(n){let t,r,i,e=!1;function o(l){if(r=requestAnimationFrame(o),e=!0,t=0,rg.size&&dd(rg,l),n.forEach(c=>{i=c(),i.internal.active&&("always"===i.frameloop||i.internal.frames>0)&&!i.gl.xr?.isPresenting&&(t+=h0(l,c))}),ig.size&&dd(ig,l),0===t)return u0.size&&dd(u0,l),e=!1,cancelAnimationFrame(r)}return{loop:o,invalidate:function s(l,c=1){const u=l?.();if(!u)return n.forEach(d=>s(d,c));u.gl.xr?.isPresenting||!u.internal.active||"never"===u.frameloop||(u.internal.frames=Math.min(60,u.internal.frames+c),e||(e=!0,requestAnimationFrame(o)))},advance:function a(l,c=!0,u,d){c&&dd(rg,l),u?h0(l,u,d):n.forEach(h=>h0(l,h)),c&&dd(ig,l)}}}(f0);let p0=(()=>{class n extends qM{constructor(){super(...arguments),this.hostClass=!0,this._initialLog=!1,this._projectContent=!1,this.created=new Ke,this.pointermissed=new Ke,this.zone=yt(Kt),this.store=yt(Oi),this.loader=yt(fq)}set linear(t){this.store.set({linear:vt(t)})}set legacy(t){this.store.set({legacy:vt(t)})}set flat(t){this.store.set({flat:vt(t)})}set frameloop(t){this.store.setFrameloop(t)}set orthographic(t){this.store.set({orthographic:vt(t)})}set dpr(t){this.store.setDpr(t)}set raycaster(t){this.store.set({raycasterOptions:t})}set shadows(t){this.store.set({shadows:"object"==typeof t?t:vt(t)})}set camera(t){this.store.set({cameraOptions:t})}get cameraRef(){return this.store.get(t=>t.cameraRef)}set lookAt(t){this.store.set({lookAt:ra(C,t)})}set scene(t){this.store.set({sceneOptions:t})}get sceneRef(){return this.store.get(t=>t.sceneRef)}set gl(t){this.store.set({glOptions:t})}get initialLog(){return this._initialLog}set initialLog(t){this._initialLog=vt(t)}get projectContent(){return this._projectContent}set projectContent(t){this._projectContent=vt(t)}ngOnInit(){this.zone.runOutsideAngular(()=>{this.pointermissed.observed&&this.store.set({pointerMissed:t=>{this.pointermissed.emit(t)}}),f0.set(this.rendererCanvas.nativeElement,()=>this.store.get()),this.store.init(this.rendererCanvas.nativeElement,f0,gq,mq),this.store.onReady(()=>{const t=this.store.get();this.created.emit(t),this.initialLog&&(console.group("[NgtCanvas] Initialized"),console.log(t),console.groupEnd()),this.store.startLoop(this.store.select())})})}ngOnDestroy(){super.ngOnDestroy(),this.loader.destroy()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275cmp=Ln({type:n,selectors:[["ngt-canvas"]],viewQuery:function(t,r){if(1&t&&OS(B7,7),2&t){let i;_h(i=function Mh(){return function DB(n,e){return n[19].queries[e].queryList}(J(),cx())}())&&(r.rendererCanvas=i.first)}},hostVars:2,hostBindings:function(t,r){2&t&&$a("ngt-canvas",r.hostClass)},inputs:{linear:"linear",legacy:"legacy",flat:"flat",frameloop:"frameloop",orthographic:"orthographic",dpr:"dpr",raycaster:"raycaster",shadows:"shadows",camera:"camera",lookAt:"lookAt",scene:"scene",gl:"gl",initialLog:"initialLog",projectContent:"projectContent"},outputs:{created:"created",pointermissed:"pointermissed"},standalone:!0,features:[Rt([Oi,yI,ss(n,e=>e.sceneRef),cq(n,e=>e.sceneRef),lq(n,e=>e.cameraRef)]),Oe,Za],ngContentSelectors:U7,decls:5,vars:1,consts:[["rendererCanvas",""],[3,"ngTemplateOutlet",4,"ngIf"],["contentTemplate",""],[3,"ngTemplateOutlet"]],template:function(t,r){1&t&&(Hc(),ze(0,"canvas",null,0),Io(2,V7,1,1,"ng-container",1),Io(3,G7,1,0,"ng-template",null,2,BS)),2&t&&(Sr(2),Ki("ngIf",r.projectContent))},dependencies:[Hh,eD],styles:["[_nghost-%COMP%]{display:block;position:relative;width:100%;height:100%;overflow:hidden}[_nghost-%COMP%]   canvas[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),n})();const[jne,Wne,$ne]=sn("NgtCommonAttribute ref",ta),[qne,Xne,Zne]=sn("NgtCommonAudio ref",ss),[Yne,Jne,Kne]=sn("NgtCommonCamera ref",ss),[Qne,ere,tre]=sn("NgtCommonCurve ref",ta),[nre,yq,rre]=sn("NgtCommonGeometry ref",ta),[ire,ore,sre]=sn("NgtCommonHelper ref",ss),[are,lre,cre]=sn("NgtCommonObjectHelper ref",ta),[ure,,dre]=od("isWebGLAvailable",{defaultValueOrFactory:()=>{const n=yt(kn),e=ZM();try{const t=n.createElement("canvas");return!(!e.WebGL2RenderingContext||!t.getContext("webgl2"))}catch{return!1}}}),[hre,fre,pre]=sn("NgtCommonLight ref",ss),[gre,mre,yre]=sn("NgtCommonLine ref",ss),[vre,vq,_re]=sn("NgtCommonMaterial ref",ta),[Mre,_q,xre]=sn("NgtCommonMesh ref",ss),[wre,bre,Cre]=sn("NgtSkinnedMesh host ref",!0),[Sre,Ere,Dre]=sn("NgtSkeleton host ref",!0),[Tre,Are,Nre]=sn("NgtBone host ref",!0),[Pre,Ire,Rre]=sn("NgtCommonSprite ref",ss),[Ore,Fre,Lre]=sn("NgtCommonTexture ref",ta);cr((()=>{class n extends os{constructor(){super(...arguments),this.init=this.effect(Xr(t=>{this.prepareInstance(new this.attributeType(...t))}))}set args(t){this.instanceArgs=t}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.store.onReady(()=>{const t=this.init(this.instanceArgs$);return this.postInit(),()=>{t&&t.unsubscribe&&t.unsubscribe()}})})}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=_e({type:n,inputs:{args:"args"},features:[Oe]}),n})(),ia),cr((()=>{class n extends oa{set listener(t){this.set({listener:t})}set buffer(t){this.set({buffer:t})}set detune(t){this.set({detune:Bt(t)})}set loop(t){this.set({loop:vt(t)})}set loopStart(t){this.set({loopStart:Bt(t)})}set loopEnd(t){this.set({loopEnd:Bt(t)})}set offset(t){this.set({offset:Bt(t)})}set playbackRate(t){this.set({playbackRate:Bt(t)})}set isPlaying(t){this.set({isPlaying:vt(t)})}set hasPlaybackControl(t){this.set({hasPlaybackControl:vt(t)})}set sourceType(t){this.set({sourceType:t})}set source(t){this.set({source:t})}set filters(t){this.set({filters:t})}set duration(t){this.set({duration:Bt(t)})}set autoplay(t){this.set({autoplay:vt(t)})}objectInitFn(){const{listener:t}=this.get();if(!t)throw new Error(`[NgtCommonAudio] Cannot initialize ${this.audioType} without "THREE.AudioListener"`);return new this.audioType(t)}preInit(){this.set(t=>({buffer:t.buffer||null,detune:t.detune||0,loop:t.loop||!1,loopStart:t.loopStart||0,loopEnd:t.loopEnd||0,offset:t.offset||0,duration:t.duration||void 0,playbackRate:t.playbackRate||1,isPlaying:t.isPlaying||!1,hasPlaybackControl:t.hasPlaybackControl||!0,sourceType:t.sourceType||"empty",source:t.source||null,filters:t.filters||[]}))}get preObjectInit(){return t=>{this.effect(Xr(()=>{t()}))(this.select(r=>r.listener))}}get optionFields(){return{...super.optionFields,autoplay:!0,buffer:!1,detune:!1,loop:!1,loopStart:!1,loopEnd:!1,offset:!1,duration:!0,playbackRate:!1,isPlaying:!1,hasPlaybackControl:!1,sourceType:!1,source:!1,filters:!1}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=_e({type:n,inputs:{listener:"listener",buffer:"buffer",detune:"detune",loop:"loop",loopStart:"loopStart",loopEnd:"loopEnd",offset:"offset",playbackRate:"playbackRate",isPlaying:"isPlaying",hasPlaybackControl:"hasPlaybackControl",sourceType:"sourceType",source:"source",filters:"filters",duration:"duration",autoplay:"autoplay"},features:[Oe]}),n})(),sa),cr((()=>{class n extends oa{set args(t){this.instanceArgs=t}objectInitFn(){const t=this.get(r=>r.instanceArgs);return new this.cameraType(...t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=_e({type:n,inputs:{args:"args"},features:[Oe]}),n})(),sa),cr((()=>{class n extends os{constructor(){super(...arguments),this.init=this.effect(Xr(t=>{this.prepareInstance(new this.curveType(...t))}))}set args(t){this.instanceArgs=t}set arcLengthDivisions(t){this.set({arcLengthDivisions:Bt(t)})}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.store.onReady(()=>{this.init(this.instanceArgs$),this.postInit()})})}postPrepare(t){const r=this.get(i=>i.arcLengthDivisions);null!=r&&(t.arcLengthDivisions=r)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=_e({type:n,inputs:{args:"args",arcLengthDivisions:"arcLengthDivisions"},features:[Oe]}),n})(),ia);let EI=(()=>{class n extends os{constructor(){super(...arguments),this.parentRef=tg({optional:!0,skipSelf:!0}),this.parentHostRef=ng({optional:!0,skipSelf:!0}),this.init=this.effect(Xr(()=>{const t=this.get(o=>o.instanceArgs),r=this.adjustCtorParams(t),i=this.prepareInstance(new this.geometryType(...r));return()=>{i.dispose()}}))}set args(t){this.instanceArgs=t}preInit(){this.set(t=>({attach:t.attach.length?t.attach:["geometry"]}))}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.store.onReady(()=>{this.init(this.ctorParams$),this.postInit()})})}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=_e({type:n,inputs:{args:"args"},features:[Oe]}),n})();const Mq=cr(EI,ia);cr((()=>{class n extends oa{set args(t){this.instanceArgs=t}objectInitFn(){const t=this.get(r=>r.instanceArgs);return new this.helperType(...t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=_e({type:n,inputs:{args:"args"},features:[Oe]}),n})(),sa),cr((()=>{class n extends oa{set args(t){this.instanceArgs=t}set intensity(t){this.set({intensity:Bt(t)})}objectInitFn(){const{intensity:t,instanceArgs:r}=this.get(),i=new this.lightType(...r);return null!=t&&(i.intensity=t),i}get preObjectInit(){return t=>{this.set(r=>({intensity:r.intensity??1})),t()}}get optionFields(){return{...super.optionFields,intensity:!1}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=_e({type:n,inputs:{args:"args",intensity:"intensity"},features:[Oe]}),n})(),sa),cr((()=>{class n extends SI{get objectType(){return this.lineType}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=_e({type:n,features:[Oe]}),n})(),sa);let DI=(()=>{class n extends os{constructor(){super(...arguments),this.parentRef=tg({optional:!0,skipSelf:!0}),this.parentHostRef=ng({optional:!0,skipSelf:!0}),this.init=this.effect(Xr(()=>{const t=this.prepareInstance(new this.materialType);return()=>{t.dispose()}}))}set alphaTest(t){this.set({alphaTest:Bt(t)})}set alphaToCoverage(t){this.set({alphaToCoverage:vt(t)})}set blendDst(t){this.set({blendDst:t})}set blendDstAlpha(t){this.set({blendDstAlpha:Bt(t)})}set blendEquation(t){this.set({blendEquation:t})}set blendEquationAlpha(t){this.set({blendEquationAlpha:Bt(t)})}set blending(t){this.set({blending:t})}set blendSrc(t){this.set({blendSrc:t})}set blendSrcAlpha(t){this.set({blendSrcAlpha:Bt(t)})}set clipIntersection(t){this.set({clipIntersection:vt(t)})}set clippingPlanes(t){this.set({clippingPlanes:t})}set clipShadows(t){this.set({clipShadows:vt(t)})}set colorWrite(t){this.set({colorWrite:vt(t)})}set defines(t){this.set({defines:t})}set depthFunc(t){this.set({depthFunc:t})}set depthTest(t){this.set({depthTest:vt(t)})}set depthWrite(t){this.set({depthWrite:vt(t)})}set name(t){this.set({name:t})}set opacity(t){this.set({opacity:Bt(t)})}set polygonOffset(t){this.set({polygonOffset:vt(t)})}set polygonOffsetFactor(t){this.set({polygonOffsetFactor:Bt(t)})}set polygonOffsetUnits(t){this.set({polygonOffsetUnits:Bt(t)})}set precision(t){this.set({precision:t})}set premultipliedAlpha(t){this.set({premultipliedAlpha:vt(t)})}set dithering(t){this.set({dithering:vt(t)})}set side(t){this.set({side:t})}set shadowSide(t){this.set({shadowSide:t})}set toneMapped(t){this.set({toneMapped:vt(t)})}set transparent(t){this.set({transparent:vt(t)})}set vertexColors(t){this.set({vertexColors:vt(t)})}set visible(t){this.set({visible:vt(t)})}set format(t){this.set({format:t})}set stencilWrite(t){this.set({stencilWrite:vt(t)})}set stencilFunc(t){this.set({stencilFunc:t})}set stencilRef(t){this.set({stencilRef:Bt(t)})}set stencilWriteMask(t){this.set({stencilWriteMask:Bt(t)})}set stencilFuncMask(t){this.set({stencilFuncMask:Bt(t)})}set stencilFail(t){this.set({stencilFail:t})}set stencilZFail(t){this.set({stencilZFail:t})}set stencilZPass(t){this.set({stencilZPass:t})}set userData(t){this.set({userData:t})}preInit(){this.set(t=>({attach:t.attach.length?t.attach:["material"]}))}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.store.onReady(()=>{this.init(this.ctorParams$),this.postInit()})})}get optionFields(){return{...super.optionFields,alphaTest:!0,alphaToCoverage:!0,blendDst:!0,blendDstAlpha:!0,blendEquation:!0,blendEquationAlpha:!0,blending:!0,blendSrc:!0,blendSrcAlpha:!0,clipIntersection:!0,clippingPlanes:!0,clipShadows:!0,colorWrite:!0,defines:!0,depthFunc:!0,depthTest:!0,depthWrite:!0,fog:!0,name:!0,opacity:!0,polygonOffset:!0,polygonOffsetFactor:!0,polygonOffsetUnits:!0,precision:!0,premultipliedAlpha:!0,dithering:!0,side:!0,shadowSide:!0,toneMapped:!0,transparent:!0,vertexColors:!0,visible:!0,format:!0,stencilWrite:!0,stencilFunc:!0,stencilRef:!0,stencilWriteMask:!0,stencilFuncMask:!0,stencilFail:!0,stencilZFail:!0,stencilZPass:!0,userData:!0}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=_e({type:n,inputs:{alphaTest:"alphaTest",alphaToCoverage:"alphaToCoverage",blendDst:"blendDst",blendDstAlpha:"blendDstAlpha",blendEquation:"blendEquation",blendEquationAlpha:"blendEquationAlpha",blending:"blending",blendSrc:"blendSrc",blendSrcAlpha:"blendSrcAlpha",clipIntersection:"clipIntersection",clippingPlanes:"clippingPlanes",clipShadows:"clipShadows",colorWrite:"colorWrite",defines:"defines",depthFunc:"depthFunc",depthTest:"depthTest",depthWrite:"depthWrite",name:"name",opacity:"opacity",polygonOffset:"polygonOffset",polygonOffsetFactor:"polygonOffsetFactor",polygonOffsetUnits:"polygonOffsetUnits",precision:"precision",premultipliedAlpha:"premultipliedAlpha",dithering:"dithering",side:"side",shadowSide:"shadowSide",toneMapped:"toneMapped",transparent:"transparent",vertexColors:"vertexColors",visible:"visible",format:"format",stencilWrite:"stencilWrite",stencilFunc:"stencilFunc",stencilRef:"stencilRef",stencilWriteMask:"stencilWriteMask",stencilFuncMask:"stencilFuncMask",stencilFail:"stencilFail",stencilZFail:"stencilZFail",stencilZPass:"stencilZPass",userData:"userData"},features:[Oe]}),n})();const xq=cr(DI,ia);let TI=(()=>{class n extends SI{get objectType(){return this.meshType}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=_e({type:n,features:[Oe]}),n})();const wq=cr(TI,sa);cr((()=>{class n extends os{constructor(){super(...arguments),this.parentRef=tg({optional:!0}),this.parentHostRef=ng({optional:!0}),this.init=this.effect(Xr(t=>{if(!this.parent||!this.parent.value)return void console.info("Parent is not an object3d");const r=this.prepareInstance(new this.objectHelperType(this.parent.value,...t)),i=this.store.get(o=>o.scene);if(r&&i){i.add(r);const o=this.store.registerBeforeRender({callback:()=>{r&&r.update()},obj:this.instance});return()=>{r&&i&&(i.remove(r),o())}}}))}set helperVisible(t){this.set({visible:vt(t)})}preInit(){super.preInit(),this.set(t=>({visible:t.visible??!0}))}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.store.onReady(()=>{this.init(this.instanceArgs$),this.postInit()})})}get optionFields(){return{...super.optionFields,visible:!1}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=_e({type:n,inputs:{helperVisible:"helperVisible"},features:[Oe]}),n})(),ia),cr((()=>{class n extends oa{set args(t){this.instanceArgs=t}set material(t){this.set({material:t})}objectInitFn(){const{material:t}=this.get();return new this.spriteType(t)}get optionFields(){return{...super.optionFields,material:!0}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=_e({type:n,inputs:{args:"args",material:"material"},features:[Oe]}),n})(),sa),cr((()=>{class n extends os{constructor(){super(...arguments),this.init=this.effect(Xr(()=>{const t=this.store.get(s=>s.gl),r=this.get(s=>s.instanceArgs),i=this.adjustCtorParams(r),o=this.prepareInstance(new this.textureType(...i));return o.encoding=t.outputEncoding,na(o),()=>{o.dispose()}}))}set args(t){this.instanceArgs=t}set image(t){this.set({image:t})}set mapping(t){this.set({mapping:t})}set wrapS(t){this.set({wrapS:t})}set wrapT(t){this.set({wrapT:t})}set magFilter(t){this.set({magFilter:t})}set minFilter(t){this.set({minFilter:t})}set format(t){this.set({format:t})}set type(t){this.set({type:t})}set anisotropy(t){this.set({anisotropy:Bt(t)})}set encoding(t){this.set({encoding:t})}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.store.onReady(()=>{this.init(this.ctorParams$),this.postInit()})})}get optionFields(){return{...super.optionFields,image:!0,mapping:!0,wrapS:!0,wrapT:!0,magFilter:!0,minFilter:!0,format:!0,type:!0,anisotropy:!0,encoding:!0}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=_e({type:n,inputs:{args:"args",image:"image",mapping:"mapping",wrapS:"wrapS",wrapT:"wrapT",magFilter:"magFilter",minFilter:"minFilter",format:"format",type:"type",anisotropy:"anisotropy",encoding:"encoding"},features:[Oe]}),n})(),ia);let bq=(()=>{class n{constructor(){this.task_variable=!1}ngOnInit(){}scrollfunction(){this.task_variable=document.body.scrollTop>750||document.documentElement.scrollTop>750}chatBot(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ln({type:n,selectors:[["app-genuine-purchase"]],hostBindings:function(t,r){1&t&&Pn("scroll",function(){return r.scrollfunction()},0,Ew)},decls:43,vars:2,consts:[[1,"taskbar"],[1,"task-container"],["href",""],["src","../../assets/images/support.png","id","support","alt",""],["src","../../assets/images/steer.png","id","steer","alt",""],[1,"bx","bxs-download"],[3,"click"],[1,"bx","bxs-chat"],[1,"chatBot-Online"],[1,"new-models"],[1,"section-container"],[1,"new-head"],[1,"new","models","threejs"],[1,"new-container","grid"],[1,"carOne","three","container","span"],[1,"carTwo","three","container","one"],[2,"color","white"],[1,"carThree","three","container","two"],[1,"more-button"],["href","#"]],template:function(t,r){1&t&&(I(0,"div",0)(1,"div",1)(2,"a",2),ze(3,"img",3),R(),I(4,"a",2),ze(5,"img",4),R(),I(6,"a",2),ze(7,"i",5),R(),I(8,"a",6),Pn("click",function(){return r.chatBot()}),ze(9,"i",7),R()()(),ze(10,"div",8),I(11,"div",9)(12,"div",10)(13,"div",11)(14,"h2"),L(15,"Genuine Ghana Purchase"),R()(),I(16,"div",12)(17,"div",13)(18,"div",14)(19,"span")(20,"h2"),L(21,"Purchase"),R(),I(22,"p"),L(23,"Purchase authentically from Toyota Ghana or our trusted dealers"),R()()(),I(24,"div",15)(25,"span")(26,"h2"),L(27,"Parts"),R(),I(28,"p",16),L(29,"Enjoy using durable parts straight from us."),R()()(),I(30,"div",17)(31,"span")(32,"h2"),L(33,"Interior"),R(),I(34,"p",16),L(35,"Interior at top notch"),R()()()()(),I(36,"div",18)(37,"a",19),L(38,"More"),R(),I(39,"span",2),L(40,"|"),R(),I(41,"a",19),L(42,"Gallery"),R()()()()),2&t&&$a("taskbar_change",r.task_variable)},styles:[".taskbar[_ngcontent-%COMP%]{position:fixed;width:250px;height:70px;max-height:50px;min-height:60px;background-color:#000;display:flex;align-items:center;top:5%;right:-40%;border-left:7px solid #EB0A1E;transition:.4s all ease}.task-container[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;justify-content:center;align-items:center}.task-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:invert(100%) sepia(4%) saturate(14%) hue-rotate(59deg) brightness(103%) contrast(106%);margin:0 10px}.task-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{filter:invert(0%) sepia(20%) saturate(100%) hue-rotate(5deg) brightness(200%) contrast(06%);transition:.2s all ease}.task-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0 10px;color:#fff;font-size:2.5rem;transition:.2s all ease}.task-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#eb0a1e;transition:.2s all ease}#support[_ngcontent-%COMP%]{width:35px;filter:invert(100%) sepia(4%) saturate(14%) hue-rotate(59deg) brightness(103%) contrast(106%)}#steer[_ngcontent-%COMP%]{width:35px}.taskbar_change[_ngcontent-%COMP%]{position:fixed;z-index:5;top:5%;right:0;transition:.4s all ease}.new-models[_ngcontent-%COMP%]{width:100%;height:120vh;display:flex;justify-content:space-around;align-content:center}.section-container[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column;justify-content:space-evenly;margin-top:10vh}.new-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3rem}.new[_ngcontent-%COMP%]{width:100%;height:auto;justify-content:center}.more-button[_ngcontent-%COMP%]{margin:20px 0}.more-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px 30px;background-color:#000;color:#fff;font-size:1rem;font-weight:lighter;margin-right:10px}.more-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#eb0a1e;transition:.4s all ease}.more-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.2rem;margin-right:10px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(2,1fr);width:100%;height:70vh;margin:30px 0}.carOne[_ngcontent-%COMP%]{background-image:url(https://www.motorbiscuit.com/wp-content/uploads/2021/11/Drivers-side-rear-angle-view-of-2022-Toyota-RAV4-XSE-with-Cavalry-Blue-color-option.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;padding:1rem}.carTwo[_ngcontent-%COMP%]{background-image:url(https://www.motorbiscuit.com/wp-content/uploads/2021/11/Black-wheel-on-Cavalry-Blue-2022-Toyota-RAV4-XSE.jpg);background-repeat:no-repeat;background-size:cover;background-position:center}.carThree[_ngcontent-%COMP%]{background-image:url(https://www.motorbiscuit.com/wp-content/uploads/2021/11/Steering-wheel-touchscreen-and-front-seats-in-2022-Toyota-RAV4-SE-Hybrid.jpg);background-repeat:no-repeat;background-size:cover;background-position:center}.carTwo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:has(span){color:#fff}.span[_ngcontent-%COMP%]{grid-row-start:span 2;margin-right:20px}.one[_ngcontent-%COMP%]{margin-bottom:40px}.three[_ngcontent-%COMP%]{position:relative}.three[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;padding:1rem;bottom:0;left:0}.three[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding:.2rem;width:10rem;background-color:#eb0a1e;color:#fff}.three[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(25px);backdrop-filter:blur(25px);background-color:#fff2;padding:.3rem;color:#000}@media screen and (max-width: 500px){.new-models[_ngcontent-%COMP%]{height:auto}.new-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:40px 0;height:auto}.container[_ngcontent-%COMP%]{padding:7rem}.span[_ngcontent-%COMP%]{margin:0;padding:0;grid-row-start:none}.span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.carOne[_ngcontent-%COMP%]{background-image:url(https://www.motorbiscuit.com/wp-content/uploads/2021/11/Black-wheel-on-Cavalry-Blue-2022-Toyota-RAV4-XSE.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;padding:7rem;margin-bottom:40px}.carOne[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.more-button[_ngcontent-%COMP%]{margin:0}.taskbar[_ngcontent-%COMP%]{width:100%;height:auto;max-height:auto;right:-100%;top:0;border:0}.taskbar_change[_ngcontent-%COMP%]{width:100%;height:auto;flex-direction:column;justify-content:center;align-items:center;right:0;bottom:auto;top:0}.task-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:5px 0}.task-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#eb0a1e}}@media screen and (min-width: 540px) and (max-width: 1080px){.new-models[_ngcontent-%COMP%]{height:140vh}.new-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;margin:20px 0}.grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0;height:auto}.container[_ngcontent-%COMP%]{padding:7rem}.span[_ngcontent-%COMP%]{margin:0;padding:0;grid-row-start:none}.span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.carOne[_ngcontent-%COMP%]{background-image:url(https://www.motorbiscuit.com/wp-content/uploads/2021/11/Black-wheel-on-Cavalry-Blue-2022-Toyota-RAV4-XSE.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;padding:7rem;margin-bottom:40px}.carOne[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.more-button[_ngcontent-%COMP%]{margin:50px 0}.taskbar[_ngcontent-%COMP%]{width:100%;height:auto;max-height:auto;top:0;border:0}.taskbar_change[_ngcontent-%COMP%]{width:100%;height:auto;flex-direction:column;justify-content:center;align-items:center;right:0;bottom:auto;top:0;border-bottom:5px solid #EB0A1E}.task-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:5px 0}.task-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#eb0a1e}}"]}),n})(),Cq=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ln({type:n,selectors:[["app-purchase"]],decls:11,vars:0,consts:[[1,"purchase"],[1,"section-container"],[1,"blog"],[1,"blog-picture"],[1,"resp"]],template:function(t,r){1&t&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),L(4,"Genuinely Purchase"),R(),I(5,"p"),L(6,"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Labore possimus consectetur a corporis, ipsum odit ea voluptatem explicabo provident, facilis ullam assumenda vero consequuntur, vel recusandae. Ipsum illum voluptate exercitationem."),R(),I(7,"p"),L(8,"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Labore possimus consectetur a corporis, ipsum odit ea voluptatem explicabo provident, facilis ullam assumenda vero consequuntur, vel recusandae. Ipsum illum voluptate exercitationem."),R()(),ze(9,"div",3),R()(),ze(10,"div",4))},styles:[".purchase[_ngcontent-%COMP%]{height:100vh;width:100%;display:flex;justify-content:center;align-items:center}.section-container[_ngcontent-%COMP%]{width:80%;display:flex;justify-content:space-between;align-items:center}.blog[_ngcontent-%COMP%]{width:100%;height:100%}.blog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem}.blog[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem}.blog-picture[_ngcontent-%COMP%]{padding:13rem 22rem;background-color:#000;margin-left:70px;margin-right:-9.6rem;background-image:url(toyota-engine.a86de0c954dfde26.jpg);background-repeat:no-repeat;background-size:cover}@media screen and (max-width: 500px){.purchase[_ngcontent-%COMP%]{height:auto;margin:100px 0}.section-container[_ngcontent-%COMP%]{height:auto;display:flex;flex-direction:column;justify-content:space-around}.blog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.blog[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.blog-picture[_ngcontent-%COMP%]{display:none;width:100%;height:40vh;margin:20px 0;padding:0}.resp[_ngcontent-%COMP%]{width:100%;height:40vh;background-image:url(toyota-engine.a86de0c954dfde26.jpg);background-repeat:no-repeat;background-size:cover;margin:40px 0}}@media screen and (min-width: 540px) and (max-width: 1080px){.purchase[_ngcontent-%COMP%]{height:70vh}.section-container[_ngcontent-%COMP%]{height:auto;display:flex;flex-direction:column;justify-content:space-around}.blog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem}.blog[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}.blog-picture[_ngcontent-%COMP%]{display:none;width:100%;height:70vh;margin:20px 0;padding:0}.resp[_ngcontent-%COMP%]{width:100%;height:70vh;background-image:url(toyota-engine.a86de0c954dfde26.jpg);background-repeat:no-repeat;background-size:cover;margin:40px 0}}@media screen and (min-width: 550px) and (max-width: 1300px){.blog-picture[_ngcontent-%COMP%]{padding:15rem 16rem;margin:0}}"]}),n})(),Sq=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ln({type:n,selectors:[["app-new-models"]],decls:32,vars:0,consts:[[1,"new-models"],[1,"section-container"],[1,"new-head"],[1,"new","models","threejs"],[1,"new-container","grid"],[1,"carOne","three","container","span"],[1,"carTwo","three","container","one"],[2,"color","white"],[1,"carThree","three","container","two"],[1,"more-button"],["href","#"],["href",""]],template:function(t,r){1&t&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),L(4,"New Models"),R()(),I(5,"div",3)(6,"div",4)(7,"div",5)(8,"span")(9,"h2"),L(10,"RAV 4"),R(),I(11,"p"),L(12,"Toyota's New 2022 Model"),R()()(),I(13,"div",6)(14,"span")(15,"h2"),L(16,"RAV 4"),R(),I(17,"p",7),L(18,"Cobalt is blue"),R()()(),I(19,"div",8)(20,"span")(21,"h2"),L(22,"New Model"),R(),I(23,"p",7),L(24,"New details and info"),R()()()()(),I(25,"div",9)(26,"a",10),L(27,"More"),R(),I(28,"span",11),L(29,"|"),R(),I(30,"a",10),L(31,"Gallery"),R()()()())},styles:[".new-models[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;justify-content:center;align-content:center}.section-container[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column;justify-content:center}.new-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3rem}.new[_ngcontent-%COMP%]{width:100%;height:auto;justify-content:center}.more-button[_ngcontent-%COMP%]{margin:20px 0}.more-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px 30px;background-color:#000;color:#fff;font-size:1rem;font-weight:lighter}.more-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px 30px;background-color:#eb0a1e;color:#fff;font-size:1rem;font-weight:lighter;margin-right:10px}.more-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#000;transition:.4s all ease}.more-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.2rem;margin-right:10px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(2,1fr);width:100%;height:70vh;margin:30px 0}.carOne[_ngcontent-%COMP%]{background-image:url(https://www.motorbiscuit.com/wp-content/uploads/2021/11/Side-view-of-silver-2022-Toyota-RAV4-SE-Hybrid.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;padding:1rem}.carTwo[_ngcontent-%COMP%]{background-image:url(https://media.ed.edmunds-media.com/toyota/rav4/2022/oem/2022_toyota_rav4_4dr-suv_base_s_oem_1_815.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;padding:1rem}.carThree[_ngcontent-%COMP%]{background-image:url(https://www.motorbiscuit.com/wp-content/uploads/2021/11/Side-view-of-silver-2022-Toyota-RAV4-SE-Hybrid.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;padding:1rem}.three[_ngcontent-%COMP%]{background-color:gray;padding:1rem}.span[_ngcontent-%COMP%]{grid-row-start:span 2;margin-right:20px;margin-left:-9.7rem}.span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:139px}.one[_ngcontent-%COMP%]{margin-bottom:20px}.three[_ngcontent-%COMP%]{position:relative}.three[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;padding:1rem;bottom:0;left:0}.three[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding:.2rem 1.5rem;background-color:#000;color:#fff}.three[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(25px);backdrop-filter:blur(25px);background-color:#fff2;padding:.3rem;color:#000}.display[_ngcontent-%COMP%]{width:100%;height:60vh;display:flex;justify-content:center;align-items:center}.container-display[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:auto;width:100%}@media screen and (max-width: 378px){.new-models[_ngcontent-%COMP%]{height:150vh}.new-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}@media screen and (max-width: 500px){.new-models[_ngcontent-%COMP%]{height:auto}.new-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:50px 0;height:auto}.container[_ngcontent-%COMP%]{padding:7rem}.span[_ngcontent-%COMP%]{margin:0;padding:0;grid-row-start:none}.carOne[_ngcontent-%COMP%]{background-image:url(https://www.motorbiscuit.com/wp-content/uploads/2021/11/Black-wheel-on-Cavalry-Blue-2022-Toyota-RAV4-XSE.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;padding:7rem;margin-bottom:40px}.one[_ngcontent-%COMP%]{margin-bottom:40px}.span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0;color:#fff}.span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.section-container[_ngcontent-%COMP%]{justify-content:space-evenly}}@media screen and (min-width: 540px) and (max-width: 1080px){.new-models[_ngcontent-%COMP%]{height:120vh}.new-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;margin:20px 0}.grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0;height:auto}.container[_ngcontent-%COMP%]{padding:7rem}.span[_ngcontent-%COMP%]{margin:0;padding:0;grid-row-start:none}.carOne[_ngcontent-%COMP%]{background-image:url(https://www.motorbiscuit.com/wp-content/uploads/2021/11/Black-wheel-on-Cavalry-Blue-2022-Toyota-RAV4-XSE.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;padding:7rem;margin-bottom:40px}.one[_ngcontent-%COMP%]{margin-bottom:40px}.span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0;color:#fff}.span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.section-container[_ngcontent-%COMP%]{justify-content:space-evenly}.more-button[_ngcontent-%COMP%]{margin:50px 0}}"]}),n})();function Eq(n,e){if(1&n&&(I(0,"option",9),L(1),R()),2&n){const t=e.$implicit;Sr(1),Qi(" ",t.name," ")}}function Dq(n,e){if(1&n&&(I(0,"div",14)(1,"span",15),L(2),R(),I(3,"a",16),ze(4,"i",17),L(5),R(),I(6,"span"),L(7,"Service:"),R(),I(8,"span"),ze(9,"i",18),L(10),R(),I(11,"span"),ze(12,"i",19),L(13),R(),I(14,"span"),ze(15,"i",19),L(16),R(),I(17,"div",20)(18,"a",21),L(19,"View"),R()()()),2&n){const t=e.$implicit;Sr(2),Qi(" ",t.name," "),Sr(3),Qi(" ",t.location,""),Sr(5),Qi(" ",t.serviceOne," "),Sr(3),Qi(" ",t.serviceTwo," "),Sr(3),Qi(" ",t.serviceThree," ")}}function Tq(n,e){if(1&n&&(I(0,"div",10),uh(1,11),I(2,"div",12),Io(3,Dq,20,5,"div",13),R(),dh(),R()),2&n){const t=fy();Sr(3),Ki("ngForOf",t.dealersinSight)}}let Aq=(()=>{class n{constructor(){this.regions=[{id:1,name:"Greater Accra"},{id:2,name:"Tarkwa"},{id:3,name:"Brong"}],this.regionOne=[{name:"Kofi Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"Benjamin Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"Daniel Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"Samuel Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"Ezekiel Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"Akwasi Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"}],this.regionTwo=[{name:"Kwesi Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"John Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"Jonah Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"David Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"Peter Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"Akwasi Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"}],this.dealersinSight=this.regionOne}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ln({type:n,selectors:[["app-trusted-dealers"]],decls:11,vars:2,consts:[[1,"trusted-dealers"],[1,"container"],[1,"head"],[1,"dealers"],[1,"dealer-container"],["name","","id","select",1,"form-select"],["select",""],["value","",4,"ngFor","ngForOf"],["class","region-dealers",4,"ngIf"],["value",""],[1,"region-dealers"],[1,"dealing"],[1,"dealers-container"],["class","dealer",4,"ngFor","ngForOf"],[1,"dealer"],["id","name"],["href","","id","location"],[1,"bx","bxs-map"],[1,"bx","bx-check"],[1,"bx","bx-check-double"],[1,"view"],["href","#","id","view"]],template:function(t,r){1&t&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),L(4,"Trusted Dealers"),R()(),I(5,"div",3)(6,"div",4)(7,"select",5,6),Io(9,Eq,2,1,"option",7),R(),Io(10,Tq,4,1,"div",8),R()()()()),2&t&&(Sr(9),Ki("ngForOf",r.regions),Sr(1),Ki("ngIf",r.dealersinSight))},dependencies:[YE,Hh,S1,D1],styles:["[_ngcontent-%COMP%]:root{--primary-color: #8f0410;--secondary-color: #0000;--white: white;--menu-fonts: 1.5rem;--global-links: 1.5rem;--Tittle: 2rem;--inner-card-head-title: 1.6rem;--inner-card-sub-title: 1.2rem}.trusted-dealers[_ngcontent-%COMP%]{height:100vh;width:100%;background-color:#000;display:flex;justify-content:center;align-items:center;margin-top:120px}.container[_ngcontent-%COMP%]{width:80%;height:100%;display:flex;flex-direction:column;justify-content:center}h2[_ngcontent-%COMP%]{color:#fff;font-size:3rem}.region-dealers[_ngcontent-%COMP%]{overflow-x:scroll;overflow-y:hidden;height:50vh;width:100%}.dealers-container[_ngcontent-%COMP%]{height:50vh;display:flex;align-items:center;margin-left:5px;margin-top:-20px}.dealers-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.dealer-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:#000;color:#fff;font-size:2.2rem;border:none;margin:10px 0;width:20rem}.dealer-container[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;background-color:#000;color:#fff;font-size:1rem;border:none}.dealers[_ngcontent-%COMP%]{color:#000;margin-top:20px;margin-right:-150px}ng-container[_ngcontent-%COMP%]{display:flex;width:100%;height:auto;background-color:gray}#name[_ngcontent-%COMP%]{font-size:1.4rem}.dealer[_ngcontent-%COMP%]{width:20%;display:flex;flex-direction:column;padding:2rem 1rem;margin-right:40px;background-color:var(--primary-color);transition:.2s all ease}.dealer[_ngcontent-%COMP%]:hover{outline:2px solid white;transition:.2s all ease}.dealer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:17px;height:15px;filter:invert(100%) sepia(4%) saturate(14%) hue-rotate(59deg) brightness(103%) contrast(106%)}.dealer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{margin-bottom:10px;color:#fff}#location[_ngcontent-%COMP%]{font-size:1.2rem}.view[_ngcontent-%COMP%]{width:100%;height:2vh;display:flex;justify-content:center;align-items:center;margin-top:20px}.view[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:7px 85px;background-color:var(--white);color:#000;transition:.4s all ease}.view[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:gray;color:#fff}@media screen and (max-width: 500px){.head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem}.dealer-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:1.5rem}.dealer[_ngcontent-%COMP%]{width:100%;padding:3rem 2rem}.dealers[_ngcontent-%COMP%]{margin-right:-30px}}@media screen and (min-width: 540px) and (max-width: 1080px){.head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem}.dealer-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:1.5rem}.dealer[_ngcontent-%COMP%]{width:100%;padding:3rem 2rem}.dealers[_ngcontent-%COMP%]{margin-right:-60px}}@media screen and (min-width: 540px) and (max-width: 1300px){.dealers[_ngcontent-%COMP%]{margin-right:-90px}}"]}),n})(),Nq=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ln({type:n,selectors:[["app-tips"]],decls:50,vars:0,consts:[[1,"tips"],[1,"tips-container"],[1,"head"],[1,"vehicle-usage"],[1,"subtitle"],[1,"tip"],[1,"container"],[1,"words"],[1,"learn-more"],["href","#"],[1,"parts-mentainance"]],template:function(t,r){1&t&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),L(4,"Tips"),R()(),I(5,"div",3)(6,"div",4)(7,"span"),L(8,"Vehicle Usage"),R()(),I(9,"div",5)(10,"div",6)(11,"div",7)(12,"p"),L(13,"Tips: Lorem ipsum dolor sit, amet consectetur adipisicing elit. Laudantium aut cum distinctio reprehenderit doloremque et, sequi corporis beatae laborum cupiditate qui ad facere possimus, commodi harum est neque dicta sapiente?"),R()(),I(14,"div",8)(15,"a",9),L(16,"Learn More"),R()()(),I(17,"div",6)(18,"div",7)(19,"p"),L(20,"Tips: Lorem ipsum dolor sit, amet consectetur adipisicing elit. Laudantium aut cum distinctio reprehenderit doloremque et, sequi corporis beatae laborum cupiditate qui ad facere possimus, commodi harum est neque dicta sapiente?"),R()(),I(21,"div",8)(22,"a",9),L(23,"Learn More"),R()()(),I(24,"div",6)(25,"div",7)(26,"p"),L(27,"Tips: Lorem ipsum dolor sit, amet consectetur adipisicing elit. Laudantium aut cum distinctio reprehenderit doloremque et, sequi corporis beatae laborum cupiditate qui ad facere possimus, commodi harum est neque dicta sapiente?"),R()(),I(28,"div",8)(29,"a",9),L(30,"Learn More"),R()()()()(),I(31,"div",10)(32,"div",4)(33,"span"),L(34,"Parts and Maintainance"),R()(),I(35,"div",5)(36,"div",6)(37,"div",7)(38,"p"),L(39,"Tips: Lorem ipsum dolor sit, amet consectetur adipisicing elit. Laudantium aut cum distinctio reprehenderit doloremque et, sequi corporis beatae laborum cupiditate qui ad facere possimus, commodi harum est neque dicta sapiente?"),R()(),I(40,"div",8)(41,"a",9),L(42,"Learn More"),R()()(),I(43,"div",6)(44,"div",7)(45,"p"),L(46,"Tips: Lorem ipsum dolor sit, amet consectetur adipisicing elit. Laudantium aut cum distinctio reprehenderit doloremque et, sequi corporis beatae laborum cupiditate qui ad facere possimus, commodi harum est neque dicta sapiente?"),R()(),I(47,"div",8)(48,"a",9),L(49,"Learn More"),R()()()()()()())},styles:[".tips[_ngcontent-%COMP%]{width:100%;height:150vh;display:flex;justify-content:center;align-items:center}.tips-container[_ngcontent-%COMP%]{width:80%;height:100%;display:flex;flex-direction:column;justify-content:center}.tips[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3rem}.head[_ngcontent-%COMP%]{margin-bottom:40px}.subtitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2rem}.subtitle[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;border-bottom:20px solid black;margin-bottom:40px}.words[_ngcontent-%COMP%], .learn-more[_ngcontent-%COMP%]{height:10vh;display:flex;justify-content:center;align-items:center;padding:1.5rem}.words[_ngcontent-%COMP%]{width:100%;background-color:#eb0a1e;color:#fff}.learn-more[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#000;color:#fff}.learn-more[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;color:#fff}@media screen and (max-width: 500px){.head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem}.subtitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem}.words[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.45rem}}@media screen and (min-width: 540px) and (max-width: 1080px){.head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.8rem}.subtitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.8rem}.words[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.7rem}}"]}),n})(),Pq=(()=>{class n{constructor(){this.images=[],this.indicators=!0,this.controls=!0,this.autoSlide=!1,this.slideInterval=3e3,this.selectedIndex=0}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ln({type:n,selectors:[["app-newsroom"]],inputs:{images:"images",indicators:"indicators",controls:"controls",autoSlide:"autoSlide",slideInterval:"slideInterval"},decls:52,vars:0,consts:[[1,"newsroom"],[1,"container"],[1,"header"],[1,"news"],[1,"new-deals"],[1,"head"],[1,"news-box"],[1,"news-container","red"],["id","card",2,"background-color","black"],[1,"news-box","grid"],[1,"news-container","next","forward",2,"margin-right","20px"],["id","card"],["id","card",1,"black",2,"background-color","black"],[1,"new-deals","top"],[1,"news-container","red","backward"],[1,"news-container","back"]],template:function(t,r){1&t&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),L(4,"Newsroom"),R()(),I(5,"div",3)(6,"div",4)(7,"div",5)(8,"span"),L(9,"New Deals"),R()(),I(10,"div",6)(11,"div",7),ze(12,"img"),I(13,"span")(14,"h3",8),L(15,"Details"),R(),I(16,"p"),L(17,"Details Information"),R()()()()(),I(18,"div",4)(19,"div",5)(20,"span"),L(21,"Sales"),R()(),I(22,"div",9)(23,"div",10)(24,"span")(25,"h3",11),L(26,"Details"),R(),I(27,"p"),L(28,"Details Information"),R()()(),I(29,"div",7)(30,"span")(31,"h3",12),L(32,"Details"),R(),I(33,"p"),L(34,"Details Information"),R()()()()(),I(35,"div",13)(36,"div",5)(37,"span"),L(38,"Promotions"),R()(),I(39,"div",9)(40,"div",14)(41,"span")(42,"h3",12),L(43,"Details"),R(),I(44,"p"),L(45,"Details Information"),R()()(),I(46,"div",15)(47,"span")(48,"h3",11),L(49,"Details"),R(),I(50,"p"),L(51,"Details Information"),R()()()()()()()())},styles:[".newsroom[_ngcontent-%COMP%]{height:auto;width:100%;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]{width:80%;height:auto;display:flex;flex-direction:column;justify-content:center}.header[_ngcontent-%COMP%]{font-size:2.5rem}.head[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2rem}.news-box[_ngcontent-%COMP%]{width:100%;height:auto}.news-container[_ngcontent-%COMP%]{position:relative;height:40vh;width:100%;margin-bottom:50px;color:#fff}.news-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;padding:2rem}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,2fr);grid-template-rows:repeat(2,2fr);margin-right:40px}.next[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{background-color:#000;color:#fff}.red[_ngcontent-%COMP%]{background-color:#eb0a1e}.forward[_ngcontent-%COMP%]{width:45rem}.backward[_ngcontent-%COMP%]{width:30rem}.back[_ngcontent-%COMP%]{width:45.5rem}.top[_ngcontent-%COMP%]{margin-top:-20rem}.header[_ngcontent-%COMP%]{margin-bottom:5rem}.head[_ngcontent-%COMP%]{margin-bottom:1.5rem}#card[_ngcontent-%COMP%]{padding:.5rem 2rem;background-color:#eb0a1e}.news-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none}.news-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]   .image-active[_ngcontent-%COMP%]{display:block;width:100%;height:40vh}.fade[_ngcontent-%COMP%]{animation-name:fade;animation-duration:1.5s}@keyframes fade{0%{opacity:.4}to{opacity:1}}@media screen and (max-width: 500px){*[_ngcontent-%COMP%]{margin:0}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem}.head[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem}.grid[_ngcontent-%COMP%]{display:flex;flex-direction:column}.forward[_ngcontent-%COMP%], .backward[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{width:100%}.top[_ngcontent-%COMP%]{margin:0}}@media screen and (min-width: 540px) and (max-width: 1300px){*[_ngcontent-%COMP%]{margin:0}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem}.head[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem}.grid[_ngcontent-%COMP%]{display:flex;flex-direction:column}.forward[_ngcontent-%COMP%], .backward[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{width:100%}.top[_ngcontent-%COMP%]{margin:0}}"]}),n})(),Iq=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ln({type:n,selectors:[["app-footer"]],decls:117,vars:0,consts:[[1,"footer"],[1,"container"],[1,"links"],["id","up"],["href",""],[1,"subscribe"],[1,"title"],[1,"input"],["type","email","placeholder","username@mail.com"],[1,"extra-navigation"],["href","#"],[1,"foot"]],template:function(t,r){1&t&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul")(4,"span"),L(5,"Vehicle"),R(),I(6,"li",3)(7,"a",4),L(8,"Passenger"),R()(),I(9,"li")(10,"a",4),L(11,"SUV & Crossover"),R()(),I(12,"li")(13,"a",4),L(14,"Commerciak"),R()()(),I(15,"ul")(16,"span"),L(17,"Shopping Tools"),R(),I(18,"li",3)(19,"a",4),L(20,"Find a Dealer"),R()(),I(21,"li")(22,"a",4),L(23,"Book a Test Drive"),R()(),I(24,"li")(25,"a",4),L(26,"Compare Vehicles"),R()(),I(27,"li")(28,"a",4),L(29,"Top Financial Services"),R()()(),I(30,"ul")(31,"span"),L(32,"Owners"),R(),I(33,"li",3)(34,"a",4),L(35,"My Toyota Ghana"),R()(),I(36,"li")(37,"a",4),L(38,"Genuine Parts"),R()(),I(39,"li")(40,"a",4),L(41,"Genuine Accessories"),R()(),I(42,"li")(43,"a",4),L(44,"Toyota Services"),R()(),I(45,"li")(46,"a",4),L(47,"Warranty"),R()(),I(48,"li")(49,"a",4),L(50,"Advisory"),R()()(),I(51,"ul")(52,"span"),L(53,"See Also"),R(),I(54,"li",3)(55,"a",4),L(56,"Auto Mark - Certified Used Cars"),R()(),I(57,"li")(58,"a",4),L(59,"Toyota Africa"),R()(),I(60,"li")(61,"a",4),L(62,"Toyota Global"),R()(),I(63,"li")(64,"a",4),L(65,"Careers"),R()()(),I(66,"ul")(67,"span"),L(68,"Social Media"),R(),I(69,"li",3)(70,"a",4),L(71,"Instagram"),R()(),I(72,"li")(73,"a",4),L(74,"Facebook"),R()(),I(75,"li")(76,"a",4),L(77,"Twitter"),R()(),I(78,"li")(79,"a",4),L(80,"Youtube"),R()()()(),I(81,"div",5)(82,"div",6)(83,"span"),L(84,"Subscribe"),R()(),I(85,"div",7),ze(86,"input",8),I(87,"button"),L(88,"Submit"),R()()(),I(89,"div",9)(90,"ul")(91,"li")(92,"a",10),L(93,"Contact Us"),R()(),I(94,"span"),L(95,"|"),R(),I(96,"li")(97,"a",10),L(98,"Dealer Locator"),R()(),I(99,"span"),L(100,"|"),R(),I(101,"li")(102,"a",10),L(103,"Download Brochure"),R()(),I(104,"span"),L(105,"|"),R(),I(106,"li")(107,"a",10),L(108,"Privacy Policy"),R()(),I(109,"span"),L(110,"|"),R(),I(111,"li")(112,"a",10),L(113,"Site Map"),R()()()()()(),I(114,"div",11)(115,"span"),L(116,"\xa9 2022 Toyota Ghana. All Rights Reserved"),R()())},styles:["*[_ngcontent-%COMP%]{color:#fff}.footer[_ngcontent-%COMP%]{height:100vh;width:100%;background-color:#000;display:flex;flex-direction:column;justify-content:center;align-items:center}ul[_ngcontent-%COMP%]{list-style:none}.container[_ngcontent-%COMP%]{width:80%;height:auto;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:20px}.links[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:baseline;width:100%;height:auto;margin-bottom:2rem}.links[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem;margin:40px 0}.links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:100%;height:auto}.links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:200}.subscribe[_ngcontent-%COMP%]{width:100%;height:auto}#up[_ngcontent-%COMP%]{margin-top:20px}.subscribe[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem}.input[_ngcontent-%COMP%]{margin-top:1rem}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0;border-radius:0;outline:0;background-color:#fff;color:#000;font-size:1.2rem;padding:.5rem 2rem}.input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;border-radius:0;outline:0;background-color:#eb0a1e;font-size:1.2rem;color:#fff;padding:.5rem 2rem;cursor:pointer}.input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{background-color:gray}.extra-navigation[_ngcontent-%COMP%]{position:relative;width:100%;height:30vh;display:flex;justify-content:center;align-items:center;margin-bottom:-200px}.extra-navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex}.extra-navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 20px}.foot[_ngcontent-%COMP%]{position:relative;bottom:0;width:100%;height:7.5vh;background-color:#eb0a1e;display:flex;justify-content:center;align-items:center}@media screen and (max-width: 500px){.footer[_ngcontent-%COMP%]{height:190vh}.links[_ngcontent-%COMP%]{display:flex;flex-direction:column}.links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:40px 0}.footer[_ngcontent-%COMP%]{height:auto}.container[_ngcontent-%COMP%]{height:270vh}.extra-navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex}.extra-navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.7rem;margin:0 10px}.extra-navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}@media screen and (min-width: 540px) and (max-width: 1080px){.footer[_ngcontent-%COMP%]{height:260vh}.links[_ngcontent-%COMP%]{display:flex;flex-direction:column}.links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-bottom:40px}.container[_ngcontent-%COMP%]{height:260vh}.extra-navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.8rem}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]}),n})(),Rq=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ln({type:n,selectors:[["app-stalone"]],decls:1,vars:0,template:function(t,r){1&t&&ze(0,"ngt-canvas")},dependencies:[p0]}),n})(),Oq=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ln({type:n,selectors:[["app-three-s"]],decls:12,vars:0,consts:[[1,"three-s"],[1,"container"],["href","#",1,"sale","sales"],["href","#",1,"service","sales"],["href","#",1,"spare","sales"],[1,"background"]],template:function(t,r){1&t&&(I(0,"div",0)(1,"div",1)(2,"a",2)(3,"span"),L(4,"Sales"),R()(),I(5,"a",3)(6,"span"),L(7,"Services"),R()(),I(8,"a",4)(9,"span"),L(10,"Spare Parts"),R()(),ze(11,"div",5),R()())},styles:[".three-s[_ngcontent-%COMP%]{width:100%;height:70vh;margin-top:-170px}.container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:20rem;height:17rem;background-color:#000;margin:-200px 20px 0}.container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;top:170%;color:#fff;font-size:1.5rem;padding:10px 15px;background-color:#eb0a1e;opacity:0;float:left;transition:.4s all ease}.background[_ngcontent-%COMP%]{position:absolute;z-index:-2;width:100%;height:100%;background-color:#fff;transition:.4s all ease}.container[_ngcontent-%COMP%]   .sale[_ngcontent-%COMP%]:hover ~ .background[_ngcontent-%COMP%]{background-color:#fff}.container[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:hover ~ .background[_ngcontent-%COMP%]{background-color:gray}.container[_ngcontent-%COMP%]   .spare[_ngcontent-%COMP%]:hover ~ .background[_ngcontent-%COMP%]{background-color:#eb0a1e}.container[_ngcontent-%COMP%]   .sale[_ngcontent-%COMP%]:hover > span[_ngcontent-%COMP%]{opacity:1;top:110%}.container[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:hover > span[_ngcontent-%COMP%]{opacity:1;top:110%}.container[_ngcontent-%COMP%]   .spare[_ngcontent-%COMP%]:hover > span[_ngcontent-%COMP%]{opacity:1;top:110%;background-color:#fff;color:#000}@media screen and (max-width: 500px){.three-s[_ngcontent-%COMP%]{width:100%;height:100%;margin:40px 0}.container[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:20px 0}.container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;top:84%;right:-5%;font-size:1rem;padding:5px 7%;transition:.4s all ease}.container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#fff;transition:.4s all ease}}"]}),n})();function Fq(n,e){1&n&&(I(0,"div",46)(1,"div",47)(2,"div",48),ze(3,"input",49),I(4,"button"),L(5,"Search"),R()()()())}function Lq(n,e){1&n&&(I(0,"div",50,51)(2,"div",52)(3,"a",53),L(4,"Global"),R()()())}let kq=(()=>{class n{constructor(){this.title="ToyotaBck",this.isSearchOpen=!1,this.isMenuOpen=!1,this.images=[{imageSrc:"../assets/images/news3.jpg",imageAlt:"News One"},{imageSrc:"../assets/images/news1.jpg",imageAlt:"News Two"},{imageSrc:"../assets/images/news2.jpg",imageAlt:"News Three"},{imageSrc:"../assets/images/news3.jpg",imageAlt:"News Four"},{imageSrc:"../assets/images/news4.png",imageAlt:"News Five"}]}openSearch(){this.isSearchOpen=!this.isSearchOpen}openGlobal(){this.isMenuOpen=!this.isMenuOpen}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Ln({type:n,selectors:[["app-root"]],decls:263,vars:2,consts:[[1,"first"],[1,"section-container"],[1,"navbar"],[1,"nav-container"],[1,"logo"],["href","index.html"],["xmlns","http://www.w3.org/2000/svg","width","136","height","24","viewBox","0 0 136 24"],["fill","none","d","M0 0h158v48H0V0z"],["fill","white","d","M20.354.804H1.004v4.278h7.142v18.241h5.067V5.082h7.141V.804m18.921 14.874a6.206 6.206 0 0 1-4.678 3.826 6.807 6.807 0 0 1-1.175.104c-.399 0-.792-.038-1.172-.104a6.197 6.197 0 0 1-4.676-3.826 9.886 9.886 0 0 1-.682-3.614c0-1.276.243-2.498.682-3.617.791-2 2.56-3.447 4.676-3.825a6.474 6.474 0 0 1 2.347 0 6.203 6.203 0 0 1 4.678 3.824 9.95 9.95 0 0 1 0 7.232M33.421.127c-6.589 0-11.936 5.344-11.936 11.937 0 6.588 5.347 11.933 11.936 11.933 6.594 0 11.937-5.345 11.937-11.933 0-6.593-5.343-11.937-11.937-11.937zm12.017.677h5.968l5.573 9.682L62.552.804h5.966l-9.006 14.188v8.331h-5.066v-8.331L45.438.804M80.549 19.61c.398 0 .793-.04 1.172-.106a6.193 6.193 0 0 0 4.676-3.824 9.877 9.877 0 0 0 0-7.231 6.197 6.197 0 0 0-4.676-3.826 6.674 6.674 0 0 0-2.35 0 6.193 6.193 0 0 0-4.674 3.825 9.872 9.872 0 0 0-.684 3.615c0 1.276.243 2.495.684 3.616a6.188 6.188 0 0 0 4.674 3.824 6.72 6.72 0 0 0 1.178.107m-11.938-7.547c0-6.592 5.342-11.938 11.938-11.938 6.589 0 11.936 5.344 11.936 11.938C92.484 18.651 87.138 24 80.549 24c-6.596 0-11.938-5.349-11.938-11.937zm58.432 2.347l-3.316-8.897-3.32 8.897h6.636m1.47 3.94h-9.585l-1.844 4.959h-5.637L120.57.788h6.304L136 23.309h-5.63l-1.857-4.959zM112.936.804h-19.35v4.278h7.145l-.002 18.241h5.069l-.002-18.241h7.14V.804"],[1,"menu"],["id","menu-resp"],["id","search",3,"click"],["search",""],[1,"bx","bx-search"],["id","bar"],["routerLink","#"],["id","support"],[1,"sup"],["id","titles","href",""],[1,"bx","bx-chevron-right"],[1,"support"],[1,"sales"],["id","sub-t"],["href",""],["href","",2,"font-size","1rem"],[2,"color","red"],[1,"Services"],[1,"Spare-Parts"],["id","titl","href",""],["id","title","href",""],[1,"responsive"],[1,"bx","bx-menu-alt-right"],["id","container","class","search",4,"ngIf"],[1,"menu-opened"],[1,"opened-container"],[1,"three-js"],[1,"gh-global"],[1,"gh-container"],[1,"gh-box"],["class","global",4,"ngIf"],[1,"gh-button"],[1,"container"],["src","assets\\images\\logo.png","alt",""],["for",""],["onclick","openGlobal()",3,"click"],[1,"bx","bx-chevron-down"],["id","container",1,"search"],[1,"search-container"],[1,"search-engine"],["type","search","placeholder","Find your drive"],[1,"global"],["globalVisible",""],[1,"glo-container"],["href","https://global.toyota/en/"]],template:function(t,r){1&t&&(I(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),function gx(){He.lFrame.currentNamespace="svg"}(),I(6,"svg",6),ze(7,"path",7)(8,"path",8),R()()(),function mx(){!function nO(){He.lFrame.currentNamespace=null}()}(),I(9,"div",9)(10,"ul",10)(11,"li")(12,"a",11,12),Pn("click",function(){return r.openSearch()}),ze(14,"i",13),R()(),I(15,"li")(16,"a",14),L(17,"|"),R()(),I(18,"li")(19,"a",15),L(20,"Branches"),R(),I(21,"ul",16)(22,"div",17)(23,"a",18),L(24,"Branches"),ze(25,"i",19),R()(),I(26,"div",20)(27,"div",21)(28,"li",22)(29,"a",23),L(30,"Accra Branches"),ze(31,"i",19),R()(),I(32,"li")(33,"a",24),L(34,"- Abatoir - Head Office"),R()(),I(35,"li")(36,"a",24),L(37,"- Tema"),R()(),I(38,"li")(39,"a",24),L(40,"- Accra"),R()(),I(41,"li")(42,"a",24),L(43,"- East Legon - "),I(44,"b",25),L(45,"New"),R()()(),I(46,"li")(47,"a",24),L(48,"- others"),R()()(),I(49,"div",26)(50,"li",22)(51,"a"),L(52,"Kumasi Branches"),ze(53,"i",19),R()(),I(54,"li")(55,"a",24),L(56,"- Kegyetia"),R()(),I(57,"li")(58,"a",24),L(59,"- Boadi"),R()(),I(60,"li")(61,"a",24),L(62,"- Others"),R()()(),I(63,"div",27)(64,"li",22)(65,"a"),L(66,"Other Regional Branches"),ze(67,"i",19),R()()()()()(),I(68,"li")(69,"a",15),L(70,"Vehicles"),R(),I(71,"ul",16)(72,"div",17)(73,"a",28),L(74,"Vehicles "),ze(75,"i",19),R()(),I(76,"div",20)(77,"div",21)(78,"li",22)(79,"a",23),L(80,"Trusted Dealers "),ze(81,"i",19),R()(),I(82,"li")(83,"a",24),L(84,"- New Models"),R()(),I(85,"li")(86,"a",24),L(87,"- Genuine Purchase"),R()()(),I(88,"div",26)(89,"li",22)(90,"a"),L(91,"New Vehicles "),ze(92,"i",19),R()(),I(93,"li")(94,"a",24),L(95,"- Appointment"),R()(),I(96,"li")(97,"a",24),L(98,"- Car Checks"),R()(),I(99,"li")(100,"a",24),L(101,"- Car Servicing"),R()()(),I(102,"div",27)(103,"li",22)(104,"a"),L(105,"Buy "),ze(106,"i",19),R()(),I(107,"li")(108,"a",24),L(109,"- Genuine Body parts"),R()(),I(110,"li")(111,"a",24),L(112,"- Engines"),R()(),I(113,"li")(114,"a",24),L(115,"- The New Toyota Car Oil"),R()()()()()(),I(116,"li")(117,"a",15),L(118,"Support"),R(),I(119,"ul",16)(120,"div",17)(121,"a",29),L(122,"Support "),ze(123,"i",19),R()(),I(124,"div",20)(125,"div",21)(126,"li",22)(127,"a",23),L(128,"Sales "),ze(129,"i",19),R()(),I(130,"li")(131,"a",24),L(132,"- Purchases"),R()(),I(133,"li")(134,"a",24),L(135,"- Buy our verified used cars"),R()(),I(136,"li")(137,"a",24),L(138,"- Deals"),R()(),I(139,"li")(140,"a",24),L(141,"- Promotions"),R()()(),I(142,"div",26)(143,"li",22)(144,"a"),L(145,"Services "),ze(146,"i",19),R()(),I(147,"li")(148,"a",24),L(149,"- Appointment"),R()(),I(150,"li")(151,"a",24),L(152,"- Car Checks"),R()(),I(153,"li")(154,"a",24),L(155,"- Car Servicing"),R()()(),I(156,"div",27)(157,"li",22)(158,"a"),L(159,"Spare Parts "),ze(160,"i",19),R()(),I(161,"li")(162,"a",24),L(163,"- Genuine Body parts"),R()(),I(164,"li")(165,"a",24),L(166,"- Engines"),R()(),I(167,"li")(168,"a",24),L(169,"- The New Toyota Car Oil"),R()()()()()(),I(170,"li")(171,"a",15),L(172,"About"),R(),I(173,"ul",16)(174,"div",17)(175,"a",18),L(176,"About "),ze(177,"i",19),R()(),I(178,"div",20)(179,"div",21)(180,"li",22)(181,"a",23),L(182,"Who we are? "),ze(183,"i",19),R()(),I(184,"li")(185,"a",24),L(186,"- Purchases"),R()(),I(187,"li")(188,"a",24),L(189,"- Buy our verified used cars"),R()(),I(190,"li")(191,"a",24),L(192,"- Deals"),R()(),I(193,"li")(194,"a",24),L(195,"- Promotions"),R()()(),I(196,"div",26)(197,"li",22)(198,"a"),L(199,"How far we've come "),ze(200,"i",19),R()(),I(201,"li")(202,"a",24),L(203,"- Appointment"),R()(),I(204,"li")(205,"a",24),L(206,"- Car Checks"),R()(),I(207,"li")(208,"a",24),L(209,"- Car Servicing"),R()()(),I(210,"div",27)(211,"li",22)(212,"a"),L(213,"Message from the MD "),ze(214,"i",19),R()(),I(215,"li")(216,"a",24),L(217,"- Genuine Body parts"),R()(),I(218,"li")(219,"a",24),L(220,"- Engines"),R()(),I(221,"li")(222,"a",24),L(223,"- The New Toyota Car Oil"),R()()()()()()(),I(224,"div",30)(225,"ul")(226,"li")(227,"a",11,12),Pn("click",function(){return r.openSearch()}),ze(229,"i",13),R()(),I(230,"li")(231,"a",14),L(232,"|"),R()(),I(233,"li")(234,"span"),ze(235,"i",31),R()()()()()()(),Io(236,Fq,6,0,"div",32),I(237,"div",33),ze(238,"div",34),R(),I(239,"div",35),ze(240,"ngt-canvas"),R(),I(241,"div",36)(242,"div",37)(243,"div",38),Io(244,Lq,5,0,"div",39),I(245,"div",40)(246,"div",41),ze(247,"img",42),I(248,"p"),L(249,"|"),R(),I(250,"label",43),L(251,"Ghana"),R(),I(252,"span",44),Pn("click",function(){return r.openGlobal()}),ze(253,"i",45),R()()()()()()()(),ze(254,"app-genuine-purchase")(255,"app-purchase")(256,"app-new-models")(257,"app-trusted-dealers")(258,"app-tips")(259,"app-newsroom")(260,"app-three-s")(261,"app-footer")(262,"app-stalone")),2&t&&(Sr(236),Ki("ngIf",r.isSearchOpen),Sr(8),Ki("ngIf",r.isMenuOpen))},dependencies:[Hh,Ef,p0,bq,Cq,Sq,Aq,Nq,Pq,Iq,Rq,Oq],styles:["[_ngcontent-%COMP%]:root{--primary-color: #EB0A1E;--secondary-color: #0000;--white: white;--menu-fonts: 1.5rem;--global-links: 1.5rem;--Tittle: 2rem;--inner-card-head-title: 1.6rem;--inner-card-sub-title: 1.2rem}.first[_ngcontent-%COMP%]{height:100vh;width:100%;min-height:100vh;max-height:100vh}.navbar[_ngcontent-%COMP%]{position:relative;width:100%;height:80px;display:flex;align-items:center}.nav-container[_ngcontent-%COMP%]{position:relative;width:90%;height:100%;display:flex;justify-content:center;align-items:center;right:-10%}.logo[_ngcontent-%COMP%], .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex}.logo[_ngcontent-%COMP%]{width:40%}#logo[_ngcontent-%COMP%]{fill:#fff}.logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:Toyota Type;font-weight:700;font-size:1.7rem;color:#fff;text-align:center}.menu[_ngcontent-%COMP%]{height:100%;width:60%;display:flex;justify-content:center;align-items:center;background-color:#fff}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:flex;justify-content:center;align-items:center}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-size:1.2rem;margin:0 20px}#menu-resp[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:100}#bar[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2rem}#search[_ngcontent-%COMP%]{cursor:pointer}.gh-global[_ngcontent-%COMP%]{width:100%;position:relative;top:650px;display:flex;justify-content:center;align-items:center}.gh-container[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column}.gh-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.gh-button[_ngcontent-%COMP%]{width:100%;height:40px;display:flex;justify-content:center;align-items:center;background-color:#eb0a1e;margin-top:2px}.container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:10px;color:#fff;font-size:1.5rem}.container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], i[_ngcontent-%COMP%]{font-size:1.2rem;margin-right:5px}.container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;font-size:1.4rem}.container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;margin-right:5px}.gh-box[_ngcontent-%COMP%]{width:160px;height:auto}.global[_ngcontent-%COMP%]{position:absolute;display:flex;width:10rem;top:-95%;transition:.4s all ease}.glo-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;background-color:var(--primary-color)}.glo-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;color:var(--white);padding:7px 10px;transition:.4s all ease;font-size:1.2rem}.glo-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--white);color:#000}#glo-list[_ngcontent-%COMP%]{border-top:2px solid white;border-bottom:2px solid white}.three-js[_ngcontent-%COMP%]{position:absolute;width:100%;height:100vh;z-index:1;background-image:url(Toyota_beginning.9672d6af6507af58.jpg);background-repeat:no-repeat;background-position:center;background-size:cover}.gh-global[_ngcontent-%COMP%]{position:absolute;z-index:2;top:90%}.navbar[_ngcontent-%COMP%]{position:absolute;z-index:3}.search[_ngcontent-%COMP%]{position:absolute;z-index:99;width:100%;height:20vh;top:10%;display:flex;justify-content:center;align-items:baseline}.search-container[_ngcontent-%COMP%]{position:relative;z-index:99;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#fff}.search-engine[_ngcontent-%COMP%]{position:relative;width:50%;border-bottom:5px solid #EB0A1E;display:flex;justify-content:last baseline;align-items:last baseline;top:10%}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90%;height:100%;border:0;outline:0;font-size:1.5rem;margin-right:20px}.search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;padding:.2rem;background-color:#fff;font-size:1.4rem}.responsive[_ngcontent-%COMP%]{display:none}.menu[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{color:#000;font-size:33px;font-weight:700;line-height:70px;padding-left:110px}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;display:flex}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;display:block;line-height:70px;font-size:20px;transition:.5s}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;display:block;line-height:70px;font-size:20px;transition:.5s}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, #titles[_ngcontent-%COMP%]:hover, #titles[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, #title[_ngcontent-%COMP%]:hover, #title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, #titl[_ngcontent-%COMP%]:hover, #titl[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#eb0a1e}#titles[_ngcontent-%COMP%], #title[_ngcontent-%COMP%], #titl[_ngcontent-%COMP%]{color:#fff}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:60%;height:40vh;-webkit-backdrop-filter:blur(40px);backdrop-filter:blur(40px);background-color:#0000009a;position:absolute;top:95px;border-top:3px solid #EB0A1E;opacity:0;visibility:hidden}.support[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-evenly;margin-top:-40px}.sales[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > ul[_ngcontent-%COMP%]{width:60%;top:75px;right:0;opacity:1;visibility:visible;transition:.3s linear}#support[_ngcontent-%COMP%]{width:60%;display:flex;align-items:flex-start;padding:5px 10px}#support[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:bolder;margin-bottom:20px}#titles[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:bolder;margin-bottom:20px;margin-left:4px}#titl[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:bolder;margin-bottom:20px;margin-left:30px}.sup[_ngcontent-%COMP%]{display:flex;height:20%;align-items:center;margin-bottom:40px;margin-left:50px}.sup[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;margin-top:-4px}#sub-t[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:-20px}#sub-t[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], i[_ngcontent-%COMP%]{font-size:1rem;font-weight:bolder}.Services[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.8rem}.sales[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .Services[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .Spare-Parts[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;margin-left:20px}.sales[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .Services[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .Spare-Parts[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1rem}.sales[_ngcontent-%COMP%], .Services[_ngcontent-%COMP%], .Spare-Parts[_ngcontent-%COMP%]{align-items:flex-start}.sales[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .Services[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .Spare-Parts[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{align-items:flex-start;margin:-20px 0}#about[_ngcontent-%COMP%]{flex-direction:column}.aboutt[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}.abouttt[_ngcontent-%COMP%]{width:100%}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{line-height:50px}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{border-top:none}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative}@media screen and (max-width: 500px){.logo[_ngcontent-%COMP%]{margin-right:20px}.responsive[_ngcontent-%COMP%]{width:100%;height:100%;visibility:visible;display:flex;justify-content:center;align-items:center}.responsive[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;justify-content:center;align-items:baseline;margin-left:30px}.responsive[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;margin:0}.responsive[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.responsive[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#000;font-size:1.5rem}.menu[_ngcontent-%COMP%]   #menu-resp[_ngcontent-%COMP%]{display:none}.navbar[_ngcontent-%COMP%]{width:100%}.search-engine[_ngcontent-%COMP%]{width:82%}}@media screen and (min-width: 540px) and (max-width: 1080px){.logo[_ngcontent-%COMP%]{margin-right:20px}.responsive[_ngcontent-%COMP%]{width:100%;height:100%;visibility:visible;display:flex;justify-content:center;align-items:center}.responsive[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;justify-content:space-evenly;align-items:baseline}.responsive[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;margin:0}.responsive[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.responsive[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#000;font-size:1.5rem}.menu[_ngcontent-%COMP%]   #menu-resp[_ngcontent-%COMP%]{display:none}.navbar[_ngcontent-%COMP%]{width:100%}.search-engine[_ngcontent-%COMP%]{width:82%}}"]}),n})();const Bq=["*"];let Vq=(()=>{class n extends TI{get meshType(){return Tn}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275cmp=Ln({type:n,selectors:[["ngt-mesh"]],standalone:!0,features:[Rt([wq(n),_q(n)]),Oe,Za],ngContentSelectors:Bq,decls:1,vars:0,template:function(t,r){1&t&&(Hc(),zc(0))},encapsulation:2,changeDetection:0}),n})();const Gq=["*"];let Uq=(()=>{class n extends EI{get geometryType(){return Yo}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275cmp=Ln({type:n,selectors:[["ngt-box-geometry"]],standalone:!0,features:[Rt([Mq(n),yq(n)]),Oe,Za],ngContentSelectors:Gq,decls:1,vars:0,template:function(t,r){1&t&&(Hc(),zc(0))},encapsulation:2,changeDetection:0}),n})();const Hq=["*"];let zq=(()=>{class n extends DI{set color(t){this.set({color:t})}set opacity(t){this.set({opacity:Bt(t)})}set map(t){this.set({map:t})}set lightMap(t){this.set({lightMap:t})}set lightMapIntensity(t){this.set({lightMapIntensity:Bt(t)})}set aoMap(t){this.set({aoMap:t})}set aoMapIntensity(t){this.set({aoMapIntensity:Bt(t)})}set specularMap(t){this.set({specularMap:t})}set alphaMap(t){this.set({alphaMap:t})}set fog(t){this.set({fog:vt(t)})}set envMap(t){this.set({envMap:t})}set combine(t){this.set({combine:t})}set reflectivity(t){this.set({reflectivity:Bt(t)})}set refractionRatio(t){this.set({refractionRatio:Bt(t)})}set wireframe(t){this.set({wireframe:vt(t)})}set wireframeLinewidth(t){this.set({wireframeLinewidth:Bt(t)})}set wireframeLinecap(t){this.set({wireframeLinecap:t})}set wireframeLinejoin(t){this.set({wireframeLinejoin:t})}get materialType(){return vo}get optionFields(){return{...super.optionFields,color:!0,opacity:!0,map:!0,lightMap:!0,lightMapIntensity:!0,aoMap:!0,aoMapIntensity:!0,specularMap:!0,alphaMap:!0,fog:!0,envMap:!0,combine:!0,reflectivity:!0,refractionRatio:!0,wireframe:!0,wireframeLinewidth:!0,wireframeLinecap:!0,wireframeLinejoin:!0}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275cmp=Ln({type:n,selectors:[["ngt-mesh-basic-material"]],inputs:{color:"color",opacity:"opacity",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",specularMap:"specularMap",alphaMap:"alphaMap",fog:"fog",envMap:"envMap",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin"},standalone:!0,features:[Rt([xq(n),vq(n)]),Oe,Za],ngContentSelectors:Hq,decls:1,vars:0,template:function(t,r){1&t&&(Hc(),zc(0))},encapsulation:2,changeDetection:0}),n})(),jq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=_i({type:n,bootstrap:[kq]}),n.\u0275inj=Yr({imports:[WU,oz,N5,p0,Vq,Uq,zq]}),n})();(function fV(){bE=!1})(),jU().bootstrapModule(jq).catch(n=>console.error(n))}},ft=>{ft(ft.s=851)}]);