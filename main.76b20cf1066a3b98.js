"use strict";(self.webpackChunkToyotaBck=self.webpackChunkToyotaBck||[]).push([[179],{344:()=>{function ft(n){return"function"==typeof n}function wu(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Jh=wu(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function gl(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Br{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(ft(r))try{r()}catch(s){e=s instanceof Jh?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{hb(s)}catch(o){e=e??[],o instanceof Jh?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Jh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)hb(e);else{if(e instanceof Br){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&gl(t,e)}remove(e){const{_finalizers:t}=this;t&&gl(t,e),e instanceof Br&&e._removeParent(this)}}Br.EMPTY=(()=>{const n=new Br;return n.closed=!0,n})();const ub=Br.EMPTY;function db(n){return n instanceof Br||n&&"closed"in n&&ft(n.remove)&&ft(n.add)&&ft(n.unsubscribe)}function hb(n){ft(n)?n():n.unsubscribe()}const ia={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Kh={setTimeout(n,e,...t){const{delegate:r}=Kh;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Kh;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function fb(n){Kh.setTimeout(()=>{const{onUnhandledError:e}=ia;if(!e)throw n;e(n)})}function bu(){}const q2=ry("C",void 0,void 0);function ry(n,e,t){return{kind:n,value:e,error:t}}let sa=null;function Qh(n){if(ia.useDeprecatedSynchronousErrorHandling){const e=!sa;if(e&&(sa={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=sa;if(sa=null,t)throw r}}else n()}class iy extends Br{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,db(e)&&e.add(this)):this.destination=eL}static create(e,t,r){return new Cu(e,t,r)}next(e){this.isStopped?oy(function Y2(n){return ry("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?oy(function X2(n){return ry("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?oy(q2,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const J2=Function.prototype.bind;function sy(n,e){return J2.call(n,e)}class K2{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ef(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ef(r)}else ef(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ef(t)}}}class Cu extends iy{constructor(e,t,r){let i;if(super(),ft(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ia.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&sy(e.next,s),error:e.error&&sy(e.error,s),complete:e.complete&&sy(e.complete,s)}):i=e}this.destination=new K2(i)}}function ef(n){ia.useDeprecatedSynchronousErrorHandling?function Z2(n){ia.useDeprecatedSynchronousErrorHandling&&sa&&(sa.errorThrown=!0,sa.error=n)}(n):fb(n)}function oy(n,e){const{onStoppedNotification:t}=ia;t&&Kh.setTimeout(()=>t(n,e))}const eL={closed:!0,next:bu,error:function Q2(n){throw n},complete:bu},ay="function"==typeof Symbol&&Symbol.observable||"@@observable";function Zi(n){return n}function ly(...n){return pb(n)}function pb(n){return 0===n.length?Zi:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let Yt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function nL(n){return n&&n instanceof iy||function tL(n){return n&&ft(n.next)&&ft(n.error)&&ft(n.complete)}(n)&&db(n)}(t)?t:new Cu(t,r,i);return Qh(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=gb(r))((i,s)=>{const o=new Cu({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[ay](){return this}pipe(...t){return pb(t)(this)}toPromise(t){return new(t=gb(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function gb(n){var e;return null!==(e=n??ia.Promise)&&void 0!==e?e:Promise}const rL=wu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Vr=(()=>{class n extends Yt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new mb(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new rL}next(t){Qh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Qh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Qh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?ub:(this.currentObservers=null,s.push(t),new Br(()=>{this.currentObservers=null,gl(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new Yt;return t.source=this,t}}return n.create=(e,t)=>new mb(e,t),n})();class mb extends Vr{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:ub}}function yb(n){return ft(n?.lift)}function Kt(n){return e=>{if(yb(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Lt(n,e,t,r,i){return new iL(n,e,t,r,i)}class iL extends iy{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ye(n,e){return Kt((t,r)=>{let i=0;t.subscribe(Lt(r,s=>{r.next(n.call(e,s,i++))}))})}function oa(n){return this instanceof oa?(this.v=n,this):new oa(n)}function aL(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(g,p){s.push([h,f,g,p])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof oa?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}(r[h](f))}catch(g){d(s[0][3],g)}}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function lL(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Mb(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}function wn(n,e,t,r){if("a"===t&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===t?r:"a"===t?r.call(n):r?r.value:e.get(n)}const uy=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function xb(n){return ft(n?.then)}function wb(n){return ft(n[ay])}function bb(n){return Symbol.asyncIterator&&ft(n?.[Symbol.asyncIterator])}function Cb(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Sb=function dL(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Eb(n){return ft(n?.[Sb])}function Db(n){return aL(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield oa(t.read());if(i)return yield oa(void 0);yield yield oa(r)}}finally{t.releaseLock()}})}function Tb(n){return ft(n?.getReader)}function dr(n){if(n instanceof Yt)return n;if(null!=n){if(wb(n))return function hL(n){return new Yt(e=>{const t=n[ay]();if(ft(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(uy(n))return function fL(n){return new Yt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(xb(n))return function pL(n){return new Yt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,fb)})}(n);if(bb(n))return Ab(n);if(Eb(n))return function gL(n){return new Yt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Tb(n))return function mL(n){return Ab(Db(n))}(n)}throw Cb(n)}function Ab(n){return new Yt(e=>{(function yL(n,e){var t,r,i,s;return function sL(n,e,t,r){return new(t||(t=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function i(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=lL(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Cs(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Hn(n,e,t=1/0){return ft(e)?Hn((r,i)=>Ye((s,o)=>e(r,s,i,o))(dr(n(r,i))),t):("number"==typeof e&&(t=e),Kt((r,i)=>function _L(n,e,t,r,i,s,o,a){const l=[];let c=0,u=0,d=!1;const h=()=>{d&&!l.length&&!c&&e.complete()},f=p=>c<r?g(p):l.push(p),g=p=>{s&&e.next(p),c++;let m=!1;dr(t(p,u++)).subscribe(Lt(e,y=>{i?.(y),s?f(y):e.next(y)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<r;){const y=l.shift();o?Cs(e,o,()=>g(y)):g(y)}h()}catch(y){e.error(y)}}))};return n.subscribe(Lt(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,n,t)))}function ml(n=1/0){return Hn(Zi,n)}const Ss=new Yt(n=>n.complete());function Nb(n){return n&&ft(n.schedule)}function dy(n){return n[n.length-1]}function hy(n){return ft(dy(n))?n.pop():void 0}function Su(n){return Nb(dy(n))?n.pop():void 0}function Pb(n,e=0){return Kt((t,r)=>{t.subscribe(Lt(r,i=>Cs(r,n,()=>r.next(i),e),()=>Cs(r,n,()=>r.complete(),e),i=>Cs(r,n,()=>r.error(i),e)))})}function Ib(n,e=0){return Kt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Rb(n,e){if(!n)throw new Error("Iterable cannot be null");return new Yt(t=>{Cs(t,e,()=>{const r=n[Symbol.asyncIterator]();Cs(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Ob(n,e){if(null!=n){if(wb(n))return function xL(n,e){return dr(n).pipe(Ib(e),Pb(e))}(n,e);if(uy(n))return function bL(n,e){return new Yt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(xb(n))return function wL(n,e){return dr(n).pipe(Ib(e),Pb(e))}(n,e);if(bb(n))return Rb(n,e);if(Eb(n))return function CL(n,e){return new Yt(t=>{let r;return Cs(t,e,()=>{r=n[Sb](),Cs(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>ft(r?.return)&&r.return()})}(n,e);if(Tb(n))return function SL(n,e){return Rb(Db(n),e)}(n,e)}throw Cb(n)}function mn(n,e){return e?Ob(n,e):dr(n)}function Eu(n={}){const{connector:e=(()=>new Vr),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},g=()=>{const p=o;f(),p?.unsubscribe()};return Kt((p,m)=>{c++,!d&&!u&&h();const y=l=l??e();m.add(()=>{c--,0===c&&!d&&!u&&(a=fy(g,i))}),y.subscribe(m),!o&&c>0&&(o=new Cu({next:_=>y.next(_),error:_=>{d=!0,h(),a=fy(f,t,_),y.error(_)},complete:()=>{u=!0,h(),a=fy(f,r),y.complete()}}),dr(p).subscribe(o))})(s)}}function fy(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Cu({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function kt(n){for(let e in n)if(n[e]===kt)return e;throw Error("Could not find renamed property on target object.")}function py(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Bt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Bt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function gy(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const DL=kt({__forward_ref__:kt});function jt(n){return n.__forward_ref__=jt,n.toString=function(){return Bt(this())},n}function Ve(n){return my(n)?n():n}function my(n){return"function"==typeof n&&n.hasOwnProperty(DL)&&n.__forward_ref__===jt}class oe extends Error{constructor(e,t){super(function tf(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function Ze(n){return"string"==typeof n?n:null==n?"":String(n)}function nf(n,e){throw new oe(-201,!1)}function Ur(n,e){null==n&&function St(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function Oe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Hr(n){return{providers:n.providers||[],imports:n.imports||[]}}function rf(n){return Fb(n,sf)||Fb(n,kb)}function Fb(n,e){return n.hasOwnProperty(e)?n[e]:null}function Lb(n){return n&&(n.hasOwnProperty(yy)||n.hasOwnProperty(LL))?n[yy]:null}const sf=kt({\u0275prov:kt}),yy=kt({\u0275inj:kt}),kb=kt({ngInjectableDef:kt}),LL=kt({ngInjectorDef:kt});var Fe=(()=>((Fe=Fe||{})[Fe.Default=0]="Default",Fe[Fe.Host=1]="Host",Fe[Fe.Self=2]="Self",Fe[Fe.SkipSelf=4]="SkipSelf",Fe[Fe.Optional=8]="Optional",Fe))();let _y;function oi(n){const e=_y;return _y=n,e}function Bb(n,e,t){const r=rf(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Fe.Optional?null:void 0!==e?e:void nf(Bt(n))}function fo(n){return{toString:n}.toString()}var Pi=(()=>((Pi=Pi||{})[Pi.OnPush=0]="OnPush",Pi[Pi.Default=1]="Default",Pi))(),Ji=(()=>{return(n=Ji||(Ji={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ji;var n})();const Vt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),yl={},Ct=[],af=kt({\u0275cmp:kt}),vy=kt({\u0275dir:kt}),My=kt({\u0275pipe:kt}),Vb=kt({\u0275mod:kt}),Ds=kt({\u0275fac:kt}),Du=kt({__NG_ELEMENT_ID__:kt});let BL=0;function Zn(n){return fo(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Pi.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Ct,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ji.Emulated,id:"c"+BL++,styles:n.styles||Ct,_:null,setInput:null,schemas:n.schemas||null,tView:null},s=n.dependencies,o=n.features;return i.inputs=Hb(n.inputs,r),i.outputs=Hb(n.outputs),o&&o.forEach(a=>a(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(Gb).filter(Ub):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(fr).filter(Ub):null,i})}function Gb(n){return Nt(n)||hr(n)}function Ub(n){return null!==n}function ai(n){return fo(()=>({type:n.type,bootstrap:n.bootstrap||Ct,declarations:n.declarations||Ct,imports:n.imports||Ct,exports:n.exports||Ct,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Hb(n,e){if(null==n)return yl;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const Me=Zn;function Nt(n){return n[af]||null}function hr(n){return n[vy]||null}function fr(n){return n[My]||null}function zr(n,e){const t=n[Vb]||null;if(!t&&!0===e)throw new Error(`Type ${Bt(n)} does not have '\u0275mod' property.`);return t}function Ar(n){return Array.isArray(n)&&"object"==typeof n[1]}function Ri(n){return Array.isArray(n)&&!0===n[1]}function by(n){return 0!=(8&n.flags)}function df(n){return 2==(2&n.flags)}function hf(n){return 1==(1&n.flags)}function Oi(n){return null!==n.template}function jL(n){return 0!=(256&n[2])}function da(n,e){return n.hasOwnProperty(Ds)?n[Ds]:null}class qL{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function ci(){return Wb}function Wb(n){return n.type.prototype.ngOnChanges&&(n.setInput=YL),XL}function XL(){const n=qb(this),e=n?.current;if(e){const t=n.previous;if(t===yl)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function YL(n,e,t,r){const i=qb(n)||function ZL(n,e){return n[$b]=e}(n,{previous:yl,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[t],l=o[a];s[a]=new qL(l&&l.currentValue,e,o===yl),n[r]=e}ci.ngInherit=!0;const $b="__ngSimpleChanges__";function qb(n){return n[$b]||null}function bn(n){for(;Array.isArray(n);)n=n[0];return n}function ff(n,e){return bn(e[n])}function di(n,e){return bn(e[n.index])}function Ty(n,e){return n.data[e]}function Wr(n,e){const t=e[n];return Ar(t)?t:t[0]}function pf(n){return 64==(64&n[2])}function po(n,e){return null==e?null:n[e]}function Xb(n){n[18]=0}function Ay(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const je={lFrame:iC(null),bindingsEnabled:!0};function Zb(){return je.bindingsEnabled}function te(){return je.lFrame.lView}function yt(){return je.lFrame.tView}function Fn(){let n=Jb();for(;null!==n&&64===n.type;)n=n.parent;return n}function Jb(){return je.lFrame.currentTNode}function Ki(n,e){const t=je.lFrame;t.currentTNode=n,t.isParent=e}function Ny(){return je.lFrame.isParent}function Py(){je.lFrame.isParent=!1}function bl(){return je.lFrame.bindingIndex++}function f3(n,e){const t=je.lFrame;t.bindingIndex=t.bindingRootIndex=n,Iy(e)}function Iy(n){je.lFrame.currentDirectiveIndex=n}function tC(){return je.lFrame.currentQueryIndex}function Oy(n){je.lFrame.currentQueryIndex=n}function g3(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function nC(n,e,t){if(t&Fe.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Fe.Host||(i=g3(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=je.lFrame=rC();return r.currentTNode=e,r.lView=n,!0}function Fy(n){const e=rC(),t=n[1];je.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function rC(){const n=je.lFrame,e=null===n?null:n.child;return null===e?iC(n):e}function iC(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function sC(){const n=je.lFrame;return je.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const oC=sC;function Ly(){const n=sC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function gr(){return je.lFrame.selectedIndex}function go(n){je.lFrame.selectedIndex=n}function un(){const n=je.lFrame;return Ty(n.tView,n.selectedIndex)}function gf(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks||(n.destroyHooks=[])).push(t,u)}}function mf(n,e,t){cC(n,e,3,t)}function yf(n,e,t,r){(3&n[2])===t&&cC(n,e,t,r)}function ky(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function cC(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(w3(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function w3(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Ru{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function _f(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];dC(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function uC(n){return 3===n||4===n||6===n}function dC(n){return 64===n.charCodeAt(0)}function vf(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||hC(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function hC(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function fC(n){return-1!==n}function Cl(n){return 32767&n}function Sl(n,e){let t=function D3(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let Vy=!0;function Mf(n){const e=Vy;return Vy=n,e}let T3=0;const Qi={};function Fu(n,e){const t=Uy(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,Gy(r.data,n),Gy(e,null),Gy(r.blueprint,null));const i=xf(n,e),s=n.injectorIndex;if(fC(i)){const o=Cl(i),a=Sl(i,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function Gy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Uy(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function xf(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=wC(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function wf(n,e,t){!function A3(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Du)&&(r=t[Du]),null==r&&(r=t[Du]=T3++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function mC(n,e,t){if(t&Fe.Optional||void 0!==n)return n;nf()}function yC(n,e,t,r){if(t&Fe.Optional&&void 0===r&&(r=null),0==(t&(Fe.Self|Fe.Host))){const i=n[9],s=oi(void 0);try{return i?i.get(e,r,t&Fe.Optional):Bb(e,r,t&Fe.Optional)}finally{oi(s)}}return mC(r,0,t)}function _C(n,e,t,r=Fe.Default,i){if(null!==n){if(1024&e[2]){const o=function O3(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=vC(s,o,t,r|Fe.Self,Qi);if(a!==Qi)return a;let l=s.parent;if(!l){const c=o[21];if(c){const u=c.get(t,Qi,r);if(u!==Qi)return u}l=wC(o),o=o[15]}s=l}return i}(n,e,t,r,Qi);if(o!==Qi)return o}const s=vC(n,e,t,r,Qi);if(s!==Qi)return s}return yC(e,t,r,i)}function vC(n,e,t,r,i){const s=function I3(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Du)?n[Du]:void 0;return"number"==typeof e?e>=0?255&e:R3:e}(t);if("function"==typeof s){if(!nC(e,n,r))return r&Fe.Host?mC(i,0,r):yC(e,t,r,i);try{const o=s(r);if(null!=o||r&Fe.Optional)return o;nf()}finally{oC()}}else if("number"==typeof s){let o=null,a=Uy(n,e),l=-1,c=r&Fe.Host?e[16][6]:null;for((-1===a||r&Fe.SkipSelf)&&(l=-1===a?xf(n,e):e[a+8],-1!==l&&xC(r,!1)?(o=e[1],a=Cl(l),e=Sl(l,e)):a=-1);-1!==a;){const u=e[1];if(MC(s,a,u.data)){const d=P3(a,e,t,o,r,c);if(d!==Qi)return d}l=e[a+8],-1!==l&&xC(r,e[1].data[a+8]===c)&&MC(s,a,e)?(o=u,a=Cl(l),e=Sl(l,e)):a=-1}}return i}function P3(n,e,t,r,i,s){const o=e[1],a=o.data[n+8],u=bf(a,o,t,null==r?df(a)&&Vy:r!=o&&0!=(3&a.type),i&Fe.Host&&s===a);return null!==u?Lu(e,o,u,a):Qi}function bf(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,h=i?a+u:n.directiveEnd;for(let f=r?a:a+u;f<h;f++){const g=o[f];if(f<l&&t===g||f>=l&&g.type===t)return f}if(i){const f=o[l];if(f&&Oi(f)&&f.type===t)return l}return null}function Lu(n,e,t,r){let i=n[t];const s=e.data;if(function b3(n){return n instanceof Ru}(i)){const o=i;o.resolving&&function TL(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new oe(-200,`Circular dependency in DI detected for ${n}${t}`)}(function bt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ze(n)}(s[t]));const a=Mf(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?oi(o.injectImpl):null;nC(n,r,Fe.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function x3(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Wb(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&oi(l),Mf(a),o.resolving=!1,oC()}}return i}function MC(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function xC(n,e){return!(n&Fe.Self||n&Fe.Host&&e)}class El{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return _C(this._tNode,this._lView,e,r,t)}}function R3(){return new El(Fn(),te())}function pt(n){return fo(()=>{const e=n.prototype.constructor,t=e[Ds]||Hy(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Ds]||Hy(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Hy(n){return my(n)?()=>{const e=Hy(Ve(n));return e&&e()}:da(n)}function wC(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}const Tl="__parameters__";function Nl(n,e,t){return fo(()=>{const r=function zy(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(Tl)?l[Tl]:Object.defineProperty(l,Tl,{value:[]})[Tl];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class Pe{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Oe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function $r(n,e){void 0===e&&(e=n);for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)?(e===n&&(e=n.slice(0,t)),$r(r,e)):e!==n&&e.push(r)}return e}function Ns(n,e){n.forEach(t=>Array.isArray(t)?Ns(t,e):e(t))}function CC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Cf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Gu(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function qr(n,e,t){let r=Pl(n,e);return r>=0?n[1|r]=t:(r=~r,function B3(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Wy(n,e){const t=Pl(n,e);if(t>=0)return n[1|t]}function Pl(n,e){return function DC(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const Uu={},qy="__NG_DI_FLAG__",Ef="ngTempTokenPath",$3=/\n/gm,TC="__source";let Hu;function Il(n){const e=Hu;return Hu=n,e}function X3(n,e=Fe.Default){if(void 0===Hu)throw new oe(-203,!1);return null===Hu?Bb(n,void 0,e):Hu.get(n,e&Fe.Optional?null:void 0,e)}function xe(n,e=Fe.Default){return(function kL(){return _y}()||X3)(Ve(n),e)}function _t(n,e=Fe.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),xe(n,e)}function Xy(n){const e=[];for(let t=0;t<n.length;t++){const r=Ve(n[t]);if(Array.isArray(r)){if(0===r.length)throw new oe(900,!1);let i,s=Fe.Default;for(let o=0;o<r.length;o++){const a=r[o],l=Y3(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(xe(i,s))}else e.push(xe(r))}return e}function zu(n,e){return n[qy]=e,n.prototype[qy]=e,n}function Y3(n){return n[qy]}const ju=zu(Nl("Optional"),8),Wu=zu(Nl("SkipSelf"),4);let Zy;class UC{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function yo(n){return n instanceof UC?n.changingThisBreaksApplicationSecurity:n}const vk=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Cn=(()=>((Cn=Cn||{})[Cn.NONE=0]="NONE",Cn[Cn.HTML=1]="HTML",Cn[Cn.STYLE=2]="STYLE",Cn[Cn.SCRIPT=3]="SCRIPT",Cn[Cn.URL=4]="URL",Cn[Cn.RESOURCE_URL=5]="RESOURCE_URL",Cn))();function ha(n){const e=function Zu(){const n=te();return n&&n[12]}();return e?e.sanitize(Cn.URL,n)||"":function Xu(n,e){const t=function gk(n){return n instanceof UC&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}(n,"URL")?yo(n):function Qy(n){return(n=String(n)).match(vk)?n:"unsafe:"+n}(Ze(n))}const r_=new Pe("ENVIRONMENT_INITIALIZER"),YC=new Pe("INJECTOR",-1),ZC=new Pe("INJECTOR_DEF_TYPES");class JC{get(e,t=Uu){if(t===Uu){const r=new Error(`NullInjectorError: No provider for ${Bt(e)}!`);throw r.name="NullInjectorError",r}return t}}function Rk(...n){return{\u0275providers:KC(0,n)}}function KC(n,...e){const t=[],r=new Set;let i;return Ns(e,s=>{const o=s;i_(o,t,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&QC(i,t),t}function QC(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];Ns(i,s=>{e.push(s)})}}function i_(n,e,t,r){if(!(n=Ve(n)))return!1;let i=null,s=Lb(n);const o=!s&&Nt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=Lb(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)i_(c,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{Ns(s.imports,u=>{i_(u,e,t,r)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&QC(c,e)}if(!a){const c=da(i)||(()=>new i);e.push({provide:i,useFactory:c,deps:Ct},{provide:ZC,useValue:i,multi:!0},{provide:r_,useValue:()=>xe(i),multi:!0})}const l=s.providers;null==l||a||Ns(l,u=>{e.push(u)})}}return i!==n&&void 0!==n.providers}const Ok=kt({provide:String,useValue:kt});function s_(n){return null!==n&&"object"==typeof n&&Ok in n}function fa(n){return"function"==typeof n}const o_=new Pe("Set Injector scope."),If={},Lk={};let a_;function Rf(){return void 0===a_&&(a_=new JC),a_}class _o{}class nS extends _o{constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,c_(e,o=>this.processProvider(o)),this.records.set(YC,Fl(void 0,this)),i.has("environment")&&this.records.set(_o,Fl(void 0,this));const s=this.records.get(o_);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(ZC.multi,Ct,Fe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=Il(this),r=oi(void 0);try{return e()}finally{Il(t),oi(r)}}get(e,t=Uu,r=Fe.Default){this.assertNotDestroyed();const i=Il(this),s=oi(void 0);try{if(!(r&Fe.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function Uk(n){return"function"==typeof n||"object"==typeof n&&n instanceof Pe}(e)&&rf(e);a=l&&this.injectableDefInScope(l)?Fl(l_(e),If):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Fe.Self?Rf():this.parent).get(e,t=r&Fe.Optional&&t===Uu?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Ef]=o[Ef]||[]).unshift(Bt(e)),i)throw o;return function Z3(n,e,t,r){const i=n[Ef];throw e[TC]&&i.unshift(e[TC]),n.message=function J3(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Bt(e);if(Array.isArray(e))i=e.map(Bt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Bt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace($3,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Ef]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{oi(s),Il(i)}}resolveInjectorInitializers(){const e=Il(this),t=oi(void 0);try{const r=this.get(r_.multi,Ct,Fe.Self);for(const i of r)i()}finally{Il(e),oi(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Bt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new oe(205,!1)}processProvider(e){let t=fa(e=Ve(e))?e:Ve(e&&e.provide);const r=function Bk(n){return s_(n)?Fl(void 0,n.useValue):Fl(rS(n),If)}(e);if(fa(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Fl(void 0,If,!0),i.factory=()=>Xy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===If&&(t.value=Lk,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Gk(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Ve(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function l_(n){const e=rf(n),t=null!==e?e.factory:da(n);if(null!==t)return t;if(n instanceof Pe)throw new oe(204,!1);if(n instanceof Function)return function kk(n){const e=n.length;if(e>0)throw Gu(e,"?"),new oe(204,!1);const t=function OL(n){const e=n&&(n[sf]||n[kb]);if(e){const t=function FL(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new oe(204,!1)}function rS(n,e,t){let r;if(fa(n)){const i=Ve(n);return da(i)||l_(i)}if(s_(n))r=()=>Ve(n.useValue);else if(function tS(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Xy(n.deps||[]));else if(function eS(n){return!(!n||!n.useExisting)}(n))r=()=>xe(Ve(n.useExisting));else{const i=Ve(n&&(n.useClass||n.provide));if(!function Vk(n){return!!n.deps}(n))return da(i)||l_(i);r=()=>new i(...Xy(n.deps))}return r}function Fl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Hk(n){return!!n.\u0275providers}function c_(n,e){for(const t of n)Array.isArray(t)?c_(t,e):Hk(t)?c_(t.\u0275providers,e):e(t)}class iS{}class Wk{resolveComponentFactory(e){throw function jk(n){const e=Error(`No component factory found for ${Bt(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let Ju=(()=>{class n{}return n.NULL=new Wk,n})();function $k(){return Ll(Fn(),te())}function Ll(n,e){return new mr(di(n,e))}let mr=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=$k,n})();function qk(n){return n instanceof mr?n.nativeElement:n}class oS{}let Is=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Xk(){const n=te(),t=Wr(Fn().index,n);return(Ar(t)?t:n)[11]}(),n})(),Yk=(()=>{class n{}return n.\u0275prov=Oe({token:n,providedIn:"root",factory:()=>null}),n})();class Ku{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Zk=new Ku("14.2.3"),u_={};function g_(n){return n.ngOriginalError}class kl{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&g_(e);for(;t&&g_(t);)t=g_(t);return t||null}}const m_=new Map;let lB=0;const __="__ngContext__";function ir(n,e){Ar(e)?(n[__]=e[20],function uB(n){m_.set(n[20],n)}(e)):n[__]=e}function _S(n){return n.ownerDocument}function Rs(n){return n instanceof Function?n():n}var Nr=(()=>((Nr=Nr||{})[Nr.Important=1]="Important",Nr[Nr.DashCase=2]="DashCase",Nr))();function M_(n,e){return undefined(n,e)}function ed(n){const e=n[3];return Ri(e)?e[3]:e}function x_(n){return xS(n[13])}function w_(n){return xS(n[4])}function xS(n){for(;null!==n&&!Ri(n);)n=n[4];return n}function Vl(n,e,t,r,i){if(null!=r){let s,o=!1;Ri(r)?s=r:Ar(r)&&(o=!0,r=r[0]);const a=bn(r);0===n&&null!==t?null==i?DS(e,t,a):pa(e,t,a,i||null,!0):1===n&&null!==t?pa(e,t,a,i||null,!0):2===n?function OS(n,e,t){const r=Of(n,e);r&&function LB(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function VB(n,e,t,r,i){const s=t[7];s!==bn(t)&&Vl(e,n,r,s,i);for(let a=10;a<t.length;a++){const l=t[a];td(l[1],l,n,e,r,s)}}(e,n,s,t,i)}}function C_(n,e,t){return n.createElement(e,t)}function bS(n,e){const t=n[9],r=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,Ay(i,-1)),t.splice(r,1)}function S_(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&bS(i,r),e>0&&(n[t-1][4]=r[4]);const s=Cf(n,10+e);!function TB(n,e){td(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function CS(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&td(n,e,t,3,null,null),function PB(n){let e=n[13];if(!e)return E_(n[1],n);for(;e;){let t=null;if(Ar(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Ar(e)&&E_(e[1],e),e=e[3];null===e&&(e=n),Ar(e)&&E_(e[1],e),t=e&&e[4]}e=t}}(e)}}function E_(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function FB(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof Ru)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function OB(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):bn(e[o]),l=r[i=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const o=r[i=t[s+1]];t[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Ri(e[3])){t!==e[3]&&bS(t,e);const r=e[19];null!==r&&r.detachView(n)}!function dB(n){m_.delete(n[20])}(e)}}function SS(n,e,t){return function ES(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===Ji.None||i===Ji.Emulated)return null}return di(r,t)}(n,e.parent,t)}function pa(n,e,t,r,i){n.insertBefore(e,t,r,i)}function DS(n,e,t){n.appendChild(e,t)}function TS(n,e,t,r,i){null!==r?pa(n,e,t,r,i):DS(n,e,t)}function Of(n,e){return n.parentNode(e)}function AS(n,e,t){return PS(n,e,t)}let PS=function NS(n,e,t){return 40&n.type?di(n,t):null};function Ff(n,e,t,r){const i=SS(n,r,e),s=e[11],a=AS(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)TS(s,i,t[l],a,!1);else TS(s,i,t,a,!1)}function Lf(n,e){if(null!==e){const t=e.type;if(3&t)return di(e,n);if(4&t)return T_(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Lf(n,r);{const i=n[e.index];return Ri(i)?T_(-1,i):bn(i)}}if(32&t)return M_(e,n)()||bn(n[e.index]);{const r=RS(n,e);return null!==r?Array.isArray(r)?r[0]:Lf(ed(n[16]),r):Lf(n,e.next)}}return null}function RS(n,e){return null!==e?n[16][6].projection[e.projection]:null}function T_(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return Lf(r,i)}return e[7]}function A_(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&ir(bn(a),r),t.flags|=4),64!=(64&t.flags))if(8&l)A_(n,e,t.child,r,i,s,!1),Vl(e,n,i,a,s);else if(32&l){const c=M_(t,r);let u;for(;u=c();)Vl(e,n,i,u,s);Vl(e,n,i,a,s)}else 16&l?FS(n,e,r,t,i,s):Vl(e,n,i,a,s);t=o?t.projectionNext:t.next}}function td(n,e,t,r,i,s){A_(t,r,n.firstChild,e,i,s,!1)}function FS(n,e,t,r,i,s){const o=t[16],l=o[6].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Vl(e,n,i,l[c],s);else A_(n,e,l,o[3],i,s,!0)}function LS(n,e,t){n.setAttribute(e,"style",t)}function N_(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function kS(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const BS="ng-template";function UB(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==kS(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function VS(n){return 4===n.type&&n.value!==BS}function HB(n,e,t){return e===(4!==n.type||t?n.value:BS)}function zB(n,e,t){let r=4;const i=n.attrs||[],s=function $B(n){for(let e=0;e<n.length;e++)if(uC(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!HB(n,l,t)||""===l&&1===e.length){if(Fi(r))return!1;o=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!UB(n.attrs,c,t)){if(Fi(r))return!1;o=!0}continue}const d=jB(8&r?"class":l,i,VS(n),t);if(-1===d){if(Fi(r))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==kS(f,c,0)||2&r&&c!==h){if(Fi(r))return!1;o=!0}}}}else{if(!o&&!Fi(r)&&!Fi(l))return!1;if(o&&Fi(l))continue;o=!1,r=l|1&r}}return Fi(r)||o}function Fi(n){return 0==(1&n)}function jB(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function qB(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function GS(n,e,t=!1){for(let r=0;r<e.length;r++)if(zB(n,e[r],t))return!0;return!1}function XB(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function US(n,e){return n?":not("+e.trim()+")":e}function YB(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!Fi(o)&&(e+=US(s,i),i=""),r=o,s=s||!Fi(r);t++}return""!==i&&(e+=US(s,i)),e}const Je={};function Pt(n){HS(yt(),te(),gr()+n,!1)}function HS(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&mf(e,s,t)}else{const s=n.preOrderHooks;null!==s&&yf(e,s,0,t)}go(t)}function $S(n,e=null,t=null,r){const i=qS(n,e,t,r);return i.resolveInjectorInitializers(),i}function qS(n,e=null,t=null,r,i=new Set){const s=[t||Ct,Rk(n)];return r=r||("object"==typeof n?void 0:Bt(n)),new nS(s,e||Rf(),r||null,i)}let Xr=(()=>{class n{static create(t,r){if(Array.isArray(t))return $S({name:""},r,t,"");{const i=t.name??"";return $S({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=Uu,n.NULL=new JC,n.\u0275prov=Oe({token:n,providedIn:"any",factory:()=>xe(YC)}),n.__NG_ELEMENT_ID__=-1,n})();function re(n,e=Fe.Default){const t=te();return null===t?xe(n,e):_C(Fn(),t,Ve(n),e)}function F_(){throw new Error("invalid")}function Bf(n,e){return n<<17|e<<2}function Li(n){return n>>17&32767}function L_(n){return 2|n}function Os(n){return(131068&n)>>2}function k_(n,e){return-131069&n|e<<2}function B_(n){return 1|n}function u1(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],s=t[r+1];if(-1!==s){const o=n.data[s];Oy(i),o.contentQueries(2,e[s],s)}}}function Uf(n,e,t,r,i,s,o,a,l,c,u){const d=e.blueprint.slice();return d[0]=i,d[2]=76|r,(null!==u||n&&1024&n[2])&&(d[2]|=1024),Xb(d),d[3]=d[15]=n,d[8]=t,d[10]=o||n&&n[10],d[11]=a||n&&n[11],d[12]=l||n&&n[12]||null,d[9]=c||n&&n[9]||null,d[6]=s,d[20]=function cB(){return lB++}(),d[21]=u,d[16]=2==e.type?n[16]:d,d}function Ul(n,e,t,r,i){let s=n.data[e];if(null===s)s=function $_(n,e,t,r,i){const s=Jb(),o=Ny(),l=n.data[e]=function PV(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,r,i),function h3(){return je.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function Iu(){const n=je.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ki(s,!0),s}function Hl(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function q_(n,e,t){Fy(e);try{const r=n.viewQuery;null!==r&&tv(1,r,t);const i=n.template;null!==i&&d1(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&u1(n,e),n.staticViewQueries&&tv(2,n.viewQuery,t);const s=n.components;null!==s&&function TV(n,e){for(let t=0;t<e.length;t++)qV(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,Ly()}}function Hf(n,e,t,r){const i=e[2];if(128!=(128&i)){Fy(e);try{Xb(e),function Qb(n){return je.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&d1(n,e,t,2,r);const o=3==(3&i);if(o){const c=n.preOrderCheckHooks;null!==c&&mf(e,c,null)}else{const c=n.preOrderHooks;null!==c&&yf(e,c,0,null),ky(e,0)}if(function WV(n){for(let e=x_(n);null!==e;e=w_(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],s=i[3];0==(512&i[2])&&Ay(s,1),i[2]|=512}}}(e),function jV(n){for(let e=x_(n);null!==e;e=w_(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];pf(r)&&Hf(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&u1(n,e),o){const c=n.contentCheckHooks;null!==c&&mf(e,c)}else{const c=n.contentHooks;null!==c&&yf(e,c,1),ky(e,1)}!function EV(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)go(~i);else{const s=i,o=t[++r],a=t[++r];f3(o,s),a(2,e[s])}}}finally{go(-1)}}(n,e);const a=n.components;null!==a&&function DV(n,e){for(let t=0;t<e.length;t++)$V(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&tv(2,l,r),o){const c=n.viewCheckHooks;null!==c&&mf(e,c)}else{const c=n.viewHooks;null!==c&&yf(e,c,2),ky(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Ay(e[3],-1))}finally{Ly()}}}function d1(n,e,t,r,i){const s=gr(),o=2&r;try{go(-1),o&&e.length>22&&HS(n,e,22,!1),t(r,i)}finally{go(s)}}function h1(n,e,t){if(by(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function X_(n,e,t){!Zb()||(function LV(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||Fu(t,e),ir(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=Oi(l);c&&UV(e,t,l);const u=Lu(e,n,a,t);ir(u,e),null!==o&&HV(0,a-i,u,l,0,o),c&&(Wr(t.index,e)[8]=u)}}(n,e,t,di(t,e)),128==(128&t.flags)&&function kV(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function p3(){return je.lFrame.currentDirectiveIndex}();try{go(s);for(let a=r;a<i;a++){const l=n.data[a],c=e[a];Iy(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&v1(l,c)}}finally{go(-1),Iy(o)}}(n,e,t))}function Y_(n,e,t=di){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function f1(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Z_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Z_(n,e,t,r,i,s,o,a,l,c){const u=22+r,d=u+i,h=function AV(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Je);return t}(u,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function p1(n,e,t,r){const i=C1(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&S1(n).push(r,i.length-1))}function g1(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function m1(n,e){const r=e.directiveEnd,i=n.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<r;c++){const u=i[c],d=u.inputs,h=null===s||VS(e)?null:zV(d,s);o.push(h),a=g1(d,c,a),l=g1(u.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}function Yr(n,e,t,r,i,s,o,a){const l=di(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[r])?(nv(n,t,u,r,i),df(e)&&y1(t,e.index)):3&e.type&&(r=function IV(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(l,r,i))}function y1(n,e){const t=Wr(e,n);16&t[2]||(t[2]|=32)}function J_(n,e,t,r){let i=!1;if(Zb()){const s=function BV(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];GS(t,o.selectors,!1)&&(i||(i=[]),wf(Fu(t,e),n,o.type),Oi(o)?(M1(n,t),i.unshift(o)):i.push(o))}return i}(n,e,t),o=null===r?null:{"":-1};if(null!==s){i=!0,x1(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const d=s[u];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,c=Hl(n,e,s.length,null);for(let u=0;u<s.length;u++){const d=s[u];t.mergedAttrs=vf(t.mergedAttrs,d.hostAttrs),w1(n,t,e,c,d),GV(c,d,o),null!==d.contentQueries&&(t.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(t.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),l=!0),c++}m1(n,t)}o&&function VV(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new oe(-301,!1);r.push(e[i],s)}}}(t,r,o)}return t.mergedAttrs=vf(t.mergedAttrs,t.attrs),i}function _1(n,e,t,r,i,s){const o=s.hostBindings;if(o){let a=n.hostBindingOpCodes;null===a&&(a=n.hostBindingOpCodes=[]);const l=~e.index;(function FV(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(r,i,o)}}function v1(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function M1(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function GV(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Oi(e)&&(t[""]=n)}}function x1(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function w1(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=da(i.type)),o=new Ru(s,Oi(i),re);n.blueprint[r]=o,t[r]=o,_1(n,e,0,r,Hl(n,t,i.hostVars,Je),i)}function UV(n,e,t){const r=di(e,n),i=f1(t),s=n[10],o=zf(n,Uf(n,i,null,t.onPush?32:16,r,e,s,s.createRenderer(r,t),null,null,null));n[e.index]=o}function es(n,e,t,r,i,s){const o=di(n,e);!function K_(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?Ze(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[11],o,s,n.value,t,r,i)}function HV(n,e,t,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],d=o[l++];null!==a?r.setInput(t,d,c,u):t[u]=d}}}function zV(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function b1(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}function $V(n,e){const t=Wr(e,n);if(pf(t)){const r=t[1];48&t[2]?Hf(r,t,r.template,t[8]):t[5]>0&&Q_(t)}}function Q_(n){for(let r=x_(n);null!==r;r=w_(r))for(let i=10;i<r.length;i++){const s=r[i];if(pf(s))if(512&s[2]){const o=s[1];Hf(o,s,o.template,s[8])}else s[5]>0&&Q_(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Wr(t[r],n);pf(i)&&i[5]>0&&Q_(i)}}function qV(n,e){const t=Wr(e,n),r=t[1];(function XV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),q_(r,t,t[8])}function zf(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function ev(n){for(;n;){n[2]|=32;const e=ed(n);if(jL(n)&&!e)return n;n=e}return null}function jf(n,e,t,r=!0){const i=e[10];i.begin&&i.begin();try{Hf(n,e,n.template,t)}catch(o){throw r&&D1(e,o),o}finally{i.end&&i.end()}}function tv(n,e,t){Oy(0),e(n,t)}function C1(n){return n[7]||(n[7]=[])}function S1(n){return n.cleanup||(n.cleanup=[])}function D1(n,e){const t=n[9],r=t?t.get(kl,null):null;r&&r.handleError(e)}function nv(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,i,r,a):l[a]=i}}function Wf(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=gy(i,a):2==s&&(r=gy(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function $f(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(bn(s)),Ri(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&$f(l[1],l,c,r)}const o=t.type;if(8&o)$f(n,e,t.child,r);else if(32&o){const a=M_(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=RS(e,t);if(Array.isArray(a))r.push(...a);else{const l=ed(e[16]);$f(l[1],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class nd{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return $f(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Ri(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(S_(e,r),Cf(t,r))}this._attachedToViewContainer=!1}CS(this._lView[1],this._lView)}onDestroy(e){p1(this._lView[1],this._lView,null,e)}markForCheck(){ev(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){jf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function NB(n,e){td(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=e}}class YV extends nd{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;jf(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class rv extends Ju{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Nt(e);return new rd(t,this.ngModule)}}function T1(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class JV{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){const i=this.injector.get(e,u_,r);return i!==u_||t===u_?i:this.parentInjector.get(e,t,r)}}class rd extends iS{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function ZB(n){return n.map(YB).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return T1(this.componentDef.inputs)}get outputs(){return T1(this.componentDef.outputs)}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof _o?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new JV(e,s):e,a=o.get(oS,null);if(null===a)throw new oe(407,!1);const l=o.get(Yk,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",d=r?function NV(n,e,t){return n.selectRootElement(e,t===Ji.ShadowDom)}(c,r,this.componentDef.encapsulation):C_(a.createRenderer(null,this.componentDef),u,function ZV(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(u)),h=this.componentDef.onPush?288:272,f=Z_(0,null,null,1,0,null,null,null,null,null),g=Uf(null,f,null,h,null,null,a,c,l,o,null);let p,m;Fy(g);try{const y=function eG(n,e,t,r,i,s){const o=t[1];t[22]=n;const l=Ul(o,22,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(Wf(l,c,!0),null!==n&&(_f(i,n,c),null!==l.classes&&N_(i,n,l.classes),null!==l.styles&&LS(i,n,l.styles)));const u=r.createRenderer(n,e),d=Uf(t,f1(e),null,e.onPush?32:16,t[22],l,r,u,s||null,null,null);return o.firstCreatePass&&(wf(Fu(l,t),o,e.type),M1(o,l),x1(l,t.length,1)),zf(t,d),t[22]=d}(d,this.componentDef,g,a,c);if(d)if(r)_f(c,d,["ng-version",Zk.full]);else{const{attrs:_,classes:v}=function JB(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!Fi(i))break;i=s}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);_&&_f(c,d,_),v&&v.length>0&&N_(c,d,v.join(" "))}if(m=Ty(f,22),void 0!==t){const _=m.projection=[];for(let v=0;v<this.ngContentSelectors.length;v++){const M=t[v];_.push(null!=M?Array.from(M):null)}}p=function tG(n,e,t,r){const i=t[1],s=function OV(n,e,t){const r=Fn();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),w1(n,r,e,Hl(n,e,1,null),t),m1(n,r));const i=Lu(e,n,r.directiveStart,r);ir(i,e);const s=di(r,e);return s&&ir(s,e),i}(i,t,e);if(n[8]=t[8]=s,null!==r)for(const a of r)a(s,e);if(e.contentQueries){const a=Fn();e.contentQueries(1,s,a.directiveStart)}const o=Fn();return!i.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(go(o.index),_1(t[1],o,0,o.directiveStart,o.directiveEnd,e),v1(e,s)),s}(y,this.componentDef,g,[nG]),q_(f,g,null)}finally{Ly()}return new QV(this.componentType,p,Ll(m,g),g,m)}}class QV extends class zk{}{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new YV(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const s=this._rootLView;nv(s[1],s,i,e,t),y1(s,this._tNode.index)}}get injector(){return new El(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function nG(){const n=Fn();gf(te()[1],n)}function Le(n){let e=function A1(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Oi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new oe(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=iv(n.inputs),o.declaredInputs=iv(n.declaredInputs),o.outputs=iv(n.outputs);const a=i.hostBindings;a&&oG(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&iG(n,l),c&&sG(n,c),py(n.inputs,i.inputs),py(n.declaredInputs,i.declaredInputs),py(n.outputs,i.outputs),Oi(i)&&i.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Le&&(t=!1)}}e=Object.getPrototypeOf(e)}!function rG(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=vf(i.hostAttrs,t=vf(t,i.hostAttrs))}}(r)}function iv(n){return n===yl?{}:n===Ct?[]:n}function iG(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function sG(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function oG(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let qf=null;function ga(){if(!qf){const n=Vt.Symbol;if(n&&n.iterator)qf=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(qf=r)}}}return qf}function id(n){return!!function sv(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&ga()in n)}function sr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function ns(n,e,t,r){const i=te();return sr(i,bl(),e)&&(yt(),es(un(),i,n,e,t,r)),ns}function jl(n,e,t,r){return sr(n,bl(),t)?e+Ze(t)+r:Je}function rs(n,e,t,r,i,s,o,a){const l=te(),c=yt(),u=n+22,d=c.firstCreatePass?function pG(n,e,t,r,i,s,o,a,l){const c=e.consts,u=Ul(e,n,4,o||null,po(c,a));J_(e,t,u,po(c,l)),gf(e,u);const d=u.tViews=Z_(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,r,i,s,o):c.data[u];Ki(d,!1);const h=l[11].createComment("");Ff(c,l,h,d),ir(h,l),zf(l,l[u]=b1(h,l,h,d)),hf(d)&&X_(c,l,d),null!=o&&Y_(l,d,a)}function fi(n,e,t){const r=te();return sr(r,bl(),e)&&Yr(yt(),un(),r,n,e,r[11],t,!1),fi}function ov(n,e,t,r,i){const o=i?"class":"style";nv(n,t,e.inputs[o],o,r)}function O(n,e,t,r){const i=te(),s=yt(),o=22+n,a=i[11],l=i[o]=C_(a,e,function M3(){return je.lFrame.currentNamespace}()),c=s.firstCreatePass?function mG(n,e,t,r,i,s,o){const a=e.consts,c=Ul(e,n,2,i,po(a,s));return J_(e,t,c,po(a,o)),null!==c.attrs&&Wf(c,c.attrs,!1),null!==c.mergedAttrs&&Wf(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,0,e,t,r):s.data[o];Ki(c,!0);const u=c.mergedAttrs;null!==u&&_f(a,l,u);const d=c.classes;null!==d&&N_(a,l,d);const h=c.styles;return null!==h&&LS(a,l,h),64!=(64&c.flags)&&Ff(s,i,l,c),0===function i3(){return je.lFrame.elementDepthCount}()&&ir(l,i),function s3(){je.lFrame.elementDepthCount++}(),hf(c)&&(X_(s,i,c),h1(s,c,i)),null!==r&&Y_(i,c),O}function F(){let n=Fn();Ny()?Py():(n=n.parent,Ki(n,!1));const e=n;!function o3(){je.lFrame.elementDepthCount--}();const t=yt();return t.firstCreatePass&&(gf(t,n),by(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function S3(n){return 0!=(16&n.flags)}(e)&&ov(t,e,te(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function E3(n){return 0!=(32&n.flags)}(e)&&ov(t,e,te(),e.stylesWithoutHost,!1),F}function Ie(n,e,t,r){return O(n,e,t,r),F(),Ie}function Yf(n,e,t){const r=te(),i=yt(),s=n+22,o=i.firstCreatePass?function yG(n,e,t,r,i){const s=e.consts,o=po(s,r),a=Ul(e,n,8,"ng-container",o);return null!==o&&Wf(a,o,!0),J_(e,t,a,po(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,t):i.data[s];Ki(o,!0);const a=r[s]=r[11].createComment("");return Ff(i,r,a,o),ir(a,r),hf(o)&&(X_(i,r,o),h1(i,o,r)),null!=t&&Y_(r,o),Yf}function Zf(){let n=Fn();const e=yt();return Ny()?Py():(n=n.parent,Ki(n,!1)),e.firstCreatePass&&(gf(e,n),by(n)&&e.queries.elementEnd(n)),Zf}function av(n,e,t){return Yf(n,e,t),Zf(),av}function od(n){return!!n&&"function"==typeof n.then}const lv=function G1(n){return!!n&&"function"==typeof n.subscribe};function yn(n,e,t,r){const i=te(),s=yt(),o=Fn();return function H1(n,e,t,r,i,s,o,a){const l=hf(r),u=n.firstCreatePass&&S1(n),d=e[8],h=C1(e);let f=!0;if(3&r.type||a){const m=di(r,e),y=a?a(m):m,_=h.length,v=a?w=>a(bn(w[r.index])):r.index;let M=null;if(!a&&l&&(M=function vG(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[7],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==M)(M.__ngLastListenerFn__||M).__ngNextListenerFn__=s,M.__ngLastListenerFn__=s,f=!1;else{s=j1(r,e,d,s,!1);const w=t.listen(y,i,s);h.push(s,w),u&&u.push(i,v,_,_+1)}}else s=j1(r,e,d,s,!1);const g=r.outputs;let p;if(f&&null!==g&&(p=g[i])){const m=p.length;if(m)for(let y=0;y<m;y+=2){const b=e[p[y]][p[y+1]].subscribe(s),S=h.length;h.push(s,b),u&&u.push(i,r.index,S,-(S+1))}}}(s,i,i[11],o,n,e,0,r),yn}function z1(n,e,t,r){try{return!1!==t(r)}catch(i){return D1(n,i),!1}}function j1(n,e,t,r,i){return function s(o){if(o===Function)return r;ev(2&n.flags?Wr(n.index,e):e);let l=z1(e,0,r,o),c=s.__ngNextListenerFn__;for(;c;)l=z1(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function cv(n=1){return function m3(n){return(je.lFrame.contextLView=function y3(n,e){for(;n>0;)e=e[15],n--;return e}(n,je.lFrame.contextLView))[8]}(n)}function MG(n,e){let t=null;const r=function WB(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?GS(n,s,!0):XB(r,s))return i}else t=i}return t}function ad(n){const e=te()[16][6];if(!e.projection){const r=e.projection=Gu(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?MG(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function ld(n,e=0,t){const r=te(),i=yt(),s=Ul(i,22+n,16,null,t||null);null===s.projection&&(s.projection=e),Py(),64!=(64&s.flags)&&function BB(n,e,t){FS(e[11],0,e,t,SS(n,t,e),AS(t.parent||e[6],t,e))}(i,r,s)}function cd(n,e,t){return uv(n,"",e,"",t),cd}function uv(n,e,t,r,i){const s=te(),o=jl(s,e,t,r);return o!==Je&&Yr(yt(),un(),s,n,o,s[11],i,!1),uv}function Q1(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?Li(s):Os(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];bG(n[a],e)&&(l=!0,n[a+1]=r?B_(u):L_(u)),a=r?Li(u):Os(u)}l&&(n[t+1]=r?L_(s):B_(s))}function bG(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Pl(n,e)>=0}function Ql(n,e){return function ki(n,e,t,r){const i=te(),s=yt(),o=function As(n){const e=je.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);s.firstUpdatePass&&function lE(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[gr()],o=function aE(n,e){return e>=n.expandoStartIndex}(n,t);(function hE(n,e){return 0!=(n.flags&(e?16:32))})(s,r)&&null===e&&!o&&(e=!1),e=function IG(n,e,t,r){const i=function Ry(n){const e=je.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=ud(t=dv(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=dv(i,n,e,t,r),null===s){let l=function RG(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Os(r))return n[Li(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=dv(null,n,e,l[1],r),l=ud(l,e.attrs,r),function OG(n,e,t,r){n[Li(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function FG(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=ud(r,n[s].hostAttrs,t);return ud(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function xG(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Li(o),l=Os(o);n[r]=t;let u,c=!1;if(Array.isArray(t)){const d=t;u=d[1],(null===u||Pl(d,u)>0)&&(c=!0)}else u=t;if(i)if(0!==l){const h=Li(n[a+1]);n[r+1]=Bf(h,a),0!==h&&(n[h+1]=k_(n[h+1],r)),n[a+1]=function mV(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=Bf(a,0),0!==a&&(n[a+1]=k_(n[a+1],r)),a=r;else n[r+1]=Bf(l,0),0===a?a=r:n[l+1]=k_(n[l+1],r),l=r;c&&(n[r+1]=L_(n[r+1])),Q1(n,u,r,!0),Q1(n,u,r,!1),function wG(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&Pl(s,e)>=0&&(t[r+1]=B_(t[r+1]))}(e,u,n,r,s),o=Bf(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==Je&&sr(i,o,e)&&function uE(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1];Jf(function n1(n){return 1==(1&n)}(c)?dE(l,e,t,i,Os(c),o):void 0)||(Jf(s)||function t1(n){return 2==(2&n)}(c)&&(s=dE(l,null,t,i,a,o)),function GB(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Nr.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Nr.Important),n.setStyle(t,r,i,s))}}(r,o,ff(gr(),t),i,s))}(s,s.data[gr()],i,i[11],n,i[o+1]=function BG(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Bt(yo(n)))),n}(e,t),r,o)}(n,e,null,!0),Ql}function dv(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=ud(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function ud(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),qr(n,o,!!t||e[++s]))}return void 0===n?null:n}function dE(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let h=t[i+1];h===Je&&(h=d?Ct:void 0);let f=d?Wy(h,r):u===r?h:void 0;if(c&&!Jf(f)&&(f=Wy(l,r)),Jf(f)&&(a=f,o))return a;const g=n[i+1];i=o?Li(g):Os(g)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=Wy(l,r))}return a}function Jf(n){return void 0!==n}function k(n,e=""){const t=te(),r=yt(),i=n+22,s=r.firstCreatePass?Ul(r,i,1,e,null):r.data[i],o=t[i]=function b_(n,e){return n.createText(e)}(t[11],e);Ff(r,t,o,s),Ki(s,!1)}function Ls(n){return pi("",n,""),Ls}function pi(n,e,t){const r=te(),i=jl(r,n,e,t);return i!==Je&&function Fs(n,e,t){const r=ff(e,n);!function wS(n,e,t){n.setValue(e,t)}(n[11],r,t)}(r,gr(),i),pi}const tc="en-US";let OE=tc;function pv(n,e,t,r,i){if(n=Ve(n),Array.isArray(n))for(let s=0;s<n.length;s++)pv(n[s],e,t,r,i);else{const s=yt(),o=te();let a=fa(n)?n:Ve(n.provide),l=rS(n);const c=Fn(),u=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(fa(n)||!n.multi){const f=new Ru(l,i,re),g=mv(a,e,i?u:u+h,d);-1===g?(wf(Fu(c,o),s,a),gv(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(f),o.push(f)):(t[g]=f,o[g]=f)}else{const f=mv(a,e,u+h,d),g=mv(a,e,u,u+h),p=f>=0&&t[f],m=g>=0&&t[g];if(i&&!m||!i&&!p){wf(Fu(c,o),s,a);const y=function nH(n,e,t,r,i){const s=new Ru(n,t,re);return s.multi=[],s.index=e,s.componentProviders=0,sD(s,i,r&&!t),s}(i?tH:eH,t.length,i,r,l);!i&&m&&(t[g].providerFactory=y),gv(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(y),o.push(y)}else gv(s,n,f>-1?f:g,sD(t[i?g:f],l,!i&&r));!i&&r&&m&&t[g].componentProviders++}}}function gv(n,e,t,r){const i=fa(e),s=function Fk(n){return!!n.useClass}(e);if(i||s){const l=(s?Ve(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[r,l]):c[u+1].push(r,l)}else c.push(t,l)}}}function sD(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function mv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function eH(n,e,t,r){return yv(this.multi,[])}function tH(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Lu(t,t[1],this.providerFactory.index,r);s=a.slice(0,o),yv(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],yv(i,s);return s}function yv(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Ft(n,e=[]){return t=>{t.providersResolver=(r,i)=>function QU(n,e,t){const r=yt();if(r.firstCreatePass){const i=Oi(n);pv(t,r.data,r.blueprint,i,!0),pv(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class _a{}class oD{}class aD extends _a{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new rv(this);const r=zr(e);this._bootstrapComponents=Rs(r.bootstrap),this._r3Injector=qS(e,t,[{provide:_a,useValue:this},{provide:Ju,useValue:this.componentFactoryResolver}],Bt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class _v extends oD{constructor(e){super(),this.moduleType=e}create(e){return new aD(this.moduleType,e)}}class iH extends _a{constructor(e,t,r){super(),this.componentFactoryResolver=new rv(this),this.instance=null;const i=new nS([...e,{provide:_a,useValue:this},{provide:Ju,useValue:this.componentFactoryResolver}],t||Rf(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function np(n,e,t=null){return new iH(n,e,t).injector}let sH=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=KC(0,t.type),i=r.length>0?np([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=Oe({token:n,providedIn:"environment",factory:()=>new n(xe(_o))}),n})();function nc(n){n.getStandaloneInjector=e=>e.get(sH).getOrCreateStandaloneInjector(n)}function Mv(n){return e=>{setTimeout(n,void 0,e)}}const Qe=class PH extends Vr{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=Mv(s),i&&(i=Mv(i)),o&&(o=Mv(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Br&&e.add(a),a}};function IH(){return this._results[ga()]()}class xv{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=ga(),r=xv.prototype;r[t]||(r[t]=IH)}get changes(){return this._changes||(this._changes=new Qe)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=$r(e);(this._changesDetected=!function L3(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ks=(()=>{class n{}return n.__NG_ELEMENT_ID__=FH,n})();const RH=ks,OH=class extends RH{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tViews,i=Uf(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(i[19]=o.createEmbeddedView(r)),q_(r,i,e),new nd(i)}};function FH(){return rp(Fn(),te())}function rp(n,e){return 4&n.type?new OH(e,n,Ll(n,e)):null}let Vi=(()=>{class n{}return n.__NG_ELEMENT_ID__=LH,n})();function LH(){return xD(Fn(),te())}const kH=Vi,vD=class extends kH{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ll(this._hostTNode,this._hostLView)}get injector(){return new El(this._hostTNode,this._hostLView)}get parentInjector(){const e=xf(this._hostTNode,this._hostLView);if(fC(e)){const t=Sl(e,this._hostLView),r=Cl(e);return new El(t[1].data[r+8],t)}return new El(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=MD(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,i),o}createComponent(e,t,r,i,s){const o=e&&!function Vu(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const d=t||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const l=o?e:new rd(Nt(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?c:this.parentInjector).get(_o,null);h&&(s=h)}const u=l.create(c,i,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const r=e._lView,i=r[1];if(function r3(n){return Ri(n[3])}(r)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const d=r[3],h=new vD(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function IB(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],CC(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function RB(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(i,r,o,s);const a=T_(s,o),l=r[11],c=Of(l,o[7]);return null!==c&&function AB(n,e,t,r,i,s){r[0]=i,r[6]=e,td(n,r,t,1,i,s)}(i,o[6],l,r,c,a),e.attachToViewContainerRef(),CC(wv(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=MD(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=S_(this._lContainer,t);r&&(Cf(wv(this._lContainer),t),CS(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=S_(this._lContainer,t);return r&&null!=Cf(wv(this._lContainer),t)?new nd(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function MD(n){return n[8]}function wv(n){return n[8]||(n[8]=[])}function xD(n,e){let t;const r=e[n.index];if(Ri(r))t=r;else{let i;if(8&n.type)i=bn(r);else{const s=e[11];i=s.createComment("");const o=di(n,e);pa(s,Of(s,o),i,function kB(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=b1(r,e,i,n),zf(e,t)}return new vD(t,n,e)}class bv{constructor(e){this.queryList=e,this.matches=null}clone(){return new bv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Cv{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new Cv(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==ED(e,t).matches&&this.queries[t].setDirty()}}class wD{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class Sv{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new Sv(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Ev{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Ev(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,GH(t,s)),this.matchTNodeWithReadOption(e,t,bf(t,e,s,!1,!1))}else r===ks?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,bf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===mr||i===Vi||i===ks&&4&t.type)this.addMatch(t.index,-2);else{const s=bf(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function GH(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function HH(n,e,t,r){return-1===t?function UH(n,e){return 11&n.type?Ll(n,e):4&n.type?rp(n,e):null}(e,n):-2===t?function zH(n,e,t){return t===mr?Ll(e,n):t===ks?rp(e,n):t===Vi?xD(e,n):void 0}(n,e,r):Lu(n,n[1],t,e)}function bD(n,e,t,r){const i=e[19].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:HH(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function Dv(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=bD(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=10;d<u.length;d++){const h=u[d];h[17]===h[3]&&Dv(h[1],h,c,r)}if(null!==u[9]){const d=u[9];for(let h=0;h<d.length;h++){const f=d[h];Dv(f[1],f,c,r)}}}}}return r}function _d(n){const e=te(),t=yt(),r=tC();Oy(r+1);const i=ED(t,r);if(n.dirty&&function n3(n){return 4==(4&n[2])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?Dv(t,e,r,[]):bD(t,e,i,r);n.reset(s,qk),n.notifyOnChanges()}return!0}return!1}function Tv(n,e,t){const r=yt();r.firstCreatePass&&(function SD(n,e,t){null===n.queries&&(n.queries=new Sv),n.queries.track(new Ev(e,t))}(r,new wD(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),function CD(n,e,t){const r=new xv(4==(4&t));p1(n,e,r,r.destroy),null===e[19]&&(e[19]=new Cv),e[19].queries.push(new bv(r))}(r,te(),e)}function vd(){return function jH(n,e){return n[19].queries[e].queryList}(te(),tC())}function ED(n,e){return n.queries.getByIndex(e)}function DD(n,e){return rp(n,e)}function sp(...n){}const op=new Pe("Application Initializer");let ap=(()=>{class n{constructor(t){this.appInits=t,this.resolve=sp,this.reject=sp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(od(s))t.push(s);else if(lv(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(xe(op,8))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xd=new Pe("AppId",{providedIn:"root",factory:function $D(){return`${Ov()}${Ov()}${Ov()}`}});function Ov(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const qD=new Pe("Platform Initializer"),Fv=new Pe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),XD=new Pe("appBootstrapListener");let dz=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Bs=new Pe("LocaleId",{providedIn:"root",factory:()=>_t(Bs,Fe.Optional|Fe.SkipSelf)||function hz(){return typeof $localize<"u"&&$localize.locale||tc}()});class pz{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Lv=(()=>{class n{compileModuleSync(t){return new _v(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Rs(zr(t).declarations).reduce((o,a)=>{const l=Nt(a);return l&&o.push(new rd(l)),o},[]);return new pz(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const yz=(()=>Promise.resolve(0))();function kv(n){typeof Zone>"u"?yz.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class rn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qe(!1),this.onMicrotaskEmpty=new Qe(!1),this.onStable=new Qe(!1),this.onError=new Qe(!1),typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();const i=this;if(i._nesting=0,i._outer=i._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;i._inner=i._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function _z(){let n=Vt.requestAnimationFrame,e=Vt.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function xz(n){const e=()=>{!function Mz(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Vt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Vv(n),n.isCheckStableRunning=!0,Bv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Vv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return JD(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),KD(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return JD(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),KD(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Vv(n),Bv(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rn.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(rn.isInAngularZone())throw new oe(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,vz,sp,sp);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const vz={};function Bv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Vv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function JD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function KD(n){n._nesting--,Bv(n)}class wz{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qe,this.onMicrotaskEmpty=new Qe,this.onStable=new Qe,this.onError=new Qe}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const QD=new Pe(""),lp=new Pe("");let Hv,Gv=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Hv||(function bz(n){Hv=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rn.assertNotInAngularZone(),kv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())kv(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(xe(rn),xe(Uv),xe(lp))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})(),Uv=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Hv?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),xo=null;const eT=new Pe("AllowMultipleToken"),zv=new Pe("PlatformDestroyListeners");class tT{constructor(e,t){this.name=e,this.token=t}}function rT(n,e,t=[]){const r=`Platform: ${e}`,i=new Pe(r);return(s=[])=>{let o=jv();if(!o||o.injector.get(eT,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function Ez(n){if(xo&&!xo.get(eT,!1))throw new oe(400,!1);xo=n;const e=n.get(sT);(function nT(n){const e=n.get(qD,null);e&&e.forEach(t=>t())})(n)}(function iT(n=[],e){return Xr.create({name:e,providers:[{provide:o_,useValue:"platform"},{provide:zv,useValue:new Set([()=>xo=null])},...n]})}(a,r))}return function Tz(n){const e=jv();if(!e)throw new oe(401,!1);return e}()}}function jv(){return xo?.get(sT)??null}let sT=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function aT(n,e){let t;return t="noop"===n?new wz:("zone.js"===n?void 0:n)||new rn(e),t}(r?.ngZone,function oT(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:rn,useValue:i}];return i.run(()=>{const o=Xr.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),l=a.injector.get(kl,null);if(!l)throw new oe(402,!1);return i.runOutsideAngular(()=>{const c=i.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{up(this._modules,a),c.unsubscribe()})}),function lT(n,e,t){try{const r=t();return od(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(l,i,()=>{const c=a.injector.get(ap);return c.runInitializers(),c.donePromise.then(()=>(function FE(n){Ur(n,"Expected localeId to be defined"),"string"==typeof n&&(OE=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Bs,tc)||tc),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const i=cT({},r);return function Cz(n,e,t){const r=new _v(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(cp);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new oe(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new oe(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(zv,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(xe(Xr))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function cT(n,e){return Array.isArray(e)?e.reduce(cT,n):{...n,...e}}let cp=(()=>{class n{constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Yt(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new Yt(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{rn.assertNotInAngularZone(),kv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{rn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=function EL(...n){const e=Su(n),t=function ML(n,e){return"number"==typeof dy(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?dr(r[0]):ml(t)(mn(r,e)):Ss}(s,o.pipe(Eu()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof iS;if(!this._injector.get(ap).done)throw!i&&function _l(n){const e=Nt(n)||hr(n)||fr(n);return null!==e&&e.standalone}(t),new oe(405,false);let o;o=i?t:this._injector.get(Ju).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Sz(n){return n.isBoundToModule}(o)?void 0:this._injector.get(_a),c=o.create(Xr.NULL,[],r||o.selector,a),u=c.location.nativeElement,d=c.injector.get(QD,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),up(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new oe(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;up(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(XD,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>up(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new oe(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(xe(rn),xe(_o),xe(kl))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function up(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let dT=!0,dp=(()=>{class n{}return n.__NG_ELEMENT_ID__=Pz,n})();function Pz(n){return function Iz(n,e,t){if(df(n)&&!t){const r=Wr(n.index,e);return new nd(r,r)}return 47&n.type?new nd(e[16],e):null}(Fn(),te(),16==(16&n))}class mT{constructor(){}supports(e){return id(e)}create(e){return new Bz(e)}}const kz=(n,e)=>e;class Bz{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||kz}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<_T(r,i,s)?t:r,a=_T(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,u=l-i;if(c!=u){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,g=f+h;u<=g&&g<c&&(s[h]=f+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!id(e))throw new oe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function dG(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[ga()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Vz(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new yT),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new yT),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Vz{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Gz{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class yT{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new Gz,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _T(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function MT(){return new pp([new mT])}let pp=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||MT()),deps:[[n,new Wu,new ju]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new oe(901,!1)}}return n.\u0275prov=Oe({token:n,providedIn:"root",factory:MT}),n})();const Wz=rT(null,"core",[]);let $z=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(xe(cp))},n.\u0275mod=ai({type:n}),n.\u0275inj=Hr({}),n})();function Gs(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let gp=null;function os(){return gp}const jn=new Pe("DocumentToken");let Yv=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:function(){return function Zz(){return xe(wT)}()},providedIn:"platform"}),n})();const Jz=new Pe("Location Initialized");let wT=(()=>{class n extends Yv{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return os().getBaseHref(this._doc)}onPopState(t){const r=os().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=os().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){bT()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){bT()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(xe(jn))},n.\u0275prov=Oe({token:n,factory:function(){return function Kz(){return new wT(xe(jn))}()},providedIn:"platform"}),n})();function bT(){return!!window.history.pushState}function Zv(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function CT(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Us(n){return n&&"?"!==n[0]?"?"+n:n}let Ma=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:function(){return _t(ET)},providedIn:"root"}),n})();const ST=new Pe("appBaseHref");let ET=(()=>{class n extends Ma{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??_t(jn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Zv(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Us(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+Us(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+Us(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(xe(Yv),xe(ST,8))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Qz=(()=>{class n extends Ma{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Zv(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Us(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Us(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(xe(Yv),xe(ST,8))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})(),Jv=(()=>{class n{constructor(t){this._subject=new Qe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=CT(DT(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Us(r))}normalize(t){return n.stripTrailingSlash(function t4(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,DT(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Us(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Us(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Us,n.joinWithSlash=Zv,n.stripTrailingSlash=CT,n.\u0275fac=function(t){return new(t||n)(xe(Ma))},n.\u0275prov=Oe({token:n,factory:function(){return function e4(){return new Jv(xe(Ma))}()},providedIn:"root"}),n})();function DT(n){return n.replace(/\/index.html$/,"")}function LT(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class G4{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let l0=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new G4(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),VT(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{VT(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(re(Vi),re(ks),re(pp))},n.\u0275dir=Me({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function VT(n,e){n.context.$implicit=e.item}let Sp=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new H4,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){GT("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){GT("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(re(Vi),re(ks))},n.\u0275dir=Me({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class H4{constructor(){this.$implicit=null,this.ngIf=null}}function GT(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Bt(e)}'.`)}let HT=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=r.createEmbeddedView(i,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(re(Vi))},n.\u0275dir=Me({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[ci]}),n})(),p5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ai({type:n}),n.\u0275inj=Hr({}),n})();let _5=(()=>{class n{}return n.\u0275prov=Oe({token:n,providedIn:"root",factory:()=>new v5(xe(jn),window)}),n})();class v5{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function M5(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=WT(this.window.history)||WT(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function WT(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class $T{}class g0 extends class B5 extends class Yz{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Xz(n){gp||(gp=n)}(new g0)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function V5(){return Ed=Ed||document.querySelector("base"),Ed?Ed.getAttribute("href"):null}();return null==t?null:function G5(n){Dp=Dp||document.createElement("a"),Dp.setAttribute("href",n);const e=Dp.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ed=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return LT(document.cookie,e)}}let Dp,Ed=null;const ZT=new Pe("TRANSITION_ID"),H5=[{provide:op,useFactory:function U5(n,e,t){return()=>{t.get(ap).donePromise.then(()=>{const r=os(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[ZT,jn,Xr],multi:!0}];let j5=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();const Tp=new Pe("EventManagerPlugins");let Ap=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(xe(Tp),xe(rn))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();class JT{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=os().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let KT=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})(),Dd=(()=>{class n extends KT{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(QT),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(QT))}}return n.\u0275fac=function(t){return new(t||n)(xe(jn))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();function QT(n){os().remove(n)}const m0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},y0=/%COMP%/g;function Np(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Np(n,i,t):(i=i.replace(y0,n),t.push(i))}return t}function nA(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let _0=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new v0(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Ji.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Z5(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case Ji.ShadowDom:return new J5(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Np(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(xe(Ap),xe(Dd),xe(xd))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();class v0{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(m0[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(iA(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(iA(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=m0[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=m0[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Nr.DashCase|Nr.Important)?e.style.setProperty(t,r,i&Nr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Nr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,nA(r)):this.eventManager.addEventListener(e,t,nA(r))}}function iA(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Z5 extends v0{constructor(e,t,r,i){super(e),this.component=r;const s=Np(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function q5(n){return"_ngcontent-%COMP%".replace(y0,n)}(i+"-"+r.id),this.hostAttr=function X5(n){return"_nghost-%COMP%".replace(y0,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class J5 extends v0{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Np(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let K5=(()=>{class n extends JT{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(xe(jn))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();const sA=["alt","control","meta","shift"],Q5={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ej={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let tj=(()=>{class n extends JT{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>os().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),sA.forEach(c=>{const u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=Q5[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),sA.forEach(o=>{o!==i&&(0,ej[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(xe(jn))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();const aA=[{provide:Fv,useValue:"browser"},{provide:qD,useValue:function nj(){g0.makeCurrent()},multi:!0},{provide:jn,useFactory:function ij(){return function ak(n){Zy=n}(document),document},deps:[]}],sj=rT(Wz,"browser",aA),lA=new Pe(""),cA=[{provide:lp,useClass:class z5{addToWindow(e){Vt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},Vt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Vt.getAllAngularRootElements=()=>e.getAllRootElements(),Vt.frameworkStabilizers||(Vt.frameworkStabilizers=[]),Vt.frameworkStabilizers.push(r=>{const i=Vt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?os().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:QD,useClass:Gv,deps:[rn,Uv,lp]},{provide:Gv,useClass:Gv,deps:[rn,Uv,lp]}],uA=[{provide:o_,useValue:"root"},{provide:kl,useFactory:function rj(){return new kl},deps:[]},{provide:Tp,useClass:K5,multi:!0,deps:[jn,rn,Fv]},{provide:Tp,useClass:tj,multi:!0,deps:[jn]},{provide:_0,useClass:_0,deps:[Ap,Dd,xd]},{provide:oS,useExisting:_0},{provide:KT,useExisting:Dd},{provide:Dd,useClass:Dd,deps:[jn]},{provide:Ap,useClass:Ap,deps:[Tp,rn]},{provide:$T,useClass:j5,deps:[]},[]];let oj=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:xd,useValue:t.appId},{provide:ZT,useExisting:xd},H5]}}}return n.\u0275fac=function(t){return new(t||n)(xe(lA,12))},n.\u0275mod=ai({type:n}),n.\u0275inj=Hr({providers:[...uA,...cA],imports:[p5,$z]}),n})(),dA=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(xe(jn))},n.\u0275prov=Oe({token:n,factory:function(t){let r=null;return r=t?new t:function lj(){return new dA(xe(jn))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;const{isArray:mj}=Array,{getPrototypeOf:yj,prototype:_j,keys:vj}=Object;function pA(n){if(1===n.length){const e=n[0];if(mj(e))return{args:e,keys:null};if(function Mj(n){return n&&"object"==typeof n&&yj(n)===_j}(e)){const t=vj(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:xj}=Array;function w0(n){return Ye(e=>function wj(n,e){return xj(e)?n(...e):n(e)}(n,e))}function gA(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let yA=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(re(Is),re(mr))},n.\u0275dir=Me({type:n}),n})(),xa=(()=>{class n extends yA{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=Me({type:n,features:[Le]}),n})();const as=new Pe("NgValueAccessor");let oN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ai({type:n}),n.\u0275inj=Hr({}),n})();const a8={provide:as,useExisting:jt(()=>G0),multi:!0};function fN(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let G0=(()=>{class n extends xa{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=fN(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function l8(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=Me({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&yn("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ft([a8]),Le]}),n})(),pN=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(fN(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(re(mr),re(Is),re(G0,9))},n.\u0275dir=Me({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const c8={provide:as,useExisting:jt(()=>U0),multi:!0};function gN(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let U0=(()=>{class n extends xa{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const c=this._getOptionValue(o[a].value);i.push(c)}}else{const o=r.options;for(let a=0;a<o.length;a++){const l=o[a];if(l.selected){const c=this._getOptionValue(l.value);i.push(c)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function u8(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=Me({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&yn("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ft([c8]),Le]}),n})(),mN=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(gN(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(gN(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(re(mr),re(Is),re(U0,9))},n.\u0275dir=Me({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),v8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ai({type:n}),n.\u0275inj=Hr({imports:[oN]}),n})(),M8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ai({type:n}),n.\u0275inj=Hr({imports:[v8]}),n})();function Ae(...n){return mn(n,Su(n))}function zs(n,e){return ft(e)?Hn(n,e,1):Hn(n,1)}function yi(n,e){return Kt((t,r)=>{let i=0;t.subscribe(Lt(r,s=>n.call(e,s,i++)&&r.next(s)))})}class EN{}class DN{}class js{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof js?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new js;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof js?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class w8{encodeKey(e){return TN(e)}encodeValue(e){return TN(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const C8=/%(\d[a-f0-9])/gi,S8={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function TN(n){return encodeURIComponent(n).replace(C8,(e,t)=>S8[t]??e)}function Gp(n){return`${n}`}class Eo{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new w8,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function b8(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(Gp):[Gp(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Eo({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Gp(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Gp(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class E8{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function AN(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function NN(n){return typeof Blob<"u"&&n instanceof Blob}function PN(n){return typeof FormData<"u"&&n instanceof FormData}class Id{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function D8(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new js),this.context||(this.context=new E8),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Eo,this.urlWithParams=t}serializeBody(){return null===this.body?null:AN(this.body)||NN(this.body)||PN(this.body)||function T8(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Eo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||PN(this.body)?null:NN(this.body)?this.body.type||null:AN(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Eo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new Id(t,r,s,{params:c,headers:l,context:u,reportProgress:a,responseType:i,withCredentials:o})}}var Dn=(()=>((Dn=Dn||{})[Dn.Sent=0]="Sent",Dn[Dn.UploadProgress=1]="UploadProgress",Dn[Dn.ResponseHeader=2]="ResponseHeader",Dn[Dn.DownloadProgress=3]="DownloadProgress",Dn[Dn.Response=4]="Response",Dn[Dn.User=5]="User",Dn))();class z0{constructor(e,t=200,r="OK"){this.headers=e.headers||new js,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class j0 extends z0{constructor(e={}){super(e),this.type=Dn.ResponseHeader}clone(e={}){return new j0({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Up extends z0{constructor(e={}){super(e),this.type=Dn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Up({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class IN extends z0{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function W0(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let RN=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Id)s=t;else{let l,c;l=i.headers instanceof js?i.headers:new js(i.headers),i.params&&(c=i.params instanceof Eo?i.params:new Eo({fromObject:i.params})),s=new Id(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=Ae(s).pipe(zs(l=>this.handler.handle(l)));if(t instanceof Id||"events"===i.observe)return o;const a=o.pipe(yi(l=>l instanceof Up));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Ye(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Ye(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Ye(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Ye(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Eo).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,W0(i,r))}post(t,r,i={}){return this.request("POST",t,W0(i,r))}put(t,r,i={}){return this.request("PUT",t,W0(i,r))}}return n.\u0275fac=function(t){return new(t||n)(xe(EN))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();class ON{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const FN=new Pe("HTTP_INTERCEPTORS");let A8=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();const N8=/^\)\]\}',?\n/;let LN=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Yt(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((f,g)=>i.setRequestHeader(f,g.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const f=t.detectContentTypeHeader();null!==f&&i.setRequestHeader("Content-Type",f)}if(t.responseType){const f=t.responseType.toLowerCase();i.responseType="json"!==f?f:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const f=i.statusText||"OK",g=new js(i.getAllResponseHeaders()),p=function P8(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return o=new j0({headers:g,status:i.status,statusText:f,url:p}),o},l=()=>{let{headers:f,status:g,statusText:p,url:m}=a(),y=null;204!==g&&(y=typeof i.response>"u"?i.responseText:i.response),0===g&&(g=y?200:0);let _=g>=200&&g<300;if("json"===t.responseType&&"string"==typeof y){const v=y;y=y.replace(N8,"");try{y=""!==y?JSON.parse(y):null}catch(M){y=v,_&&(_=!1,y={error:M,text:y})}}_?(r.next(new Up({body:y,headers:f,status:g,statusText:p,url:m||void 0})),r.complete()):r.error(new IN({error:y,headers:f,status:g,statusText:p,url:m||void 0}))},c=f=>{const{url:g}=a(),p=new IN({error:f,status:i.status||0,statusText:i.statusText||"Unknown Error",url:g||void 0});r.error(p)};let u=!1;const d=f=>{u||(r.next(a()),u=!0);let g={type:Dn.DownloadProgress,loaded:f.loaded};f.lengthComputable&&(g.total=f.total),"text"===t.responseType&&!!i.responseText&&(g.partialText=i.responseText),r.next(g)},h=f=>{let g={type:Dn.UploadProgress,loaded:f.loaded};f.lengthComputable&&(g.total=f.total),r.next(g)};return i.addEventListener("load",l),i.addEventListener("error",c),i.addEventListener("timeout",c),i.addEventListener("abort",c),t.reportProgress&&(i.addEventListener("progress",d),null!==s&&i.upload&&i.upload.addEventListener("progress",h)),i.send(s),r.next({type:Dn.Sent}),()=>{i.removeEventListener("error",c),i.removeEventListener("abort",c),i.removeEventListener("load",l),i.removeEventListener("timeout",c),t.reportProgress&&(i.removeEventListener("progress",d),null!==s&&i.upload&&i.upload.removeEventListener("progress",h)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(xe($T))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();const $0=new Pe("XSRF_COOKIE_NAME"),q0=new Pe("XSRF_HEADER_NAME");class kN{}let I8=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=LT(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(xe(jn),xe(Fv),xe($0))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})(),X0=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(xe(kN),xe(q0))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})(),R8=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(FN,[]);this.chain=r.reduceRight((i,s)=>new ON(i,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(xe(DN),xe(Xr))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})(),O8=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:X0,useClass:A8}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:$0,useValue:t.cookieName}:[],t.headerName?{provide:q0,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ai({type:n}),n.\u0275inj=Hr({providers:[X0,{provide:FN,useExisting:X0,multi:!0},{provide:kN,useClass:I8},{provide:$0,useValue:"XSRF-TOKEN"},{provide:q0,useValue:"X-XSRF-TOKEN"}]}),n})(),F8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ai({type:n}),n.\u0275inj=Hr({providers:[RN,{provide:EN,useClass:R8},LN,{provide:DN,useExisting:LN}],imports:[O8.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();class _i extends Vr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Hp=wu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Y0(...n){const e=Su(n),t=hy(n),{args:r,keys:i}=pA(n);if(0===r.length)return mn([],e);const s=new Yt(function L8(n,e,t=Zi){return r=>{BN(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)BN(e,()=>{const c=mn(n[l],e);let u=!1;c.subscribe(Lt(r,d=>{s[l]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>gA(i,o):Zi));return t?s.pipe(w0(t)):s}function BN(n,e,t){n?Cs(t,n,e):e()}function Z0(...n){return function k8(){return ml(1)}()(mn(n,Su(n)))}function VN(n){return new Yt(e=>{dr(n()).subscribe(e)})}function Rd(n,e){const t=ft(n)?n:()=>n,r=i=>i.error(t());return new Yt(e?i=>e.schedule(r,0,i):r)}function J0(){return Kt((n,e)=>{let t=null;n._refCount++;const r=Lt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class GN extends Yt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,yb(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Br;const t=this.getSubject();e.add(this.source.subscribe(Lt(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Br.EMPTY)}return e}refCount(){return J0()(this)}}function zi(n,e){return Kt((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Lt(r,l=>{i?.unsubscribe();let c=0;const u=s++;dr(n(l,u)).subscribe(i=Lt(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function oc(n){return n<=0?()=>Ss:Kt((e,t)=>{let r=0;e.subscribe(Lt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function zp(...n){const e=Su(n);return Kt((t,r)=>{(e?Z0(n,t,e):Z0(n,t)).subscribe(r)})}function jp(n){return Kt((e,t)=>{let r=!1;e.subscribe(Lt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function UN(n=B8){return Kt((e,t)=>{let r=!1;e.subscribe(Lt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function B8(){return new Hp}function Do(n,e){const t=arguments.length>=2;return r=>r.pipe(n?yi((i,s)=>n(i,s,r)):Zi,oc(1),t?jp(e):UN(()=>new Hp))}function en(n,e,t){const r=ft(n)||e||t?{next:n,error:e,complete:t}:n;return r?Kt((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Lt(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Zi}function Ws(n){return Kt((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Lt(t,void 0,void 0,o=>{s=dr(n(o,Ws(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function V8(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(Lt(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function HN(n,e){return Kt(V8(n,e,arguments.length>=2,!0))}function K0(n){return n<=0?()=>Ss:Kt((e,t)=>{let r=[];e.subscribe(Lt(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function zN(n,e){const t=arguments.length>=2;return r=>r.pipe(n?yi((i,s)=>n(i,s,r)):Zi,K0(1),t?jp(e):UN(()=>new Hp))}function Q0(n){return Kt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const st="primary",Od=Symbol("RouteTitle");class H8{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ac(n){return new H8(n)}function z8(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ls(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!jN(n[i],e[i]))return!1;return!0}function jN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function WN(n){return Array.prototype.concat.apply([],n)}function $N(n){return n.length>0?n[n.length-1]:null}function Jn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function To(n){return lv(n)?n:od(n)?mn(Promise.resolve(n)):Ae(n)}const $8={exact:function YN(n,e,t){if(!Ca(n.segments,e.segments)||!Wp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!YN(n.children[r],e.children[r],t))return!1;return!0},subset:ZN},qN={exact:function q8(n,e){return ls(n,e)},subset:function X8(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>jN(n[t],e[t]))},ignored:()=>!0};function XN(n,e,t){return $8[t.paths](n.root,e.root,t.matrixParams)&&qN[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function ZN(n,e,t){return JN(n,e,e.segments,t)}function JN(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ca(i,t)||e.hasChildren()||!Wp(i,t,r))}if(n.segments.length===t.length){if(!Ca(n.segments,t)||!Wp(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!ZN(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Ca(n.segments,i)&&Wp(n.segments,i,r)&&n.children[st])&&JN(n.children[st],e,s,r)}}function Wp(n,e,t){return e.every((r,i)=>qN[t](n[i].parameters,r.parameters))}class ba{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ac(this.queryParams)),this._queryParamMap}toString(){return J8.serialize(this)}}class lt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Jn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $p(this)}}class Fd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ac(this.parameters)),this._parameterMap}toString(){return tP(this)}}function Ca(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let KN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:function(){return new tM},providedIn:"root"}),n})();class tM{parse(e){const t=new o6(e);return new ba(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ld(e.root,!0)}`,r=function e6(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${qp(t)}=${qp(i)}`).join("&"):`${qp(t)}=${qp(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function K8(n){return encodeURI(n)}(e.fragment)}`:""}`}}const J8=new tM;function $p(n){return n.segments.map(e=>tP(e)).join("/")}function Ld(n,e){if(!n.hasChildren())return $p(n);if(e){const t=n.children[st]?Ld(n.children[st],!1):"",r=[];return Jn(n.children,(i,s)=>{s!==st&&r.push(`${s}:${Ld(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Z8(n,e){let t=[];return Jn(n.children,(r,i)=>{i===st&&(t=t.concat(e(r,i)))}),Jn(n.children,(r,i)=>{i!==st&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===st?[Ld(n.children[st],!1)]:[`${i}:${Ld(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[st]?`${$p(n)}/${t[0]}`:`${$p(n)}/(${t.join("//")})`}}function QN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qp(n){return QN(n).replace(/%3B/gi,";")}function nM(n){return QN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xp(n){return decodeURIComponent(n)}function eP(n){return Xp(n.replace(/\+/g,"%20"))}function tP(n){return`${nM(n.path)}${function Q8(n){return Object.keys(n).map(e=>`;${nM(e)}=${nM(n[e])}`).join("")}(n.parameters)}`}const t6=/^[^\/()?;=#]+/;function Yp(n){const e=n.match(t6);return e?e[0]:""}const n6=/^[^=?&#]+/,i6=/^[^&#]+/;class o6{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new lt([],{}):new lt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[st]=new lt(e,t)),r}parseSegment(){const e=Yp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new oe(4009,!1);return this.capture(e),new Fd(Xp(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Yp(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Yp(this.remaining);i&&(r=i,this.capture(r))}e[Xp(t)]=Xp(r)}parseQueryParam(e){const t=function r6(n){const e=n.match(n6);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function s6(n){const e=n.match(i6);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=eP(t),s=eP(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Yp(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new oe(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=st);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[st]:new lt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new oe(4011,!1)}}function rM(n){return n.segments.length>0?new lt([],{[st]:n}):n}function Zp(n){const e={};for(const r of Object.keys(n.children)){const s=Zp(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function a6(n){if(1===n.numberOfChildren&&n.children[st]){const e=n.children[st];return new lt(n.segments.concat(e.segments),e.children)}return n}(new lt(n.segments,e))}function Sa(n){return n instanceof ba}function u6(n,e,t,r,i){if(0===t.length)return lc(e.root,e.root,e.root,r,i);const s=function iP(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new rP(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Jn(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new rP(t,e,r)}(t);return s.toRoot()?lc(e.root,e.root,new lt([],{}),r,i):function o(l){const c=function h6(n,e,t,r){if(n.isAbsolute)return new cc(e.root,!0,0);if(-1===r)return new cc(t,t===e.root,0);return function sP(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new oe(4005,!1);i=r.segments.length}return new cc(r,!1,i-s)}(t,r+(kd(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,l),u=c.processChildren?Vd(c.segmentGroup,c.index,s.commands):sM(c.segmentGroup,c.index,s.commands);return lc(e.root,c.segmentGroup,u,r,i)}(n.snapshot?._lastPathIndex)}function kd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Bd(n){return"object"==typeof n&&null!=n&&n.outlets}function lc(n,e,t,r,i){let o,s={};r&&Jn(r,(l,c)=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=n===e?t:nP(n,e,t);const a=rM(Zp(o));return new ba(a,s,i)}function nP(n,e,t){const r={};return Jn(n.children,(i,s)=>{r[s]=i===e?t:nP(i,e,t)}),new lt(n.segments,r)}class rP{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&kd(r[0]))throw new oe(4003,!1);const i=r.find(Bd);if(i&&i!==$N(r))throw new oe(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class cc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function sM(n,e,t){if(n||(n=new lt([],{})),0===n.segments.length&&n.hasChildren())return Vd(n,e,t);const r=function p6(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(Bd(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!aP(l,c,o))return s;r+=2}else{if(!aP(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new lt(n.segments.slice(0,r.pathIndex),{});return s.children[st]=new lt(n.segments.slice(r.pathIndex),n.children),Vd(s,0,i)}return r.match&&0===i.length?new lt(n.segments,{}):r.match&&!n.hasChildren()?oM(n,e,t):r.match?Vd(n,0,i):oM(n,e,t)}function Vd(n,e,t){if(0===t.length)return new lt(n.segments,{});{const r=function f6(n){return Bd(n[0])?n[0].outlets:{[st]:n}}(t),i={};return Jn(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=sM(n.children[o],e,s))}),Jn(n.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new lt(n.segments,i)}}function oM(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Bd(s)){const l=g6(s.outlets);return new lt(r,l)}if(0===i&&kd(t[0])){r.push(new Fd(n.segments[e].path,oP(t[0]))),i++;continue}const o=Bd(s)?s.outlets[st]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&kd(a)?(r.push(new Fd(o,oP(a))),i+=2):(r.push(new Fd(o,{})),i++)}return new lt(r,{})}function g6(n){const e={};return Jn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=oM(new lt([],{}),0,t))}),e}function oP(n){const e={};return Jn(n,(t,r)=>e[r]=`${t}`),e}function aP(n,e,t){return n==t.path&&ls(e,t.parameters)}class $s{constructor(e,t){this.id=e,this.url=t}}class aM extends $s{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ea extends $s{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Jp extends $s{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class lP extends $s{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class m6 extends $s{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class y6 extends $s{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _6 extends $s{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class v6 extends $s{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class M6 extends $s{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class x6{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class w6{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class b6{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class C6{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class S6{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class E6{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cP{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class uP{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=lM(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=lM(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=cM(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return cM(e,this._root).map(t=>t.value)}}function lM(n,e){if(n===e.value)return e;for(const t of e.children){const r=lM(n,t);if(r)return r}return null}function cM(n,e){if(n===e.value)return[e];for(const t of e.children){const r=cM(n,t);if(r.length)return r.unshift(e),r}return[]}class qs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function uc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class dP extends uP{constructor(e,t){super(e),this.snapshot=t,uM(this,e)}toString(){return this.snapshot.toString()}}function hP(n,e){const t=function T6(n,e){const o=new Kp([],{},{},"",{},st,e,null,n.root,-1,{});return new pP("",new qs(o,[]))}(n,e),r=new _i([new Fd("",{})]),i=new _i({}),s=new _i({}),o=new _i({}),a=new _i(""),l=new Da(r,i,o,a,s,st,e,t.root);return l.snapshot=t.root,new dP(new qs(l,[]),t)}class Da{constructor(e,t,r,i,s,o,a,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(Ye(c=>c[Od]))??Ae(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ye(e=>ac(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ye(e=>ac(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function fP(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function A6(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Kp{constructor(e,t,r,i,s,o,a,l,c,u,d,h){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.[Od],this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._correctedLastPathIndex=h??u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ac(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ac(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class pP extends uP{constructor(e,t){super(t),this.url=e,uM(this,t)}toString(){return gP(this._root)}}function uM(n,e){e.value._routerState=n,e.children.forEach(t=>uM(n,t))}function gP(n){const e=n.children.length>0?` { ${n.children.map(gP).join(", ")} } `:"";return`${n.value}${e}`}function dM(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ls(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ls(e.params,t.params)||n.params.next(t.params),function j8(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ls(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ls(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function hM(n,e){const t=ls(n.params,e.params)&&function Y8(n,e){return Ca(n,e)&&n.every((t,r)=>ls(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||hM(n.parent,e.parent))}function Gd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function P6(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Gd(n,r,i);return Gd(n,r)})}(n,e,t);return new qs(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Gd(n,a)),o}}const r=function I6(n){return new Da(new _i(n.url),new _i(n.params),new _i(n.queryParams),new _i(n.fragment),new _i(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Gd(n,s));return new qs(r,i)}}const fM="ngNavigationCancelingError";function mP(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Sa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=yP(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function yP(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[fM]=!0,r.cancellationCode=e,t&&(r.url=t),r}function _P(n){return vP(n)&&Sa(n.url)}function vP(n){return n&&n[fM]}class R6{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ud,this.attachRef=null}}let Ud=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new R6,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Qp=!1;let MP=(()=>{class n{constructor(t,r,i,s,o){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new Qe,this.deactivateEvents=new Qe,this.attachEvents=new Qe,this.detachEvents=new Qe,this.name=i||st,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new oe(4012,Qp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new oe(4012,Qp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new oe(4012,Qp);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new oe(4013,Qp);this._activatedRoute=t;const i=this.location,o=t._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new O6(t,a,i.injector);if(r&&function F6(n){return!!n.resolveComponentFactory}(r)){const c=r.resolveComponentFactory(o);this.activated=i.createComponent(c,i.length,l)}else this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(re(Ud),re(Vi),function ku(n){return function N3(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(uC(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Fn(),n)}("name"),re(dp),re(_o))},n.\u0275dir=Me({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class O6{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Da?this.route:e===Ud?this.childContexts:this.parent.get(e,t)}}let pM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Zn({type:n,selectors:[["ng-component"]],standalone:!0,features:[nc],decls:1,vars:0,template:function(t,r){1&t&&Ie(0,"router-outlet")},dependencies:[MP],encapsulation:2}),n})();function xP(n,e){return n.providers&&!n._injector&&(n._injector=np(n.providers,e,`Route: ${n.path}`)),n._injector??e}function mM(n){const e=n.children&&n.children.map(mM),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==st&&(t.component=pM),t}function vi(n){return n.outlet||st}function wP(n,e){const t=n.filter(r=>vi(r)===e);return t.push(...n.filter(r=>vi(r)!==e)),t}function Hd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class G6{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),dM(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=uc(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Jn(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=uc(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=uc(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=uc(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new E6(s.value.snapshot))}),e.children.length&&this.forwardEvent(new C6(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(dM(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),dM(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Hd(i.snapshot),l=a?.get(Ju)??null;o.attachRef=null,o.route=i,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class bP{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class eg{constructor(e,t){this.component=e,this.route=t}}function U6(n,e,t){const r=n._root;return zd(r,e?e._root:null,t,[r.value])}function dc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function RL(n){return null!==rf(n)}(n)?e.get(n):n:r}function zd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=uc(e);return n.children.forEach(o=>{(function z6(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function j6(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ca(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ca(n.url,e.url)||!ls(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hM(n,e)||!ls(n.queryParams,e.queryParams);default:return!hM(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new bP(r)):(s.data=o.data,s._resolvedData=o._resolvedData),zd(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new eg(a.outlet.component,o))}else o&&jd(e,a,i),i.canActivateChecks.push(new bP(r)),zd(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Jn(s,(o,a)=>jd(o,t.getContext(a),i)),i}function jd(n,e,t){const r=uc(n),i=n.value;Jn(r,(s,o)=>{jd(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new eg(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Wd(n){return"function"==typeof n}function yM(n){return n instanceof Hp||"EmptyError"===n?.name}const tg=Symbol("INITIAL_VALUE");function hc(){return zi(n=>Y0(n.map(e=>e.pipe(oc(1),zp(tg)))).pipe(Ye(e=>{for(const t of e)if(!0!==t){if(t===tg)return tg;if(!1===t||t instanceof ba)return t}return!0}),yi(e=>e!==tg),oc(1)))}function CP(n){return ly(en(e=>{if(Sa(e))throw mP(0,e)}),Ye(e=>!0===e))}const _M={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function SP(n,e,t,r,i){const s=vM(n,e,t);return s.matched?function aW(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Ae(i.map(o=>{const a=dc(o,n);return To(function Z6(n){return n&&Wd(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(hc(),CP()):Ae(!0)}(r=xP(e,r),e,t).pipe(Ye(o=>!0===o?s:{..._M})):Ae(s)}function vM(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{..._M}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||z8)(t,n,e);if(!i)return{..._M};const s={};Jn(i.posParams,(a,l)=>{s[l]=a.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function ng(n,e,t,r,i="corrected"){if(t.length>0&&function uW(n,e,t){return t.some(r=>rg(n,e,r)&&vi(r)!==st)}(n,t,r)){const o=new lt(e,function cW(n,e,t,r){const i={};i[st]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&vi(s)!==st){const o=new lt([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,i[vi(s)]=o}return i}(n,e,r,new lt(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function dW(n,e,t){return t.some(r=>rg(n,e,r))}(n,t,r)){const o=new lt(n.segments,function lW(n,e,t,r,i,s){const o={};for(const a of r)if(rg(n,t,a)&&!i[vi(a)]){const l=new lt([],{});l._sourceSegment=n,l._segmentIndexShift="legacy"===s?n.segments.length:e.length,o[vi(a)]=l}return{...i,...o}}(n,e,t,r,n.children,i));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new lt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function rg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function EP(n,e,t,r){return!!(vi(n)===r||r!==st&&rg(e,t,n))&&("**"===n.path||vM(e,n,t).matched)}function DP(n,e,t){return 0===e.length&&!n.children[t]}const ig=!1;class sg{constructor(e){this.segmentGroup=e||null}}class TP{constructor(e){this.urlTree=e}}function $d(n){return Rd(new sg(n))}function AP(n){return Rd(new TP(n))}class gW{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=ng(this.urlTree.root,[],[],this.config).segmentGroup,t=new lt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,st).pipe(Ye(s=>this.createUrlTree(Zp(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ws(s=>{if(s instanceof TP)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof sg?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,st).pipe(Ye(i=>this.createUrlTree(Zp(i),e.queryParams,e.fragment))).pipe(Ws(i=>{throw i instanceof sg?this.noMatchError(i):i}))}noMatchError(e){return new oe(4002,ig)}createUrlTree(e,t,r){const i=rM(e);return new ba(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(Ye(s=>new lt([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return mn(i).pipe(zs(s=>{const o=r.children[s],a=wP(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(Ye(l=>({segment:l,outlet:s})))}),HN((s,o)=>(s[o.outlet]=o.segment,s),{}),zN())}expandSegment(e,t,r,i,s,o){return mn(r).pipe(zs(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,s,o).pipe(Ws(c=>{if(c instanceof sg)return Ae(null);throw c}))),Do(a=>!!a),Ws((a,l)=>{if(yM(a))return DP(t,i,s)?Ae(new lt([],{})):$d(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,s,o,a){return EP(i,t,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o):$d(t):$d(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?AP(s):this.lineralizeSegments(r,s).pipe(Hn(o=>{const a=new lt(o,{});return this.expandSegment(e,a,t,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=vM(t,i,s);if(!a)return $d(t);const d=this.applyRedirectCommands(l,i.redirectTo,u);return i.redirectTo.startsWith("/")?AP(d):this.lineralizeSegments(i,d).pipe(Hn(h=>this.expandSegment(e,t,r,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=xP(r,e),r.loadChildren?(r._loadedRoutes?Ae({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(Ye(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new lt(i,{})))):Ae(new lt(i,{}))):SP(t,r,i,e).pipe(zi(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(e=r._injector??e,r,i).pipe(Hn(u=>{const d=u.injector??e,h=u.routes,{segmentGroup:f,slicedSegments:g}=ng(t,a,l,h),p=new lt(f.segments,f.children);if(0===g.length&&p.hasChildren())return this.expandChildren(d,h,p).pipe(Ye(v=>new lt(a,v)));if(0===h.length&&0===g.length)return Ae(new lt(a,{}));const m=vi(r)===s;return this.expandSegment(d,p,h,g,m?st:s,!0).pipe(Ye(_=>new lt(a.concat(_.segments),_.children)))})):$d(t)))}getChildConfig(e,t,r){return t.children?Ae({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ae({routes:t._loadedRoutes,injector:t._loadedInjector}):function oW(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Ae(!0):Ae(i.map(o=>{const a=dc(o,n);return To(function $6(n){return n&&Wd(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(hc(),CP())}(e,t,r).pipe(Hn(i=>i?this.configLoader.loadChildren(e,t).pipe(en(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function fW(n){return Rd(yP(ig,3))}())):Ae({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ae(r);if(i.numberOfChildren>1||!i.children[st])return Rd(new oe(4e3,ig));i=i.children[st]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new ba(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Jn(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=t[a]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Jn(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,r,i)}),new lt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new oe(4001,ig);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class yW{}class MW{constructor(e,t,r,i,s,o,a,l){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a,this.urlSerializer=l}recognize(){const e=ng(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,st).pipe(Ye(t=>{if(null===t)return null;const r=new Kp([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},st,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new qs(r,t),s=new pP(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=fP(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return mn(Object.keys(r.children)).pipe(zs(i=>{const s=r.children[i],o=wP(t,i);return this.processSegmentGroup(e,o,s,i)}),HN((i,s)=>i&&s?(i.push(...s),i):null),function G8(n,e=!1){return Kt((t,r)=>{let i=0;t.subscribe(Lt(r,s=>{const o=n(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}(i=>null!==i),jp(null),zN(),Ye(i=>{if(null===i)return null;const s=NP(i);return function xW(n){n.sort((e,t)=>e.value.outlet===st?-1:t.value.outlet===st?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return mn(t).pipe(zs(o=>this.processSegmentAgainstRoute(o._injector??e,o,r,i,s)),Do(o=>!!o),Ws(o=>{if(yM(o))return DP(r,i,s)?Ae([]):Ae(null);throw o}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!EP(t,r,i,s))return Ae(null);let o;if("**"===t.path){const a=i.length>0?$N(i).parameters:{},l=IP(r)+i.length;o=Ae({snapshot:new Kp(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,OP(t),vi(t),t.component??t._loadedComponent??null,t,PP(r),l,FP(t),l),consumedSegments:[],remainingSegments:[]})}else o=SP(r,t,i,e).pipe(Ye(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const d=IP(r)+l.length;return{snapshot:new Kp(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,OP(t),vi(t),t.component??t._loadedComponent??null,t,PP(r),d,FP(t),d),consumedSegments:l,remainingSegments:c}}));return o.pipe(zi(a=>{if(null===a)return Ae(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;e=t._injector??e;const d=t._loadedInjector??e,h=function wW(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:g}=ng(r,c,u,h.filter(m=>void 0===m.redirectTo),this.relativeLinkResolution);if(0===g.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(Ye(m=>null===m?null:[new qs(l,m)]));if(0===h.length&&0===g.length)return Ae([new qs(l,[])]);const p=vi(t)===s;return this.processSegment(d,h,f,g,p?st:s).pipe(Ye(m=>null===m?null:[new qs(l,m)]))}))}}function bW(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function NP(n){const e=[],t=new Set;for(const r of n){if(!bW(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=NP(r.children);e.push(new qs(r.value,i))}return e.filter(r=>!t.has(r))}function PP(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function IP(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function OP(n){return n.data||{}}function FP(n){return n.resolve||{}}function LP(n){return"string"==typeof n.title||null===n.title}function MM(n){return zi(e=>{const t=n(e);return t?mn(t).pipe(Ye(()=>e)):Ae(e)})}let kP=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===st);return r}getResolvedTitleForRoute(t){return t.data[Od]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:function(){return _t(BP)},providedIn:"root"}),n})(),BP=(()=>{class n extends kP{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(xe(dA))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class PW{}class RW extends class IW{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ag=new Pe("",{providedIn:"root",factory:()=>({})}),xM=new Pe("ROUTES");let wM=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ae(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=To(t.loadComponent()).pipe(en(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Q0(()=>{this.componentLoaders.delete(t)})),i=new GN(r,()=>new Vr).pipe(J0());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ae({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Ye(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=WN(l.get(xM,[],Fe.Self|Fe.Optional)));return{routes:c.map(mM),injector:l}}),Q0(()=>{this.childrenLoaders.delete(r)})),o=new GN(s,()=>new Vr).pipe(J0());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(t){return To(t()).pipe(Hn(r=>r instanceof oD||Array.isArray(r)?Ae(r):mn(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(xe(Xr),xe(Lv))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class FW{}class LW{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function kW(n){throw n}function BW(n,e,t){return e.parse("/")}const VW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},GW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function GP(){const n=_t(KN),e=_t(Ud),t=_t(Jv),r=_t(Xr),i=_t(Lv),s=_t(xM,{optional:!0})??[],o=_t(ag,{optional:!0})??{},a=_t(BP),l=_t(kP,{optional:!0}),c=_t(FW,{optional:!0}),u=_t(PW,{optional:!0}),d=new Kn(null,n,e,t,r,i,WN(s));return c&&(d.urlHandlingStrategy=c),u&&(d.routeReuseStrategy=u),d.titleStrategy=l??a,function UW(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,d),d}let Kn=(()=>{class n{constructor(t,r,i,s,o,a,l){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Vr,this.errorHandler=kW,this.malformedUriErrorHandler=BW,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ae(void 0),this.urlHandlingStrategy=new LW,this.routeReuseStrategy=new RW,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(wM),this.configLoader.onLoadEndListener=h=>this.triggerEvent(new w6(h)),this.configLoader.onLoadStartListener=h=>this.triggerEvent(new x6(h)),this.ngModule=o.get(_a),this.console=o.get(dz);const d=o.get(rn);this.isNgZoneEnabled=d instanceof rn&&rn.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function W8(){return new ba(new lt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=hP(this.currentUrlTree,this.rootComponentType),this.transitions=new _i({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(yi(i=>0!==i.id),Ye(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),zi(i=>{let s=!1,o=!1;return Ae(i).pipe(en(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),zi(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return UP(a.source)&&(this.browserUrlTree=a.extractedUrl),Ae(a).pipe(zi(d=>{const h=this.transitions.getValue();return r.next(new aM(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?Ss:Promise.resolve(d)}),function mW(n,e,t,r){return zi(i=>function pW(n,e,t,r,i){return new gW(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(Ye(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),en(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},i.urlAfterRedirects=d.urlAfterRedirects}),function SW(n,e,t,r,i,s){return Hn(o=>function vW(n,e,t,r,i,s,o="emptyOnly",a="legacy"){return new MW(n,e,t,r,i,o,a,s).recognize().pipe(zi(l=>null===l?function _W(n){return new Yt(e=>e.error(n))}(new yW):Ae(l)))}(n,e,t,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i,s).pipe(Ye(a=>({...o,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),en(d=>{if(i.targetSnapshot=d.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new m6(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);r.next(h)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:g,restoredState:p,extras:m}=a,y=new aM(h,this.serializeUrl(f),g,p);r.next(y);const _=hP(f,this.rootComponentType).snapshot;return Ae(i={...a,targetSnapshot:_,urlAfterRedirects:f,extras:{...m,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),Ss}),en(a=>{const l=new y6(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),Ye(a=>i={...a,guards:U6(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function K6(n,e){return Hn(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Ae({...t,guardsResult:!0}):function Q6(n,e,t,r){return mn(n).pipe(Hn(i=>function sW(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ae(s.map(a=>{const l=Hd(e)??i,c=dc(a,l);return To(function Y6(n){return n&&Wd(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):l.runInContext(()=>c(n,e,t,r))).pipe(Do())})).pipe(hc()):Ae(!0)}(i.component,i.route,t,e,r)),Do(i=>!0!==i,!0))}(o,r,i,n).pipe(Hn(a=>a&&function W6(n){return"boolean"==typeof n}(a)?function eW(n,e,t,r){return mn(e).pipe(zs(i=>Z0(function nW(n,e){return null!==n&&e&&e(new b6(n)),Ae(!0)}(i.route.parent,r),function tW(n,e){return null!==n&&e&&e(new S6(n)),Ae(!0)}(i.route,r),function iW(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function H6(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>VN(()=>Ae(o.guards.map(l=>{const c=Hd(o.node)??t,u=dc(l,c);return To(function X6(n){return n&&Wd(n.canActivateChild)}(u)?u.canActivateChild(r,n):c.runInContext(()=>u(r,n))).pipe(Do())})).pipe(hc())));return Ae(s).pipe(hc())}(n,i.path,t),function rW(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ae(!0);const i=r.map(s=>VN(()=>{const o=Hd(e)??t,a=dc(s,o);return To(function q6(n){return n&&Wd(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Do())}));return Ae(i).pipe(hc())}(n,i.route,t))),Do(i=>!0!==i,!0))}(r,s,n,e):Ae(a)),Ye(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),en(a=>{if(i.guardsResult=a.guardsResult,Sa(a.guardsResult))throw mP(0,a.guardsResult);const l=new _6(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),yi(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),MM(a=>{if(a.guards.canActivateChecks.length)return Ae(a).pipe(en(l=>{const c=new v6(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),zi(l=>{let c=!1;return Ae(l).pipe(function EW(n,e){return Hn(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ae(t);let s=0;return mn(i).pipe(zs(o=>function DW(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!LP(i)&&(s[Od]=i.title),function TW(n,e,t,r){const i=function AW(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Ae({});const s={};return mn(i).pipe(Hn(o=>function NW(n,e,t,r){const i=Hd(e)??r,s=dc(n,i);return To(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Do(),en(a=>{s[o]=a}))),K0(1),function U8(n){return Ye(()=>n)}(s),Ws(o=>yM(o)?Ss:Rd(o)))}(s,n,e,r).pipe(Ye(o=>(n._resolvedData=o,n.data=fP(n,t).resolve,i&&LP(i)&&(n.data[Od]=i.title),null)))}(o.route,r,n,e)),en(()=>s++),K0(1),Hn(o=>s===i.length?Ae(t):Ss))})}(this.paramsInheritanceStrategy,this.ngModule.injector),en({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),en(l=>{const c=new M6(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),MM(a=>{const l=c=>{const u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe(en(d=>{c.component=d}),Ye(()=>{})));for(const d of c.children)u.push(...l(d));return u};return Y0(l(a.targetSnapshot.root)).pipe(jp(),oc(1))}),MM(()=>this.afterPreactivation()),Ye(a=>{const l=function N6(n,e,t){const r=Gd(n,e._root,t?t._root:void 0);return new dP(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return i={...a,targetRouterState:l}}),en(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((n,e,t)=>Ye(r=>(new G6(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),en({next(){s=!0},complete(){s=!0}}),Q0(()=>{s||o||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Ws(a=>{if(o=!0,vP(a)){_P(a)||(this.navigated=!0,this.restoreHistory(i,!0));const l=new Jp(i.id,this.serializeUrl(i.extractedUrl),a.message,a.cancellationCode);if(r.next(l),_P(a)){const c=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),u={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||UP(i.source)};this.scheduleNavigation(c,"imperative",null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const l=new lP(i.id,this.serializeUrl(i.extractedUrl),a,i.targetSnapshot??void 0);r.next(l);try{i.resolve(this.errorHandler(a))}catch(c){i.reject(c)}}return Ss}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const a={...s};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(i.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(mM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=i||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),u6(c,this.currentUrlTree,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Sa(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function HW(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new oe(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...VW}:!1===r?{...GW}:r,Sa(t))return XN(this.currentUrlTree,t,i);const s=this.parseUrl(t);return XN(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ea(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((h,f)=>{a=h,l=f});const u=++this.navigationId;let d;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),d=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):d=0,this.setTransition({id:u,targetPageId:d,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const s=new Jp(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){F_()},n.\u0275prov=Oe({token:n,factory:function(){return GP()},providedIn:"root"}),n})();function UP(n){return"imperative"!==n}let cg=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Vr,this.subscription=t.events.subscribe(s=>{s instanceof Ea&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=Gs(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=Gs(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=Gs(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,o){return!!(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(re(Kn),re(Da),re(Ma))},n.\u0275dir=Me({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&yn("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&ns("target",r.target)("href",r.href,ha)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[ci]}),n})();class HP{}let WW=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(yi(t=>t instanceof Ea),zs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=np(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return mn(i).pipe(ml())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ae(null);const s=i.pipe(Hn(o=>null===o?Ae(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?mn([s,this.loader.loadComponent(r)]).pipe(ml()):s})}}return n.\u0275fac=function(t){return new(t||n)(xe(Kn),xe(Lv),xe(_o),xe(HP),xe(wM))},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const CM=new Pe("");let zP=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof aM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ea&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof cP&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new cP(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){F_()},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();function fc(n,e){return{\u0275kind:n,\u0275providers:e}}function SM(n){return[{provide:xM,multi:!0,useValue:n}]}function WP(){const n=_t(Xr);return e=>{const t=n.get(cp);if(e!==t.components[0])return;const r=n.get(Kn),i=n.get($P);1===n.get(EM)&&r.initialNavigation(),n.get(qP,null,Fe.Optional)?.setUpPreloading(),n.get(CM,null,Fe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const $P=new Pe("",{factory:()=>new Vr}),EM=new Pe("",{providedIn:"root",factory:()=>1});const qP=new Pe("");function YW(n){return fc(0,[{provide:qP,useExisting:WW},{provide:HP,useExisting:n}])}const XP=new Pe("ROUTER_FORROOT_GUARD"),ZW=[Jv,{provide:KN,useClass:tM},{provide:Kn,useFactory:GP},Ud,{provide:Da,useFactory:function jP(n){return n.routerState.root},deps:[Kn]},wM];function JW(){return new tT("Router",Kn)}let YP=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[ZW,[],SM(t),{provide:XP,useFactory:t$,deps:[[Kn,new ju,new Wu]]},{provide:ag,useValue:r||{}},r?.useHash?{provide:Ma,useClass:Qz}:{provide:Ma,useClass:ET},{provide:CM,useFactory:()=>{const n=_t(Kn),e=_t(_5),t=_t(ag);return t.scrollOffset&&e.setOffset(t.scrollOffset),new zP(n,e,t)}},r?.preloadingStrategy?YW(r.preloadingStrategy).\u0275providers:[],{provide:tT,multi:!0,useFactory:JW},r?.initialNavigation?n$(r):[],[{provide:ZP,useFactory:WP},{provide:XD,multi:!0,useExisting:ZP}]]}}static forChild(t){return{ngModule:n,providers:[SM(t)]}}}return n.\u0275fac=function(t){return new(t||n)(xe(XP,8))},n.\u0275mod=ai({type:n}),n.\u0275inj=Hr({imports:[pM]}),n})();function t$(n){return"guarded"}function n$(n){return["disabled"===n.initialNavigation?fc(3,[{provide:op,multi:!0,useFactory:()=>{const e=_t(Kn);return()=>{e.setUpLocationChangeListener()}}},{provide:EM,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?fc(2,[{provide:EM,useValue:0},{provide:op,multi:!0,deps:[Xr],useFactory:e=>{const t=e.get(Jz,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(s=>{const o=e.get(Kn),a=e.get($P);(function i(s){e.get(Kn).events.pipe(yi(a=>a instanceof Ea||a instanceof Jp||a instanceof lP),Ye(a=>a instanceof Ea||a instanceof Jp&&(0===a.code||1===a.code)&&null),yi(a=>null!==a),oc(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),o.afterPreactivation=()=>(s(!0),r||a.closed?Ae(void 0):a),o.initialNavigation()}))}}]).\u0275providers:[]]}const ZP=new Pe(""),i$=[];let s$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ai({type:n}),n.\u0275inj=Hr({imports:[YP.forRoot(i$),YP]}),n})();const DM={now:()=>(DM.delegate||Date).now(),delegate:void 0};class pc extends Vr{constructor(e=1/0,t=1/0,r=DM){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}}function JP(n,e=Zi){return n=n??o$,Kt((t,r)=>{let i,s=!0;t.subscribe(Lt(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function o$(n,e){return n===e}function gc(n){return Kt((e,t)=>{dr(n).subscribe(Lt(t,()=>t.complete(),bu)),!t.closed&&e.subscribe(t)})}function TM(n){return!!n&&(n instanceof Yt||ft(n.lift)&&ft(n.subscribe))}class a$ extends Br{constructor(e,t){super()}schedule(e,t=0){return this}}const hg={setInterval(n,e,...t){const{delegate:r}=hg;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=hg;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class KP extends a${constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return hg.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&hg.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,gl(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}class qd{constructor(e,t=qd.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}qd.now=DM.now;class QP extends qd{constructor(e,t=qd.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const u$=new class c$ extends QP{}(class l$ extends KP{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});function eI(...n){const e=hy(n);return Kt((t,r)=>{const i=n.length,s=new Array(i);let o=n.map(()=>!1),a=!1;for(let l=0;l<i;l++)dr(n[l]).subscribe(Lt(r,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(Zi))&&(o=null))},bu));t.subscribe(Lt(r,l=>{if(a){const c=[l,...s];r.next(e?e(...c):c)}}))})}const tI=new QP(KP),d$=tI;function nI(n,e=tI){return Kt((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=s;s=null,r.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return i=this.schedule(void 0,c-u),void r.add(i);a()}t.subscribe(Lt(r,c=>{s=c,o=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}const h$=["addListener","removeListener"],f$=["addEventListener","removeEventListener"],p$=["on","off"];function Xd(n,e,t,r){if(ft(t)&&(r=t,t=void 0),r)return Xd(n,e,t).pipe(w0(r));const[i,s]=function y$(n){return ft(n.addEventListener)&&ft(n.removeEventListener)}(n)?f$.map(o=>a=>n[o](e,a,t)):function g$(n){return ft(n.addListener)&&ft(n.removeListener)}(n)?h$.map(rI(n,e)):function m$(n){return ft(n.on)&&ft(n.off)}(n)?p$.map(rI(n,e)):[];if(!i&&uy(n))return Hn(o=>Xd(o,e,t))(dr(n));if(!i)throw new TypeError("Invalid event target");return new Yt(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function rI(n,e){return t=>r=>n[t](e,r)}function iI(n,e,t,r,i,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(r,i)}const Ir=1001,Vn=1003,Tn=1006,Na=1009,Jd=1012,No=1015,Kd=1016,xc=1020,xi=1023,Pa=1026,wc=1027,bc=2400,Cc=2401,Xs=3e3,qt=3001,Ys="srgb",Ia="srgb-linear",Qd=35044,eh=35048;class Ra{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const i=this._listeners[e];if(void 0!==i){const s=i.indexOf(t);-1!==s&&i.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const r=this._listeners[e.type];if(void 0!==r){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Qn=[];for(let n=0;n<256;n++)Qn[n]=(n<16?"0":"")+n.toString(16);let UI=1234567;const Oa=Math.PI/180,th=180/Math.PI;function Zr(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Qn[255&n]+Qn[n>>8&255]+Qn[n>>16&255]+Qn[n>>24&255]+"-"+Qn[255&e]+Qn[e>>8&255]+"-"+Qn[e>>16&15|64]+Qn[e>>24&255]+"-"+Qn[63&t|128]+Qn[t>>8&255]+"-"+Qn[t>>16&255]+Qn[t>>24&255]+Qn[255&r]+Qn[r>>8&255]+Qn[r>>16&255]+Qn[r>>24&255]).toLowerCase()}function vn(n,e,t){return Math.max(e,Math.min(t,n))}function HM(n,e){return(n%e+e)%e}function nh(n,e,t){return(1-t)*n+t*e}function zM(n){return 0==(n&n-1)&&0!==n}function wg(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}var O9=Object.freeze({__proto__:null,DEG2RAD:Oa,RAD2DEG:th,generateUUID:Zr,clamp:vn,euclideanModulo:HM,mapLinear:function v9(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)},inverseLerp:function M9(n,e,t){return n!==e?(t-n)/(e-n):0},lerp:nh,damp:function x9(n,e,t,r){return nh(n,e,1-Math.exp(-t*r))},pingpong:function w9(n,e=1){return e-Math.abs(HM(n,2*e)-e)},smoothstep:function b9(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*(3-2*n)},smootherstep:function C9(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e))*n*n*(n*(6*n-15)+10)},randInt:function S9(n,e){return n+Math.floor(Math.random()*(e-n+1))},randFloat:function E9(n,e){return n+Math.random()*(e-n)},randFloatSpread:function D9(n){return n*(.5-Math.random())},seededRandom:function T9(n){void 0!==n&&(UI=n);let e=UI+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function A9(n){return n*Oa},radToDeg:function N9(n){return n*th},isPowerOfTwo:zM,ceilPowerOfTwo:function HI(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))},floorPowerOfTwo:wg,setQuaternionFromProperEuler:function P9(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+r)/2),u=o((e+r)/2),d=s((e-r)/2),h=o((e-r)/2),f=s((r-e)/2),g=o((r-e)/2);switch(i){case"XYX":n.set(a*u,l*d,l*h,a*c);break;case"YZY":n.set(l*h,a*u,l*d,a*c);break;case"ZXZ":n.set(l*d,l*h,a*u,a*c);break;case"XZX":n.set(a*u,l*g,l*f,a*c);break;case"YXY":n.set(l*f,a*u,l*g,a*c);break;case"ZYZ":n.set(l*g,l*f,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:function R9(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}},denormalize:function I9(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}});class Q{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Q.prototype.isVector2=!0;class Wn{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],h=r[2],f=r[5],g=r[8],p=i[0],m=i[3],y=i[6],_=i[1],v=i[4],M=i[7],w=i[2],b=i[5],S=i[8];return s[0]=o*p+a*_+l*w,s[3]=o*m+a*v+l*b,s[6]=o*y+a*M+l*S,s[1]=c*p+u*_+d*w,s[4]=c*m+u*v+d*b,s[7]=c*y+u*M+d*S,s[2]=h*p+f*_+g*w,s[5]=h*m+f*v+g*b,s[8]=h*y+f*M+g*S,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*s,f=c*s-o*l,g=t*d+r*h+i*f;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);const p=1/g;return e[0]=d*p,e[1]=(i*c-u*r)*p,e[2]=(a*r-i*o)*p,e[3]=h*p,e[4]=(u*t-i*l)*p,e[5]=(i*s-a*t)*p,e[6]=f*p,e[7]=(r*l-c*t)*p,e[8]=(o*t-r*s)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.elements,s=i[0],o=i[3],a=i[6],l=i[1],c=i[4],u=i[7];return i[0]=t*s+r*l,i[3]=t*o+r*c,i[6]=t*a+r*u,i[1]=-r*s+t*l,i[4]=-r*o+t*c,i[7]=-r*a+t*u,this}translate(e,t){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function zI(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}function rh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Fa(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function bg(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}Wn.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const jM={[Ys]:{[Ia]:Fa},[Ia]:{[Ys]:bg}},wi={legacyMode:!0,get workingColorSpace(){return Ia},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(jM[e]&&void 0!==jM[e][t]){const r=jM[e][t];return n.r=r(n.r),n.g=r(n.g),n.b=r(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},jI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Gn={r:0,g:0,b:0},ji={h:0,s:0,l:0},Cg={h:0,s:0,l:0};function WM(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}function Sg(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let Dc,pe=(()=>{class n{constructor(t,r,i){return void 0===r&&void 0===i?this.set(t):this.setRGB(t,r,i)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,r=Ys){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,wi.toWorkingColorSpace(this,r),this}setRGB(t,r,i,s=Ia){return this.r=t,this.g=r,this.b=i,wi.toWorkingColorSpace(this,s),this}setHSL(t,r,i,s=Ia){if(t=HM(t,1),r=vn(r,0,1),i=vn(i,0,1),0===r)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+r):i+r-i*r,a=2*i-o;this.r=WM(a,o,t+1/3),this.g=WM(a,o,t),this.b=WM(a,o,t-1/3)}return wi.toWorkingColorSpace(this,s),this}setStyle(t,r=Ys){function i(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let o;const l=s[2];switch(s[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(255,parseInt(o[1],10))/255,this.g=Math.min(255,parseInt(o[2],10))/255,this.b=Math.min(255,parseInt(o[3],10))/255,wi.toWorkingColorSpace(this,r),i(o[4]),this;if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return this.r=Math.min(100,parseInt(o[1],10))/100,this.g=Math.min(100,parseInt(o[2],10))/100,this.b=Math.min(100,parseInt(o[3],10))/100,wi.toWorkingColorSpace(this,r),i(o[4]),this;break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l)){const c=parseFloat(o[1])/360,u=parseInt(o[2],10)/100,d=parseInt(o[3],10)/100;return i(o[4]),this.setHSL(c,u,d,r)}}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=s[1],a=o.length;if(3===a)return this.r=parseInt(o.charAt(0)+o.charAt(0),16)/255,this.g=parseInt(o.charAt(1)+o.charAt(1),16)/255,this.b=parseInt(o.charAt(2)+o.charAt(2),16)/255,wi.toWorkingColorSpace(this,r),this;if(6===a)return this.r=parseInt(o.charAt(0)+o.charAt(1),16)/255,this.g=parseInt(o.charAt(2)+o.charAt(3),16)/255,this.b=parseInt(o.charAt(4)+o.charAt(5),16)/255,wi.toWorkingColorSpace(this,r),this}return t&&t.length>0?this.setColorName(t,r):this}setColorName(t,r=Ys){const i=jI[t.toLowerCase()];return void 0!==i?this.setHex(i,r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Fa(t.r),this.g=Fa(t.g),this.b=Fa(t.b),this}copyLinearToSRGB(t){return this.r=bg(t.r),this.g=bg(t.g),this.b=bg(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Ys){return wi.fromWorkingColorSpace(Sg(this,Gn),t),vn(255*Gn.r,0,255)<<16^vn(255*Gn.g,0,255)<<8^vn(255*Gn.b,0,255)<<0}getHexString(t=Ys){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,r=Ia){wi.fromWorkingColorSpace(Sg(this,Gn),r);const i=Gn.r,s=Gn.g,o=Gn.b,a=Math.max(i,s,o),l=Math.min(i,s,o);let c,u;const d=(l+a)/2;if(l===a)c=0,u=0;else{const h=a-l;switch(u=d<=.5?h/(a+l):h/(2-a-l),a){case i:c=(s-o)/h+(s<o?6:0);break;case s:c=(o-i)/h+2;break;case o:c=(i-s)/h+4}c/=6}return t.h=c,t.s=u,t.l=d,t}getRGB(t,r=Ia){return wi.fromWorkingColorSpace(Sg(this,Gn),r),t.r=Gn.r,t.g=Gn.g,t.b=Gn.b,t}getStyle(t=Ys){return wi.fromWorkingColorSpace(Sg(this,Gn),t),t!==Ys?`color(${t} ${Gn.r} ${Gn.g} ${Gn.b})`:`rgb(${255*Gn.r|0},${255*Gn.g|0},${255*Gn.b|0})`}offsetHSL(t,r,i){return this.getHSL(ji),ji.h+=t,ji.s+=r,ji.l+=i,this.setHSL(ji.h,ji.s,ji.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,i){return this.r=t.r+(r.r-t.r)*i,this.g=t.g+(r.g-t.g)*i,this.b=t.b+(r.b-t.b)*i,this}lerpHSL(t,r){this.getHSL(ji),t.getHSL(Cg);const i=nh(ji.h,Cg.h,r),s=nh(ji.s,Cg.s,r),o=nh(ji.l,Cg.l,r);return this.setHSL(i,s,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return n.NAMES=jI,n})();pe.prototype.isColor=!0,pe.prototype.r=1,pe.prototype.g=1,pe.prototype.b=1;class La{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Dc&&(Dc=rh("canvas")),Dc.width=e.width,Dc.height=e.height;const r=Dc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Dc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=rh("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=255*Fa(s[o]/255);return r.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t[r]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Fa(t[r]/255)):Fa(t[r]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class ka{constructor(e=null){this.uuid=Zr(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(null!==i){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)s.push($M(i[o].isDataTexture?i[o].image:i[o]))}else s=$M(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function $M(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?La.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}ka.prototype.isSource=!0;let L9=0,xr=(()=>{class n extends Ra{constructor(t=n.DEFAULT_IMAGE,r=n.DEFAULT_MAPPING,i=Ir,s=Ir,o=Tn,a=1008,l=xi,c=Na,u=1,d=Xs){super(),Object.defineProperty(this,"id",{value:L9++}),this.uuid=Zr(),this.name="",this.source=new ka(t),this.mipmaps=[],this.mapping=r,this.wrapS=i,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Q(0,0),this.repeat=new Q(1,1),this.center=new Q(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const r=void 0===t||"string"==typeof t;if(!r&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),r||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case Ir:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case Ir:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n})();xr.prototype.isTexture=!0;class It{constructor(e=0,t=0,r=0,i=1){this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],f=l[5],g=l[9],p=l[2],m=l[6],y=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-p)<.01&&Math.abs(g-m)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+p)<.1&&Math.abs(g+m)<.1&&Math.abs(c+f+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const v=(c+1)/2,M=(f+1)/2,w=(y+1)/2,b=(u+h)/4,S=(d+p)/4,x=(g+m)/4;return v>M&&v>w?v<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(v),i=b/r,s=S/r):M>w?M<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(M),r=b/i,s=x/i):w<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(w),r=S/s,i=x/s),this.set(r,i,s,t),this}let _=Math.sqrt((m-g)*(m-g)+(d-p)*(d-p)+(h-u)*(h-u));return Math.abs(_)<.001&&(_=1),this.x=(m-g)/_,this.y=(d-p)/_,this.z=(h-u)/_,this.w=Math.acos((c+f+y-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}It.prototype.isVector4=!0;class Jr extends Ra{constructor(e,t,r={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new It(0,0,e,t),this.scissorTest=!1,this.viewport=new It(0,0,e,t),this.texture=new xr({width:e,height:t,depth:1},r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.internalFormat=void 0!==r.internalFormat?r.internalFormat:null,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:Tn,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0!==r.stencilBuffer&&r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null,this.samples=void 0!==r.samples?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ka(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}Jr.prototype.isWebGLRenderTarget=!0;class Eg extends xr{constructor(e=null,t=1,r=1,i=1){super(null),this.image={data:e,width:t,height:r,depth:i},this.magFilter=Vn,this.minFilter=Vn,this.wrapR=Ir,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Eg.prototype.isDataArrayTexture=!0,class k9 extends Jr{constructor(e,t,r){super(e,t),this.depth=r,this.texture=new Eg(null,e,t,r),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGLArrayRenderTarget=!0;class qM extends xr{constructor(e=null,t=1,r=1,i=1){super(null),this.image={data:e,width:t,height:r,depth:i},this.magFilter=Vn,this.minFilter=Vn,this.wrapR=Ir,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}qM.prototype.isData3DTexture=!0,class B9 extends Jr{constructor(e,t,r){super(e,t),this.depth=r,this.texture=new qM(null,e,t,r),this.texture.isRenderTargetTexture=!0}}.prototype.isWebGL3DRenderTarget=!0,class V9 extends Jr{constructor(e,t,r,i={}){super(e,t,i);const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}.prototype.isWebGLMultipleRenderTargets=!0;class $n{constructor(e=0,t=0,r=0,i=1){this._x=e,this._y=t,this._z=r,this._w=i}static slerp(e,t,r,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,t,i)}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const h=s[o+0],f=s[o+1],g=s[o+2],p=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=h,e[t+1]=f,e[t+2]=g,void(e[t+3]=p);if(d!==p||l!==h||c!==f||u!==g){let m=1-a;const y=l*h+c*f+u*g+d*p,_=y>=0?1:-1,v=1-y*y;if(v>Number.EPSILON){const w=Math.sqrt(v),b=Math.atan2(w,y*_);m=Math.sin(m*b)/w,a=Math.sin(a*b)/w}const M=a*_;if(l=l*m+h*M,c=c*m+f*M,u=u*m+g*M,d=d*m+p*M,m===1-a){const w=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=w,c*=w,u*=w,d*=w}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[o],h=s[o+1],f=s[o+2],g=s[o+3];return e[t]=a*g+u*d+l*f-c*h,e[t+1]=l*g+u*h+c*d-a*f,e[t+2]=c*g+u*f+a*h-l*d,e[t+3]=u*g-a*d-l*h-c*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(s/2),h=l(r/2),f=l(i/2),g=l(s/2);switch(o){case"XYZ":this._x=h*u*d+c*f*g,this._y=c*f*d-h*u*g,this._z=c*u*g+h*f*d,this._w=c*u*d-h*f*g;break;case"YXZ":this._x=h*u*d+c*f*g,this._y=c*f*d-h*u*g,this._z=c*u*g-h*f*d,this._w=c*u*d+h*f*g;break;case"ZXY":this._x=h*u*d-c*f*g,this._y=c*f*d+h*u*g,this._z=c*u*g+h*f*d,this._w=c*u*d-h*f*g;break;case"ZYX":this._x=h*u*d-c*f*g,this._y=c*f*d+h*u*g,this._z=c*u*g-h*f*d,this._w=c*u*d+h*f*g;break;case"YZX":this._x=h*u*d+c*f*g,this._y=c*f*d+h*u*g,this._z=c*u*g-h*f*d,this._w=c*u*d-h*f*g;break;case"XZY":this._x=h*u*d-c*f*g,this._y=c*f*d-h*u*g,this._z=c*u*g+h*f*d,this._w=c*u*d+h*f*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=r+a+d;if(h>0){const f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(u-l)*f,this._y=(s-c)*f,this._z=(o-i)*f}else if(r>a&&r>d){const f=2*Math.sqrt(1+r-a-d);this._w=(u-l)/f,this._x=.25*f,this._y=(i+o)/f,this._z=(s+c)/f}else if(a>d){const f=2*Math.sqrt(1+a-r-d);this._w=(s-c)/f,this._x=(i+o)/f,this._y=.25*f,this._z=(l+u)/f}else{const f=2*Math.sqrt(1+d-r-a);this._w=(o-i)/f,this._x=(s+c)/f,this._y=(l+u)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(vn(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(0===r)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*r+t*this._x,this._y=f*i+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=o*d+this._w*h,this._x=r*d+this._x*h,this._y=i*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}$n.prototype.isQuaternion=!0;class E{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.z=r}set(e,t,r){return void 0===r&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(WI.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(WI.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*i-a*r,u=l*r+a*t-s*i,d=l*i+s*r-o*t,h=-s*t-o*r-a*i;return this.x=c*l+h*-s+u*-a-d*-o,this.y=u*l+h*-o+d*-s-c*-a,this.z=d*l+h*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return XM.copy(this).projectOnVector(e),this.sub(XM)}reflect(e){return this.sub(XM.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(vn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}E.prototype.isVector3=!0;const XM=new E,WI=new $n;class bi{constructor(e=new E(1/0,1/0,1/0),t=new E(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],d=e[l+1],h=e[l+2];u<t&&(t=u),d<r&&(r=d),h<i&&(i=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),d=e.getY(l),h=e.getZ(l);u<t&&(t=u),d<r&&(r=d),h<i&&(i=h),u>s&&(s=u),d>o&&(o=d),h>a&&(a=h)}return this.min.set(t,r,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Ba.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(void 0!==r)if(t&&null!=r.attributes&&void 0!==r.attributes.position){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)Ba.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Ba)}else null===r.boundingBox&&r.computeBoundingBox(),YM.copy(r.boundingBox),YM.applyMatrix4(e.matrixWorld),this.union(YM);const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ba),Ba.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ih),Dg.subVectors(this.max,ih),Tc.subVectors(e.a,ih),Ac.subVectors(e.b,ih),Nc.subVectors(e.c,ih),Po.subVectors(Ac,Tc),Io.subVectors(Nc,Ac),Va.subVectors(Tc,Nc);let t=[0,-Po.z,Po.y,0,-Io.z,Io.y,0,-Va.z,Va.y,Po.z,0,-Po.x,Io.z,0,-Io.x,Va.z,0,-Va.x,-Po.y,Po.x,0,-Io.y,Io.x,0,-Va.y,Va.x,0];return!(!ZM(t,Tc,Ac,Nc,Dg)||(t=[1,0,0,0,1,0,0,0,1],!ZM(t,Tc,Ac,Nc,Dg)))&&(Tg.crossVectors(Po,Io),t=[Tg.x,Tg.y,Tg.z],ZM(t,Tc,Ac,Nc,Dg))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Ba.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(Ba).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Zs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Zs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Zs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Zs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Zs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Zs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Zs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Zs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Zs)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}bi.prototype.isBox3=!0;const Zs=[new E,new E,new E,new E,new E,new E,new E,new E],Ba=new E,YM=new bi,Tc=new E,Ac=new E,Nc=new E,Po=new E,Io=new E,Va=new E,ih=new E,Dg=new E,Tg=new E,Ga=new E;function ZM(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){Ga.fromArray(n,s);const a=i.x*Math.abs(Ga.x)+i.y*Math.abs(Ga.y)+i.z*Math.abs(Ga.z),l=e.dot(Ga),c=t.dot(Ga),u=r.dot(Ga);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const G9=new bi,$I=new E,Ag=new E,JM=new E;class Ua{constructor(e=new E,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;void 0!==t?r.copy(t):G9.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){JM.subVectors(e,this.center);const t=JM.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=.5*(r-this.radius);this.center.add(JM.multiplyScalar(i/r)),this.radius+=i}return this}union(e){return!0===this.center.equals(e.center)?Ag.set(0,0,1).multiplyScalar(e.radius):Ag.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint($I.copy(e.center).add(Ag)),this.expandByPoint($I.copy(e.center).sub(Ag)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Js=new E,KM=new E,Ng=new E,Ro=new E,QM=new E,Pg=new E,ex=new E;class Ha{constructor(e=new E,t=new E(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Js)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Js.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Js.copy(this.direction).multiplyScalar(t).add(this.origin),Js.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){KM.copy(e).add(t).multiplyScalar(.5),Ng.copy(t).sub(e).normalize(),Ro.copy(this.origin).sub(KM);const s=.5*e.distanceTo(t),o=-this.direction.dot(Ng),a=Ro.dot(this.direction),l=-Ro.dot(Ng),c=Ro.lengthSq(),u=Math.abs(1-o*o);let d,h,f,g;if(u>0)if(d=o*l-a,h=o*a-l,g=s*u,d>=0)if(h>=-g)if(h<=g){const p=1/u;d*=p,h*=p,f=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;else h<=-g?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c):h<=g?(d=0,h=Math.min(Math.max(-s,-l),s),f=h*(h+2*l)+c):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),f=-d*d+h*(h+2*l)+c);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),f=-d*d+h*(h+2*l)+c;return r&&r.copy(this.direction).multiplyScalar(d).add(this.origin),i&&i.copy(Ng).multiplyScalar(h).add(KM),f}intersectSphere(e,t){Js.subVectors(e.center,this.origin);const r=Js.dot(this.direction),i=Js.dot(Js)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return a<0&&l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return null===r?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),r>o||s>i||((s>r||r!=r)&&(r=s),(o<i||i!=i)&&(i=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),r>l||a>i)||((a>r||r!=r)&&(r=a),(l<i||i!=i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return null!==this.intersectBox(e,Js)}intersectTriangle(e,t,r,i,s){QM.subVectors(t,e),Pg.subVectors(r,e),ex.crossVectors(QM,Pg);let a,o=this.direction.dot(ex);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Ro.subVectors(this.origin,e);const l=a*this.direction.dot(Pg.crossVectors(Ro,Pg));if(l<0)return null;const c=a*this.direction.dot(QM.cross(Ro));if(c<0||l+c>o)return null;const u=-a*Ro.dot(ex);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ee{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,r,i,s,o,a,l,c,u,d,h,f,g,p,m){const y=this.elements;return y[0]=e,y[4]=t,y[8]=r,y[12]=i,y[1]=s,y[5]=o,y[9]=a,y[13]=l,y[2]=c,y[6]=u,y[10]=d,y[14]=h,y[3]=f,y[7]=g,y[11]=p,y[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ee).fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Pc.setFromMatrixColumn(e,0).length(),s=1/Pc.setFromMatrixColumn(e,1).length(),o=1/Pc.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const h=o*u,f=o*d,g=a*u,p=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=f+g*c,t[5]=h-p*c,t[9]=-a*l,t[2]=p-h*c,t[6]=g+f*c,t[10]=o*l}else if("YXZ"===e.order){const h=l*u,f=l*d,g=c*u,p=c*d;t[0]=h+p*a,t[4]=g*a-f,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=f*a-g,t[6]=p+h*a,t[10]=o*l}else if("ZXY"===e.order){const h=l*u,f=l*d,g=c*u,p=c*d;t[0]=h-p*a,t[4]=-o*d,t[8]=g+f*a,t[1]=f+g*a,t[5]=o*u,t[9]=p-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const h=o*u,f=o*d,g=a*u,p=a*d;t[0]=l*u,t[4]=g*c-f,t[8]=h*c+p,t[1]=l*d,t[5]=p*c+h,t[9]=f*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const h=o*l,f=o*c,g=a*l,p=a*c;t[0]=l*u,t[4]=p-h*d,t[8]=g*d+f,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=f*d+g,t[10]=h-p*d}else if("XZY"===e.order){const h=o*l,f=o*c,g=a*l,p=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+p,t[5]=o*u,t[9]=f*d-g,t[2]=g*d-f,t[6]=a*u,t[10]=p*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(U9,e,H9)}lookAt(e,t,r){const i=this.elements;return Kr.subVectors(e,t),0===Kr.lengthSq()&&(Kr.z=1),Kr.normalize(),Oo.crossVectors(r,Kr),0===Oo.lengthSq()&&(1===Math.abs(r.z)?Kr.x+=1e-4:Kr.z+=1e-4,Kr.normalize(),Oo.crossVectors(r,Kr)),Oo.normalize(),Ig.crossVectors(Kr,Oo),i[0]=Oo.x,i[4]=Ig.x,i[8]=Kr.x,i[1]=Oo.y,i[5]=Ig.y,i[9]=Kr.y,i[2]=Oo.z,i[6]=Ig.z,i[10]=Kr.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],h=r[9],f=r[13],g=r[2],p=r[6],m=r[10],y=r[14],_=r[3],v=r[7],M=r[11],w=r[15],b=i[0],S=i[4],x=i[8],C=i[12],N=i[1],P=i[5],V=i[9],q=i[13],I=i[2],G=i[6],L=i[10],j=i[14],Y=i[3],H=i[7],$=i[11],se=i[15];return s[0]=o*b+a*N+l*I+c*Y,s[4]=o*S+a*P+l*G+c*H,s[8]=o*x+a*V+l*L+c*$,s[12]=o*C+a*q+l*j+c*se,s[1]=u*b+d*N+h*I+f*Y,s[5]=u*S+d*P+h*G+f*H,s[9]=u*x+d*V+h*L+f*$,s[13]=u*C+d*q+h*j+f*se,s[2]=g*b+p*N+m*I+y*Y,s[6]=g*S+p*P+m*G+y*H,s[10]=g*x+p*V+m*L+y*$,s[14]=g*C+p*q+m*j+y*se,s[3]=_*b+v*N+M*I+w*Y,s[7]=_*S+v*P+M*G+w*H,s[11]=_*x+v*V+M*L+w*$,s[15]=_*C+v*q+M*j+w*se,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],f=e[14];return e[3]*(+s*l*d-i*c*d-s*a*h+r*c*h+i*a*f-r*l*f)+e[7]*(+t*l*f-t*c*h+s*o*h-i*o*f+i*c*u-s*l*u)+e[11]*(+t*c*d-t*a*f-s*o*d+r*o*f+s*a*u-r*c*u)+e[15]*(-i*a*u-t*l*d+t*a*h+i*o*d-r*o*h+r*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],g=e[12],p=e[13],m=e[14],y=e[15],_=d*m*c-p*h*c+p*l*f-a*m*f-d*l*y+a*h*y,v=g*h*c-u*m*c-g*l*f+o*m*f+u*l*y-o*h*y,M=u*p*c-g*d*c+g*a*f-o*p*f-u*a*y+o*d*y,w=g*d*l-u*p*l-g*a*h+o*p*h+u*a*m-o*d*m,b=t*_+r*v+i*M+s*w;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/b;return e[0]=_*S,e[1]=(p*h*s-d*m*s-p*i*f+r*m*f+d*i*y-r*h*y)*S,e[2]=(a*m*s-p*l*s+p*i*c-r*m*c-a*i*y+r*l*y)*S,e[3]=(d*l*s-a*h*s-d*i*c+r*h*c+a*i*f-r*l*f)*S,e[4]=v*S,e[5]=(u*m*s-g*h*s+g*i*f-t*m*f-u*i*y+t*h*y)*S,e[6]=(g*l*s-o*m*s-g*i*c+t*m*c+o*i*y-t*l*y)*S,e[7]=(o*h*s-u*l*s+u*i*c-t*h*c-o*i*f+t*l*f)*S,e[8]=M*S,e[9]=(g*d*s-u*p*s-g*r*f+t*p*f+u*r*y-t*d*y)*S,e[10]=(o*p*s-g*a*s+g*r*c-t*p*c-o*r*y+t*a*y)*S,e[11]=(u*a*s-o*d*s-u*r*c+t*d*c+o*r*f-t*a*f)*S,e[12]=w*S,e[13]=(u*p*i-g*d*i+g*r*h-t*p*h-u*r*m+t*d*m)*S,e[14]=(g*a*i-o*p*i-g*r*l+t*p*l+o*r*m-t*a*m)*S,e[15]=(o*d*i-u*a*i+u*r*l-t*d*l-o*r*h+t*a*h)*S,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,h=s*c,f=s*u,g=s*d,p=o*u,m=o*d,y=a*d,_=l*c,v=l*u,M=l*d,w=r.x,b=r.y,S=r.z;return i[0]=(1-(p+y))*w,i[1]=(f+M)*w,i[2]=(g-v)*w,i[3]=0,i[4]=(f-M)*b,i[5]=(1-(h+y))*b,i[6]=(m+_)*b,i[7]=0,i[8]=(g+v)*S,i[9]=(m-_)*S,i[10]=(1-(h+p))*S,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Pc.set(i[0],i[1],i[2]).length();const o=Pc.set(i[4],i[5],i[6]).length(),a=Pc.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Wi.copy(this);const c=1/s,u=1/o,d=1/a;return Wi.elements[0]*=c,Wi.elements[1]*=c,Wi.elements[2]*=c,Wi.elements[4]*=u,Wi.elements[5]*=u,Wi.elements[6]*=u,Wi.elements[8]*=d,Wi.elements[9]*=d,Wi.elements[10]*=d,t.setFromRotationMatrix(Wi),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,c=2*s/(r-i),u=(t+e)/(t-e),d=(r+i)/(r-i),h=-(o+s)/(o-s),f=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,s,o){const a=this.elements,l=1/(t-e),c=1/(r-i),u=1/(o-s),d=(t+e)*l,h=(r+i)*c,f=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}Ee.prototype.isMatrix4=!0;const Pc=new E,Wi=new Ee,U9=new E(0,0,0),H9=new E(1,1,1),Oo=new E,Ig=new E,Kr=new E,qI=new Ee,XI=new $n;class Ks{constructor(e=0,t=0,r=0,i=Ks.DefaultOrder){this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],h=i[6],f=i[10];switch(t){case"XYZ":this._y=Math.asin(vn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-vn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(vn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-vn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(vn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-vn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return qI.makeRotationFromQuaternion(e),this.setFromRotationMatrix(qI,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return XI.setFromEuler(this),this.setFromQuaternion(XI,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ks.prototype.isEuler=!0,Ks.DefaultOrder="XYZ",Ks.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Ic{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let z9=0;const YI=new E,Rc=new $n,Qs=new Ee,Rg=new E,sh=new E,j9=new E,W9=new $n,ZI=new E(1,0,0),JI=new E(0,1,0),KI=new E(0,0,1),$9={type:"added"},QI={type:"removed"};class Et extends Ra{constructor(){super(),Object.defineProperty(this,"id",{value:z9++}),this.uuid=Zr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Et.DefaultUp.clone();const e=new E,t=new Ks,r=new $n,i=new E(1,1,1);t._onChange(function s(){r.setFromEuler(t,!1)}),r._onChange(function o(){t.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ee},normalMatrix:{value:new Wn}}),this.matrix=new Ee,this.matrixWorld=new Ee,this.matrixAutoUpdate=Et.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ic,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Rc.setFromAxisAngle(e,t),this.quaternion.multiply(Rc),this}rotateOnWorldAxis(e,t){return Rc.setFromAxisAngle(e,t),this.quaternion.premultiply(Rc),this}rotateX(e){return this.rotateOnAxis(ZI,e)}rotateY(e){return this.rotateOnAxis(JI,e)}rotateZ(e){return this.rotateOnAxis(KI,e)}translateOnAxis(e,t){return YI.copy(e).applyQuaternion(this.quaternion),this.position.add(YI.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ZI,e)}translateY(e){return this.translateOnAxis(JI,e)}translateZ(e){return this.translateOnAxis(KI,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Qs.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Rg.copy(e):Rg.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),sh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Qs.lookAt(sh,Rg,this.up):Qs.lookAt(Rg,sh,this.up),this.quaternion.setFromRotationMatrix(Qs),i&&(Qs.extractRotation(i.matrixWorld),Rc.setFromRotationMatrix(Qs),this.quaternion.premultiply(Rc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent($9)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(QI)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(QI)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Qs.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Qs.multiply(e.parent.matrixWorld)),e.applyMatrix4(Qs),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(void 0!==o)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sh,e,j9),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sh,W9,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){const r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function s(a,l){return void 0===a[l.uuid]&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++)s(e.shapes,l[c]);else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++)i.animations.push(s(e.animations,this.animations[a]))}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),h=o(e.skeletons),f=o(e.animations),g=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),h.length>0&&(r.skeletons=h),f.length>0&&(r.animations=f),g.length>0&&(r.nodes=g)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}Et.DefaultUp=new E(0,1,0),Et.DefaultMatrixAutoUpdate=!0,Et.prototype.isObject3D=!0;const $i=new E,eo=new E,tx=new E,to=new E,Oc=new E,Fc=new E,eR=new E,nx=new E,rx=new E,ix=new E;class An{constructor(e=new E,t=new E,r=new E){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),$i.subVectors(e,t),i.cross($i);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){$i.subVectors(i,t),eo.subVectors(r,t),tx.subVectors(e,t);const o=$i.dot($i),a=$i.dot(eo),l=$i.dot(tx),c=eo.dot(eo),u=eo.dot(tx),d=o*c-a*a;if(0===d)return s.set(-2,-1,-1);const h=1/d,f=(c*l-a*u)*h,g=(o*u-a*l)*h;return s.set(1-f-g,g,f)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,to),to.x>=0&&to.y>=0&&to.x+to.y<=1}static getUV(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,to),l.set(0,0),l.addScaledVector(s,to.x),l.addScaledVector(o,to.y),l.addScaledVector(a,to.z),l}static isFrontFacing(e,t,r,i){return $i.subVectors(r,t),eo.subVectors(e,t),$i.cross(eo).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return $i.subVectors(this.c,this.b),eo.subVectors(this.a,this.b),.5*$i.cross(eo).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return An.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return An.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return An.getUV(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return An.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return An.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;Oc.subVectors(i,r),Fc.subVectors(s,r),nx.subVectors(e,r);const l=Oc.dot(nx),c=Fc.dot(nx);if(l<=0&&c<=0)return t.copy(r);rx.subVectors(e,i);const u=Oc.dot(rx),d=Fc.dot(rx);if(u>=0&&d<=u)return t.copy(i);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(r).addScaledVector(Oc,o);ix.subVectors(e,s);const f=Oc.dot(ix),g=Fc.dot(ix);if(g>=0&&f<=g)return t.copy(s);const p=f*c-l*g;if(p<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(r).addScaledVector(Fc,a);const m=u*g-f*d;if(m<=0&&d-u>=0&&f-g>=0)return eR.subVectors(s,i),a=(d-u)/(d-u+(f-g)),t.copy(i).addScaledVector(eR,a);const y=1/(m+p+h);return o=p*y,a=h*y,t.copy(r).addScaledVector(Oc,o).addScaledVector(Fc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let q9=0;class Nn extends Ra{constructor(){super(),Object.defineProperty(this,"id",{value:q9++}),this.uuid=Zr(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const r=e[t];if(void 0===r){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r;continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),0!==this.side&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(r.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=this.flatShading),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),!1===this.fog&&(r.fog=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(null!==t){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}Nn.prototype.isMaterial=!0,Nn.fromType=function(){return null};class no extends Nn{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}no.prototype.isMeshBasicMaterial=!0;const Pn=new E,Og=new Q;class Xt{constructor(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.usage=Qd,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new pe),t[r++]=o.r,t[r++]=o.g,t[r++]=o.b}return this}copyVector2sArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new Q),t[r++]=o.x,t[r++]=o.y}return this}copyVector3sArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new E),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z}return this}copyVector4sArray(e){const t=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new It),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,r=this.count;t<r;t++)Og.fromBufferAttribute(this,t),Og.applyMatrix3(e),this.setXY(t,Og.x,Og.y);else if(3===this.itemSize)for(let t=0,r=this.count;t<r;t++)Pn.fromBufferAttribute(this,t),Pn.applyMatrix3(e),this.setXYZ(t,Pn.x,Pn.y,Pn.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Pn.fromBufferAttribute(this,t),Pn.applyMatrix4(e),this.setXYZ(t,Pn.x,Pn.y,Pn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Pn.fromBufferAttribute(this,t),Pn.applyNormalMatrix(e),this.setXYZ(t,Pn.x,Pn.y,Pn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Pn.fromBufferAttribute(this,t),Pn.transformDirection(e),this.setXYZ(t,Pn.x,Pn.y,Pn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Qd&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}Xt.prototype.isBufferAttribute=!0;class tR extends Xt{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class nR extends Xt{constructor(e,t,r){super(new Uint32Array(e),t,r)}}(class X9 extends Xt{constructor(e,t,r){super(new Uint16Array(e),t,r)}}).prototype.isFloat16BufferAttribute=!0;class Se extends Xt{constructor(e,t,r){super(new Float32Array(e),t,r)}}let Y9=0;const Ci=new Ee,sx=new Et,Lc=new E,Qr=new bi,oh=new bi,qn=new E;class Ue extends Ra{constructor(){super(),Object.defineProperty(this,"id",{value:Y9++}),this.uuid=Zr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(zI(e)?nR:tR)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(void 0!==r){const s=(new Wn).getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ci.makeRotationFromQuaternion(e),this.applyMatrix4(Ci),this}rotateX(e){return Ci.makeRotationX(e),this.applyMatrix4(Ci),this}rotateY(e){return Ci.makeRotationY(e),this.applyMatrix4(Ci),this}rotateZ(e){return Ci.makeRotationZ(e),this.applyMatrix4(Ci),this}translate(e,t,r){return Ci.makeTranslation(e,t,r),this.applyMatrix4(Ci),this}scale(e,t,r){return Ci.makeScale(e,t,r),this.applyMatrix4(Ci),this}lookAt(e){return sx.lookAt(e),sx.updateMatrix(),this.applyMatrix4(sx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Lc).negate(),this.translate(Lc.x,Lc.y,Lc.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Se(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new bi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new E(-1/0,-1/0,-1/0),new E(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++)Qr.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(qn.addVectors(this.boundingBox.min,Qr.min),this.boundingBox.expandByPoint(qn),qn.addVectors(this.boundingBox.max,Qr.max),this.boundingBox.expandByPoint(qn)):(this.boundingBox.expandByPoint(Qr.min),this.boundingBox.expandByPoint(Qr.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ua);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new E,1/0);if(e){const r=this.boundingSphere.center;if(Qr.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)oh.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(qn.addVectors(Qr.min,oh.min),Qr.expandByPoint(qn),qn.addVectors(Qr.max,oh.max),Qr.expandByPoint(qn)):(Qr.expandByPoint(oh.min),Qr.expandByPoint(oh.max));Qr.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)qn.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(qn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)qn.fromBufferAttribute(a,c),l&&(Lc.fromBufferAttribute(e,c),qn.add(Lc)),i=Math.max(i,r.distanceToSquared(qn))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Xt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let N=0;N<a;N++)c[N]=new E,u[N]=new E;const d=new E,h=new E,f=new E,g=new Q,p=new Q,m=new Q,y=new E,_=new E;function v(N,P,V){d.fromArray(i,3*N),h.fromArray(i,3*P),f.fromArray(i,3*V),g.fromArray(o,2*N),p.fromArray(o,2*P),m.fromArray(o,2*V),h.sub(d),f.sub(d),p.sub(g),m.sub(g);const q=1/(p.x*m.y-m.x*p.y);!isFinite(q)||(y.copy(h).multiplyScalar(m.y).addScaledVector(f,-p.y).multiplyScalar(q),_.copy(f).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(q),c[N].add(y),c[P].add(y),c[V].add(y),u[N].add(_),u[P].add(_),u[V].add(_))}let M=this.groups;0===M.length&&(M=[{start:0,count:r.length}]);for(let N=0,P=M.length;N<P;++N){const V=M[N],q=V.start;for(let G=q,L=q+V.count;G<L;G+=3)v(r[G+0],r[G+1],r[G+2])}const w=new E,b=new E,S=new E,x=new E;function C(N){S.fromArray(s,3*N),x.copy(S);const P=c[N];w.copy(P),w.sub(S.multiplyScalar(S.dot(P))).normalize(),b.crossVectors(x,P);const q=b.dot(u[N])<0?-1:1;l[4*N]=w.x,l[4*N+1]=w.y,l[4*N+2]=w.z,l[4*N+3]=q}for(let N=0,P=M.length;N<P;++N){const V=M[N],q=V.start;for(let G=q,L=q+V.count;G<L;G+=3)C(r[G+0]),C(r[G+1]),C(r[G+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let r=this.getAttribute("normal");if(void 0===r)r=new Xt(new Float32Array(3*t.count),3),this.setAttribute("normal",r);else for(let h=0,f=r.count;h<f;h++)r.setXYZ(h,0,0,0);const i=new E,s=new E,o=new E,a=new E,l=new E,c=new E,u=new E,d=new E;if(e)for(let h=0,f=e.count;h<f;h+=3){const g=e.getX(h+0),p=e.getX(h+1),m=e.getX(h+2);i.fromBufferAttribute(t,g),s.fromBufferAttribute(t,p),o.fromBufferAttribute(t,m),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),a.fromBufferAttribute(r,g),l.fromBufferAttribute(r,p),c.fromBufferAttribute(r,m),a.add(u),l.add(u),c.add(u),r.setXYZ(g,a.x,a.y,a.z),r.setXYZ(p,l.x,l.y,l.z),r.setXYZ(m,c.x,c.y,c.z)}else for(let h=0,f=t.count;h<f;h+=3)i.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const i in r){if(void 0===e.attributes[i])continue;const o=r[i].array,a=e.attributes[i],l=a.array,c=a.itemSize*t,u=Math.min(l.length,o.length-c);for(let d=0,h=c;d<u;d++,h++)o[h]=l[d]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)qn.fromBufferAttribute(e,t),qn.normalize(),e.setXYZ(t,qn.x,qn.y,qn.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let f=0,g=0;for(let p=0,m=l.length;p<m;p++){f=a.isInterleavedBufferAttribute?l[p]*a.data.stride+a.offset:l[p]*u;for(let y=0;y<u;y++)h[g++]=c[f++]}return new Xt(h,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ue,r=this.index.array,i=this.attributes;for(const a in i){const c=e(i[a],r);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const f=e(c[u],r);l.push(f)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r)e.data.attributes[l]=r[l].toJSON(e.data);const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++)u.push(c[d].toJSON(e.data));u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;null!==r&&this.setIndex(r.clone(t));const i=e.attributes;for(const c in i)this.setAttribute(c,i[c].clone(t));const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,f=d.length;h<f;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Ue.prototype.isBufferGeometry=!0;const rR=new Ee,kc=new Ha,ox=new Ua,Fo=new E,Lo=new E,ko=new E,ax=new E,lx=new E,cx=new E,Fg=new E,Lg=new E,kg=new E,Bg=new Q,Vg=new Q,Gg=new Q,ux=new E,Ug=new E;class Un extends Et{constructor(e=new Ue,t=new no){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;if(void 0===i||(null===r.boundingSphere&&r.computeBoundingSphere(),ox.copy(r.boundingSphere),ox.applyMatrix4(s),!1===e.ray.intersectsSphere(ox))||(rR.copy(s).invert(),kc.copy(e.ray).applyMatrix4(rR),null!==r.boundingBox&&!1===kc.intersectsBox(r.boundingBox)))return;let o;if(r.isBufferGeometry){const a=r.index,l=r.attributes.position,c=r.morphAttributes.position,u=r.morphTargetsRelative,d=r.attributes.uv,h=r.attributes.uv2,f=r.groups,g=r.drawRange;if(null!==a)if(Array.isArray(i))for(let p=0,m=f.length;p<m;p++){const y=f[p],_=i[y.materialIndex];for(let w=Math.max(y.start,g.start),b=Math.min(a.count,Math.min(y.start+y.count,g.start+g.count));w<b;w+=3){const S=a.getX(w),x=a.getX(w+1),C=a.getX(w+2);o=Hg(this,_,e,kc,l,c,u,d,h,S,x,C),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=y.materialIndex,t.push(o))}}else for(let y=Math.max(0,g.start),_=Math.min(a.count,g.start+g.count);y<_;y+=3){const v=a.getX(y),M=a.getX(y+1),w=a.getX(y+2);o=Hg(this,i,e,kc,l,c,u,d,h,v,M,w),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}else if(void 0!==l)if(Array.isArray(i))for(let p=0,m=f.length;p<m;p++){const y=f[p],_=i[y.materialIndex];for(let w=Math.max(y.start,g.start),b=Math.min(l.count,Math.min(y.start+y.count,g.start+g.count));w<b;w+=3)o=Hg(this,_,e,kc,l,c,u,d,h,w,w+1,w+2),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=y.materialIndex,t.push(o))}else for(let y=Math.max(0,g.start),_=Math.min(l.count,g.start+g.count);y<_;y+=3)o=Hg(this,i,e,kc,l,c,u,d,h,y,y+1,y+2),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function Hg(n,e,t,r,i,s,o,a,l,c,u,d){Fo.fromBufferAttribute(i,c),Lo.fromBufferAttribute(i,u),ko.fromBufferAttribute(i,d);const h=n.morphTargetInfluences;if(s&&h){Fg.set(0,0,0),Lg.set(0,0,0),kg.set(0,0,0);for(let g=0,p=s.length;g<p;g++){const m=h[g],y=s[g];0!==m&&(ax.fromBufferAttribute(y,c),lx.fromBufferAttribute(y,u),cx.fromBufferAttribute(y,d),o?(Fg.addScaledVector(ax,m),Lg.addScaledVector(lx,m),kg.addScaledVector(cx,m)):(Fg.addScaledVector(ax.sub(Fo),m),Lg.addScaledVector(lx.sub(Lo),m),kg.addScaledVector(cx.sub(ko),m)))}Fo.add(Fg),Lo.add(Lg),ko.add(kg)}n.isSkinnedMesh&&(n.boneTransform(c,Fo),n.boneTransform(u,Lo),n.boneTransform(d,ko));const f=function Z9(n,e,t,r,i,s,o,a){let l;if(l=1===e.side?r.intersectTriangle(o,s,i,!0,a):r.intersectTriangle(i,s,o,2!==e.side,a),null===l)return null;Ug.copy(a),Ug.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Ug);return c<t.near||c>t.far?null:{distance:c,point:Ug.clone(),object:n}}(n,e,t,r,Fo,Lo,ko,ux);if(f){a&&(Bg.fromBufferAttribute(a,c),Vg.fromBufferAttribute(a,u),Gg.fromBufferAttribute(a,d),f.uv=An.getUV(ux,Fo,Lo,ko,Bg,Vg,Gg,new Q)),l&&(Bg.fromBufferAttribute(l,c),Vg.fromBufferAttribute(l,u),Gg.fromBufferAttribute(l,d),f.uv2=An.getUV(ux,Fo,Lo,ko,Bg,Vg,Gg,new Q));const g={a:c,b:u,c:d,normal:new E,materialIndex:0};An.getNormal(Fo,Lo,ko,g.normal),f.face=g}return f}Un.prototype.isMesh=!0;class Bo extends Ue{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,f=0;function g(p,m,y,_,v,M,w,b,S,x,C){const N=M/S,P=w/x,V=M/2,q=w/2,I=b/2,G=S+1,L=x+1;let j=0,Y=0;const H=new E;for(let $=0;$<L;$++){const se=$*P-q;for(let J=0;J<G;J++)H[p]=(J*N-V)*_,H[m]=se*v,H[y]=I,c.push(H.x,H.y,H.z),H[p]=0,H[m]=0,H[y]=b>0?1:-1,u.push(H.x,H.y,H.z),d.push(J/S),d.push(1-$/x),j+=1}for(let $=0;$<x;$++)for(let se=0;se<S;se++){const ce=h+se+G*($+1),ve=h+(se+1)+G*($+1),Ce=h+(se+1)+G*$;l.push(h+se+G*$,ce,Ce),l.push(ce,ve,Ce),Y+=6}a.addGroup(f,Y,C),f+=Y,h+=j}g("z","y","x",-1,-1,r,t,e,o,s,0),g("z","y","x",1,-1,r,t,-e,o,s,1),g("x","z","y",1,1,e,r,t,i,o,2),g("x","z","y",1,-1,e,r,-t,i,o,3),g("x","y","z",1,-1,e,t,r,i,s,4),g("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Se(c,3)),this.setAttribute("normal",new Se(u,3)),this.setAttribute("uv",new Se(d,2))}static fromJSON(e){return new Bo(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Bc(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];e[t][r]=i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.clone():Array.isArray(i)?i.slice():i}}return e}function lr(n){const e={};for(let t=0;t<n.length;t++){const r=Bc(n[t]);for(const i in r)e[i]=r[i]}return e}const J9={clone:Bc,merge:lr};class qi extends Nn{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Bc(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;t.uniforms[i]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)!0===this.extensions[i]&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}qi.prototype.isShaderMaterial=!0;class zg extends Et{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Ee,this.projectionMatrix=new Ee,this.projectionMatrixInverse=new Ee}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}zg.prototype.isCamera=!0;class Xn extends zg{constructor(e=50,t=1,r=.1,i=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*th*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Oa*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*th*Math.atan(Math.tan(.5*Oa*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Oa*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Xn.prototype.isPerspectiveCamera=!0;class dx extends Et{constructor(e,t,r){if(super(),this.type="CubeCamera",!0!==r.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=r;const i=new Xn(90,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new E(1,0,0)),this.add(i);const s=new Xn(90,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new E(-1,0,0)),this.add(s);const o=new Xn(90,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new E(0,1,0)),this.add(o);const a=new Xn(90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new E(0,-1,0)),this.add(a);const l=new Xn(90,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new E(0,0,1)),this.add(l);const c=new Xn(90,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new E(0,0,-1)),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,c]=this.children,u=e.getRenderTarget(),d=e.toneMapping,h=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const f=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=f,e.setRenderTarget(r,5),e.render(t,c),e.setRenderTarget(u),e.toneMapping=d,e.xr.enabled=h,r.texture.needsPMREMUpdate=!0}}class ah extends xr{constructor(e,t,r,i,s,o,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:301,r,i,s,o,a,l,c,u),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}ah.prototype.isCubeTexture=!0;class iR extends Jr{constructor(e,t={}){super(e,e,t);const r={width:e,height:e,depth:1};this.texture=new ah([r,r,r,r,r,r],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Tn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r_uniforms={tEquirect:{value:null}},r_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",i=new Bo(5,5,5),s=new qi({name:"CubemapFromEquirect",uniforms:Bc(r_uniforms),vertexShader:r_vertexShader,fragmentShader:r_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new Un(i,s),a=t.minFilter;return 1008===t.minFilter&&(t.minFilter=Tn),new dx(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}iR.prototype.isWebGLCubeRenderTarget=!0;const hx=new E,e7=new E,t7=new Wn;class ro{constructor(e=new E(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=hx.subVectors(r,t).cross(e7.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const r=e.delta(hx),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(r).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||t7.getNormalMatrix(e),i=this.coplanarPoint(hx).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}ro.prototype.isPlane=!0;const Uc=new Ua,jg=new E;class Wg{constructor(e=new ro,t=new ro,r=new ro,i=new ro,s=new ro,o=new ro){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const t=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],c=r[5],u=r[6],d=r[7],h=r[8],f=r[9],g=r[10],p=r[11],m=r[12],y=r[13],_=r[14],v=r[15];return t[0].setComponents(a-i,d-l,p-h,v-m).normalize(),t[1].setComponents(a+i,d+l,p+h,v+m).normalize(),t[2].setComponents(a+s,d+c,p+f,v+y).normalize(),t[3].setComponents(a-s,d-c,p-f,v-y).normalize(),t[4].setComponents(a-o,d-u,p-g,v-_).normalize(),t[5].setComponents(a+o,d+u,p+g,v+_).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Uc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Uc)}intersectsSprite(e){return Uc.center.set(0,0,0),Uc.radius=.7071067811865476,Uc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Uc)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(jg.x=i.normal.x>0?e.max.x:e.min.x,jg.y=i.normal.y>0?e.max.y:e.min.y,jg.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(jg)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function sR(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){!0!==e&&null!==t&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function n7(n,e){const t=e.isWebGL2,r=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(n.deleteBuffer(u.buffer),r.delete(c))},update:function l(c,u){if(c.isGLBufferAttribute){const h=r.get(c);return void((!h||h.version<c.version)&&r.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);void 0===d?r.set(c,function i(c,u){const d=c.array,h=c.usage,f=n.createBuffer();let g;if(n.bindBuffer(u,f),n.bufferData(u,d,h),c.onUploadCallback(),d instanceof Float32Array)g=5126;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");g=5131}else g=5123;else if(d instanceof Int16Array)g=5122;else if(d instanceof Uint32Array)g=5125;else if(d instanceof Int32Array)g=5124;else if(d instanceof Int8Array)g=5120;else if(d instanceof Uint8Array)g=5121;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);g=5121}return{buffer:f,type:g,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}(c,u)):d.version<c.version&&(function s(c,u,d){const h=u.array,f=u.updateRange;n.bindBuffer(d,c),-1===f.count?n.bufferSubData(d,0,h):(t?n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h,f.offset,f.count):n.bufferSubData(d,f.offset*h.BYTES_PER_ELEMENT,h.subarray(f.offset,f.offset+f.count)),f.count=-1)}(d.buffer,c,u),d.version=c.version)}}}class lh extends Ue{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,h=t/l,f=[],g=[],p=[],m=[];for(let y=0;y<u;y++){const _=y*h-o;for(let v=0;v<c;v++)g.push(v*d-s,-_,0),p.push(0,0,1),m.push(v/a),m.push(1-y/l)}for(let y=0;y<l;y++)for(let _=0;_<a;_++){const M=_+c*(y+1),w=_+1+c*(y+1),b=_+1+c*y;f.push(_+c*y,M,b),f.push(M,w,b)}this.setIndex(f),this.setAttribute("position",new Se(g,3)),this.setAttribute("normal",new Se(p,3)),this.setAttribute("uv",new Se(m,2))}static fromJSON(e){return new lh(e.width,e.height,e.widthSegments,e.heightSegments)}}const ht={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},he={common:{diffuse:{value:new pe(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Wn},uv2Transform:{value:new Wn},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Q(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new pe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Wn}},sprite:{diffuse:{value:new pe(16777215)},opacity:{value:1},center:{value:new Q(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Wn}}},us={basic:{uniforms:lr([he.common,he.specularmap,he.envmap,he.aomap,he.lightmap,he.fog]),vertexShader:ht.meshbasic_vert,fragmentShader:ht.meshbasic_frag},lambert:{uniforms:lr([he.common,he.specularmap,he.envmap,he.aomap,he.lightmap,he.emissivemap,he.fog,he.lights,{emissive:{value:new pe(0)}}]),vertexShader:ht.meshlambert_vert,fragmentShader:ht.meshlambert_frag},phong:{uniforms:lr([he.common,he.specularmap,he.envmap,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.fog,he.lights,{emissive:{value:new pe(0)},specular:{value:new pe(1118481)},shininess:{value:30}}]),vertexShader:ht.meshphong_vert,fragmentShader:ht.meshphong_frag},standard:{uniforms:lr([he.common,he.envmap,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.roughnessmap,he.metalnessmap,he.fog,he.lights,{emissive:{value:new pe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ht.meshphysical_vert,fragmentShader:ht.meshphysical_frag},toon:{uniforms:lr([he.common,he.aomap,he.lightmap,he.emissivemap,he.bumpmap,he.normalmap,he.displacementmap,he.gradientmap,he.fog,he.lights,{emissive:{value:new pe(0)}}]),vertexShader:ht.meshtoon_vert,fragmentShader:ht.meshtoon_frag},matcap:{uniforms:lr([he.common,he.bumpmap,he.normalmap,he.displacementmap,he.fog,{matcap:{value:null}}]),vertexShader:ht.meshmatcap_vert,fragmentShader:ht.meshmatcap_frag},points:{uniforms:lr([he.points,he.fog]),vertexShader:ht.points_vert,fragmentShader:ht.points_frag},dashed:{uniforms:lr([he.common,he.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ht.linedashed_vert,fragmentShader:ht.linedashed_frag},depth:{uniforms:lr([he.common,he.displacementmap]),vertexShader:ht.depth_vert,fragmentShader:ht.depth_frag},normal:{uniforms:lr([he.common,he.bumpmap,he.normalmap,he.displacementmap,{opacity:{value:1}}]),vertexShader:ht.meshnormal_vert,fragmentShader:ht.meshnormal_frag},sprite:{uniforms:lr([he.sprite,he.fog]),vertexShader:ht.sprite_vert,fragmentShader:ht.sprite_frag},background:{uniforms:{uvTransform:{value:new Wn},t2D:{value:null}},vertexShader:ht.background_vert,fragmentShader:ht.background_frag},cube:{uniforms:lr([he.envmap,{opacity:{value:1}}]),vertexShader:ht.cube_vert,fragmentShader:ht.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ht.equirect_vert,fragmentShader:ht.equirect_frag},distanceRGBA:{uniforms:lr([he.common,he.displacementmap,{referencePosition:{value:new E},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ht.distanceRGBA_vert,fragmentShader:ht.distanceRGBA_frag},shadow:{uniforms:lr([he.lights,he.fog,{color:{value:new pe(0)},opacity:{value:1}}]),vertexShader:ht.shadow_vert,fragmentShader:ht.shadow_frag}};function Kq(n,e,t,r,i,s){const o=new pe(0);let l,c,a=!0===i?0:1,u=null,d=0,h=null;function g(p,m){t.buffers.color.setClear(p.r,p.g,p.b,m,s)}return{getClearColor:function(){return o},setClearColor:function(p,m=1){o.set(p),a=m,g(o,a)},getClearAlpha:function(){return a},setClearAlpha:function(p){a=p,g(o,a)},render:function f(p,m){let y=!1,_=!0===m.isScene?m.background:null;_&&_.isTexture&&(_=e.get(_));const v=n.xr,M=v.getSession&&v.getSession();M&&"additive"===M.environmentBlendMode&&(_=null),null===_?g(o,a):_&&_.isColor&&(g(_,1),y=!0),(n.autoClear||y)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),_&&(_.isCubeTexture||306===_.mapping)?(void 0===c&&(c=new Un(new Bo(1,1,1),new qi({name:"BackgroundCubeMaterial",uniforms:Bc(us.cube.uniforms),vertexShader:us.cube.vertexShader,fragmentShader:us.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(w,b,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=_,c.material.uniforms.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,(u!==_||d!==_.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,u=_,d=_.version,h=n.toneMapping),c.layers.enableAll(),p.unshift(c,c.geometry,c.material,0,0,null)):_&&_.isTexture&&(void 0===l&&(l=new Un(new lh(2,2),new qi({name:"BackgroundMaterial",uniforms:Bc(us.background.uniforms),vertexShader:us.background.vertexShader,fragmentShader:us.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=_,!0===_.matrixAutoUpdate&&_.updateMatrix(),l.material.uniforms.uvTransform.value.copy(_.matrix),(u!==_||d!==_.version||h!==n.toneMapping)&&(l.material.needsUpdate=!0,u=_,d=_.version,h=n.toneMapping),l.layers.enableAll(),p.unshift(l,l.geometry,l.material,0,0,null))}}}function Qq(n,e,t,r){const i=n.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||null!==s,a={},l=m(null);let c=l,u=!1;function f(I){return r.isWebGL2?n.bindVertexArray(I):s.bindVertexArrayOES(I)}function g(I){return r.isWebGL2?n.deleteVertexArray(I):s.deleteVertexArrayOES(I)}function m(I){const G=[],L=[],j=[];for(let Y=0;Y<i;Y++)G[Y]=0,L[Y]=0,j[Y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:G,enabledAttributes:L,attributeDivisors:j,object:I,attributes:{},index:null}}function v(){const I=c.newAttributes;for(let G=0,L=I.length;G<L;G++)I[G]=0}function M(I){w(I,0)}function w(I,G){const j=c.enabledAttributes,Y=c.attributeDivisors;c.newAttributes[I]=1,0===j[I]&&(n.enableVertexAttribArray(I),j[I]=1),Y[I]!==G&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](I,G),Y[I]=G)}function b(){const I=c.newAttributes,G=c.enabledAttributes;for(let L=0,j=G.length;L<j;L++)G[L]!==I[L]&&(n.disableVertexAttribArray(L),G[L]=0)}function S(I,G,L,j,Y,H){!0!==r.isWebGL2||5124!==L&&5125!==L?n.vertexAttribPointer(I,G,L,j,Y,H):n.vertexAttribIPointer(I,G,L,Y,H)}function V(){q(),u=!0,c!==l&&(c=l,f(c.object))}function q(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function d(I,G,L,j,Y){let H=!1;if(o){const $=function p(I,G,L){const j=!0===L.wireframe;let Y=a[I.id];void 0===Y&&(Y={},a[I.id]=Y);let H=Y[G.id];void 0===H&&(H={},Y[G.id]=H);let $=H[j];return void 0===$&&($=m(function h(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),H[j]=$),$}(j,L,G);c!==$&&(c=$,f(c.object)),H=function y(I,G,L,j){const Y=c.attributes,H=G.attributes;let $=0;const se=L.getAttributes();for(const J in se)if(se[J].location>=0){const ve=Y[J];let Ce=H[J];if(void 0===Ce&&("instanceMatrix"===J&&I.instanceMatrix&&(Ce=I.instanceMatrix),"instanceColor"===J&&I.instanceColor&&(Ce=I.instanceColor)),void 0===ve||ve.attribute!==Ce||Ce&&ve.data!==Ce.data)return!0;$++}return c.attributesNum!==$||c.index!==j}(I,j,L,Y),H&&function _(I,G,L,j){const Y={},H=G.attributes;let $=0;const se=L.getAttributes();for(const J in se)if(se[J].location>=0){let ve=H[J];void 0===ve&&("instanceMatrix"===J&&I.instanceMatrix&&(ve=I.instanceMatrix),"instanceColor"===J&&I.instanceColor&&(ve=I.instanceColor));const Ce={};Ce.attribute=ve,ve&&ve.data&&(Ce.data=ve.data),Y[J]=Ce,$++}c.attributes=Y,c.attributesNum=$,c.index=j}(I,j,L,Y)}else{const $=!0===G.wireframe;(c.geometry!==j.id||c.program!==L.id||c.wireframe!==$)&&(c.geometry=j.id,c.program=L.id,c.wireframe=$,H=!0)}null!==Y&&t.update(Y,34963),(H||u)&&(u=!1,function x(I,G,L,j){if(!1===r.isWebGL2&&(I.isInstancedMesh||j.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;v();const Y=j.attributes,H=L.getAttributes(),$=G.defaultAttributeValues;for(const se in H){const J=H[se];if(J.location>=0){let ce=Y[se];if(void 0===ce&&("instanceMatrix"===se&&I.instanceMatrix&&(ce=I.instanceMatrix),"instanceColor"===se&&I.instanceColor&&(ce=I.instanceColor)),void 0!==ce){const ve=ce.normalized,Ce=ce.itemSize,Z=t.get(ce);if(void 0===Z)continue;const Tt=Z.buffer,We=Z.type,ot=Z.bytesPerElement;if(ce.isInterleavedBufferAttribute){const ue=ce.data,mt=ue.stride,ne=ce.offset;if(ue.isInstancedInterleavedBuffer){for(let ee=0;ee<J.locationSize;ee++)w(J.location+ee,ue.meshPerAttribute);!0!==I.isInstancedMesh&&void 0===j._maxInstanceCount&&(j._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let ee=0;ee<J.locationSize;ee++)M(J.location+ee);n.bindBuffer(34962,Tt);for(let ee=0;ee<J.locationSize;ee++)S(J.location+ee,Ce/J.locationSize,We,ve,mt*ot,(ne+Ce/J.locationSize*ee)*ot)}else{if(ce.isInstancedBufferAttribute){for(let ue=0;ue<J.locationSize;ue++)w(J.location+ue,ce.meshPerAttribute);!0!==I.isInstancedMesh&&void 0===j._maxInstanceCount&&(j._maxInstanceCount=ce.meshPerAttribute*ce.count)}else for(let ue=0;ue<J.locationSize;ue++)M(J.location+ue);n.bindBuffer(34962,Tt);for(let ue=0;ue<J.locationSize;ue++)S(J.location+ue,Ce/J.locationSize,We,ve,Ce*ot,Ce/J.locationSize*ue*ot)}}else if(void 0!==$){const ve=$[se];if(void 0!==ve)switch(ve.length){case 2:n.vertexAttrib2fv(J.location,ve);break;case 3:n.vertexAttrib3fv(J.location,ve);break;case 4:n.vertexAttrib4fv(J.location,ve);break;default:n.vertexAttrib1fv(J.location,ve)}}}}b()}(I,G,L,j),null!==Y&&n.bindBuffer(34963,t.get(Y).buffer))},reset:V,resetDefaultState:q,dispose:function C(){V();for(const I in a){const G=a[I];for(const L in G){const j=G[L];for(const Y in j)g(j[Y].object),delete j[Y];delete G[L]}delete a[I]}},releaseStatesOfGeometry:function N(I){if(void 0===a[I.id])return;const G=a[I.id];for(const L in G){const j=G[L];for(const Y in j)g(j[Y].object),delete j[Y];delete G[L]}delete a[I.id]},releaseStatesOfProgram:function P(I){for(const G in a){const L=a[G];if(void 0===L[I.id])continue;const j=L[I.id];for(const Y in j)g(j[Y].object),delete j[Y];delete L[I.id]}},initAttributes:v,enableAttribute:M,disableUnusedAttributes:b}}function eX(n,e,t,r){const i=r.isWebGL2;let s;this.setMode=function o(c){s=c},this.render=function a(c,u){n.drawArrays(s,c,u),t.update(u,s,1)},this.renderInstances=function l(c,u,d){if(0===d)return;let h,f;if(i)h=n,f="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",null===h)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](s,c,u,d),t.update(u,s,d)}}function tX(n,e,t){let r;function s(S){if("highp"===S){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";S="mediump"}return"mediump"===S&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=void 0!==t.precision?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,d=n.getParameter(34930),h=n.getParameter(35660),f=n.getParameter(3379),g=n.getParameter(34076),p=n.getParameter(34921),m=n.getParameter(36347),y=n.getParameter(36348),_=n.getParameter(36349),v=h>0,M=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function i(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const S=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:g,maxAttributes:p,maxVertexUniforms:m,maxVaryings:y,maxFragmentUniforms:_,vertexTextures:v,floatFragmentTextures:M,floatVertexTextures:v&&M,maxSamples:o?n.getParameter(36183):0}}function nX(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new ro,a=new Wn,l={value:null,needsUpdate:!1};function c(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,h,f,g){const p=null!==d?d.length:0;let m=null;if(0!==p){if(m=l.value,!0!==g||null===m){const y=f+4*p,_=h.matrixWorldInverse;a.getNormalMatrix(_),(null===m||m.length<y)&&(m=new Float32Array(y));for(let v=0,M=f;v!==p;++v,M+=4)o.copy(d[v]).applyMatrix4(_,a),o.normal.toArray(m,M),m[M+3]=o.constant}l.value=m,l.needsUpdate=!0}return e.numPlanes=p,e.numIntersection=0,m}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h,f){const g=0!==d.length||h||0!==r||i;return i=h,t=u(d,f,0),r=d.length,g},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(d,h,f){const g=d.clippingPlanes,p=d.clipIntersection,m=d.clipShadows,y=n.get(d);if(!i||null===g||0===g.length||s&&!m)s?u(null):c();else{const _=s?0:r,v=4*_;let M=y.clippingState||null;l.value=M,M=u(g,h,v,f);for(let w=0;w!==v;++w)M[w]=t[w];y.clippingState=M,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=_}}}function rX(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function r(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new iR(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",i),t(c.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}us.physical={uniforms:lr([us.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Q(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new pe(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Q},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new pe(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new pe(1,1,1)},specularColorMap:{value:null}}]),vertexShader:ht.meshphysical_vert,fragmentShader:ht.meshphysical_frag};class ch extends zg{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}ch.prototype.isOrthographicCamera=!0;const oR=[.125,.215,.35,.446,.526,.582],fx=new ch,aR=new pe;let px=null;const ja=(1+Math.sqrt(5))/2,zc=1/ja,lR=[new E(1,1,1),new E(-1,1,1),new E(1,1,-1),new E(-1,1,-1),new E(0,ja,zc),new E(0,ja,-zc),new E(zc,0,ja),new E(-zc,0,ja),new E(ja,zc,0),new E(-ja,zc,0)];class cR{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){px=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=hR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=dR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(px),e.scissorTest=!1,$g(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),px=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Tn,minFilter:Tn,generateMipmaps:!1,type:Kd,format:xi,encoding:Xs,depthBuffer:!1},i=uR(e,t,r);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=uR(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function iX(n){const e=[],t=[],r=[];let i=n;const s=n-4+1+oR.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-4?l=oR[o-n+4-1]:0===o&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],f=6,g=6,p=3,m=2,y=1,_=new Float32Array(p*g*f),v=new Float32Array(m*g*f),M=new Float32Array(y*g*f);for(let b=0;b<f;b++){const S=b%3*2/3-1,x=b>2?0:-1;_.set([S,x,0,S+2/3,x,0,S+2/3,x+1,0,S,x,0,S+2/3,x+1,0,S,x+1,0],p*g*b),v.set(h,m*g*b),M.set([b,b,b,b,b,b],y*g*b)}const w=new Ue;w.setAttribute("position",new Xt(_,p)),w.setAttribute("uv",new Xt(v,m)),w.setAttribute("faceIndex",new Xt(M,y)),e.push(w),i>4&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}(s)),this._blurMaterial=function sX(n,e,t){const r=new Float32Array(20),i=new E(0,1,0);return new qi({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return i}_compileMaterial(e){const t=new Un(this._lodPlanes[0],e);this._renderer.compile(t,fx)}_sceneToCubeUV(e,t,r,i){const a=new Xn(90,1,t,r),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,h=u.toneMapping;u.getClearColor(aR),u.toneMapping=0,u.autoClear=!1;const f=new no({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),g=new Un(new Bo,f);let p=!1;const m=e.background;m?m.isColor&&(f.color.copy(m),e.background=null,p=!0):(f.color.copy(aR),p=!0);for(let y=0;y<6;y++){const _=y%3;0===_?(a.up.set(0,l[y],0),a.lookAt(c[y],0,0)):1===_?(a.up.set(0,0,l[y]),a.lookAt(0,c[y],0)):(a.up.set(0,l[y],0),a.lookAt(0,0,c[y]));const v=this._cubeSize;$g(i,_*v,y>2?v:0,v,v),u.setRenderTarget(i),p&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=h,u.autoClear=d,e.background=m}_textureToCubeUV(e,t){const r=this._renderer,i=301===e.mapping||302===e.mapping;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=hR()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=dR());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Un(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const l=this._cubeSize;$g(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,fx)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]);this._blur(e,i-1,i,s,lR[(i-1)%lR.length])}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new Un(this._lodPlanes[i],c),h=c.uniforms,f=this._sizeLods[r]-1,g=isFinite(s)?Math.PI/(2*f):2*Math.PI/39,p=s/g,m=isFinite(s)?1+Math.floor(3*p):20;m>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const y=[];let _=0;for(let S=0;S<20;++S){const x=S/p,C=Math.exp(-x*x/2);y.push(C),0===S?_+=C:S<m&&(_+=2*C)}for(let S=0;S<y.length;S++)y[S]=y[S]/_;h.envMap.value=e.texture,h.samples.value=m,h.weights.value=y,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:v}=this;h.dTheta.value=g,h.mipInt.value=v-r;const M=this._sizeLods[i];$g(t,3*M*(i>v-4?i-v+4:0),4*(this._cubeSize-M),3*M,2*M),l.setRenderTarget(t),l.render(d,fx)}}function uR(n,e,t){const r=new Jr(n,e,t);return r.texture.mapping=306,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function $g(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function dR(){return new qi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function hR(){return new qi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function oX(n){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function r(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,u=301===l||302===l;if(c||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let d=e.get(a);return null===t&&(t=new cR(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&function i(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(d)){null===t&&(t=new cR(n));const h=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function aX(n){const e={};function t(r){if(void 0!==e[r])return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return null!==t(r)},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return null===i&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function lX(n,e,t,r){const i={},s=new WeakMap;function o(d){const h=d.target;null!==h.index&&e.remove(h.index);for(const g in h.attributes)e.remove(h.attributes[g]);h.removeEventListener("dispose",o),delete i[h.id];const f=s.get(h);f&&(e.remove(f),s.delete(h)),r.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,t.memory.geometries--}function c(d){const h=[],f=d.index,g=d.attributes.position;let p=0;if(null!==f){const _=f.array;p=f.version;for(let v=0,M=_.length;v<M;v+=3){const w=_[v+0],b=_[v+1],S=_[v+2];h.push(w,b,b,S,S,w)}}else{p=g.version;for(let v=0,M=g.array.length/3-1;v<M;v+=3){const w=v+0,b=v+1,S=v+2;h.push(w,b,b,S,S,w)}}const m=new(zI(h)?nR:tR)(h,1);m.version=p;const y=s.get(d);y&&e.remove(y),s.set(d,m)}return{get:function a(d,h){return!0===i[h.id]||(h.addEventListener("dispose",o),i[h.id]=!0,t.memory.geometries++),h},update:function l(d){const h=d.attributes;for(const g in h)e.update(h[g],34962);const f=d.morphAttributes;for(const g in f){const p=f[g];for(let m=0,y=p.length;m<y;m++)e.update(p[m],34962)}},getWireframeAttribute:function u(d){const h=s.get(d);if(h){const f=d.index;null!==f&&h.version<f.version&&c(d)}else c(d);return s.get(d)}}}function cX(n,e,t,r){const i=r.isWebGL2;let s,a,l;this.setMode=function o(h){s=h},this.setIndex=function c(h){a=h.type,l=h.bytesPerElement},this.render=function u(h,f){n.drawElements(s,f,a,h*l),t.update(f,s,1)},this.renderInstances=function d(h,f,g){if(0===g)return;let p,m;if(i)p=n,m="drawElementsInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",null===p)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");p[m](s,f,a,h*l,g),t.update(f,s,g)}}function uX(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function i(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function r(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function dX(n,e){return n[0]-e[0]}function hX(n,e){return Math.abs(e[1])-Math.abs(n[1])}function mx(n,e){let t=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?t=127:r instanceof Int16Array?t=32767:r instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),n.divideScalar(t)}function fX(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new It,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,d,h){const f=c.morphTargetInfluences;if(!0===e.isWebGL2){const g=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,p=void 0!==g?g.length:0;let m=s.get(u);if(void 0===m||m.count!==p){let G=function(){q.dispose(),s.delete(u),u.removeEventListener("dispose",G)};void 0!==m&&m.texture.dispose();const v=void 0!==u.morphAttributes.position,M=void 0!==u.morphAttributes.normal,w=void 0!==u.morphAttributes.color,b=u.morphAttributes.position||[],S=u.morphAttributes.normal||[],x=u.morphAttributes.color||[];let C=0;!0===v&&(C=1),!0===M&&(C=2),!0===w&&(C=3);let N=u.attributes.position.count*C,P=1;N>e.maxTextureSize&&(P=Math.ceil(N/e.maxTextureSize),N=e.maxTextureSize);const V=new Float32Array(N*P*4*p),q=new Eg(V,N,P,p);q.type=No,q.needsUpdate=!0;const I=4*C;for(let L=0;L<p;L++){const j=b[L],Y=S[L],H=x[L],$=N*P*4*L;for(let se=0;se<j.count;se++){const J=se*I;!0===v&&(o.fromBufferAttribute(j,se),!0===j.normalized&&mx(o,j),V[$+J+0]=o.x,V[$+J+1]=o.y,V[$+J+2]=o.z,V[$+J+3]=0),!0===M&&(o.fromBufferAttribute(Y,se),!0===Y.normalized&&mx(o,Y),V[$+J+4]=o.x,V[$+J+5]=o.y,V[$+J+6]=o.z,V[$+J+7]=0),!0===w&&(o.fromBufferAttribute(H,se),!0===H.normalized&&mx(o,H),V[$+J+8]=o.x,V[$+J+9]=o.y,V[$+J+10]=o.z,V[$+J+11]=4===H.itemSize?o.w:1)}}m={count:p,texture:q,size:new Q(N,P)},s.set(u,m),u.addEventListener("dispose",G)}let y=0;for(let v=0;v<f.length;v++)y+=f[v];const _=u.morphTargetsRelative?1:1-y;h.getUniforms().setValue(n,"morphTargetBaseInfluence",_),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",m.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}else{const g=void 0===f?0:f.length;let p=r[u.id];if(void 0===p||p.length!==g){p=[];for(let M=0;M<g;M++)p[M]=[M,0];r[u.id]=p}for(let M=0;M<g;M++){const w=p[M];w[0]=M,w[1]=f[M]}p.sort(hX);for(let M=0;M<8;M++)M<g&&p[M][1]?(a[M][0]=p[M][0],a[M][1]=p[M][1]):(a[M][0]=Number.MAX_SAFE_INTEGER,a[M][1]=0);a.sort(dX);const m=u.morphAttributes.position,y=u.morphAttributes.normal;let _=0;for(let M=0;M<8;M++){const w=a[M],b=w[0],S=w[1];b!==Number.MAX_SAFE_INTEGER&&S?(m&&u.getAttribute("morphTarget"+M)!==m[b]&&u.setAttribute("morphTarget"+M,m[b]),y&&u.getAttribute("morphNormal"+M)!==y[b]&&u.setAttribute("morphNormal"+M,y[b]),i[M]=S,_+=S):(m&&!0===u.hasAttribute("morphTarget"+M)&&u.deleteAttribute("morphTarget"+M),y&&!0===u.hasAttribute("morphNormal"+M)&&u.deleteAttribute("morphNormal"+M),i[M]=0)}const v=u.morphTargetsRelative?1:1-_;h.getUniforms().setValue(n,"morphTargetBaseInfluence",v),h.getUniforms().setValue(n,"morphTargetInfluences",i)}}}}function pX(n,e,t,r){let i=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=r.render.frame,d=e.get(l,l.geometry);return i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),null!==l.instanceColor&&t.update(l.instanceColor,34962)),d},dispose:function o(){i=new WeakMap}}}const fR=new xr,pR=new Eg,gR=new qM,mR=new ah,yR=[],_R=[],vR=new Float32Array(16),MR=new Float32Array(9),xR=new Float32Array(4);function jc(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=yR[i];if(void 0===s&&(s=new Float32Array(i),yR[i]=s),0!==e){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function wr(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function br(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function qg(n,e){let t=_R[e];void 0===t&&(t=new Int32Array(e),_R[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function gX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function mX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(wr(t,e))return;n.uniform2fv(this.addr,e),br(t,e)}}function yX(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(wr(t,e))return;n.uniform3fv(this.addr,e),br(t,e)}}function _X(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(wr(t,e))return;n.uniform4fv(this.addr,e),br(t,e)}}function vX(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(wr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),br(t,e)}else{if(wr(t,r))return;xR.set(r),n.uniformMatrix2fv(this.addr,!1,xR),br(t,r)}}function MX(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(wr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),br(t,e)}else{if(wr(t,r))return;MR.set(r),n.uniformMatrix3fv(this.addr,!1,MR),br(t,r)}}function xX(n,e){const t=this.cache,r=e.elements;if(void 0===r){if(wr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),br(t,e)}else{if(wr(t,r))return;vR.set(r),n.uniformMatrix4fv(this.addr,!1,vR),br(t,r)}}function wX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function bX(n,e){const t=this.cache;wr(t,e)||(n.uniform2iv(this.addr,e),br(t,e))}function CX(n,e){const t=this.cache;wr(t,e)||(n.uniform3iv(this.addr,e),br(t,e))}function SX(n,e){const t=this.cache;wr(t,e)||(n.uniform4iv(this.addr,e),br(t,e))}function EX(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function DX(n,e){const t=this.cache;wr(t,e)||(n.uniform2uiv(this.addr,e),br(t,e))}function TX(n,e){const t=this.cache;wr(t,e)||(n.uniform3uiv(this.addr,e),br(t,e))}function AX(n,e){const t=this.cache;wr(t,e)||(n.uniform4uiv(this.addr,e),br(t,e))}function NX(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||fR,i)}function PX(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||gR,i)}function IX(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||mR,i)}function RX(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||pR,i)}function FX(n,e){n.uniform1fv(this.addr,e)}function LX(n,e){const t=jc(e,this.size,2);n.uniform2fv(this.addr,t)}function kX(n,e){const t=jc(e,this.size,3);n.uniform3fv(this.addr,t)}function BX(n,e){const t=jc(e,this.size,4);n.uniform4fv(this.addr,t)}function VX(n,e){const t=jc(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function GX(n,e){const t=jc(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function UX(n,e){const t=jc(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function HX(n,e){n.uniform1iv(this.addr,e)}function zX(n,e){n.uniform2iv(this.addr,e)}function jX(n,e){n.uniform3iv(this.addr,e)}function WX(n,e){n.uniform4iv(this.addr,e)}function $X(n,e){n.uniform1uiv(this.addr,e)}function qX(n,e){n.uniform2uiv(this.addr,e)}function XX(n,e){n.uniform3uiv(this.addr,e)}function YX(n,e){n.uniform4uiv(this.addr,e)}function ZX(n,e,t){const r=e.length,i=qg(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture2D(e[s]||fR,i[s])}function JX(n,e,t){const r=e.length,i=qg(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture3D(e[s]||gR,i[s])}function KX(n,e,t){const r=e.length,i=qg(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTextureCube(e[s]||mR,i[s])}function QX(n,e,t){const r=e.length,i=qg(t,r);n.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)t.setTexture2DArray(e[s]||pR,i[s])}function tY(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=function OX(n){switch(n){case 5126:return gX;case 35664:return mX;case 35665:return yX;case 35666:return _X;case 35674:return vX;case 35675:return MX;case 35676:return xX;case 5124:case 35670:return wX;case 35667:case 35671:return bX;case 35668:case 35672:return CX;case 35669:case 35673:return SX;case 5125:return EX;case 36294:return DX;case 36295:return TX;case 36296:return AX;case 35678:case 36198:case 36298:case 36306:case 35682:return NX;case 35679:case 36299:case 36307:return PX;case 35680:case 36300:case 36308:case 36293:return IX;case 36289:case 36303:case 36311:case 36292:return RX}}(e.type)}function nY(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=function eY(n){switch(n){case 5126:return FX;case 35664:return LX;case 35665:return kX;case 35666:return BX;case 35674:return VX;case 35675:return GX;case 35676:return UX;case 5124:case 35670:return HX;case 35667:case 35671:return zX;case 35668:case 35672:return jX;case 35669:case 35673:return WX;case 5125:return $X;case 36294:return qX;case 36295:return XX;case 36296:return YX;case 35678:case 36198:case 36298:case 36306:case 35682:return ZX;case 35679:case 36299:case 36307:return JX;case 35680:case 36300:case 36308:case 36293:return KX;case 36289:case 36303:case 36311:case 36292:return QX}}(e.type)}function wR(n){this.id=n,this.seq=[],this.map={}}wR.prototype.setValue=function(n,e,t){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const o=r[i];o.setValue(n,e[o.id],t)}};const yx=/(\w+)(\])?(\[|\.)?/g;function bR(n,e){n.seq.push(e),n.map[e.id]=e}function rY(n,e,t){const r=n.name,i=r.length;for(yx.lastIndex=0;;){const s=yx.exec(r),o=yx.lastIndex;let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&o+2===i){bR(t,void 0===c?new tY(a,n,e):new nY(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new wR(a),bR(t,d)),t=d}}}function Vo(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let r=0;r<t;++r){const i=n.getActiveUniform(e,r);rY(i,n.getUniformLocation(e,i.name),this)}}function CR(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}Vo.prototype.setValue=function(n,e,t,r){const i=this.map[e];void 0!==i&&i.setValue(n,t,r)},Vo.prototype.setOptional=function(n,e,t){const r=e[t];void 0!==r&&this.setValue(n,t,r)},Vo.upload=function(n,e,t,r){for(let i=0,s=e.length;i!==s;++i){const o=e[i],a=t[o.id];!1!==a.needsUpdate&&o.setValue(n,a.value,r)}},Vo.seqWithValue=function(n,e){const t=[];for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.id in e&&t.push(s)}return t};let iY=0;function SR(n,e,t){const r=n.getShaderParameter(e,35713),i=n.getShaderInfoLog(e).trim();if(r&&""===i)return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[0]);return t.toUpperCase()+"\n\n"+i+"\n\n"+function sY(n,e){const t=n.split("\n"),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++)r.push(o+1+": "+t[o]);return r.join("\n")}(n.getShaderSource(e),o)}return i}function aY(n,e){const t=function oY(n){switch(n){case Xs:return["Linear","( value )"];case qt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function lY(n,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function uh(n){return""!==n}function ER(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function DR(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const hY=/^[ \t]*#include +<([\w\d./]+)>/gm;function _x(n){return n.replace(hY,fY)}function fY(n,e){const t=ht[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return _x(t)}const pY=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,gY=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function TR(n){return n.replace(gY,AR).replace(pY,mY)}function mY(n,e,t,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),AR(0,e,t,r)}function AR(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function NR(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function wY(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function yY(n){let e="SHADOWMAP_TYPE_BASIC";return 1===n.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===n.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===n.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function _Y(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function vY(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&302===n.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function MY(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),h=function xY(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:r,maxMip:t}}(t),f=t.isWebGL2?"":function cY(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(uh).join("\n")}(t),g=function uY(n){const e=[];for(const t in n){const r=n[t];!1!==r&&e.push("#define "+t+" "+r)}return e.join("\n")}(s),p=i.createProgram();let m,y,_=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(m=[g].filter(uh).join("\n"),m.length>0&&(m+="\n"),y=[f,g].filter(uh).join("\n"),y.length>0&&(y+="\n")):(m=[NR(t),"#define SHADER_NAME "+t.shaderName,g,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(uh).join("\n"),y=[f,NR(t),"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?ht.tonemapping_pars_fragment:"",0!==t.toneMapping?lY("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ht.encodings_pars_fragment,aY("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(uh).join("\n")),o=_x(o),o=ER(o,t),o=DR(o,t),a=_x(a),a=ER(a,t),a=DR(a,t),o=TR(o),a=TR(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(_="#version 300 es\n",m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,y=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const M=_+y+a,w=CR(i,35633,_+m+o),b=CR(i,35632,M);if(i.attachShader(p,w),i.attachShader(p,b),void 0!==t.index0AttributeName?i.bindAttribLocation(p,0,t.index0AttributeName):!0===t.morphTargets&&i.bindAttribLocation(p,0,"position"),i.linkProgram(p),n.debug.checkShaderErrors){const C=i.getProgramInfoLog(p).trim(),N=i.getShaderInfoLog(w).trim(),P=i.getShaderInfoLog(b).trim();let V=!0,q=!0;if(!1===i.getProgramParameter(p,35714)){V=!1;const I=SR(i,w,"vertex"),G=SR(i,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(p,35715)+"\n\nProgram Info Log: "+C+"\n"+I+"\n"+G)}else""!==C?console.warn("THREE.WebGLProgram: Program Info Log:",C):(""===N||""===P)&&(q=!1);q&&(this.diagnostics={runnable:V,programLog:C,vertexShader:{log:N,prefix:m},fragmentShader:{log:P,prefix:y}})}let S,x;return i.deleteShader(w),i.deleteShader(b),this.getUniforms=function(){return void 0===S&&(S=new Vo(i,p)),S},this.getAttributes=function(){return void 0===x&&(x=function dY(n,e){const t={},r=n.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(i,p)),x},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(p),this.program=void 0},this.name=t.shaderName,this.id=iY++,this.cacheKey=e,this.usedTimes=1,this.program=p,this.vertexShader=w,this.fragmentShader=b,this}let bY=0;class CY{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.fragmentShader,i=this._getShaderStage(e.vertexShader),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return!1===o.has(i)&&(o.add(i),i.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return!1===t.has(e)&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(!1===t.has(e)){const r=new SY(e);t.set(e,r)}return t.get(e)}}class SY{constructor(e){this.id=bY++,this.code=e,this.usedTimes=0}}function EY(n,e,t,r,i,s,o){const a=new Ic,l=new CY,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let f=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function p(x,C,N,P,V){const q=P.fog,I=V.geometry,L=(x.isMeshStandardMaterial?t:e).get(x.envMap||(x.isMeshStandardMaterial?P.environment:null)),j=L&&306===L.mapping?L.image.height:null,Y=g[x.type];null!==x.precision&&(f=i.getMaxPrecision(x.precision),f!==x.precision&&console.warn("THREE.WebGLProgram.getParameters:",x.precision,"not supported, using",f,"instead."));const H=I.morphAttributes.position||I.morphAttributes.normal||I.morphAttributes.color,$=void 0!==H?H.length:0;let J,ce,ve,Ce,se=0;if(void 0!==I.morphAttributes.position&&(se=1),void 0!==I.morphAttributes.normal&&(se=2),void 0!==I.morphAttributes.color&&(se=3),Y){const ue=us[Y];J=ue.vertexShader,ce=ue.fragmentShader}else J=x.vertexShader,ce=x.fragmentShader,l.update(x),ve=l.getVertexShaderID(x),Ce=l.getFragmentShaderID(x);const Z=n.getRenderTarget(),We=x.clearcoat>0;return{isWebGL2:u,shaderID:Y,shaderName:x.type,vertexShader:J,fragmentShader:ce,defines:x.defines,customVertexShaderID:ve,customFragmentShaderID:Ce,isRawShaderMaterial:!0===x.isRawShaderMaterial,glslVersion:x.glslVersion,precision:f,instancing:!0===V.isInstancedMesh,instancingColor:!0===V.isInstancedMesh&&null!==V.instanceColor,supportsVertexTextures:h,outputEncoding:null===Z?n.outputEncoding:!0===Z.isXRRenderTarget?Z.texture.encoding:Xs,map:!!x.map,matcap:!!x.matcap,envMap:!!L,envMapMode:L&&L.mapping,envMapCubeUVHeight:j,lightMap:!!x.lightMap,aoMap:!!x.aoMap,emissiveMap:!!x.emissiveMap,bumpMap:!!x.bumpMap,normalMap:!!x.normalMap,objectSpaceNormalMap:1===x.normalMapType,tangentSpaceNormalMap:0===x.normalMapType,decodeVideoTexture:!!x.map&&!0===x.map.isVideoTexture&&x.map.encoding===qt,clearcoat:We,clearcoatMap:We&&!!x.clearcoatMap,clearcoatRoughnessMap:We&&!!x.clearcoatRoughnessMap,clearcoatNormalMap:We&&!!x.clearcoatNormalMap,displacementMap:!!x.displacementMap,roughnessMap:!!x.roughnessMap,metalnessMap:!!x.metalnessMap,specularMap:!!x.specularMap,specularIntensityMap:!!x.specularIntensityMap,specularColorMap:!!x.specularColorMap,opaque:!1===x.transparent&&1===x.blending,alphaMap:!!x.alphaMap,alphaTest:x.alphaTest>0,gradientMap:!!x.gradientMap,sheen:x.sheen>0,sheenColorMap:!!x.sheenColorMap,sheenRoughnessMap:!!x.sheenRoughnessMap,transmission:x.transmission>0,transmissionMap:!!x.transmissionMap,thicknessMap:!!x.thicknessMap,combine:x.combine,vertexTangents:!!x.normalMap&&!!I.attributes.tangent,vertexColors:x.vertexColors,vertexAlphas:!0===x.vertexColors&&!!I.attributes.color&&4===I.attributes.color.itemSize,vertexUvs:!!(x.map||x.bumpMap||x.normalMap||x.specularMap||x.alphaMap||x.emissiveMap||x.roughnessMap||x.metalnessMap||x.clearcoatMap||x.clearcoatRoughnessMap||x.clearcoatNormalMap||x.displacementMap||x.transmissionMap||x.thicknessMap||x.specularIntensityMap||x.specularColorMap||x.sheenColorMap||x.sheenRoughnessMap),uvsVertexOnly:!(x.map||x.bumpMap||x.normalMap||x.specularMap||x.alphaMap||x.emissiveMap||x.roughnessMap||x.metalnessMap||x.clearcoatNormalMap||x.transmission>0||x.transmissionMap||x.thicknessMap||x.specularIntensityMap||x.specularColorMap||x.sheen>0||x.sheenColorMap||x.sheenRoughnessMap||!x.displacementMap),fog:!!q,useFog:!0===x.fog,fogExp2:q&&q.isFogExp2,flatShading:!!x.flatShading,sizeAttenuation:x.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===V.isSkinnedMesh,morphTargets:void 0!==I.morphAttributes.position,morphNormals:void 0!==I.morphAttributes.normal,morphColors:void 0!==I.morphAttributes.color,morphTargetsCount:$,morphTextureStride:se,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:x.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:x.toneMapped?n.toneMapping:0,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:x.premultipliedAlpha,doubleSided:2===x.side,flipSided:1===x.side,useDepthPacking:!!x.depthPacking,depthPacking:x.depthPacking||0,index0AttributeName:x.index0AttributeName,extensionDerivatives:x.extensions&&x.extensions.derivatives,extensionFragDepth:x.extensions&&x.extensions.fragDepth,extensionDrawBuffers:x.extensions&&x.extensions.drawBuffers,extensionShaderTextureLOD:x.extensions&&x.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:x.customProgramCacheKey()}},getProgramCacheKey:function m(x){const C=[];if(x.shaderID?C.push(x.shaderID):(C.push(x.customVertexShaderID),C.push(x.customFragmentShaderID)),void 0!==x.defines)for(const N in x.defines)C.push(N),C.push(x.defines[N]);return!1===x.isRawShaderMaterial&&(function y(x,C){x.push(C.precision),x.push(C.outputEncoding),x.push(C.envMapMode),x.push(C.envMapCubeUVHeight),x.push(C.combine),x.push(C.vertexUvs),x.push(C.fogExp2),x.push(C.sizeAttenuation),x.push(C.morphTargetsCount),x.push(C.morphAttributeCount),x.push(C.numDirLights),x.push(C.numPointLights),x.push(C.numSpotLights),x.push(C.numHemiLights),x.push(C.numRectAreaLights),x.push(C.numDirLightShadows),x.push(C.numPointLightShadows),x.push(C.numSpotLightShadows),x.push(C.shadowMapType),x.push(C.toneMapping),x.push(C.numClippingPlanes),x.push(C.numClipIntersection),x.push(C.depthPacking)}(C,x),function _(x,C){a.disableAll(),C.isWebGL2&&a.enable(0),C.supportsVertexTextures&&a.enable(1),C.instancing&&a.enable(2),C.instancingColor&&a.enable(3),C.map&&a.enable(4),C.matcap&&a.enable(5),C.envMap&&a.enable(6),C.lightMap&&a.enable(7),C.aoMap&&a.enable(8),C.emissiveMap&&a.enable(9),C.bumpMap&&a.enable(10),C.normalMap&&a.enable(11),C.objectSpaceNormalMap&&a.enable(12),C.tangentSpaceNormalMap&&a.enable(13),C.clearcoat&&a.enable(14),C.clearcoatMap&&a.enable(15),C.clearcoatRoughnessMap&&a.enable(16),C.clearcoatNormalMap&&a.enable(17),C.displacementMap&&a.enable(18),C.specularMap&&a.enable(19),C.roughnessMap&&a.enable(20),C.metalnessMap&&a.enable(21),C.gradientMap&&a.enable(22),C.alphaMap&&a.enable(23),C.alphaTest&&a.enable(24),C.vertexColors&&a.enable(25),C.vertexAlphas&&a.enable(26),C.vertexUvs&&a.enable(27),C.vertexTangents&&a.enable(28),C.uvsVertexOnly&&a.enable(29),C.fog&&a.enable(30),x.push(a.mask),a.disableAll(),C.useFog&&a.enable(0),C.flatShading&&a.enable(1),C.logarithmicDepthBuffer&&a.enable(2),C.skinning&&a.enable(3),C.morphTargets&&a.enable(4),C.morphNormals&&a.enable(5),C.morphColors&&a.enable(6),C.premultipliedAlpha&&a.enable(7),C.shadowMapEnabled&&a.enable(8),C.physicallyCorrectLights&&a.enable(9),C.doubleSided&&a.enable(10),C.flipSided&&a.enable(11),C.useDepthPacking&&a.enable(12),C.dithering&&a.enable(13),C.specularIntensityMap&&a.enable(14),C.specularColorMap&&a.enable(15),C.transmission&&a.enable(16),C.transmissionMap&&a.enable(17),C.thicknessMap&&a.enable(18),C.sheen&&a.enable(19),C.sheenColorMap&&a.enable(20),C.sheenRoughnessMap&&a.enable(21),C.decodeVideoTexture&&a.enable(22),C.opaque&&a.enable(23),x.push(a.mask)}(C,x),C.push(n.outputEncoding)),C.push(x.customProgramCacheKey),C.join()},getUniforms:function v(x){const C=g[x.type];let N;return N=C?J9.clone(us[C].uniforms):x.uniforms,N},acquireProgram:function M(x,C){let N;for(let P=0,V=c.length;P<V;P++){const q=c[P];if(q.cacheKey===C){N=q,++N.usedTimes;break}}return void 0===N&&(N=new wY(n,C,x,s),c.push(N)),N},releaseProgram:function w(x){if(0==--x.usedTimes){const C=c.indexOf(x);c[C]=c[c.length-1],c.pop(),x.destroy()}},releaseShaderCache:function b(x){l.remove(x)},programs:c,dispose:function S(){l.dispose()}}}function DY(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function r(s,o,a){n.get(s)[o]=a},dispose:function i(){n=new WeakMap}}}function TY(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function PR(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function IR(){const n=[];let e=0;const t=[],r=[],i=[];function o(d,h,f,g,p,m){let y=n[e];return void 0===y?(y={id:d.id,object:d,geometry:h,material:f,groupOrder:g,renderOrder:d.renderOrder,z:p,group:m},n[e]=y):(y.id=d.id,y.object=d,y.geometry=h,y.material=f,y.groupOrder=g,y.renderOrder=d.renderOrder,y.z=p,y.group=m),e++,y}return{opaque:t,transmissive:r,transparent:i,init:function s(){e=0,t.length=0,r.length=0,i.length=0},push:function a(d,h,f,g,p,m){const y=o(d,h,f,g,p,m);f.transmission>0?r.push(y):!0===f.transparent?i.push(y):t.push(y)},unshift:function l(d,h,f,g,p,m){const y=o(d,h,f,g,p,m);f.transmission>0?r.unshift(y):!0===f.transparent?i.unshift(y):t.unshift(y)},finish:function u(){for(let d=e,h=n.length;d<h;d++){const f=n[d];if(null===f.id)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}},sort:function c(d,h){t.length>1&&t.sort(d||TY),r.length>1&&r.sort(h||PR),i.length>1&&i.sort(h||PR)}}}function AY(){let n=new WeakMap;return{get:function e(r,i){let s;return!1===n.has(r)?(s=new IR,n.set(r,[s])):i>=n.get(r).length?(s=new IR,n.get(r).push(s)):s=n.get(r)[i],s},dispose:function t(){n=new WeakMap}}}function NY(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new E,color:new pe};break;case"SpotLight":t={position:new E,direction:new E,color:new pe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new E,color:new pe,distance:0,decay:0};break;case"HemisphereLight":t={direction:new E,skyColor:new pe,groundColor:new pe};break;case"RectAreaLight":t={color:new pe,position:new E,halfWidth:new E,halfHeight:new E}}return n[e.id]=t,t}}}let IY=0;function RY(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function OY(n,e){const t=new NY,r=function PY(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Q};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Q,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)i.probe.push(new E);const s=new E,o=new Ee,a=new Ee;return{setup:function l(u,d){let h=0,f=0,g=0;for(let C=0;C<9;C++)i.probe[C].set(0,0,0);let p=0,m=0,y=0,_=0,v=0,M=0,w=0,b=0;u.sort(RY);const S=!0!==d?Math.PI:1;for(let C=0,N=u.length;C<N;C++){const P=u[C],V=P.color,q=P.intensity,I=P.distance,G=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)h+=V.r*q*S,f+=V.g*q*S,g+=V.b*q*S;else if(P.isLightProbe)for(let L=0;L<9;L++)i.probe[L].addScaledVector(P.sh.coefficients[L],q);else if(P.isDirectionalLight){const L=t.get(P);if(L.color.copy(P.color).multiplyScalar(P.intensity*S),P.castShadow){const j=P.shadow,Y=r.get(P);Y.shadowBias=j.bias,Y.shadowNormalBias=j.normalBias,Y.shadowRadius=j.radius,Y.shadowMapSize=j.mapSize,i.directionalShadow[p]=Y,i.directionalShadowMap[p]=G,i.directionalShadowMatrix[p]=P.shadow.matrix,M++}i.directional[p]=L,p++}else if(P.isSpotLight){const L=t.get(P);if(L.position.setFromMatrixPosition(P.matrixWorld),L.color.copy(V).multiplyScalar(q*S),L.distance=I,L.coneCos=Math.cos(P.angle),L.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),L.decay=P.decay,P.castShadow){const j=P.shadow,Y=r.get(P);Y.shadowBias=j.bias,Y.shadowNormalBias=j.normalBias,Y.shadowRadius=j.radius,Y.shadowMapSize=j.mapSize,i.spotShadow[y]=Y,i.spotShadowMap[y]=G,i.spotShadowMatrix[y]=P.shadow.matrix,b++}i.spot[y]=L,y++}else if(P.isRectAreaLight){const L=t.get(P);L.color.copy(V).multiplyScalar(q),L.halfWidth.set(.5*P.width,0,0),L.halfHeight.set(0,.5*P.height,0),i.rectArea[_]=L,_++}else if(P.isPointLight){const L=t.get(P);if(L.color.copy(P.color).multiplyScalar(P.intensity*S),L.distance=P.distance,L.decay=P.decay,P.castShadow){const j=P.shadow,Y=r.get(P);Y.shadowBias=j.bias,Y.shadowNormalBias=j.normalBias,Y.shadowRadius=j.radius,Y.shadowMapSize=j.mapSize,Y.shadowCameraNear=j.camera.near,Y.shadowCameraFar=j.camera.far,i.pointShadow[m]=Y,i.pointShadowMap[m]=G,i.pointShadowMatrix[m]=P.shadow.matrix,w++}i.point[m]=L,m++}else if(P.isHemisphereLight){const L=t.get(P);L.skyColor.copy(P.color).multiplyScalar(q*S),L.groundColor.copy(P.groundColor).multiplyScalar(q*S),i.hemi[v]=L,v++}}_>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(i.rectAreaLTC1=he.LTC_FLOAT_1,i.rectAreaLTC2=he.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=he.LTC_HALF_1,i.rectAreaLTC2=he.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=f,i.ambient[2]=g;const x=i.hash;(x.directionalLength!==p||x.pointLength!==m||x.spotLength!==y||x.rectAreaLength!==_||x.hemiLength!==v||x.numDirectionalShadows!==M||x.numPointShadows!==w||x.numSpotShadows!==b)&&(i.directional.length=p,i.spot.length=y,i.rectArea.length=_,i.point.length=m,i.hemi.length=v,i.directionalShadow.length=M,i.directionalShadowMap.length=M,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=b,i.spotShadowMap.length=b,i.directionalShadowMatrix.length=M,i.pointShadowMatrix.length=w,i.spotShadowMatrix.length=b,x.directionalLength=p,x.pointLength=m,x.spotLength=y,x.rectAreaLength=_,x.hemiLength=v,x.numDirectionalShadows=M,x.numPointShadows=w,x.numSpotShadows=b,i.version=IY++)},setupView:function c(u,d){let h=0,f=0,g=0,p=0,m=0;const y=d.matrixWorldInverse;for(let _=0,v=u.length;_<v;_++){const M=u[_];if(M.isDirectionalLight){const w=i.directional[h];w.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(y),h++}else if(M.isSpotLight){const w=i.spot[g];w.position.setFromMatrixPosition(M.matrixWorld),w.position.applyMatrix4(y),w.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(y),g++}else if(M.isRectAreaLight){const w=i.rectArea[p];w.position.setFromMatrixPosition(M.matrixWorld),w.position.applyMatrix4(y),a.identity(),o.copy(M.matrixWorld),o.premultiply(y),a.extractRotation(o),w.halfWidth.set(.5*M.width,0,0),w.halfHeight.set(0,.5*M.height,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),p++}else if(M.isPointLight){const w=i.point[f];w.position.setFromMatrixPosition(M.matrixWorld),w.position.applyMatrix4(y),f++}else if(M.isHemisphereLight){const w=i.hemi[m];w.direction.setFromMatrixPosition(M.matrixWorld),w.direction.transformDirection(y),m++}}},state:i}}function RR(n,e){const t=new OY(n,e),r=[],i=[];return{init:function s(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:function l(d){t.setup(r,d)},setupLightsView:function c(d){t.setupView(r,d)},pushLight:function o(d){r.push(d)},pushShadow:function a(d){i.push(d)}}}function FY(n,e){let t=new WeakMap;return{get:function r(s,o=0){let a;return!1===t.has(s)?(a=new RR(n,e),t.set(s,[a])):o>=t.get(s).length?(a=new RR(n,e),t.get(s).push(a)):a=t.get(s)[o],a},dispose:function i(){t=new WeakMap}}}class vx extends Nn{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}vx.prototype.isMeshDepthMaterial=!0;class Mx extends Nn{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new E,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function OR(n,e,t){let r=new Wg;const i=new Q,s=new Q,o=new It,a=new vx({depthPacking:3201}),l=new Mx,c={},u=t.maxTextureSize,d={0:1,1:0,2:2},h=new qi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Q},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONTAL_PASS=1;const g=new Ue;g.setAttribute("position",new Xt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new Un(g,h),m=this;function y(M,w){const b=e.update(p);h.defines.VSM_SAMPLES!==M.blurSamples&&(h.defines.VSM_SAMPLES=M.blurSamples,f.defines.VSM_SAMPLES=M.blurSamples,h.needsUpdate=!0,f.needsUpdate=!0),h.uniforms.shadow_pass.value=M.map.texture,h.uniforms.resolution.value=M.mapSize,h.uniforms.radius.value=M.radius,n.setRenderTarget(M.mapPass),n.clear(),n.renderBufferDirect(w,null,b,h,p,null),f.uniforms.shadow_pass.value=M.mapPass.texture,f.uniforms.resolution.value=M.mapSize,f.uniforms.radius.value=M.radius,n.setRenderTarget(M.map),n.clear(),n.renderBufferDirect(w,null,b,f,p,null)}function _(M,w,b,S,x,C){let N=null;const P=!0===b.isPointLight?M.customDistanceMaterial:M.customDepthMaterial;if(N=void 0!==P?P:!0===b.isPointLight?l:a,n.localClippingEnabled&&!0===w.clipShadows&&0!==w.clippingPlanes.length||w.displacementMap&&0!==w.displacementScale||w.alphaMap&&w.alphaTest>0){const V=N.uuid,q=w.uuid;let I=c[V];void 0===I&&(I={},c[V]=I);let G=I[q];void 0===G&&(G=N.clone(),I[q]=G),N=G}return N.visible=w.visible,N.wireframe=w.wireframe,N.side=3===C?null!==w.shadowSide?w.shadowSide:w.side:null!==w.shadowSide?w.shadowSide:d[w.side],N.alphaMap=w.alphaMap,N.alphaTest=w.alphaTest,N.clipShadows=w.clipShadows,N.clippingPlanes=w.clippingPlanes,N.clipIntersection=w.clipIntersection,N.displacementMap=w.displacementMap,N.displacementScale=w.displacementScale,N.displacementBias=w.displacementBias,N.wireframeLinewidth=w.wireframeLinewidth,N.linewidth=w.linewidth,!0===b.isPointLight&&!0===N.isMeshDistanceMaterial&&(N.referencePosition.setFromMatrixPosition(b.matrixWorld),N.nearDistance=S,N.farDistance=x),N}function v(M,w,b,S,x){if(!1===M.visible)return;if(M.layers.test(w.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&3===x)&&(!M.frustumCulled||r.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,M.matrixWorld);const P=e.update(M),V=M.material;if(Array.isArray(V)){const q=P.groups;for(let I=0,G=q.length;I<G;I++){const L=q[I],j=V[L.materialIndex];if(j&&j.visible){const Y=_(M,j,S,b.near,b.far,x);n.renderBufferDirect(b,null,P,Y,M,L)}}}else if(V.visible){const q=_(M,V,S,b.near,b.far,x);n.renderBufferDirect(b,null,P,q,M,null)}}const N=M.children;for(let P=0,V=N.length;P<V;P++)v(N[P],w,b,S,x)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(M,w,b){if(!1===m.enabled||!1===m.autoUpdate&&!1===m.needsUpdate||0===M.length)return;const S=n.getRenderTarget(),x=n.getActiveCubeFace(),C=n.getActiveMipmapLevel(),N=n.state;N.setBlending(0),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);for(let P=0,V=M.length;P<V;P++){const q=M[P],I=q.shadow;if(void 0===I){console.warn("THREE.WebGLShadowMap:",q,"has no shadow.");continue}if(!1===I.autoUpdate&&!1===I.needsUpdate)continue;i.copy(I.mapSize);const G=I.getFrameExtents();i.multiply(G),s.copy(I.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/G.x),i.x=s.x*G.x,I.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/G.y),i.y=s.y*G.y,I.mapSize.y=s.y)),null===I.map&&!I.isPointLightShadow&&3===this.type&&(I.map=new Jr(i.x,i.y),I.map.texture.name=q.name+".shadowMap",I.mapPass=new Jr(i.x,i.y),I.camera.updateProjectionMatrix()),null===I.map&&(I.map=new Jr(i.x,i.y,{minFilter:Vn,magFilter:Vn,format:xi}),I.map.texture.name=q.name+".shadowMap",I.camera.updateProjectionMatrix()),n.setRenderTarget(I.map),n.clear();const L=I.getViewportCount();for(let j=0;j<L;j++){const Y=I.getViewport(j);o.set(s.x*Y.x,s.y*Y.y,s.x*Y.z,s.y*Y.w),N.viewport(o),I.updateMatrices(q,j),r=I.getFrustum(),v(w,b,I.camera,q,this.type)}!I.isPointLightShadow&&3===this.type&&y(I,b),I.needsUpdate=!1}m.needsUpdate=!1,n.setRenderTarget(S,x,C)}}function BY(n,e,t){const r=t.isWebGL2,a=new function i(){let R=!1;const ge=new It;let de=null;const $e=new It(0,0,0,0);return{setMask:function(be){de!==be&&!R&&(n.colorMask(be,be,be,be),de=be)},setLocked:function(be){R=be},setClear:function(be,ze,le,qe,Rt){!0===Rt&&(be*=qe,ze*=qe,le*=qe),ge.set(be,ze,le,qe),!1===$e.equals(ge)&&(n.clearColor(be,ze,le,qe),$e.copy(ge))},reset:function(){R=!1,de=null,$e.set(-1,0,0,0)}}},l=new function s(){let R=!1,ge=null,de=null,$e=null;return{setTest:function(be){be?Ce(2929):Z(2929)},setMask:function(be){ge!==be&&!R&&(n.depthMask(be),ge=be)},setFunc:function(be){if(de!==be){if(be)switch(be){case 0:n.depthFunc(512);break;case 1:n.depthFunc(519);break;case 2:n.depthFunc(513);break;case 3:default:n.depthFunc(515);break;case 4:n.depthFunc(514);break;case 5:n.depthFunc(518);break;case 6:n.depthFunc(516);break;case 7:n.depthFunc(517)}else n.depthFunc(515);de=be}},setLocked:function(be){R=be},setClear:function(be){$e!==be&&(n.clearDepth(be),$e=be)},reset:function(){R=!1,ge=null,de=null,$e=null}}},c=new function o(){let R=!1,ge=null,de=null,$e=null,be=null,ze=null,le=null,qe=null,Rt=null;return{setTest:function(Mt){R||(Mt?Ce(2960):Z(2960))},setMask:function(Mt){ge!==Mt&&!R&&(n.stencilMask(Mt),ge=Mt)},setFunc:function(Mt,vs,Ms){(de!==Mt||$e!==vs||be!==Ms)&&(n.stencilFunc(Mt,vs,Ms),de=Mt,$e=vs,be=Ms)},setOp:function(Mt,vs,Ms){(ze!==Mt||le!==vs||qe!==Ms)&&(n.stencilOp(Mt,vs,Ms),ze=Mt,le=vs,qe=Ms)},setLocked:function(Mt){R=Mt},setClear:function(Mt){Rt!==Mt&&(n.clearStencil(Mt),Rt=Mt)},reset:function(){R=!1,ge=null,de=null,$e=null,be=null,ze=null,le=null,qe=null,Rt=null}}};let u={},d={},h=new WeakMap,f=[],g=null,p=!1,m=null,y=null,_=null,v=null,M=null,w=null,b=null,S=!1,x=null,C=null,N=null,P=null,V=null;const q=n.getParameter(35661);let I=!1,G=0;const L=n.getParameter(7938);-1!==L.indexOf("WebGL")?(G=parseFloat(/^WebGL (\d)/.exec(L)[1]),I=G>=1):-1!==L.indexOf("OpenGL ES")&&(G=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),I=G>=2);let j=null,Y={};const H=n.getParameter(3088),$=n.getParameter(2978),se=(new It).fromArray(H),J=(new It).fromArray($);function ce(R,ge,de){const $e=new Uint8Array(4),be=n.createTexture();n.bindTexture(R,be),n.texParameteri(R,10241,9728),n.texParameteri(R,10240,9728);for(let ze=0;ze<de;ze++)n.texImage2D(ge+ze,0,6408,1,1,0,6408,5121,$e);return be}const ve={};function Ce(R){!0!==u[R]&&(n.enable(R),u[R]=!0)}function Z(R){!1!==u[R]&&(n.disable(R),u[R]=!1)}ve[3553]=ce(3553,3553,1),ve[34067]=ce(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Ce(2929),l.setFunc(3),ae(!1),De(1),Ce(2884),ne(0);const ue={100:32774,101:32778,102:32779};if(r)ue[103]=32775,ue[104]=32776;else{const R=e.get("EXT_blend_minmax");null!==R&&(ue[103]=R.MIN_EXT,ue[104]=R.MAX_EXT)}const mt={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function ne(R,ge,de,$e,be,ze,le,qe){if(0!==R){if(!1===p&&(Ce(3042),p=!0),5===R)be=be||ge,ze=ze||de,le=le||$e,(ge!==y||be!==M)&&(n.blendEquationSeparate(ue[ge],ue[be]),y=ge,M=be),(de!==_||$e!==v||ze!==w||le!==b)&&(n.blendFuncSeparate(mt[de],mt[$e],mt[ze],mt[le]),_=de,v=$e,w=ze,b=le),m=R,S=null;else if(R!==m||qe!==S){if((100!==y||100!==M)&&(n.blendEquation(32774),y=100,M=100),qe)switch(R){case 1:n.blendFuncSeparate(1,771,1,771);break;case 2:n.blendFunc(1,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",R)}else switch(R){case 1:n.blendFuncSeparate(770,771,1,771);break;case 2:n.blendFunc(770,1);break;case 3:n.blendFuncSeparate(0,769,0,1);break;case 4:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",R)}_=null,v=null,w=null,b=null,m=R,S=qe}}else!0===p&&(Z(3042),p=!1)}function ae(R){x!==R&&(n.frontFace(R?2304:2305),x=R)}function De(R){0!==R?(Ce(2884),R!==C&&n.cullFace(1===R?1029:2===R?1028:1032)):Z(2884),C=R}function tt(R,ge,de){R?(Ce(32823),(P!==ge||V!==de)&&(n.polygonOffset(ge,de),P=ge,V=de)):Z(32823)}function ke(R){void 0===R&&(R=33984+q-1),j!==R&&(n.activeTexture(R),j=R)}return{buffers:{color:a,depth:l,stencil:c},enable:Ce,disable:Z,bindFramebuffer:function Tt(R,ge){return d[R]!==ge&&(n.bindFramebuffer(R,ge),d[R]=ge,r&&(36009===R&&(d[36160]=ge),36160===R&&(d[36009]=ge)),!0)},drawBuffers:function We(R,ge){let de=f,$e=!1;if(R)if(de=h.get(ge),void 0===de&&(de=[],h.set(ge,de)),R.isWebGLMultipleRenderTargets){const be=R.texture;if(de.length!==be.length||36064!==de[0]){for(let ze=0,le=be.length;ze<le;ze++)de[ze]=36064+ze;de.length=be.length,$e=!0}}else 36064!==de[0]&&(de[0]=36064,$e=!0);else 1029!==de[0]&&(de[0]=1029,$e=!0);$e&&(t.isWebGL2?n.drawBuffers(de):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(de))},useProgram:function ot(R){return g!==R&&(n.useProgram(R),g=R,!0)},setBlending:ne,setMaterial:function ee(R,ge){2===R.side?Z(2884):Ce(2884);let de=1===R.side;ge&&(de=!de),ae(de),1===R.blending&&!1===R.transparent?ne(0):ne(R.blending,R.blendEquation,R.blendSrc,R.blendDst,R.blendEquationAlpha,R.blendSrcAlpha,R.blendDstAlpha,R.premultipliedAlpha),l.setFunc(R.depthFunc),l.setTest(R.depthTest),l.setMask(R.depthWrite),a.setMask(R.colorWrite);const $e=R.stencilWrite;c.setTest($e),$e&&(c.setMask(R.stencilWriteMask),c.setFunc(R.stencilFunc,R.stencilRef,R.stencilFuncMask),c.setOp(R.stencilFail,R.stencilZFail,R.stencilZPass)),tt(R.polygonOffset,R.polygonOffsetFactor,R.polygonOffsetUnits),!0===R.alphaToCoverage?Ce(32926):Z(32926)},setFlipSided:ae,setCullFace:De,setLineWidth:function _e(R){R!==N&&(I&&n.lineWidth(R),N=R)},setPolygonOffset:tt,setScissorTest:function He(R){R?Ce(3089):Z(3089)},activeTexture:ke,bindTexture:function Jt(R,ge){null===j&&ke();let de=Y[j];void 0===de&&(de={type:void 0,texture:void 0},Y[j]=de),(de.type!==R||de.texture!==ge)&&(n.bindTexture(R,ge||ve[R]),de.type=R,de.texture=ge)},unbindTexture:function zt(){const R=Y[j];void 0!==R&&void 0!==R.type&&(n.bindTexture(R.type,null),R.type=void 0,R.texture=void 0)},compressedTexImage2D:function A(){try{n.compressedTexImage2D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},texImage2D:function Ge(){try{n.texImage2D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},texImage3D:function X(){try{n.texImage3D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},texStorage2D:function ye(){try{n.texStorage2D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},texStorage3D:function we(){try{n.texStorage3D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},texSubImage2D:function D(){try{n.texSubImage2D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},texSubImage3D:function W(){try{n.texSubImage3D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},compressedTexSubImage2D:function ie(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(R){console.error("THREE.WebGLState:",R)}},scissor:function it(R){!1===se.equals(R)&&(n.scissor(R.x,R.y,R.z,R.w),se.copy(R))},viewport:function ct(R){!1===J.equals(R)&&(n.viewport(R.x,R.y,R.z,R.w),J.copy(R))},reset:function Te(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),!0===r&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},j=null,Y={},d={},h=new WeakMap,f=[],g=null,p=!1,m=null,y=null,_=null,v=null,M=null,w=null,b=null,S=!1,x=null,C=null,N=null,P=null,V=null,se.set(0,0,n.canvas.width,n.canvas.height),J.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function VY(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,d=i.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let p;const m=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function _(A,D){return y?new OffscreenCanvas(A,D):rh("canvas")}function v(A,D,W,ie){let ye=1;if((A.width>ie||A.height>ie)&&(ye=ie/Math.max(A.width,A.height)),ye<1||!0===D){if(typeof HTMLImageElement<"u"&&A instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&A instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&A instanceof ImageBitmap){const we=D?wg:Math.floor,Ge=we(ye*A.width),X=we(ye*A.height);void 0===p&&(p=_(Ge,X));const it=W?_(Ge,X):p;return it.width=Ge,it.height=X,it.getContext("2d").drawImage(A,0,0,Ge,X),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+A.width+"x"+A.height+") to ("+Ge+"x"+X+")."),it}return"data"in A&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+A.width+"x"+A.height+")."),A}return A}function M(A){return zM(A.width)&&zM(A.height)}function b(A,D){return A.generateMipmaps&&D&&A.minFilter!==Vn&&A.minFilter!==Tn}function S(A){n.generateMipmap(A)}function x(A,D,W,ie,ye=!1){if(!1===a)return D;if(null!==A){if(void 0!==n[A])return n[A];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+A+"'")}let we=D;return 6403===D&&(5126===W&&(we=33326),5131===W&&(we=33325),5121===W&&(we=33321)),33319===D&&(5126===W&&(we=33328),5131===W&&(we=33327),5121===W&&(we=33323)),6408===D&&(5126===W&&(we=34836),5131===W&&(we=34842),5121===W&&(we=ie===qt&&!1===ye?35907:32856),32819===W&&(we=32854),32820===W&&(we=32855)),(33325===we||33326===we||33327===we||33328===we||34842===we||34836===we)&&e.get("EXT_color_buffer_float"),we}function C(A,D,W){return!0===b(A,W)||A.isFramebufferTexture&&A.minFilter!==Vn&&A.minFilter!==Tn?Math.log2(Math.max(D.width,D.height))+1:void 0!==A.mipmaps&&A.mipmaps.length>0?A.mipmaps.length:A.isCompressedTexture&&Array.isArray(A.image)?D.mipmaps.length:1}function N(A){return A===Vn||1004===A||1005===A?9728:9729}function P(A){const D=A.target;D.removeEventListener("dispose",P),function q(A){const D=r.get(A);if(void 0===D.__webglInit)return;const W=A.source,ie=m.get(W);if(ie){const ye=ie[D.__cacheKey];ye.usedTimes--,0===ye.usedTimes&&I(A),0===Object.keys(ie).length&&m.delete(W)}r.remove(A)}(D),D.isVideoTexture&&g.delete(D)}function V(A){const D=A.target;D.removeEventListener("dispose",V),function G(A){const D=A.texture,W=r.get(A),ie=r.get(D);if(void 0!==ie.__webglTexture&&(n.deleteTexture(ie.__webglTexture),o.memory.textures--),A.depthTexture&&A.depthTexture.dispose(),A.isWebGLCubeRenderTarget)for(let ye=0;ye<6;ye++)n.deleteFramebuffer(W.__webglFramebuffer[ye]),W.__webglDepthbuffer&&n.deleteRenderbuffer(W.__webglDepthbuffer[ye]);else n.deleteFramebuffer(W.__webglFramebuffer),W.__webglDepthbuffer&&n.deleteRenderbuffer(W.__webglDepthbuffer),W.__webglMultisampledFramebuffer&&n.deleteFramebuffer(W.__webglMultisampledFramebuffer),W.__webglColorRenderbuffer&&n.deleteRenderbuffer(W.__webglColorRenderbuffer),W.__webglDepthRenderbuffer&&n.deleteRenderbuffer(W.__webglDepthRenderbuffer);if(A.isWebGLMultipleRenderTargets)for(let ye=0,we=D.length;ye<we;ye++){const Ge=r.get(D[ye]);Ge.__webglTexture&&(n.deleteTexture(Ge.__webglTexture),o.memory.textures--),r.remove(D[ye])}r.remove(D),r.remove(A)}(D)}function I(A){const D=r.get(A);n.deleteTexture(D.__webglTexture),delete m.get(A.source)[D.__cacheKey],o.memory.textures--}let L=0;function $(A,D){const W=r.get(A);if(A.isVideoTexture&&function Jt(A){const D=o.render.frame;g.get(A)!==D&&(g.set(A,D),A.update())}(A),!1===A.isRenderTargetTexture&&A.version>0&&W.__version!==A.version){const ie=A.image;if(null===ie)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==ie.complete)return void We(W,A,D);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.activeTexture(33984+D),t.bindTexture(3553,W.__webglTexture)}const ve={1e3:10497,[Ir]:33071,1002:33648},Ce={[Vn]:9728,1004:9984,1005:9986,[Tn]:9729,1007:9985,1008:9987};function Z(A,D,W){if(W?(n.texParameteri(A,10242,ve[D.wrapS]),n.texParameteri(A,10243,ve[D.wrapT]),(32879===A||35866===A)&&n.texParameteri(A,32882,ve[D.wrapR]),n.texParameteri(A,10240,Ce[D.magFilter]),n.texParameteri(A,10241,Ce[D.minFilter])):(n.texParameteri(A,10242,33071),n.texParameteri(A,10243,33071),(32879===A||35866===A)&&n.texParameteri(A,32882,33071),(D.wrapS!==Ir||D.wrapT!==Ir)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(A,10240,N(D.magFilter)),n.texParameteri(A,10241,N(D.minFilter)),D.minFilter!==Vn&&D.minFilter!==Tn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const ie=e.get("EXT_texture_filter_anisotropic");if(D.type===No&&!1===e.has("OES_texture_float_linear")||!1===a&&D.type===Kd&&!1===e.has("OES_texture_half_float_linear"))return;(D.anisotropy>1||r.get(D).__currentAnisotropy)&&(n.texParameterf(A,ie.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,i.getMaxAnisotropy())),r.get(D).__currentAnisotropy=D.anisotropy)}}function Tt(A,D){let W=!1;void 0===A.__webglInit&&(A.__webglInit=!0,D.addEventListener("dispose",P));const ie=D.source;let ye=m.get(ie);void 0===ye&&(ye={},m.set(ie,ye));const we=function H(A){const D=[];return D.push(A.wrapS),D.push(A.wrapT),D.push(A.magFilter),D.push(A.minFilter),D.push(A.anisotropy),D.push(A.internalFormat),D.push(A.format),D.push(A.type),D.push(A.generateMipmaps),D.push(A.premultiplyAlpha),D.push(A.flipY),D.push(A.unpackAlignment),D.push(A.encoding),D.join()}(D);if(we!==A.__cacheKey){void 0===ye[we]&&(ye[we]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,W=!0),ye[we].usedTimes++;const Ge=ye[A.__cacheKey];void 0!==Ge&&(ye[A.__cacheKey].usedTimes--,0===Ge.usedTimes&&I(D)),A.__cacheKey=we,A.__webglTexture=ye[we].texture}return W}function We(A,D,W){let ie=3553;D.isDataArrayTexture&&(ie=35866),D.isData3DTexture&&(ie=32879);const ye=Tt(A,D),we=D.source;if(t.activeTexture(33984+W),t.bindTexture(ie,A.__webglTexture),we.version!==we.__currentVersion||!0===ye){n.pixelStorei(37440,D.flipY),n.pixelStorei(37441,D.premultiplyAlpha),n.pixelStorei(3317,D.unpackAlignment),n.pixelStorei(37443,0);const Ge=function w(A){return!a&&(A.wrapS!==Ir||A.wrapT!==Ir||A.minFilter!==Vn&&A.minFilter!==Tn)}(D)&&!1===M(D.image);let X=v(D.image,Ge,!1,u);X=zt(D,X);const it=M(X)||a,ct=s.convert(D.format,D.encoding);let ge,Te=s.convert(D.type),R=x(D.internalFormat,ct,Te,D.encoding,D.isVideoTexture);Z(ie,D,it);const de=D.mipmaps,$e=a&&!0!==D.isVideoTexture,be=void 0===A.__version||!0===ye,ze=C(D,X,it);if(D.isDepthTexture)R=6402,a?R=D.type===No?36012:1014===D.type?33190:D.type===xc?35056:33189:D.type===No&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),D.format===Pa&&6402===R&&D.type!==Jd&&1014!==D.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),D.type=Jd,Te=s.convert(D.type)),D.format===wc&&6402===R&&(R=34041,D.type!==xc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),D.type=xc,Te=s.convert(D.type))),be&&($e?t.texStorage2D(3553,1,R,X.width,X.height):t.texImage2D(3553,0,R,X.width,X.height,0,ct,Te,null));else if(D.isDataTexture)if(de.length>0&&it){$e&&be&&t.texStorage2D(3553,ze,R,de[0].width,de[0].height);for(let le=0,qe=de.length;le<qe;le++)ge=de[le],$e?t.texSubImage2D(3553,le,0,0,ge.width,ge.height,ct,Te,ge.data):t.texImage2D(3553,le,R,ge.width,ge.height,0,ct,Te,ge.data);D.generateMipmaps=!1}else $e?(be&&t.texStorage2D(3553,ze,R,X.width,X.height),t.texSubImage2D(3553,0,0,0,X.width,X.height,ct,Te,X.data)):t.texImage2D(3553,0,R,X.width,X.height,0,ct,Te,X.data);else if(D.isCompressedTexture){$e&&be&&t.texStorage2D(3553,ze,R,de[0].width,de[0].height);for(let le=0,qe=de.length;le<qe;le++)ge=de[le],D.format!==xi?null!==ct?$e?t.compressedTexSubImage2D(3553,le,0,0,ge.width,ge.height,ct,ge.data):t.compressedTexImage2D(3553,le,R,ge.width,ge.height,0,ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$e?t.texSubImage2D(3553,le,0,0,ge.width,ge.height,ct,Te,ge.data):t.texImage2D(3553,le,R,ge.width,ge.height,0,ct,Te,ge.data)}else if(D.isDataArrayTexture)$e?(be&&t.texStorage3D(35866,ze,R,X.width,X.height,X.depth),t.texSubImage3D(35866,0,0,0,0,X.width,X.height,X.depth,ct,Te,X.data)):t.texImage3D(35866,0,R,X.width,X.height,X.depth,0,ct,Te,X.data);else if(D.isData3DTexture)$e?(be&&t.texStorage3D(32879,ze,R,X.width,X.height,X.depth),t.texSubImage3D(32879,0,0,0,0,X.width,X.height,X.depth,ct,Te,X.data)):t.texImage3D(32879,0,R,X.width,X.height,X.depth,0,ct,Te,X.data);else if(D.isFramebufferTexture){if(be)if($e)t.texStorage2D(3553,ze,R,X.width,X.height);else{let le=X.width,qe=X.height;for(let Rt=0;Rt<ze;Rt++)t.texImage2D(3553,Rt,R,le,qe,0,ct,Te,null),le>>=1,qe>>=1}}else if(de.length>0&&it){$e&&be&&t.texStorage2D(3553,ze,R,de[0].width,de[0].height);for(let le=0,qe=de.length;le<qe;le++)ge=de[le],$e?t.texSubImage2D(3553,le,0,0,ct,Te,ge):t.texImage2D(3553,le,R,ct,Te,ge);D.generateMipmaps=!1}else $e?(be&&t.texStorage2D(3553,ze,R,X.width,X.height),t.texSubImage2D(3553,0,0,0,ct,Te,X)):t.texImage2D(3553,0,R,ct,Te,X);b(D,it)&&S(ie),we.__currentVersion=we.version,D.onUpdate&&D.onUpdate(D)}A.__version=D.version}function ue(A,D,W,ie,ye){const we=s.convert(W.format,W.encoding),Ge=s.convert(W.type),X=x(W.internalFormat,we,Ge,W.encoding);r.get(D).__hasExternalTextures||(32879===ye||35866===ye?t.texImage3D(ye,0,X,D.width,D.height,D.depth,0,we,Ge,null):t.texImage2D(ye,0,X,D.width,D.height,0,we,Ge,null)),t.bindFramebuffer(36160,A),ke(D)?h.framebufferTexture2DMultisampleEXT(36160,ie,ye,r.get(W).__webglTexture,0,He(D)):n.framebufferTexture2D(36160,ie,ye,r.get(W).__webglTexture,0),t.bindFramebuffer(36160,null)}function mt(A,D,W){if(n.bindRenderbuffer(36161,A),D.depthBuffer&&!D.stencilBuffer){let ie=33189;if(W||ke(D)){const ye=D.depthTexture;ye&&ye.isDepthTexture&&(ye.type===No?ie=36012:1014===ye.type&&(ie=33190));const we=He(D);ke(D)?h.renderbufferStorageMultisampleEXT(36161,we,ie,D.width,D.height):n.renderbufferStorageMultisample(36161,we,ie,D.width,D.height)}else n.renderbufferStorage(36161,ie,D.width,D.height);n.framebufferRenderbuffer(36160,36096,36161,A)}else if(D.depthBuffer&&D.stencilBuffer){const ie=He(D);W&&!1===ke(D)?n.renderbufferStorageMultisample(36161,ie,35056,D.width,D.height):ke(D)?h.renderbufferStorageMultisampleEXT(36161,ie,35056,D.width,D.height):n.renderbufferStorage(36161,34041,D.width,D.height),n.framebufferRenderbuffer(36160,33306,36161,A)}else{const ie=!0===D.isWebGLMultipleRenderTargets?D.texture[0]:D.texture,ye=s.convert(ie.format,ie.encoding),we=s.convert(ie.type),Ge=x(ie.internalFormat,ye,we,ie.encoding),X=He(D);W&&!1===ke(D)?n.renderbufferStorageMultisample(36161,X,Ge,D.width,D.height):ke(D)?h.renderbufferStorageMultisampleEXT(36161,X,Ge,D.width,D.height):n.renderbufferStorage(36161,Ge,D.width,D.height)}n.bindRenderbuffer(36161,null)}function ee(A){const D=r.get(A),W=!0===A.isWebGLCubeRenderTarget;if(A.depthTexture&&!D.__autoAllocateDepthBuffer){if(W)throw new Error("target.depthTexture not supported in Cube render targets");!function ne(A,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,A),!D.depthTexture||!D.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(D.depthTexture).__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),$(D.depthTexture,0);const ie=r.get(D.depthTexture).__webglTexture,ye=He(D);if(D.depthTexture.format===Pa)ke(D)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,ie,0,ye):n.framebufferTexture2D(36160,36096,3553,ie,0);else{if(D.depthTexture.format!==wc)throw new Error("Unknown depthTexture format");ke(D)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,ie,0,ye):n.framebufferTexture2D(36160,33306,3553,ie,0)}}(D.__webglFramebuffer,A)}else if(W){D.__webglDepthbuffer=[];for(let ie=0;ie<6;ie++)t.bindFramebuffer(36160,D.__webglFramebuffer[ie]),D.__webglDepthbuffer[ie]=n.createRenderbuffer(),mt(D.__webglDepthbuffer[ie],A,!1)}else t.bindFramebuffer(36160,D.__webglFramebuffer),D.__webglDepthbuffer=n.createRenderbuffer(),mt(D.__webglDepthbuffer,A,!1);t.bindFramebuffer(36160,null)}function He(A){return Math.min(d,A.samples)}function ke(A){const D=r.get(A);return a&&A.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==D.__useRenderToTexture}function zt(A,D){const W=A.encoding,ie=A.format,ye=A.type;return!0===A.isCompressedTexture||!0===A.isVideoTexture||1035===A.format||W!==Xs&&(W===qt?!1===a?!0===e.has("EXT_sRGB")&&ie===xi?(A.format=1035,A.minFilter=Tn,A.generateMipmaps=!1):D=La.sRGBToLinear(D):(ie!==xi||ye!==Na)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",W)),D}this.allocateTextureUnit=function Y(){const A=L;return A>=l&&console.warn("THREE.WebGLTextures: Trying to use "+A+" texture units while this GPU supports only "+l),L+=1,A},this.resetTextureUnits=function j(){L=0},this.setTexture2D=$,this.setTexture2DArray=function se(A,D){const W=r.get(A);A.version>0&&W.__version!==A.version?We(W,A,D):(t.activeTexture(33984+D),t.bindTexture(35866,W.__webglTexture))},this.setTexture3D=function J(A,D){const W=r.get(A);A.version>0&&W.__version!==A.version?We(W,A,D):(t.activeTexture(33984+D),t.bindTexture(32879,W.__webglTexture))},this.setTextureCube=function ce(A,D){const W=r.get(A);A.version>0&&W.__version!==A.version?function ot(A,D,W){if(6!==D.image.length)return;const ie=Tt(A,D),ye=D.source;if(t.activeTexture(33984+W),t.bindTexture(34067,A.__webglTexture),ye.version!==ye.__currentVersion||!0===ie){n.pixelStorei(37440,D.flipY),n.pixelStorei(37441,D.premultiplyAlpha),n.pixelStorei(3317,D.unpackAlignment),n.pixelStorei(37443,0);const we=D.isCompressedTexture||D.image[0].isCompressedTexture,Ge=D.image[0]&&D.image[0].isDataTexture,X=[];for(let le=0;le<6;le++)X[le]=we||Ge?Ge?D.image[le].image:D.image[le]:v(D.image[le],!1,!0,c),X[le]=zt(D,X[le]);const it=X[0],ct=M(it)||a,Te=s.convert(D.format,D.encoding),R=s.convert(D.type),ge=x(D.internalFormat,Te,R,D.encoding),de=a&&!0!==D.isVideoTexture,$e=void 0===A.__version;let ze,be=C(D,it,ct);if(Z(34067,D,ct),we){de&&$e&&t.texStorage2D(34067,be,ge,it.width,it.height);for(let le=0;le<6;le++){ze=X[le].mipmaps;for(let qe=0;qe<ze.length;qe++){const Rt=ze[qe];D.format!==xi?null!==Te?de?t.compressedTexSubImage2D(34069+le,qe,0,0,Rt.width,Rt.height,Te,Rt.data):t.compressedTexImage2D(34069+le,qe,ge,Rt.width,Rt.height,0,Rt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):de?t.texSubImage2D(34069+le,qe,0,0,Rt.width,Rt.height,Te,R,Rt.data):t.texImage2D(34069+le,qe,ge,Rt.width,Rt.height,0,Te,R,Rt.data)}}}else{ze=D.mipmaps,de&&$e&&(ze.length>0&&be++,t.texStorage2D(34067,be,ge,X[0].width,X[0].height));for(let le=0;le<6;le++)if(Ge){de?t.texSubImage2D(34069+le,0,0,0,X[le].width,X[le].height,Te,R,X[le].data):t.texImage2D(34069+le,0,ge,X[le].width,X[le].height,0,Te,R,X[le].data);for(let qe=0;qe<ze.length;qe++){const Mt=ze[qe].image[le].image;de?t.texSubImage2D(34069+le,qe+1,0,0,Mt.width,Mt.height,Te,R,Mt.data):t.texImage2D(34069+le,qe+1,ge,Mt.width,Mt.height,0,Te,R,Mt.data)}}else{de?t.texSubImage2D(34069+le,0,0,0,Te,R,X[le]):t.texImage2D(34069+le,0,ge,Te,R,X[le]);for(let qe=0;qe<ze.length;qe++){const Rt=ze[qe];de?t.texSubImage2D(34069+le,qe+1,0,0,Te,R,Rt.image[le]):t.texImage2D(34069+le,qe+1,ge,Te,R,Rt.image[le])}}}b(D,ct)&&S(34067),ye.__currentVersion=ye.version,D.onUpdate&&D.onUpdate(D)}A.__version=D.version}(W,A,D):(t.activeTexture(33984+D),t.bindTexture(34067,W.__webglTexture))},this.rebindTextures=function ae(A,D,W){const ie=r.get(A);void 0!==D&&ue(ie.__webglFramebuffer,A,A.texture,36064,3553),void 0!==W&&ee(A)},this.setupRenderTarget=function De(A){const D=A.texture,W=r.get(A),ie=r.get(D);A.addEventListener("dispose",V),!0!==A.isWebGLMultipleRenderTargets&&(void 0===ie.__webglTexture&&(ie.__webglTexture=n.createTexture()),ie.__version=D.version,o.memory.textures++);const ye=!0===A.isWebGLCubeRenderTarget,we=!0===A.isWebGLMultipleRenderTargets,Ge=M(A)||a;if(ye){W.__webglFramebuffer=[];for(let X=0;X<6;X++)W.__webglFramebuffer[X]=n.createFramebuffer()}else if(W.__webglFramebuffer=n.createFramebuffer(),we)if(i.drawBuffers){const X=A.texture;for(let it=0,ct=X.length;it<ct;it++){const Te=r.get(X[it]);void 0===Te.__webglTexture&&(Te.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(a&&A.samples>0&&!1===ke(A)){W.__webglMultisampledFramebuffer=n.createFramebuffer(),W.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,W.__webglColorRenderbuffer);const X=s.convert(D.format,D.encoding),it=s.convert(D.type),ct=x(D.internalFormat,X,it,D.encoding),Te=He(A);n.renderbufferStorageMultisample(36161,Te,ct,A.width,A.height),t.bindFramebuffer(36160,W.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,W.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),A.depthBuffer&&(W.__webglDepthRenderbuffer=n.createRenderbuffer(),mt(W.__webglDepthRenderbuffer,A,!0)),t.bindFramebuffer(36160,null)}if(ye){t.bindTexture(34067,ie.__webglTexture),Z(34067,D,Ge);for(let X=0;X<6;X++)ue(W.__webglFramebuffer[X],A,D,36064,34069+X);b(D,Ge)&&S(34067),t.unbindTexture()}else if(we){const X=A.texture;for(let it=0,ct=X.length;it<ct;it++){const Te=X[it],R=r.get(Te);t.bindTexture(3553,R.__webglTexture),Z(3553,Te,Ge),ue(W.__webglFramebuffer,A,Te,36064+it,3553),b(Te,Ge)&&S(3553)}t.unbindTexture()}else{let X=3553;(A.isWebGL3DRenderTarget||A.isWebGLArrayRenderTarget)&&(a?X=A.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(X,ie.__webglTexture),Z(X,D,Ge),ue(W.__webglFramebuffer,A,D,36064,X),b(D,Ge)&&S(X),t.unbindTexture()}A.depthBuffer&&ee(A)},this.updateRenderTargetMipmap=function _e(A){const D=M(A)||a,W=!0===A.isWebGLMultipleRenderTargets?A.texture:[A.texture];for(let ie=0,ye=W.length;ie<ye;ie++){const we=W[ie];if(b(we,D)){const Ge=A.isWebGLCubeRenderTarget?34067:3553,X=r.get(we).__webglTexture;t.bindTexture(Ge,X),S(Ge),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function tt(A){if(a&&A.samples>0&&!1===ke(A)){const D=A.width,W=A.height;let ie=16384;const ye=[36064],we=A.stencilBuffer?33306:36096;A.depthBuffer&&ye.push(we);const Ge=r.get(A),X=void 0!==Ge.__ignoreDepthValues&&Ge.__ignoreDepthValues;!1===X&&(A.depthBuffer&&(ie|=256),A.stencilBuffer&&(ie|=1024)),t.bindFramebuffer(36008,Ge.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Ge.__webglFramebuffer),!0===X&&(n.invalidateFramebuffer(36008,[we]),n.invalidateFramebuffer(36009,[we])),n.blitFramebuffer(0,0,D,W,0,0,D,W,ie,9728),f&&n.invalidateFramebuffer(36008,ye),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,Ge.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=ee,this.setupFrameBufferTexture=ue,this.useMultisampledRTT=ke}function GY(n,e,t){const r=t.isWebGL2;return{convert:function i(s,o=null){let a;if(s===Na)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(s===Jd)return 5123;if(1013===s)return 5124;if(1014===s)return 5125;if(s===No)return 5126;if(s===Kd)return r?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===xi)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===Pa)return 6402;if(s===wc)return 34041;if(1028===s)return 6403;if(1022===s)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===qt){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===qt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===qt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}return s===xc?r?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[s]?n[s]:null}}}Mx.prototype.isMeshDistanceMaterial=!0;class FR extends Xn{constructor(e=[]){super(),this.cameras=e}}FR.prototype.isArrayCamera=!0;class Wc extends Et{constructor(){super(),this.type="Group"}}Wc.prototype.isGroup=!0;const UY={type:"move"};class xx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Wc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Wc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new E,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new E),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Wc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new E,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new E),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(i=t.getPose(e.targetRaySpace,r),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(UY))),c&&e.hand){o=!0;for(const p of e.hand.values()){const m=t.getJointPose(p,r);if(void 0===c.joints[p.jointName]){const _=new Wc;_.matrixAutoUpdate=!1,_.visible=!1,c.joints[p.jointName]=_,c.add(_)}const y=c.joints[p.jointName];null!==m&&(y.matrix.fromArray(m.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.jointRadius=m.radius),y.visible=null!==m}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),f=.02,g=.005;c.inputState.pinching&&h>f+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=f-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==i),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}}class LR extends xr{constructor(e,t,r,i,s,o,a,l,c,u){if((u=void 0!==u?u:Pa)!==Pa&&u!==wc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&u===Pa&&(r=Jd),void 0===r&&u===wc&&(r=xc),super(null,i,s,o,a,l,u,r,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:Vn,this.minFilter=void 0!==l?l:Vn,this.flipY=!1,this.generateMipmaps=!1}}LR.prototype.isDepthTexture=!0;class HY extends Ra{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=null,c=null,u=null,d=null,h=null,f=null;const g=t.getContextAttributes();let p=null,m=null;const y=[],_=new Map,v=new Xn;v.layers.enable(1),v.viewport=new It;const M=new Xn;M.layers.enable(2),M.viewport=new It;const w=[v,M],b=new FR;b.layers.enable(1),b.layers.enable(2);let S=null,x=null;function C(H){const $=_.get(H.inputSource);$&&$.dispatchEvent({type:H.type,data:H.inputSource})}function N(){_.forEach(function(H,$){H.disconnect($)}),_.clear(),S=null,x=null,e.setRenderTarget(p),h=null,d=null,u=null,i=null,m=null,Y.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}function P(H){const $=i.inputSources;for(let se=0;se<$.length;se++)_.set($[se],y["right"===$[se].handedness?1:0]);for(let se=0;se<H.removed.length;se++){const J=H.removed[se],ce=_.get(J);ce&&(ce.dispatchEvent({type:"disconnected",data:J}),_.delete(J))}for(let se=0;se<H.added.length;se++){const J=H.added[se],ce=_.get(J);ce&&ce.dispatchEvent({type:"connected",data:J})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(H){let $=y[H];return void 0===$&&($=new xx,y[H]=$),$.getTargetRaySpace()},this.getControllerGrip=function(H){let $=y[H];return void 0===$&&($=new xx,y[H]=$),$.getGripSpace()},this.getHand=function(H){let $=y[H];return void 0===$&&($=new xx,y[H]=$),$.getHandSpace()},this.setFramebufferScaleFactor=function(H){s=H,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(H){a=H,!0===r.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(H){l=H},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=function(){var H=function w$(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(l){iI(s,r,i,o,a,"next",l)}function a(l){iI(s,r,i,o,a,"throw",l)}o(void 0)})}}(function*($){if(i=$,null!==i){if(p=e.getRenderTarget(),i.addEventListener("select",C),i.addEventListener("selectstart",C),i.addEventListener("selectend",C),i.addEventListener("squeeze",C),i.addEventListener("squeezestart",C),i.addEventListener("squeezeend",C),i.addEventListener("end",N),i.addEventListener("inputsourceschange",P),!0!==g.xrCompatible&&(yield t.makeXRCompatible()),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2)h=new XRWebGLLayer(i,t,{antialias:void 0!==i.renderState.layers||g.antialias,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s}),i.updateRenderState({baseLayer:h}),m=new Jr(h.framebufferWidth,h.framebufferHeight,{format:xi,type:Na,encoding:e.outputEncoding});else{let se=null,J=null,ce=null;g.depth&&(ce=g.stencil?35056:33190,se=g.stencil?wc:Pa,J=g.stencil?xc:Jd);const ve={colorFormat:e.outputEncoding===qt?35907:32856,depthFormat:ce,scaleFactor:s};u=new XRWebGLBinding(i,t),d=u.createProjectionLayer(ve),i.updateRenderState({layers:[d]}),m=new Jr(d.textureWidth,d.textureHeight,{format:xi,type:Na,depthTexture:new LR(d.textureWidth,d.textureHeight,J,void 0,void 0,void 0,void 0,void 0,void 0,se),stencilBuffer:g.stencil,encoding:e.outputEncoding,samples:g.antialias?4:0}),e.properties.get(m).__ignoreDepthValues=d.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(1),o=yield i.requestReferenceSpace(a),Y.setContext(i),Y.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}});return function($){return H.apply(this,arguments)}}();const V=new E,q=new E;function G(H,$){null===$?H.matrixWorld.copy(H.matrix):H.matrixWorld.multiplyMatrices($.matrixWorld,H.matrix),H.matrixWorldInverse.copy(H.matrixWorld).invert()}this.updateCamera=function(H){if(null===i)return;b.near=M.near=v.near=H.near,b.far=M.far=v.far=H.far,(S!==b.near||x!==b.far)&&(i.updateRenderState({depthNear:b.near,depthFar:b.far}),S=b.near,x=b.far);const $=H.parent,se=b.cameras;G(b,$);for(let ce=0;ce<se.length;ce++)G(se[ce],$);b.matrixWorld.decompose(b.position,b.quaternion,b.scale),H.position.copy(b.position),H.quaternion.copy(b.quaternion),H.scale.copy(b.scale),H.matrix.copy(b.matrix),H.matrixWorld.copy(b.matrixWorld);const J=H.children;for(let ce=0,ve=J.length;ce<ve;ce++)J[ce].updateMatrixWorld(!0);2===se.length?function I(H,$,se){V.setFromMatrixPosition($.matrixWorld),q.setFromMatrixPosition(se.matrixWorld);const J=V.distanceTo(q),ce=$.projectionMatrix.elements,ve=se.projectionMatrix.elements,Ce=ce[14]/(ce[10]-1),Z=ce[14]/(ce[10]+1),Tt=(ce[9]+1)/ce[5],We=(ce[9]-1)/ce[5],ot=(ce[8]-1)/ce[0],ue=(ve[8]+1)/ve[0],mt=Ce*ot,ne=Ce*ue,ee=J/(-ot+ue),ae=ee*-ot;$.matrixWorld.decompose(H.position,H.quaternion,H.scale),H.translateX(ae),H.translateZ(ee),H.matrixWorld.compose(H.position,H.quaternion,H.scale),H.matrixWorldInverse.copy(H.matrixWorld).invert();const De=Ce+ee,_e=Z+ee;H.projectionMatrix.makePerspective(mt-ae,ne+(J-ae),Tt*Z/_e*De,We*Z/_e*De,De,_e)}(b,v,M):b.projectionMatrix.copy(v.projectionMatrix)},this.getCamera=function(){return b},this.getFoveation=function(){return null!==d?d.fixedFoveation:null!==h?h.fixedFoveation:void 0},this.setFoveation=function(H){null!==d&&(d.fixedFoveation=H),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=H)};let L=null;const Y=new sR;Y.setAnimationLoop(function j(H,$){if(c=$.getViewerPose(l||o),f=$,null!==c){const J=c.views;null!==h&&(e.setRenderTargetFramebuffer(m,h.framebuffer),e.setRenderTarget(m));let ce=!1;J.length!==b.cameras.length&&(b.cameras.length=0,ce=!0);for(let ve=0;ve<J.length;ve++){const Ce=J[ve];let Z=null;if(null!==h)Z=h.getViewport(Ce);else{const We=u.getViewSubImage(d,Ce);Z=We.viewport,0===ve&&(e.setRenderTargetTextures(m,We.colorTexture,d.ignoreDepthValues?void 0:We.depthStencilTexture),e.setRenderTarget(m))}const Tt=w[ve];Tt.matrix.fromArray(Ce.transform.matrix),Tt.projectionMatrix.fromArray(Ce.projectionMatrix),Tt.viewport.set(Z.x,Z.y,Z.width,Z.height),0===ve&&b.matrix.copy(Tt.matrix),!0===ce&&b.cameras.push(Tt)}}const se=i.inputSources;for(let J=0;J<y.length;J++){const ce=se[J],ve=_.get(ce);void 0!==ve&&ve.update(ce,$,l||o)}L&&L(H,$),f=null}),this.setAnimationLoop=function(H){L=H},this.dispose=function(){}}}function zY(n,e){function i(p,m){p.opacity.value=m.opacity,m.color&&p.diffuse.value.copy(m.color),m.emissive&&p.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(p.map.value=m.map),m.alphaMap&&(p.alphaMap.value=m.alphaMap),m.bumpMap&&(p.bumpMap.value=m.bumpMap,p.bumpScale.value=m.bumpScale,1===m.side&&(p.bumpScale.value*=-1)),m.displacementMap&&(p.displacementMap.value=m.displacementMap,p.displacementScale.value=m.displacementScale,p.displacementBias.value=m.displacementBias),m.emissiveMap&&(p.emissiveMap.value=m.emissiveMap),m.normalMap&&(p.normalMap.value=m.normalMap,p.normalScale.value.copy(m.normalScale),1===m.side&&p.normalScale.value.negate()),m.specularMap&&(p.specularMap.value=m.specularMap),m.alphaTest>0&&(p.alphaTest.value=m.alphaTest);const y=e.get(m).envMap;if(y&&(p.envMap.value=y,p.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,p.reflectivity.value=m.reflectivity,p.ior.value=m.ior,p.refractionRatio.value=m.refractionRatio),m.lightMap){p.lightMap.value=m.lightMap;const M=!0!==n.physicallyCorrectLights?Math.PI:1;p.lightMapIntensity.value=m.lightMapIntensity*M}let _,v;m.aoMap&&(p.aoMap.value=m.aoMap,p.aoMapIntensity.value=m.aoMapIntensity),m.map?_=m.map:m.specularMap?_=m.specularMap:m.displacementMap?_=m.displacementMap:m.normalMap?_=m.normalMap:m.bumpMap?_=m.bumpMap:m.roughnessMap?_=m.roughnessMap:m.metalnessMap?_=m.metalnessMap:m.alphaMap?_=m.alphaMap:m.emissiveMap?_=m.emissiveMap:m.clearcoatMap?_=m.clearcoatMap:m.clearcoatNormalMap?_=m.clearcoatNormalMap:m.clearcoatRoughnessMap?_=m.clearcoatRoughnessMap:m.specularIntensityMap?_=m.specularIntensityMap:m.specularColorMap?_=m.specularColorMap:m.transmissionMap?_=m.transmissionMap:m.thicknessMap?_=m.thicknessMap:m.sheenColorMap?_=m.sheenColorMap:m.sheenRoughnessMap&&(_=m.sheenRoughnessMap),void 0!==_&&(_.isWebGLRenderTarget&&(_=_.texture),!0===_.matrixAutoUpdate&&_.updateMatrix(),p.uvTransform.value.copy(_.matrix)),m.aoMap?v=m.aoMap:m.lightMap&&(v=m.lightMap),void 0!==v&&(v.isWebGLRenderTarget&&(v=v.texture),!0===v.matrixAutoUpdate&&v.updateMatrix(),p.uv2Transform.value.copy(v.matrix))}return{refreshFogUniforms:function t(p,m){p.fogColor.value.copy(m.color),m.isFog?(p.fogNear.value=m.near,p.fogFar.value=m.far):m.isFogExp2&&(p.fogDensity.value=m.density)},refreshMaterialUniforms:function r(p,m,y,_,v){m.isMeshBasicMaterial||m.isMeshLambertMaterial?i(p,m):m.isMeshToonMaterial?(i(p,m),function u(p,m){m.gradientMap&&(p.gradientMap.value=m.gradientMap)}(p,m)):m.isMeshPhongMaterial?(i(p,m),function c(p,m){p.specular.value.copy(m.specular),p.shininess.value=Math.max(m.shininess,1e-4)}(p,m)):m.isMeshStandardMaterial?(i(p,m),function d(p,m){p.roughness.value=m.roughness,p.metalness.value=m.metalness,m.roughnessMap&&(p.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(p.metalnessMap.value=m.metalnessMap),e.get(m).envMap&&(p.envMapIntensity.value=m.envMapIntensity)}(p,m),m.isMeshPhysicalMaterial&&function h(p,m,y){p.ior.value=m.ior,m.sheen>0&&(p.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),p.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(p.sheenColorMap.value=m.sheenColorMap),m.sheenRoughnessMap&&(p.sheenRoughnessMap.value=m.sheenRoughnessMap)),m.clearcoat>0&&(p.clearcoat.value=m.clearcoat,p.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(p.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(p.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),p.clearcoatNormalMap.value=m.clearcoatNormalMap,1===m.side&&p.clearcoatNormalScale.value.negate())),m.transmission>0&&(p.transmission.value=m.transmission,p.transmissionSamplerMap.value=y.texture,p.transmissionSamplerSize.value.set(y.width,y.height),m.transmissionMap&&(p.transmissionMap.value=m.transmissionMap),p.thickness.value=m.thickness,m.thicknessMap&&(p.thicknessMap.value=m.thicknessMap),p.attenuationDistance.value=m.attenuationDistance,p.attenuationColor.value.copy(m.attenuationColor)),p.specularIntensity.value=m.specularIntensity,p.specularColor.value.copy(m.specularColor),m.specularIntensityMap&&(p.specularIntensityMap.value=m.specularIntensityMap),m.specularColorMap&&(p.specularColorMap.value=m.specularColorMap)}(p,m,v)):m.isMeshMatcapMaterial?(i(p,m),function f(p,m){m.matcap&&(p.matcap.value=m.matcap)}(p,m)):m.isMeshDepthMaterial?i(p,m):m.isMeshDistanceMaterial?(i(p,m),function g(p,m){p.referencePosition.value.copy(m.referencePosition),p.nearDistance.value=m.nearDistance,p.farDistance.value=m.farDistance}(p,m)):m.isMeshNormalMaterial?i(p,m):m.isLineBasicMaterial?(function s(p,m){p.diffuse.value.copy(m.color),p.opacity.value=m.opacity}(p,m),m.isLineDashedMaterial&&function o(p,m){p.dashSize.value=m.dashSize,p.totalSize.value=m.dashSize+m.gapSize,p.scale.value=m.scale}(p,m)):m.isPointsMaterial?function a(p,m,y,_){let v;p.diffuse.value.copy(m.color),p.opacity.value=m.opacity,p.size.value=m.size*y,p.scale.value=.5*_,m.map&&(p.map.value=m.map),m.alphaMap&&(p.alphaMap.value=m.alphaMap),m.alphaTest>0&&(p.alphaTest.value=m.alphaTest),m.map?v=m.map:m.alphaMap&&(v=m.alphaMap),void 0!==v&&(!0===v.matrixAutoUpdate&&v.updateMatrix(),p.uvTransform.value.copy(v.matrix))}(p,m,y,_):m.isSpriteMaterial?function l(p,m){let y;p.diffuse.value.copy(m.color),p.opacity.value=m.opacity,p.rotation.value=m.rotation,m.map&&(p.map.value=m.map),m.alphaMap&&(p.alphaMap.value=m.alphaMap),m.alphaTest>0&&(p.alphaTest.value=m.alphaTest),m.map?y=m.map:m.alphaMap&&(y=m.alphaMap),void 0!==y&&(!0===y.matrixAutoUpdate&&y.updateMatrix(),p.uvTransform.value.copy(y.matrix))}(p,m):m.isShadowMaterial?(p.color.value.copy(m.color),p.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}}}function Dt(n={}){const e=void 0!==n.canvas?n.canvas:function jY(){const n=rh("canvas");return n.style.display="block",n}(),t=void 0!==n.context?n.context:null,r=void 0===n.depth||n.depth,i=void 0===n.stencil||n.stencil,s=void 0!==n.antialias&&n.antialias,o=void 0===n.premultipliedAlpha||n.premultipliedAlpha,a=void 0!==n.preserveDrawingBuffer&&n.preserveDrawingBuffer,l=void 0!==n.powerPreference?n.powerPreference:"default",c=void 0!==n.failIfMajorPerformanceCaveat&&n.failIfMajorPerformanceCaveat;let u;u=null!==t?t.getContextAttributes().alpha:void 0!==n.alpha&&n.alpha;let d=null,h=null;const f=[],g=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Xs,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const p=this;let m=!1,y=0,_=0,v=null,M=-1,w=null;const b=new It,S=new It;let x=null,C=e.width,N=e.height,P=1,V=null,q=null;const I=new It(0,0,C,N),G=new It(0,0,C,N);let L=!1;const j=new Wg;let Y=!1,H=!1,$=null;const se=new Ee,J=new Q,ce=new E,ve={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ce(){return null===v?P:1}let We,ot,ue,mt,ne,ee,ae,De,_e,tt,He,ke,Jt,zt,A,D,W,ie,ye,we,Ge,X,it,Z=t;function Tt(T,B){for(let z=0;z<T.length;z++){const K=e.getContext(T[z],B);if(null!==K)return K}return null}try{const T={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:o,preserveDrawingBuffer:a,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r140"),e.addEventListener("webglcontextlost",R,!1),e.addEventListener("webglcontextrestored",ge,!1),null===Z){const B=["webgl2","webgl","experimental-webgl"];if(!0===p.isWebGL1Renderer&&B.shift(),Z=Tt(B,T),null===Z)throw Tt(B)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Z.getShaderPrecisionFormat&&(Z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(T){throw console.error("THREE.WebGLRenderer: "+T.message),T}function ct(){We=new aX(Z),ot=new tX(Z,We,n),We.init(ot),X=new GY(Z,We,ot),ue=new BY(Z,We,ot),mt=new uX(Z),ne=new DY,ee=new VY(Z,We,ue,ne,ot,X,mt),ae=new rX(p),De=new oX(p),_e=new n7(Z,ot),it=new Qq(Z,We,_e,ot),tt=new lX(Z,_e,mt,it),He=new pX(Z,tt,_e,mt),ye=new fX(Z,ot,ee),D=new nX(ne),ke=new EY(p,ae,De,We,ot,it,D),Jt=new zY(p,ne),zt=new AY,A=new FY(We,ot),ie=new Kq(p,ae,ue,He,u,o),W=new OR(p,He,ot),we=new eX(Z,We,mt,ot),Ge=new cX(Z,We,mt,ot),mt.programs=ke.programs,p.capabilities=ot,p.extensions=We,p.properties=ne,p.renderLists=zt,p.shadowMap=W,p.state=ue,p.info=mt}ct();const Te=new HY(p,Z);function R(T){T.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;const T=mt.autoReset,B=W.enabled,z=W.autoUpdate,U=W.needsUpdate,K=W.type;ct(),mt.autoReset=T,W.enabled=B,W.autoUpdate=z,W.needsUpdate=U,W.type=K}function de(T){const B=T.target;B.removeEventListener("dispose",de),function $e(T){(function be(T){const B=ne.get(T).programs;void 0!==B&&(B.forEach(function(z){ke.releaseProgram(z)}),T.isShaderMaterial&&ke.releaseShaderCache(T))})(T),ne.remove(T)}(B)}this.xr=Te,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const T=We.get("WEBGL_lose_context");T&&T.loseContext()},this.forceContextRestore=function(){const T=We.get("WEBGL_lose_context");T&&T.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(T){void 0!==T&&(P=T,this.setSize(C,N,!1))},this.getSize=function(T){return T.set(C,N)},this.setSize=function(T,B,z){Te.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(C=T,N=B,e.width=Math.floor(T*P),e.height=Math.floor(B*P),!1!==z&&(e.style.width=T+"px",e.style.height=B+"px"),this.setViewport(0,0,T,B))},this.getDrawingBufferSize=function(T){return T.set(C*P,N*P).floor()},this.setDrawingBufferSize=function(T,B,z){C=T,N=B,P=z,e.width=Math.floor(T*z),e.height=Math.floor(B*z),this.setViewport(0,0,T,B)},this.getCurrentViewport=function(T){return T.copy(b)},this.getViewport=function(T){return T.copy(I)},this.setViewport=function(T,B,z,U){T.isVector4?I.set(T.x,T.y,T.z,T.w):I.set(T,B,z,U),ue.viewport(b.copy(I).multiplyScalar(P).floor())},this.getScissor=function(T){return T.copy(G)},this.setScissor=function(T,B,z,U){T.isVector4?G.set(T.x,T.y,T.z,T.w):G.set(T,B,z,U),ue.scissor(S.copy(G).multiplyScalar(P).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(T){ue.setScissorTest(L=T)},this.setOpaqueSort=function(T){V=T},this.setTransparentSort=function(T){q=T},this.getClearColor=function(T){return T.copy(ie.getClearColor())},this.setClearColor=function(){ie.setClearColor.apply(ie,arguments)},this.getClearAlpha=function(){return ie.getClearAlpha()},this.setClearAlpha=function(){ie.setClearAlpha.apply(ie,arguments)},this.clear=function(T=!0,B=!0,z=!0){let U=0;T&&(U|=16384),B&&(U|=256),z&&(U|=1024),Z.clear(U)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",R,!1),e.removeEventListener("webglcontextrestored",ge,!1),zt.dispose(),A.dispose(),ne.dispose(),ae.dispose(),De.dispose(),He.dispose(),it.dispose(),ke.dispose(),Te.dispose(),Te.removeEventListener("sessionstart",qe),Te.removeEventListener("sessionend",Rt),$&&($.dispose(),$=null),Mt.stop()},this.renderBufferDirect=function(T,B,z,U,K,Xe){null===B&&(B=ve);const nt=K.isMesh&&K.matrixWorld.determinant()<0,ut=function GQ(T,B,z,U,K){!0!==B.isScene&&(B=ve),ee.resetTextureUnits();const Xe=B.fog,ut=null===v?p.outputEncoding:!0===v.isXRRenderTarget?v.texture.encoding:Xs,at=(U.isMeshStandardMaterial?De:ae).get(U.envMap||(U.isMeshStandardMaterial?B.environment:null)),Ot=!0===U.vertexColors&&!!z.attributes.color&&4===z.attributes.color.itemSize,xt=!!U.normalMap&&!!z.attributes.tangent,wt=!!z.morphAttributes.position,gn=!!z.morphAttributes.normal,pl=!!z.morphAttributes.color,vu=U.toneMapped?p.toneMapping:0,Mu=z.morphAttributes.position||z.morphAttributes.normal||z.morphAttributes.color,xs=void 0!==Mu?Mu.length:0,At=ne.get(U),xu=h.state.lights;!0!==Y||!0!==H&&T===w||D.setState(U,T,T===w&&U.id===M);let On=!1;U.version===At.__version?(At.needsLights&&At.lightsStateVersion!==xu.state.version||At.outputEncoding!==ut||K.isInstancedMesh&&!1===At.instancing||!K.isInstancedMesh&&!0===At.instancing||K.isSkinnedMesh&&!1===At.skinning||!K.isSkinnedMesh&&!0===At.skinning||At.envMap!==at||!0===U.fog&&At.fog!==Xe||void 0!==At.numClippingPlanes&&(At.numClippingPlanes!==D.numPlanes||At.numIntersection!==D.numIntersection)||At.vertexAlphas!==Ot||At.vertexTangents!==xt||At.morphTargets!==wt||At.morphNormals!==gn||At.morphColors!==pl||At.toneMapping!==vu||!0===ot.isWebGL2&&At.morphTargetsCount!==xs)&&(On=!0):(On=!0,At.__version=U.version);let ws=At.currentProgram;!0===On&&(ws=ab(U,B,K));let ra=!1,Yh=!1,lb=!1;const Dr=ws.getUniforms(),Zh=At.uniforms;if(ue.useProgram(ws.program)&&(ra=!0,Yh=!0,lb=!0),U.id!==M&&(M=U.id,Yh=!0),ra||w!==T){if(Dr.setValue(Z,"projectionMatrix",T.projectionMatrix),ot.logarithmicDepthBuffer&&Dr.setValue(Z,"logDepthBufFC",2/(Math.log(T.far+1)/Math.LN2)),w!==T&&(w=T,Yh=!0,lb=!0),U.isShaderMaterial||U.isMeshPhongMaterial||U.isMeshToonMaterial||U.isMeshStandardMaterial||U.envMap){const bs=Dr.map.cameraPosition;void 0!==bs&&bs.setValue(Z,ce.setFromMatrixPosition(T.matrixWorld))}(U.isMeshPhongMaterial||U.isMeshToonMaterial||U.isMeshLambertMaterial||U.isMeshBasicMaterial||U.isMeshStandardMaterial||U.isShaderMaterial)&&Dr.setValue(Z,"isOrthographic",!0===T.isOrthographicCamera),(U.isMeshPhongMaterial||U.isMeshToonMaterial||U.isMeshLambertMaterial||U.isMeshBasicMaterial||U.isMeshStandardMaterial||U.isShaderMaterial||U.isShadowMaterial||K.isSkinnedMesh)&&Dr.setValue(Z,"viewMatrix",T.matrixWorldInverse)}if(K.isSkinnedMesh){Dr.setOptional(Z,K,"bindMatrix"),Dr.setOptional(Z,K,"bindMatrixInverse");const bs=K.skeleton;bs&&(ot.floatVertexTextures?(null===bs.boneTexture&&bs.computeBoneTexture(),Dr.setValue(Z,"boneTexture",bs.boneTexture,ee),Dr.setValue(Z,"boneTextureSize",bs.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const cb=z.morphAttributes;return(void 0!==cb.position||void 0!==cb.normal||void 0!==cb.color&&!0===ot.isWebGL2)&&ye.update(K,z,U,ws),(Yh||At.receiveShadow!==K.receiveShadow)&&(At.receiveShadow=K.receiveShadow,Dr.setValue(Z,"receiveShadow",K.receiveShadow)),Yh&&(Dr.setValue(Z,"toneMappingExposure",p.toneMappingExposure),At.needsLights&&function UQ(T,B){T.ambientLightColor.needsUpdate=B,T.lightProbe.needsUpdate=B,T.directionalLights.needsUpdate=B,T.directionalLightShadows.needsUpdate=B,T.pointLights.needsUpdate=B,T.pointLightShadows.needsUpdate=B,T.spotLights.needsUpdate=B,T.spotLightShadows.needsUpdate=B,T.rectAreaLights.needsUpdate=B,T.hemisphereLights.needsUpdate=B}(Zh,lb),Xe&&!0===U.fog&&Jt.refreshFogUniforms(Zh,Xe),Jt.refreshMaterialUniforms(Zh,U,P,N,$),Vo.upload(Z,At.uniformsList,Zh,ee)),U.isShaderMaterial&&!0===U.uniformsNeedUpdate&&(Vo.upload(Z,At.uniformsList,Zh,ee),U.uniformsNeedUpdate=!1),U.isSpriteMaterial&&Dr.setValue(Z,"center",K.center),Dr.setValue(Z,"modelViewMatrix",K.modelViewMatrix),Dr.setValue(Z,"normalMatrix",K.normalMatrix),Dr.setValue(Z,"modelMatrix",K.matrixWorld),ws}(T,B,z,U,K);ue.setMaterial(U,nt);let at=z.index;const Ot=z.attributes.position;if(null===at){if(void 0===Ot||0===Ot.count)return}else if(0===at.count)return;let xt=1;!0===U.wireframe&&(at=tt.getWireframeAttribute(z),xt=2),it.setup(K,U,ut,z,at);let wt,gn=we;null!==at&&(wt=_e.get(at),gn=Ge,gn.setIndex(wt));const pl=null!==at?at.count:Ot.count,vu=z.drawRange.start*xt,Mu=z.drawRange.count*xt,xs=null!==Xe?Xe.start*xt:0,At=null!==Xe?Xe.count*xt:1/0,xu=Math.max(vu,xs),On=Math.min(pl,vu+Mu,xs+At)-1,ws=Math.max(0,On-xu+1);if(0!==ws){if(K.isMesh)!0===U.wireframe?(ue.setLineWidth(U.wireframeLinewidth*Ce()),gn.setMode(1)):gn.setMode(4);else if(K.isLine){let ra=U.linewidth;void 0===ra&&(ra=1),ue.setLineWidth(ra*Ce()),gn.setMode(K.isLineSegments?1:K.isLineLoop?2:3)}else K.isPoints?gn.setMode(0):K.isSprite&&gn.setMode(4);if(K.isInstancedMesh)gn.renderInstances(xu,ws,K.count);else if(z.isInstancedBufferGeometry){const ra=Math.min(z.instanceCount,z._maxInstanceCount);gn.renderInstances(xu,ws,ra)}else gn.render(xu,ws)}},this.compile=function(T,B){h=A.get(T),h.init(),g.push(h),T.traverseVisible(function(z){z.isLight&&z.layers.test(B.layers)&&(h.pushLight(z),z.castShadow&&h.pushShadow(z))}),h.setupLights(p.physicallyCorrectLights),T.traverse(function(z){const U=z.material;if(U)if(Array.isArray(U))for(let K=0;K<U.length;K++)ab(U[K],T,z);else ab(U,T,z)}),g.pop(),h=null};let ze=null;function qe(){Mt.stop()}function Rt(){Mt.start()}const Mt=new sR;function vs(T,B,z,U){if(!1===T.visible)return;if(T.layers.test(B.layers))if(T.isGroup)z=T.renderOrder;else if(T.isLOD)!0===T.autoUpdate&&T.update(B);else if(T.isLight)h.pushLight(T),T.castShadow&&h.pushShadow(T);else if(T.isSprite){if(!T.frustumCulled||j.intersectsSprite(T)){U&&ce.setFromMatrixPosition(T.matrixWorld).applyMatrix4(se);const nt=He.update(T),ut=T.material;ut.visible&&d.push(T,nt,ut,z,ce.z,null)}}else if((T.isMesh||T.isLine||T.isPoints)&&(T.isSkinnedMesh&&T.skeleton.frame!==mt.render.frame&&(T.skeleton.update(),T.skeleton.frame=mt.render.frame),!T.frustumCulled||j.intersectsObject(T))){U&&ce.setFromMatrixPosition(T.matrixWorld).applyMatrix4(se);const nt=He.update(T),ut=T.material;if(Array.isArray(ut)){const at=nt.groups;for(let Ot=0,xt=at.length;Ot<xt;Ot++){const wt=at[Ot],gn=ut[wt.materialIndex];gn&&gn.visible&&d.push(T,nt,gn,z,ce.z,wt)}}else ut.visible&&d.push(T,nt,ut,z,ce.z,null)}const Xe=T.children;for(let nt=0,ut=Xe.length;nt<ut;nt++)vs(Xe[nt],B,z,U)}function Ms(T,B,z,U){const K=T.opaque,Xe=T.transmissive,nt=T.transparent;h.setupLightsView(z),Xe.length>0&&function BQ(T,B,z){const U=ot.isWebGL2;null===$&&($=new Jr(1,1,{generateMipmaps:!0,type:We.has("EXT_color_buffer_half_float")?Kd:Na,minFilter:1008,samples:U&&!0===s?4:0})),p.getDrawingBufferSize(J),U?$.setSize(J.x,J.y):$.setSize(wg(J.x),wg(J.y));const K=p.getRenderTarget();p.setRenderTarget($),p.clear();const Xe=p.toneMapping;p.toneMapping=0,ny(T,B,z),p.toneMapping=Xe,ee.updateMultisampleRenderTarget($),ee.updateRenderTargetMipmap($),p.setRenderTarget(K)}(K,B,z),U&&ue.viewport(b.copy(U)),K.length>0&&ny(K,B,z),Xe.length>0&&ny(Xe,B,z),nt.length>0&&ny(nt,B,z),ue.buffers.depth.setTest(!0),ue.buffers.depth.setMask(!0),ue.buffers.color.setMask(!0),ue.setPolygonOffset(!1)}function ny(T,B,z){const U=!0===B.isScene?B.overrideMaterial:null;for(let K=0,Xe=T.length;K<Xe;K++){const nt=T[K],ut=nt.object,at=nt.geometry,Ot=null===U?nt.material:U,xt=nt.group;ut.layers.test(z.layers)&&VQ(ut,B,z,at,Ot,xt)}}function VQ(T,B,z,U,K,Xe){T.onBeforeRender(p,B,z,U,K,Xe),T.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,T.matrixWorld),T.normalMatrix.getNormalMatrix(T.modelViewMatrix),K.onBeforeRender(p,B,z,U,T,Xe),!0===K.transparent&&2===K.side?(K.side=1,K.needsUpdate=!0,p.renderBufferDirect(z,B,U,K,T,Xe),K.side=0,K.needsUpdate=!0,p.renderBufferDirect(z,B,U,K,T,Xe),K.side=2):p.renderBufferDirect(z,B,U,K,T,Xe),T.onAfterRender(p,B,z,U,K,Xe)}function ab(T,B,z){!0!==B.isScene&&(B=ve);const U=ne.get(T),K=h.state.lights,nt=K.state.version,ut=ke.getParameters(T,K.state,h.state.shadowsArray,B,z),at=ke.getProgramCacheKey(ut);let Ot=U.programs;U.environment=T.isMeshStandardMaterial?B.environment:null,U.fog=B.fog,U.envMap=(T.isMeshStandardMaterial?De:ae).get(T.envMap||U.environment),void 0===Ot&&(T.addEventListener("dispose",de),Ot=new Map,U.programs=Ot);let xt=Ot.get(at);if(void 0!==xt){if(U.currentProgram===xt&&U.lightsStateVersion===nt)return $2(T,ut),xt}else ut.uniforms=ke.getUniforms(T),T.onBuild(z,ut,p),T.onBeforeCompile(ut,p),xt=ke.acquireProgram(ut,at),Ot.set(at,xt),U.uniforms=ut.uniforms;const wt=U.uniforms;(!T.isShaderMaterial&&!T.isRawShaderMaterial||!0===T.clipping)&&(wt.clippingPlanes=D.uniform),$2(T,ut),U.needsLights=function HQ(T){return T.isMeshLambertMaterial||T.isMeshToonMaterial||T.isMeshPhongMaterial||T.isMeshStandardMaterial||T.isShadowMaterial||T.isShaderMaterial&&!0===T.lights}(T),U.lightsStateVersion=nt,U.needsLights&&(wt.ambientLightColor.value=K.state.ambient,wt.lightProbe.value=K.state.probe,wt.directionalLights.value=K.state.directional,wt.directionalLightShadows.value=K.state.directionalShadow,wt.spotLights.value=K.state.spot,wt.spotLightShadows.value=K.state.spotShadow,wt.rectAreaLights.value=K.state.rectArea,wt.ltc_1.value=K.state.rectAreaLTC1,wt.ltc_2.value=K.state.rectAreaLTC2,wt.pointLights.value=K.state.point,wt.pointLightShadows.value=K.state.pointShadow,wt.hemisphereLights.value=K.state.hemi,wt.directionalShadowMap.value=K.state.directionalShadowMap,wt.directionalShadowMatrix.value=K.state.directionalShadowMatrix,wt.spotShadowMap.value=K.state.spotShadowMap,wt.spotShadowMatrix.value=K.state.spotShadowMatrix,wt.pointShadowMap.value=K.state.pointShadowMap,wt.pointShadowMatrix.value=K.state.pointShadowMatrix);const gn=xt.getUniforms(),pl=Vo.seqWithValue(gn.seq,wt);return U.currentProgram=xt,U.uniformsList=pl,xt}function $2(T,B){const z=ne.get(T);z.outputEncoding=B.outputEncoding,z.instancing=B.instancing,z.skinning=B.skinning,z.morphTargets=B.morphTargets,z.morphNormals=B.morphNormals,z.morphColors=B.morphColors,z.morphTargetsCount=B.morphTargetsCount,z.numClippingPlanes=B.numClippingPlanes,z.numIntersection=B.numClipIntersection,z.vertexAlphas=B.vertexAlphas,z.vertexTangents=B.vertexTangents,z.toneMapping=B.toneMapping}Mt.setAnimationLoop(function le(T){ze&&ze(T)}),typeof self<"u"&&Mt.setContext(self),this.setAnimationLoop=function(T){ze=T,Te.setAnimationLoop(T),null===T?Mt.stop():Mt.start()},Te.addEventListener("sessionstart",qe),Te.addEventListener("sessionend",Rt),this.render=function(T,B){if(void 0===B||!0===B.isCamera){if(!0!==m){if(!0===T.autoUpdate&&T.updateMatrixWorld(),null===B.parent&&B.updateMatrixWorld(),!0===Te.enabled&&!0===Te.isPresenting&&(!0===Te.cameraAutoUpdate&&Te.updateCamera(B),B=Te.getCamera()),!0===T.isScene&&T.onBeforeRender(p,T,B,v),h=A.get(T,g.length),h.init(),g.push(h),se.multiplyMatrices(B.projectionMatrix,B.matrixWorldInverse),j.setFromProjectionMatrix(se),H=this.localClippingEnabled,Y=D.init(this.clippingPlanes,H,B),d=zt.get(T,f.length),d.init(),f.push(d),vs(T,B,0,p.sortObjects),d.finish(),!0===p.sortObjects&&d.sort(V,q),!0===Y&&D.beginShadows(),W.render(h.state.shadowsArray,T,B),!0===Y&&D.endShadows(),!0===this.info.autoReset&&this.info.reset(),ie.render(d,T),h.setupLights(p.physicallyCorrectLights),B.isArrayCamera){const U=B.cameras;for(let K=0,Xe=U.length;K<Xe;K++){const nt=U[K];Ms(d,T,nt,nt.viewport)}}else Ms(d,T,B);null!==v&&(ee.updateMultisampleRenderTarget(v),ee.updateRenderTargetMipmap(v)),!0===T.isScene&&T.onAfterRender(p,T,B),it.resetDefaultState(),M=-1,w=null,g.pop(),h=g.length>0?g[g.length-1]:null,f.pop(),d=f.length>0?f[f.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return v},this.setRenderTargetTextures=function(T,B,z){ne.get(T.texture).__webglTexture=B,ne.get(T.depthTexture).__webglTexture=z;const U=ne.get(T);U.__hasExternalTextures=!0,U.__hasExternalTextures&&(U.__autoAllocateDepthBuffer=void 0===z,U.__autoAllocateDepthBuffer||!0===We.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),U.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(T,B){const z=ne.get(T);z.__webglFramebuffer=B,z.__useDefaultFramebuffer=void 0===B},this.setRenderTarget=function(T,B=0,z=0){v=T,y=B,_=z;let U=!0;if(T){const at=ne.get(T);void 0!==at.__useDefaultFramebuffer?(ue.bindFramebuffer(36160,null),U=!1):void 0===at.__webglFramebuffer?ee.setupRenderTarget(T):at.__hasExternalTextures&&ee.rebindTextures(T,ne.get(T.texture).__webglTexture,ne.get(T.depthTexture).__webglTexture)}let K=null,Xe=!1,nt=!1;if(T){const at=T.texture;(at.isData3DTexture||at.isDataArrayTexture)&&(nt=!0);const Ot=ne.get(T).__webglFramebuffer;T.isWebGLCubeRenderTarget?(K=Ot[B],Xe=!0):K=ot.isWebGL2&&T.samples>0&&!1===ee.useMultisampledRTT(T)?ne.get(T).__webglMultisampledFramebuffer:Ot,b.copy(T.viewport),S.copy(T.scissor),x=T.scissorTest}else b.copy(I).multiplyScalar(P).floor(),S.copy(G).multiplyScalar(P).floor(),x=L;if(ue.bindFramebuffer(36160,K)&&ot.drawBuffers&&U&&ue.drawBuffers(T,K),ue.viewport(b),ue.scissor(S),ue.setScissorTest(x),Xe){const at=ne.get(T.texture);Z.framebufferTexture2D(36160,36064,34069+B,at.__webglTexture,z)}else if(nt){const at=ne.get(T.texture);Z.framebufferTextureLayer(36160,36064,at.__webglTexture,z||0,B||0)}M=-1},this.readRenderTargetPixels=function(T,B,z,U,K,Xe,nt){if(!T||!T.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ut=ne.get(T).__webglFramebuffer;if(T.isWebGLCubeRenderTarget&&void 0!==nt&&(ut=ut[nt]),ut){ue.bindFramebuffer(36160,ut);try{const at=T.texture,Ot=at.format,xt=at.type;if(Ot!==xi&&X.convert(Ot)!==Z.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const wt=xt===Kd&&(We.has("EXT_color_buffer_half_float")||ot.isWebGL2&&We.has("EXT_color_buffer_float"));if(!(xt===Na||X.convert(xt)===Z.getParameter(35738)||xt===No&&(ot.isWebGL2||We.has("OES_texture_float")||We.has("WEBGL_color_buffer_float"))||wt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");B>=0&&B<=T.width-U&&z>=0&&z<=T.height-K&&Z.readPixels(B,z,U,K,X.convert(Ot),X.convert(xt),Xe)}finally{const at=null!==v?ne.get(v).__webglFramebuffer:null;ue.bindFramebuffer(36160,at)}}},this.copyFramebufferToTexture=function(T,B,z=0){if(!0!==B.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const U=Math.pow(2,-z),K=Math.floor(B.image.width*U),Xe=Math.floor(B.image.height*U);ee.setTexture2D(B,0),Z.copyTexSubImage2D(3553,z,0,0,T.x,T.y,K,Xe),ue.unbindTexture()},this.copyTextureToTexture=function(T,B,z,U=0){const K=B.image.width,Xe=B.image.height,nt=X.convert(z.format),ut=X.convert(z.type);ee.setTexture2D(z,0),Z.pixelStorei(37440,z.flipY),Z.pixelStorei(37441,z.premultiplyAlpha),Z.pixelStorei(3317,z.unpackAlignment),B.isDataTexture?Z.texSubImage2D(3553,U,T.x,T.y,K,Xe,nt,ut,B.image.data):B.isCompressedTexture?Z.compressedTexSubImage2D(3553,U,T.x,T.y,B.mipmaps[0].width,B.mipmaps[0].height,nt,B.mipmaps[0].data):Z.texSubImage2D(3553,U,T.x,T.y,nt,ut,B.image),0===U&&z.generateMipmaps&&Z.generateMipmap(3553),ue.unbindTexture()},this.copyTextureToTexture3D=function(T,B,z,U,K=0){if(p.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Xe=T.max.x-T.min.x+1,nt=T.max.y-T.min.y+1,ut=T.max.z-T.min.z+1,at=X.convert(U.format),Ot=X.convert(U.type);let xt;if(U.isData3DTexture)ee.setTexture3D(U,0),xt=32879;else{if(!U.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ee.setTexture2DArray(U,0),xt=35866}Z.pixelStorei(37440,U.flipY),Z.pixelStorei(37441,U.premultiplyAlpha),Z.pixelStorei(3317,U.unpackAlignment);const wt=Z.getParameter(3314),gn=Z.getParameter(32878),pl=Z.getParameter(3316),vu=Z.getParameter(3315),Mu=Z.getParameter(32877),xs=z.isCompressedTexture?z.mipmaps[0]:z.image;Z.pixelStorei(3314,xs.width),Z.pixelStorei(32878,xs.height),Z.pixelStorei(3316,T.min.x),Z.pixelStorei(3315,T.min.y),Z.pixelStorei(32877,T.min.z),z.isDataTexture||z.isData3DTexture?Z.texSubImage3D(xt,K,B.x,B.y,B.z,Xe,nt,ut,at,Ot,xs.data):z.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Z.compressedTexSubImage3D(xt,K,B.x,B.y,B.z,Xe,nt,ut,at,xs.data)):Z.texSubImage3D(xt,K,B.x,B.y,B.z,Xe,nt,ut,at,Ot,xs),Z.pixelStorei(3314,wt),Z.pixelStorei(32878,gn),Z.pixelStorei(3316,pl),Z.pixelStorei(3315,vu),Z.pixelStorei(32877,Mu),0===K&&U.generateMipmaps&&Z.generateMipmap(xt),ue.unbindTexture()},this.initTexture=function(T){ee.setTexture2D(T,0),ue.unbindTexture()},this.resetState=function(){y=0,_=0,v=null,ue.reset(),it.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Dt.prototype.isWebGLRenderer=!0,class WY extends Dt{}.prototype.isWebGL1Renderer=!0;class Xg{constructor(e,t=25e-5){this.name="",this.color=new pe(e),this.density=t}clone(){return new Xg(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Xg.prototype.isFogExp2=!0;class Yg{constructor(e,t=1,r=1e3){this.name="",this.color=new pe(e),this.near=t,this.far=r}clone(){return new Yg(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Yg.prototype.isFog=!0;class Zg extends Et{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}Zg.prototype.isScene=!0;class $c{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Qd,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Zr()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Zr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Zr()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}$c.prototype.isInterleavedBuffer=!0;const Cr=new E;class Wa{constructor(e,t,r,i=!1){this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Cr.fromBufferAttribute(this,t),Cr.applyMatrix4(e),this.setXYZ(t,Cr.x,Cr.y,Cr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Cr.fromBufferAttribute(this,t),Cr.applyNormalMatrix(e),this.setXYZ(t,Cr.x,Cr.y,Cr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Cr.fromBufferAttribute(this,t),Cr.transformDirection(e),this.setXYZ(t,Cr.x,Cr.y,Cr.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Xt(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Wa(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Wa.prototype.isInterleavedBufferAttribute=!0;class wx extends Nn{constructor(e){super(),this.type="SpriteMaterial",this.color=new pe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let qc;wx.prototype.isSpriteMaterial=!0;const dh=new E,Xc=new E,Yc=new E,Zc=new Q,hh=new Q,kR=new Ee,Jg=new E,fh=new E,Kg=new E,BR=new Q,bx=new Q,VR=new Q;function Qg(n,e,t,r,i,s){Zc.subVectors(n,t).addScalar(.5).multiply(r),void 0!==i?(hh.x=s*Zc.x-i*Zc.y,hh.y=i*Zc.x+s*Zc.y):hh.copy(Zc),n.copy(e),n.x+=hh.x,n.y+=hh.y,n.applyMatrix4(kR)}(class GR extends Et{constructor(e){if(super(),this.type="Sprite",void 0===qc){qc=new Ue;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new $c(t,5);qc.setIndex([0,1,2,0,2,3]),qc.setAttribute("position",new Wa(r,3,0,!1)),qc.setAttribute("uv",new Wa(r,2,3,!1))}this.geometry=qc,this.material=void 0!==e?e:new wx,this.center=new Q(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Xc.setFromMatrixScale(this.matrixWorld),kR.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Yc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Xc.multiplyScalar(-Yc.z);const r=this.material.rotation;let i,s;0!==r&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Qg(Jg.set(-.5,-.5,0),Yc,o,Xc,i,s),Qg(fh.set(.5,-.5,0),Yc,o,Xc,i,s),Qg(Kg.set(.5,.5,0),Yc,o,Xc,i,s),BR.set(0,0),bx.set(1,0),VR.set(1,1);let a=e.ray.intersectTriangle(Jg,fh,Kg,!1,dh);if(null===a&&(Qg(fh.set(-.5,.5,0),Yc,o,Xc,i,s),bx.set(0,1),a=e.ray.intersectTriangle(Jg,Kg,fh,!1,dh),null===a))return;const l=e.ray.origin.distanceTo(dh);l<e.near||l>e.far||t.push({distance:l,point:dh.clone(),uv:An.getUV(dh,Jg,fh,Kg,BR,bx,VR,new Q),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}).prototype.isSprite=!0;const HR=new E,zR=new It,jR=new It,qY=new E,WR=new Ee;class Cx extends Un{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ee,this.bindMatrixInverse=new Ee}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new It,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const r=this.skeleton,i=this.geometry;zR.fromBufferAttribute(i.attributes.skinIndex,e),jR.fromBufferAttribute(i.attributes.skinWeight,e),HR.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=jR.getComponent(s);if(0!==o){const a=zR.getComponent(s);WR.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(qY.copy(HR).applyMatrix4(WR),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}Cx.prototype.isSkinnedMesh=!0;(class Sx extends Et{constructor(){super(),this.type="Bone"}}).prototype.isBone=!0;(class Jc extends xr{constructor(e=null,t=1,r=1,i,s,o,a,l,c=Vn,u=Vn,d,h){super(null,o,a,l,c,u,i,s,d,h),this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}).prototype.isDataTexture=!0;class Kc extends Xt{constructor(e,t,r,i=1){"number"==typeof r&&(i=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,r),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}Kc.prototype.isInstancedBufferAttribute=!0;const qR=new Ee,XR=new Ee,tm=[],ph=new Un;(class YR extends Un{constructor(e,t,r){super(e,t),this.instanceMatrix=new Kc(new Float32Array(16*r),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(ph.geometry=this.geometry,ph.material=this.material,void 0!==ph.material)for(let s=0;s<i;s++){this.getMatrixAt(s,qR),XR.multiplyMatrices(r,qR),ph.matrixWorld=XR,ph.raycast(e,tm);for(let o=0,a=tm.length;o<a;o++){const l=tm[o];l.instanceId=s,l.object=this,t.push(l)}tm.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Kc(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class er extends Nn{constructor(e){super(),this.type="LineBasicMaterial",this.color=new pe(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}er.prototype.isLineBasicMaterial=!0;const ZR=new E,JR=new E,KR=new Ee,Dx=new Ha,nm=new Ua;class $a extends Et{constructor(e=new Ue,t=new er){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)ZR.fromBufferAttribute(t,i-1),JR.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=ZR.distanceTo(JR);e.setAttribute("lineDistance",new Se(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),nm.copy(r.boundingSphere),nm.applyMatrix4(i),nm.radius+=s,!1===e.ray.intersectsSphere(nm))return;KR.copy(i).invert(),Dx.copy(e.ray).applyMatrix4(KR);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new E,u=new E,d=new E,h=new E,f=this.isLineSegments?2:1;if(r.isBufferGeometry){const g=r.index,m=r.attributes.position;if(null!==g)for(let v=Math.max(0,o.start),M=Math.min(g.count,o.start+o.count)-1;v<M;v+=f){const w=g.getX(v),b=g.getX(v+1);if(c.fromBufferAttribute(m,w),u.fromBufferAttribute(m,b),Dx.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const x=e.ray.origin.distanceTo(h);x<e.near||x>e.far||t.push({distance:x,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}else for(let v=Math.max(0,o.start),M=Math.min(m.count,o.start+o.count)-1;v<M;v+=f){if(c.fromBufferAttribute(m,v),u.fromBufferAttribute(m,v+1),Dx.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(h);b<e.near||b>e.far||t.push({distance:b,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}$a.prototype.isLine=!0;const QR=new E,eO=new E;class Qc extends $a{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)QR.fromBufferAttribute(t,i),eO.fromBufferAttribute(t,i+1),r[i]=0===i?0:r[i-1],r[i+1]=r[i]+QR.distanceTo(eO);e.setAttribute("lineDistance",new Se(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Qc.prototype.isLineSegments=!0;(class tO extends $a{constructor(e,t){super(e,t),this.type="LineLoop"}}).prototype.isLineLoop=!0;class Tx extends Nn{constructor(e){super(),this.type="PointsMaterial",this.color=new pe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}Tx.prototype.isPointsMaterial=!0;const nO=new Ee,Ax=new Ha,rm=new Ua,im=new E;function iO(n,e,t,r,i,s,o){const a=Ax.distanceSqToPoint(n);if(a<t){const l=new E;Ax.closestPointToPoint(n,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}(class rO extends Et{constructor(e=new Ue,t=new Tx){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),rm.copy(r.boundingSphere),rm.applyMatrix4(i),rm.radius+=s,!1===e.ray.intersectsSphere(rm))return;nO.copy(i).invert(),Ax.copy(e.ray).applyMatrix4(nO);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(r.isBufferGeometry){const c=r.index,d=r.attributes.position;if(null!==c)for(let g=Math.max(0,o.start),p=Math.min(c.count,o.start+o.count);g<p;g++){const m=c.getX(g);im.fromBufferAttribute(d,m),iO(im,m,l,i,e,t,this)}else for(let g=Math.max(0,o.start),p=Math.min(d.count,o.start+o.count);g<p;g++)im.fromBufferAttribute(d,g),iO(im,g,l,i,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}).prototype.isPoints=!0,class YY extends xr{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.minFilter=void 0!==o?o:Tn,this.magFilter=void 0!==s?s:Tn,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e==0&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class ZY extends xr{constructor(e,t,r){super({width:e,height:t}),this.format=r,this.magFilter=Vn,this.minFilter=Vn,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class sO extends xr{constructor(e,t,r,i,s,o,a,l,c,u,d,h){super(null,o,a,l,c,u,i,s,d,h),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0,class JY extends xr{constructor(e,t,r,i,s,o,a,l,c){super(e,t,r,i,s,o,a,l,c),this.needsUpdate=!0}}.prototype.isCanvasTexture=!0;class Si{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;o=t||e*r[s-1];let c,a=0,l=s-1;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),c=r[i]-o,c<0)a=i+1;else{if(!(c>0)){l=i;break}l=i-1}if(i=l,r[i]===o)return i/(s-1);const u=r[i];return(i+(o-u)/(r[i+1]-u))/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new Q:new E);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new E,i=[],s=[],o=[],a=new E,l=new Ee;for(let f=0;f<=e;f++)i[f]=this.getTangentAt(f/e,new E);s[0]=new E,o[0]=new E;let c=Number.MAX_VALUE;const u=Math.abs(i[0].x),d=Math.abs(i[0].y),h=Math.abs(i[0].z);u<=c&&(c=u,r.set(1,0,0)),d<=c&&(c=d,r.set(0,1,0)),h<=c&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),o[f]=o[f-1].clone(),a.crossVectors(i[f-1],i[f]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(vn(i[f-1].dot(i[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(a,g))}o[f].crossVectors(i[f],s[f])}if(!0===t){let f=Math.acos(vn(s[0].dot(s[e]),-1,1));f/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(f=-f);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(i[g],f*g)),o[g].crossVectors(i[g],s[g])}return{tangents:i,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class sm extends Si{constructor(e=0,t=0,r=1,i=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new Q,i=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(s=o?0:i),!0===this.aClockwise&&!o&&(s===i?s=-i:s-=i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,f=c-this.aY;l=h*u-f*d+this.aX,c=h*d+f*u+this.aY}return r.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}sm.prototype.isEllipseCurve=!0;class oO extends sm{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.type="ArcCurve"}}function Nx(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){i(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let h=(o-s)/c-(a-s)/(c+u)+(a-o)/u,f=(a-o)/u-(l-o)/(u+d)+(l-a)/d;h*=u,f*=u,i(o,a,h,f)},calc:function(s){const o=s*s;return n+e*s+t*o+r*(o*s)}}}oO.prototype.isArcCurve=!0;const om=new E,Px=new Nx,Ix=new Nx,Rx=new Nx;class aO extends Si{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new E){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let c,u,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=i[(a-1)%s]:(om.subVectors(i[0],i[1]).add(i[0]),c=om);const d=i[a%s],h=i[(a+1)%s];if(this.closed||a+2<s?u=i[(a+2)%s]:(om.subVectors(i[s-1],i[s-2]).add(i[s-1]),u=om),"centripetal"===this.curveType||"chordal"===this.curveType){const f="chordal"===this.curveType?.5:.25;let g=Math.pow(c.distanceToSquared(d),f),p=Math.pow(d.distanceToSquared(h),f),m=Math.pow(h.distanceToSquared(u),f);p<1e-4&&(p=1),g<1e-4&&(g=p),m<1e-4&&(m=p),Px.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,g,p,m),Ix.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,g,p,m),Rx.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,g,p,m)}else"catmullrom"===this.curveType&&(Px.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),Ix.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),Rx.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return r.set(Px.calc(l),Ix.calc(l),Rx.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push((new E).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function lO(n,e,t,r,i){const s=.5*(r-e),o=.5*(i-t),a=n*n;return(2*t-2*r+s+o)*(n*a)+(-3*t+3*r-2*s-o)*a+s*n+t}function gh(n,e,t,r){return function KY(n,e){const t=1-n;return t*t*e}(n,e)+function QY(n,e){return 2*(1-n)*n*e}(n,t)+function eZ(n,e){return n*n*e}(n,r)}function mh(n,e,t,r,i){return function tZ(n,e){const t=1-n;return t*t*t*e}(n,e)+function nZ(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function rZ(n,e){return 3*(1-n)*n*n*e}(n,r)+function iZ(n,e){return n*n*n*e}(n,i)}aO.prototype.isCatmullRomCurve3=!0;class Ox extends Si{constructor(e=new Q,t=new Q,r=new Q,i=new Q){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new Q){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(mh(e,i.x,s.x,o.x,a.x),mh(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}Ox.prototype.isCubicBezierCurve=!0;class cO extends Si{constructor(e=new E,t=new E,r=new E,i=new E){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new E){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(mh(e,i.x,s.x,o.x,a.x),mh(e,i.y,s.y,o.y,a.y),mh(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}cO.prototype.isCubicBezierCurve3=!0;class am extends Si{constructor(e=new Q,t=new Q){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Q){const r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const r=t||new Q;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}am.prototype.isLineCurve=!0;class Fx extends Si{constructor(e=new Q,t=new Q,r=new Q){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new Q){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(gh(e,i.x,s.x,o.x),gh(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Fx.prototype.isQuadraticBezierCurve=!0;class Lx extends Si{constructor(e=new E,t=new E,r=new E){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new E){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(gh(e,i.x,s.x,o.x),gh(e,i.y,s.y,o.y),gh(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Lx.prototype.isQuadraticBezierCurve3=!0;class kx extends Si{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new Q){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[0===o?o:o-1],c=i[o],u=i[o>i.length-2?i.length-1:o+1],d=i[o>i.length-3?i.length-1:o+2];return r.set(lO(a,l.x,c.x,u.x,d.x),lO(a,l.y,c.y,u.y,d.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push((new Q).fromArray(i))}return this}}kx.prototype.isSplineCurve=!0;var Bx=Object.freeze({__proto__:null,ArcCurve:oO,CatmullRomCurve3:aO,CubicBezierCurve:Ox,CubicBezierCurve3:cO,EllipseCurve:sm,LineCurve:am,LineCurve3:class sZ extends Si{constructor(e=new E,t=new E){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new E){const r=t;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Fx,QuadraticBezierCurve3:Lx,SplineCurve:kx});class oZ extends Si{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new am(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],l=o.getPoints(o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e);for(let c=0;c<l.length;c++){const u=l[c];r&&r.equals(u)||(t.push(u),r=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push((new Bx[i.type]).fromJSON(i))}return this}}class yh extends oZ{constructor(e){super(),this.type="Path",this.currentPoint=new Q,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new am(this.currentPoint.clone(),new Q(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new Fx(this.currentPoint.clone(),new Q(e,t),new Q(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new Ox(this.currentPoint.clone(),new Q(e,t),new Q(r,i),new Q(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new kx(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const c=new sm(e,t,r,i,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}new E,new E,new E,new An;class io extends yh{constructor(e){super(e),this.uuid=Zr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push((new yh).fromJSON(i))}return this}}function dO(n,e,t,r,i){let s,o;if(i===function bZ(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}(n,e,t,r)>0)for(s=e;s<t;s+=r)o=pO(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=pO(s,n[s],n[s+1],o);return o&&gm(o,o.next)&&(xh(o),o=o.next),o}function Uo(n,e){if(!n)return n;e||(e=n);let r,t=n;do{if(r=!1,t.steiner||!gm(t,t.next)&&0!==on(t.prev,t,t.next))t=t.next;else{if(xh(t),t=e=t.prev,t===t.next)break;r=!0}}while(r||t!==e);return e}function vh(n,e,t,r,i,s,o){if(!n)return;!o&&s&&function yZ(n,e,t,r){let i=n;do{null===i.z&&(i.z=Gx(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,function _Z(n){let e,t,r,i,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<c&&(a++,r=r.nextZ,r);e++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,c*=2}while(o>1)}(i)}(n,r,i,s);let l,c,a=n;for(;n.prev!==n.next;)if(l=n.prev,c=n.next,s?cZ(n,r,i,s):lZ(n))e.push(l.i/t),e.push(n.i/t),e.push(c.i/t),xh(n),n=c.next,a=c.next;else if((n=c)===a){o?1===o?vh(n=uZ(Uo(n),e,t),e,t,r,i,s,2):2===o&&dZ(n,e,t,r,i,s):vh(Uo(n),e,t,r,i,s,1);break}}function lZ(n){const e=n.prev,t=n,r=n.next;if(on(e,t,r)>=0)return!1;let i=n.next.next;for(;i!==n.prev;){if(tu(e.x,e.y,t.x,t.y,r.x,r.y,i.x,i.y)&&on(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function cZ(n,e,t,r){const i=n.prev,s=n,o=n.next;if(on(i,s,o)>=0)return!1;const c=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,u=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,d=Gx(i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,e,t,r),h=Gx(c,u,e,t,r);let f=n.prevZ,g=n.nextZ;for(;f&&f.z>=d&&g&&g.z<=h;){if(f!==n.prev&&f!==n.next&&tu(i.x,i.y,s.x,s.y,o.x,o.y,f.x,f.y)&&on(f.prev,f,f.next)>=0||(f=f.prevZ,g!==n.prev&&g!==n.next&&tu(i.x,i.y,s.x,s.y,o.x,o.y,g.x,g.y)&&on(g.prev,g,g.next)>=0))return!1;g=g.nextZ}for(;f&&f.z>=d;){if(f!==n.prev&&f!==n.next&&tu(i.x,i.y,s.x,s.y,o.x,o.y,f.x,f.y)&&on(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;g&&g.z<=h;){if(g!==n.prev&&g!==n.next&&tu(i.x,i.y,s.x,s.y,o.x,o.y,g.x,g.y)&&on(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function uZ(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!gm(i,s)&&hO(i,r,r.next,s)&&Mh(i,s)&&Mh(s,i)&&(e.push(i.i/t),e.push(r.i/t),e.push(s.i/t),xh(r),xh(r.next),r=n=s),r=r.next}while(r!==n);return Uo(r)}function dZ(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&MZ(o,a)){let l=fO(o,a);return o=Uo(o,o.next),l=Uo(l,l.next),vh(o,e,t,r,i,s),void vh(l,e,t,r,i,s)}a=a.next}o=o.next}while(o!==n)}function fZ(n,e){return n.x-e.x}function pZ(n,e){if(e=function gZ(n,e){let t=e;const r=n.x,i=n.y;let o,s=-1/0;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const h=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=r&&h>s){if(s=h,h===r){if(i===t.y)return t;if(i===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(r===s)return o;const a=o,l=o.x,c=o.y;let d,u=1/0;t=o;do{r>=t.x&&t.x>=l&&r!==t.x&&tu(i<c?r:s,i,l,c,i<c?s:r,i,t.x,t.y)&&(d=Math.abs(i-t.y)/(r-t.x),Mh(t,n)&&(d<u||d===u&&(t.x>o.x||t.x===o.x&&mZ(o,t)))&&(o=t,u=d)),t=t.next}while(t!==a);return o}(n,e),e){const t=fO(e,n);Uo(e,e.next),Uo(t,t.next)}}function mZ(n,e){return on(n.prev,n,e.prev)<0&&on(e.next,n,n.next)<0}function Gx(n,e,t,r,i){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-t)*i)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function vZ(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function tu(n,e,t,r,i,s,o,a){return(i-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(r-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(i-o)*(r-a)>=0}function MZ(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function xZ(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&hO(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(Mh(n,e)&&Mh(e,n)&&function wZ(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do{t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==n);return r}(n,e)&&(on(n.prev,n,e.prev)||on(n,e.prev,e))||gm(n,e)&&on(n.prev,n,n.next)>0&&on(e.prev,e,e.next)>0)}function on(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function gm(n,e){return n.x===e.x&&n.y===e.y}function hO(n,e,t,r){const i=ym(on(n,e,t)),s=ym(on(n,e,r)),o=ym(on(t,r,n)),a=ym(on(t,r,e));return!!(i!==s&&o!==a||0===i&&mm(n,t,e)||0===s&&mm(n,r,e)||0===o&&mm(t,n,r)||0===a&&mm(t,e,r))}function mm(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function ym(n){return n>0?1:n<0?-1:0}function Mh(n,e){return on(n.prev,n,n.next)<0?on(n,e,n.next)>=0&&on(n,n.prev,e)>=0:on(n,e,n.prev)<0||on(n,n.next,e)<0}function fO(n,e){const t=new Ux(n.i,n.x,n.y),r=new Ux(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function pO(n,e,t,r){const i=new Ux(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function xh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Ux(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class so{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return.5*r}static isClockWise(e){return so.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];gO(e),mO(r,e);let o=e.length;t.forEach(gO);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,mO(r,t[l]);const a=function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=dO(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,h,f;if(r&&(s=function hZ(n,e,t,r){const i=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,c=dO(n,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(vZ(c));for(i.sort(fZ),s=0;s<i.length;s++)pZ(i[s],t),t=Uo(t,t.next);return t}(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let g=t;g<i;g+=t)d=n[g],h=n[g+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-a,u-l),f=0!==f?1/f:0}return vh(s,o,t,a,l,f),o}(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function gO(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function mO(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Ho extends Ue{constructor(e=new io([new Q(.5,.5),new Q(-.5,.5),new Q(-.5,-.5),new Q(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++)o(e[a]);function o(a){const l=[],c=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1;let d=void 0!==t.depth?t.depth:1,h=void 0===t.bevelEnabled||t.bevelEnabled,f=void 0!==t.bevelThickness?t.bevelThickness:.2,g=void 0!==t.bevelSize?t.bevelSize:f-.1,p=void 0!==t.bevelOffset?t.bevelOffset:0,m=void 0!==t.bevelSegments?t.bevelSegments:3;const y=t.extrudePath,_=void 0!==t.UVGenerator?t.UVGenerator:CZ;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),d=t.amount);let v,w,b,S,x,M=!1;y&&(v=y.getSpacedPoints(u),M=!0,h=!1,w=y.computeFrenetFrames(u,!1),b=new E,S=new E,x=new E),h||(m=0,f=0,g=0,p=0);const C=a.extractPoints(c);let N=C.shape;const P=C.holes;if(!so.isClockWise(N)){N=N.reverse();for(let ne=0,ee=P.length;ne<ee;ne++){const ae=P[ne];so.isClockWise(ae)&&(P[ne]=ae.reverse())}}const q=so.triangulateShape(N,P),I=N;for(let ne=0,ee=P.length;ne<ee;ne++)N=N.concat(P[ne]);function G(ne,ee,ae){return ee||console.error("THREE.ExtrudeGeometry: vec does not exist"),ee.clone().multiplyScalar(ae).add(ne)}const L=N.length,j=q.length;function Y(ne,ee,ae){let De,_e,tt;const He=ne.x-ee.x,ke=ne.y-ee.y,Jt=ae.x-ne.x,zt=ae.y-ne.y,A=He*He+ke*ke;if(Math.abs(He*zt-ke*Jt)>Number.EPSILON){const W=Math.sqrt(A),ie=Math.sqrt(Jt*Jt+zt*zt),ye=ee.x-ke/W,we=ee.y+He/W,it=((ae.x-zt/ie-ye)*zt-(ae.y+Jt/ie-we)*Jt)/(He*zt-ke*Jt);De=ye+He*it-ne.x,_e=we+ke*it-ne.y;const ct=De*De+_e*_e;if(ct<=2)return new Q(De,_e);tt=Math.sqrt(ct/2)}else{let W=!1;He>Number.EPSILON?Jt>Number.EPSILON&&(W=!0):He<-Number.EPSILON?Jt<-Number.EPSILON&&(W=!0):Math.sign(ke)===Math.sign(zt)&&(W=!0),W?(De=-ke,_e=He,tt=Math.sqrt(A)):(De=He,_e=ke,tt=Math.sqrt(A/2))}return new Q(De/tt,_e/tt)}const H=[];for(let ne=0,ee=I.length,ae=ee-1,De=ne+1;ne<ee;ne++,ae++,De++)ae===ee&&(ae=0),De===ee&&(De=0),H[ne]=Y(I[ne],I[ae],I[De]);const $=[];let se,J=H.concat();for(let ne=0,ee=P.length;ne<ee;ne++){const ae=P[ne];se=[];for(let De=0,_e=ae.length,tt=_e-1,He=De+1;De<_e;De++,tt++,He++)tt===_e&&(tt=0),He===_e&&(He=0),se[De]=Y(ae[De],ae[tt],ae[He]);$.push(se),J=J.concat(se)}for(let ne=0;ne<m;ne++){const ee=ne/m,ae=f*Math.cos(ee*Math.PI/2),De=g*Math.sin(ee*Math.PI/2)+p;for(let _e=0,tt=I.length;_e<tt;_e++){const He=G(I[_e],H[_e],De);Tt(He.x,He.y,-ae)}for(let _e=0,tt=P.length;_e<tt;_e++){const He=P[_e];se=$[_e];for(let ke=0,Jt=He.length;ke<Jt;ke++){const zt=G(He[ke],se[ke],De);Tt(zt.x,zt.y,-ae)}}}const ce=g+p;for(let ne=0;ne<L;ne++){const ee=h?G(N[ne],J[ne],ce):N[ne];M?(S.copy(w.normals[0]).multiplyScalar(ee.x),b.copy(w.binormals[0]).multiplyScalar(ee.y),x.copy(v[0]).add(S).add(b),Tt(x.x,x.y,x.z)):Tt(ee.x,ee.y,0)}for(let ne=1;ne<=u;ne++)for(let ee=0;ee<L;ee++){const ae=h?G(N[ee],J[ee],ce):N[ee];M?(S.copy(w.normals[ne]).multiplyScalar(ae.x),b.copy(w.binormals[ne]).multiplyScalar(ae.y),x.copy(v[ne]).add(S).add(b),Tt(x.x,x.y,x.z)):Tt(ae.x,ae.y,d/u*ne)}for(let ne=m-1;ne>=0;ne--){const ee=ne/m,ae=f*Math.cos(ee*Math.PI/2),De=g*Math.sin(ee*Math.PI/2)+p;for(let _e=0,tt=I.length;_e<tt;_e++){const He=G(I[_e],H[_e],De);Tt(He.x,He.y,d+ae)}for(let _e=0,tt=P.length;_e<tt;_e++){const He=P[_e];se=$[_e];for(let ke=0,Jt=He.length;ke<Jt;ke++){const zt=G(He[ke],se[ke],De);M?Tt(zt.x,zt.y+v[u-1].y,v[u-1].x+ae):Tt(zt.x,zt.y,d+ae)}}}function Z(ne,ee){let ae=ne.length;for(;--ae>=0;){const De=ae;let _e=ae-1;_e<0&&(_e=ne.length-1);for(let tt=0,He=u+2*m;tt<He;tt++){const ke=L*tt,Jt=L*(tt+1);ot(ee+De+ke,ee+_e+ke,ee+_e+Jt,ee+De+Jt)}}}function Tt(ne,ee,ae){l.push(ne),l.push(ee),l.push(ae)}function We(ne,ee,ae){ue(ne),ue(ee),ue(ae);const De=i.length/3,_e=_.generateTopUV(r,i,De-3,De-2,De-1);mt(_e[0]),mt(_e[1]),mt(_e[2])}function ot(ne,ee,ae,De){ue(ne),ue(ee),ue(De),ue(ee),ue(ae),ue(De);const _e=i.length/3,tt=_.generateSideWallUV(r,i,_e-6,_e-3,_e-2,_e-1);mt(tt[0]),mt(tt[1]),mt(tt[3]),mt(tt[1]),mt(tt[2]),mt(tt[3])}function ue(ne){i.push(l[3*ne+0]),i.push(l[3*ne+1]),i.push(l[3*ne+2])}function mt(ne){s.push(ne.x),s.push(ne.y)}(function ve(){const ne=i.length/3;if(h){let ee=0,ae=L*ee;for(let De=0;De<j;De++){const _e=q[De];We(_e[2]+ae,_e[1]+ae,_e[0]+ae)}ee=u+2*m,ae=L*ee;for(let De=0;De<j;De++){const _e=q[De];We(_e[0]+ae,_e[1]+ae,_e[2]+ae)}}else{for(let ee=0;ee<j;ee++){const ae=q[ee];We(ae[2],ae[1],ae[0])}for(let ee=0;ee<j;ee++){const ae=q[ee];We(ae[0]+L*u,ae[1]+L*u,ae[2]+L*u)}}r.addGroup(ne,i.length/3-ne,0)})(),function Ce(){const ne=i.length/3;let ee=0;Z(I,ee),ee+=I.length;for(let ae=0,De=P.length;ae<De;ae++){const _e=P[ae];Z(_e,ee),ee+=_e.length}r.addGroup(ne,i.length/3-ne,1)}()}this.setAttribute("position",new Se(i,3)),this.setAttribute("uv",new Se(s,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function SZ(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++)t.shapes.push(n[r].uuid);else t.shapes.push(n.uuid);return void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++)r.push(t[e.shapes[s]]);const i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=(new Bx[i.type]).fromJSON(i)),new Ho(r,e.options)}}const CZ={generateTopUV:function(n,e,t,r,i){const a=e[3*r],l=e[3*r+1],c=e[3*i],u=e[3*i+1];return[new Q(e[3*t],e[3*t+1]),new Q(a,l),new Q(c,u)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[3*t],a=e[3*t+1],l=e[3*t+2],c=e[3*r],u=e[3*r+1],d=e[3*r+2],h=e[3*i],f=e[3*i+1],g=e[3*i+2],p=e[3*s],m=e[3*s+1],y=e[3*s+2];return Math.abs(a-u)<Math.abs(o-c)?[new Q(o,1-l),new Q(c,1-d),new Q(h,1-g),new Q(p,1-y)]:[new Q(a,1-l),new Q(u,1-d),new Q(f,1-g),new Q(m,1-y)]}};class bh extends Ue{constructor(e=new io([new Q(0,.5),new Q(-.5,-.5),new Q(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(!1===Array.isArray(e))c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;function c(u){const d=i.length/3,h=u.extractPoints(t);let f=h.shape;const g=h.holes;!1===so.isClockWise(f)&&(f=f.reverse());for(let m=0,y=g.length;m<y;m++){const _=g[m];!0===so.isClockWise(_)&&(g[m]=_.reverse())}const p=so.triangulateShape(f,g);for(let m=0,y=g.length;m<y;m++)f=f.concat(g[m]);for(let m=0,y=f.length;m<y;m++){const _=f[m];i.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let m=0,y=p.length;m<y;m++){const _=p[m];r.push(_[0]+d,_[1]+d,_[2]+d),l+=3}}this.setIndex(r),this.setAttribute("position",new Se(i,3)),this.setAttribute("normal",new Se(s,3)),this.setAttribute("uv",new Se(o,2))}toJSON(){const e=super.toJSON();return function EZ(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++)e.shapes.push(n[t].uuid);else e.shapes.push(n.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++)r.push(t[e.shapes[i]]);return new bh(r,e.curveSegments)}}class MO extends Nn{constructor(e){super(),this.type="ShadowMaterial",this.color=new pe(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}MO.prototype.isShadowMaterial=!0;class xO extends qi{constructor(e){super(e),this.type="RawShaderMaterial"}}xO.prototype.isRawShaderMaterial=!0;class Hx extends Nn{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new pe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}Hx.prototype.isMeshStandardMaterial=!0;class wO extends Hx{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Q(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return vn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new pe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new pe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new pe(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}wO.prototype.isMeshPhysicalMaterial=!0;class bO extends Nn{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new pe(16777215),this.specular=new pe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}bO.prototype.isMeshPhongMaterial=!0;class CO extends Nn{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new pe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}CO.prototype.isMeshToonMaterial=!0;class SO extends Nn{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}SO.prototype.isMeshNormalMaterial=!0;class EO extends Nn{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new pe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}EO.prototype.isMeshLambertMaterial=!0;class DO extends Nn{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new pe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}DO.prototype.isMeshMatcapMaterial=!0;class TO extends er{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}TO.prototype.isLineDashedMaterial=!0;const DZ={ShadowMaterial:MO,SpriteMaterial:wx,RawShaderMaterial:xO,ShaderMaterial:qi,PointsMaterial:Tx,MeshPhysicalMaterial:wO,MeshStandardMaterial:Hx,MeshPhongMaterial:bO,MeshToonMaterial:CO,MeshNormalMaterial:SO,MeshLambertMaterial:EO,MeshDepthMaterial:vx,MeshDistanceMaterial:Mx,MeshBasicMaterial:no,MeshMatcapMaterial:DO,LineDashedMaterial:TO,LineBasicMaterial:er,Material:Nn};Nn.fromType=function(n){return new DZ[n]};const tn={arraySlice:function(n,e,t){return tn.isTypedArray(n)?new n.constructor(n.subarray(e,void 0!==t?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(function e(i,s){return n[i]-n[s]}),r},sortedArray:function(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i},flattenJSON:function(n,e,t,r){let i=1,s=n[0];for(;void 0!==s&&void 0===s[r];)s=n[i++];if(void 0===s)return;let o=s[r];if(void 0!==o)if(Array.isArray(o))do{o=s[r],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[i++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[r],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++]}while(void 0!==s);else do{o=s[r],void 0!==o&&(e.push(s.time),t.push(o)),s=n[i++]}while(void 0!==s)},subclip:function(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],h=[];for(let f=0;f<c.times.length;++f){const g=c.times[f]*i;if(!(g<t||g>=r)){d.push(c.times[f]);for(let p=0;p<u;++p)h.push(c.values[f*u+p])}}0!==d.length&&(c.times=tn.convertArray(d,c.times.constructor),c.values=tn.convertArray(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if("bool"===l||"string"===l)continue;const c=n.tracks.find(function(y){return y.name===a.name&&y.ValueTypeName===l});if(void 0===c)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const f=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=f/3);const g=a.times.length-1;let p;if(s<=a.times[0])p=tn.arraySlice(a.values,u,d-u);else if(s>=a.times[g]){const y=g*d+u;p=tn.arraySlice(a.values,y,y+d-u)}else{const y=a.createInterpolant(),_=u,v=d-u;y.evaluate(s),p=tn.arraySlice(y.resultBuffer,_,v)}"quaternion"===l&&(new $n).fromArray(p).normalize().conjugate().toArray(p);const m=c.times.length;for(let y=0;y<m;++y){const _=y*f+h;if("quaternion"===l)$n.multiplyQuaternionsFlat(c.values,_,p,0,c.values,_);else{const v=f-2*h;for(let M=0;M<v;++M)c.values[_+M]-=p[M]}}}return n.blendMode=2501,n}};class zo{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(void 0===i){if(e<s)break r;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,s)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(void 0===s)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0}}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],void 0===s)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,s,e)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}zo.prototype.beforeStart_=zo.prototype.copySampleValue_,zo.prototype.afterEnd_=zo.prototype.copySampleValue_;class TZ extends zo{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:bc,endingEnd:bc}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case Cc:s=e,a=2*t-r;break;case 2402:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(void 0===l)switch(this.getSettings_().endingEnd){case Cc:o=e,l=2*r-t;break;case 2402:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const c=.5*(r-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-r),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,f=this._weightNext,g=(r-t)/(i-t),p=g*g,m=p*g,y=-h*m+2*h*p-h*g,_=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*g+1,v=(-1-f)*m+(1.5+f)*p+.5*g,M=f*m-f*p;for(let w=0;w!==a;++w)s[w]=y*o[u+w]+_*o[c+w]+v*o[l+w]+M*o[d+w];return s}}class AO extends zo{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(r-t)/(i-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*d+o[l+h]*u;return s}}class AZ extends zo{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class ds{constructor(e,t,r,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=tn.convertArray(t,this.TimeBufferType),this.values=tn.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:tn.convertArray(e.times,Array),values:tn.convertArray(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new AZ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new AO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new TZ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;-1!==o&&r[o]>t;)--o;if(++o,0!==s||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=tn.arraySlice(r,s,o),this.values=tn.arraySlice(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==i&&tn.isTypedArray(i))for(let a=0,l=i.length;a!==l;++a){const c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=tn.arraySlice(this.times),t=tn.arraySlice(this.values),r=this.getValueSize(),i=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(i)l=!0;else{const d=a*r,h=d-r,f=d+r;for(let g=0;g!==r;++g){const p=t[d+g];if(p!==t[h+g]||p!==t[f+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*r,h=o*r;for(let f=0;f!==r;++f)t[h+f]=t[d+f]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,c=0;c!==r;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=tn.arraySlice(e,0,o),this.values=tn.arraySlice(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=tn.arraySlice(this.times,0),t=tn.arraySlice(this.values,0),i=new(0,this.constructor)(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}ds.prototype.TimeBufferType=Float32Array,ds.prototype.ValueBufferType=Float32Array,ds.prototype.DefaultInterpolation=2301;class nu extends ds{}nu.prototype.ValueTypeName="bool",nu.prototype.ValueBufferType=Array,nu.prototype.DefaultInterpolation=2300,nu.prototype.InterpolantFactoryMethodLinear=void 0,nu.prototype.InterpolantFactoryMethodSmooth=void 0;class NO extends ds{}NO.prototype.ValueTypeName="color";class Cm extends ds{}Cm.prototype.ValueTypeName="number";class NZ extends zo{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let c=e*a;for(let u=c+a;c!==u;c+=4)$n.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Sh extends ds{InterpolantFactoryMethodLinear(e){return new NZ(this.times,this.values,this.getValueSize(),e)}}Sh.prototype.ValueTypeName="quaternion",Sh.prototype.DefaultInterpolation=2301,Sh.prototype.InterpolantFactoryMethodSmooth=void 0;class ru extends ds{}ru.prototype.ValueTypeName="string",ru.prototype.ValueBufferType=Array,ru.prototype.DefaultInterpolation=2300,ru.prototype.InterpolantFactoryMethodLinear=void 0,ru.prototype.InterpolantFactoryMethodSmooth=void 0;class Sm extends ds{}Sm.prototype.ValueTypeName="vector";class Em{constructor(e,t=-1,r,i=2500){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=Zr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(IZ(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(ds.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=tn.getKeyframeOrder(l);l=tn.sortedArray(l,1,u),c=tn.sortedArray(c,1,u),!i&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new Cm(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let h=i[d];h||(i[d]=h=[]),h.push(c)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(d,h,f,g,p){if(0!==f.length){const m=[],y=[];tn.flattenJSON(f,m,y,g),0!==m.length&&p.push(new d(h,m,y))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const h=c[d].keys;if(h&&0!==h.length)if(h[0].morphTargets){const f={};let g;for(g=0;g<h.length;g++)if(h[g].morphTargets)for(let p=0;p<h[g].morphTargets.length;p++)f[h[g].morphTargets[p]]=-1;for(const p in f){const m=[],y=[];for(let _=0;_!==h[g].morphTargets.length;++_){const v=h[g];m.push(v.time),y.push(v.morphTarget===p?1:0)}i.push(new Cm(".morphTargetInfluence["+p+"]",m,y))}l=f.length*o}else{const f=".bones["+t[d].name+"]";r(Sm,f+".position",h,"pos",i),r(Sh,f+".quaternion",h,"rot",i),r(Sm,f+".scale",h,"scl",i)}}return 0===i.length?null:new this(s,l,i,a)}resetDuration(){let t=0;for(let r=0,i=this.tracks.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function IZ(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function PZ(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Cm;case"vector":case"vector2":case"vector3":case"vector4":return Sm;case"color":return NO;case"quaternion":return Sh;case"bool":case"boolean":return nu;case"string":return ru}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],r=[];tn.flattenJSON(n.keys,t,r,"value"),n.times=t,n.values=r}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const iu={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};const RZ=new class PO{constructor(e,t,r){const i=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(u){a++,!1===s&&void 0!==i.onStart&&i.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==i.onProgress&&i.onProgress(u,o,a),o===a&&(s=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(u){void 0!==i.onError&&i.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return-1!==d&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const f=c[d],g=c[d+1];if(f.global&&(f.lastIndex=0),f.test(u))return g}return null}}};class jo{constructor(e){this.manager=void 0!==e?e:RZ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const oo={};class Wo extends jo{constructor(e){super(e)}load(e,t,r,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=iu.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==oo[e])return void oo[e].push({onLoad:t,onProgress:r,onError:i});oo[e]=[],oo[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===c.body||void 0===c.body.getReader)return c;const u=oo[e],d=c.body.getReader(),h=c.headers.get("Content-Length"),f=h?parseInt(h):0,g=0!==f;let p=0;const m=new ReadableStream({start(y){!function _(){d.read().then(({done:v,value:M})=>{if(v)y.close();else{p+=M.byteLength;const w=new ProgressEvent("progress",{lengthComputable:g,loaded:p,total:f});for(let b=0,S=u.length;b<S;b++){const x=u[b];x.onProgress&&x.onProgress(w)}y.enqueue(M),_()}})}()}});return new Response(m)}throw Error(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return c.json();default:if(void 0===a)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),h=d&&d[1]?d[1].toLowerCase():void 0,f=new TextDecoder(h);return c.arrayBuffer().then(g=>f.decode(g))}}}).then(c=>{iu.add(e,c);const u=oo[e];delete oo[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onLoad&&f.onLoad(c)}}).catch(c=>{const u=oo[e];if(void 0===u)throw this.manager.itemError(e),c;delete oo[e];for(let d=0,h=u.length;d<h;d++){const f=u[d];f.onError&&f.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Dm extends jo{constructor(e){super(e)}load(e,t,r,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=iu.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=rh("img");function l(){u(),iu.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),i&&i(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class OZ extends jo{constructor(e){super(e)}load(e,t,r,i){const s=new ah,o=new Dm(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,6===a&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let c=0;c<e.length;++c)l(c);return s}}class FZ extends jo{constructor(e){super(e)}load(e,t,r,i){const s=new xr,o=new Dm(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},r,i),s}}class hs extends Et{constructor(e,t=1){super(),this.type="Light",this.color=new pe(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}hs.prototype.isLight=!0;(class IO extends hs{constructor(e,t,r){super(e,r),this.type="HemisphereLight",this.position.copy(Et.DefaultUp),this.updateMatrix(),this.groundColor=new pe(t)}copy(e){return hs.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}).prototype.isHemisphereLight=!0;const RO=new Ee,OO=new E,FO=new E;class zx{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Q(512,512),this.map=null,this.mapPass=null,this.matrix=new Ee,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Wg,this._frameExtents=new Q(1,1),this._viewportCount=1,this._viewports=[new It(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;OO.setFromMatrixPosition(e.matrixWorld),t.position.copy(OO),FO.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(FO),t.updateMatrixWorld(),RO.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(RO),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class LO extends zx{constructor(){super(new Xn(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,r=2*th*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}LO.prototype.isSpotLightShadow=!0;(class kO extends hs{constructor(e,t,r=0,i=Math.PI/3,s=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(Et.DefaultUp),this.updateMatrix(),this.target=new Et,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.shadow=new LO}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isSpotLight=!0;const BO=new Ee,Eh=new E,jx=new E;class VO extends zx{constructor(){super(new Xn(90,1,.5,500)),this._frameExtents=new Q(4,2),this._viewportCount=6,this._viewports=[new It(2,1,1,1),new It(0,1,1,1),new It(3,1,1,1),new It(1,1,1,1),new It(3,0,1,1),new It(1,0,1,1)],this._cubeDirections=[new E(1,0,0),new E(-1,0,0),new E(0,0,1),new E(0,0,-1),new E(0,1,0),new E(0,-1,0)],this._cubeUps=[new E(0,1,0),new E(0,1,0),new E(0,1,0),new E(0,1,0),new E(0,0,1),new E(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Eh.setFromMatrixPosition(e.matrixWorld),r.position.copy(Eh),jx.copy(r.position),jx.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(jx),r.updateMatrixWorld(),i.makeTranslation(-Eh.x,-Eh.y,-Eh.z),BO.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(BO)}}VO.prototype.isPointLightShadow=!0;(class GO extends hs{constructor(e,t,r=0,i=1){super(e,t),this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new VO}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}).prototype.isPointLight=!0;class UO extends zx{constructor(){super(new ch(-5,5,5,-5,.5,500))}}UO.prototype.isDirectionalLightShadow=!0;(class HO extends hs{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(Et.DefaultUp),this.updateMatrix(),this.target=new Et,this.shadow=new UO}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}).prototype.isDirectionalLight=!0;(class zO extends hs{constructor(e,t){super(e,t),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class jO extends hs{constructor(e,t,r=10,i=10){super(e,t),this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}).prototype.isRectAreaLight=!0;class WO{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new E)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],r*i*1.092548),t.addScaledVector(o[5],i*s*1.092548),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],r*s*1.092548),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*i),t.addScaledVector(o[2],1.023328*s),t.addScaledVector(o[3],1.023328*r),t.addScaledVector(o[4],.858086*r*i),t.addScaledVector(o[5],.858086*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],.858086*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+3*i);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}WO.prototype.isSphericalHarmonics3=!0;class Tm extends hs{constructor(e=new WO,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}Tm.prototype.isLightProbe=!0;let Am;(class $O extends Ue{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}).prototype.isInstancedBufferGeometry=!0,class VZ extends jo{constructor(e){super(e),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=iu.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){iu.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}.prototype.isImageBitmapLoader=!0;class GZ extends jo{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Wo(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);(void 0===Am&&(Am=new(window.AudioContext||window.webkitAudioContext)),Am).decodeAudioData(l,function(u){t(u)})}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}}(class UZ extends Tm{constructor(e,t,r=1){super(void 0,r);const i=(new pe).set(e),s=(new pe).set(t),o=new E(i.r,i.g,i.b),a=new E(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}).prototype.isHemisphereLightProbe=!0,class HZ extends Tm{constructor(e,t=1){super(void 0,t);const r=(new pe).set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class KO{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=QO(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=QO();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function QO(){return(typeof performance>"u"?Date:performance).now()}class qZ{constructor(e,t,r){let i,s,o;switch(this.binding=e,this.valueSize=r,t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(0===o){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else o+=t,this._mixBufferRegion(r,s,0,t/o,i);this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1&&this._mixBufferRegion(r,i,t*this._origIndex,1-s,t),o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const t=this.buffer,r=this.valueSize,i=r*this._origIndex;this.binding.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){$n.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;$n.multiplyQuaternionsFlat(e,o,e,t,e,r),$n.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const $x="\\[\\]\\.:\\/",XZ=new RegExp("["+$x+"]","g"),qx="[^"+$x+"]",YZ="[^"+$x.replace("\\.","")+"]",ZZ=/((?:WC+[\/:])*)/.source.replace("WC",qx),JZ=/(WCOD+)?/.source.replace("WCOD",YZ),KZ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",qx),QZ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",qx),eJ=new RegExp("^"+ZZ+JZ+KZ+QZ+"$"),tJ=["material","materials","bones"];class nJ{constructor(e,t,r){const i=r||Zt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}let Zt=(()=>{class n{constructor(t,r,i){this.path=r,this.parsedPath=i||n.parseTrackName(r),this.node=n.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,r,i){return t&&t.isAnimationObjectGroup?new n.Composite(t,r,i):new n(t,r,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(XZ,"")}static parseTrackName(t){const r=eJ.exec(t);if(null===r)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=i.nodeName.substring(s+1);-1!==tJ.indexOf(o)&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=o)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,r){if(void 0===r||""===r||"."===r||-1===r||r===t.name||r===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(r);if(void 0!==i)return i}if(t.children){const i=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===r||l.uuid===r)return l;const c=i(l.children);if(c)return c}return null},s=i(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,r){t[r]=this.targetObject[this.propertyName]}_getValue_array(t,r){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)t[r++]=i[s]}_getValue_arrayElement(t,r){t[r]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,r){this.resolvedProperty.toArray(t,r)}_setValue_direct(t,r){this.targetObject[this.propertyName]=t[r]}_setValue_direct_setNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,r){this.targetObject[this.propertyName]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,r){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=t[r++]}_setValue_array_setNeedsUpdate(t,r){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=t[r++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,r){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=t[r++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,r){this.resolvedProperty[this.propertyIndex]=t[r]}_setValue_arrayElement_setNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty[this.propertyIndex]=t[r],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,r){this.resolvedProperty.fromArray(t,r)}_setValue_fromArray_setNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,r){this.resolvedProperty.fromArray(t,r),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,r){this.bind(),this.getValue(t,r)}_setValue_unbound(t,r){this.bind(),this.setValue(t,r)}bind(){let t=this.node;const r=this.parsedPath,i=r.objectName,s=r.propertyName;let o=r.propertyIndex;if(t||(t=n.findNode(this.rootNode,r.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){let u=r.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+r.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=nJ,n})();Zt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Zt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Zt.prototype.GetterByBindingType=[Zt.prototype._getValue_direct,Zt.prototype._getValue_array,Zt.prototype._getValue_arrayElement,Zt.prototype._getValue_toArray],Zt.prototype.SetterByBindingTypeAndVersioning=[[Zt.prototype._setValue_direct,Zt.prototype._setValue_direct_setNeedsUpdate,Zt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Zt.prototype._setValue_array,Zt.prototype._setValue_array_setNeedsUpdate,Zt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Zt.prototype._setValue_arrayElement,Zt.prototype._setValue_arrayElement_setNeedsUpdate,Zt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Zt.prototype._setValue_fromArray,Zt.prototype._setValue_fromArray_setNeedsUpdate,Zt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class iJ{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:bc,endingEnd:bc};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,a=i/s;e.warp(1,s/i,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+r,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled)return void this._updateWeight(e);const s=this._startTime;if(null!==s){const l=(e-s)*r;if(l<0||0===r)return;this._startTime=null,t=r*l}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;if(2501===this.blendMode)for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);else for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(i,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(null!==r){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;null!==r&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=2202===r;if(0===e)return-1===s?i:o&&1==(1&s)?t-i:i;if(2200===r){-1===s&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===s&&(e>=0?(s=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===l){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&1==(1&s))return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Cc,i.endingEnd=Cc):(i.endingStart=e?this.zeroSlopeAtStart?Cc:bc:2402,i.endingEnd=t?this.zeroSlopeAtEnd?Cc:bc:2402)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}(class sJ extends Ra{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,c=this._bindingsByRootAndName;let u=c[l];void 0===u&&(u={},c[l]=u);for(let d=0;d!==s;++d){const h=i[d],f=h.name;let g=u[f];if(void 0!==g)++g.referenceCount,o[d]=g;else{if(g=o[d],void 0!==g){null===g._cacheIndex&&(++g.referenceCount,this._addInactiveBinding(g,l,f));continue}g=new qZ(Zt.create(r,f,t&&t._propertyBindings[d].binding.parsedPath),h.ValueTypeName,h.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,f),o[d]=g}a[d].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];0==--s.useCount&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===l.length&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];0==--s.referenceCount&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];void 0===o&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],0===Object.keys(a).length&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return void 0===r&&(r=new AO(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o="string"==typeof e?Em.findByName(i,e):e;const a=null!==o?o.uuid:e,l=this._actionsByClip[a];let c=null;if(void 0===r&&(r=null!==o?o.blendMode:2500),void 0!==l){const d=l.actionByRoot[s];if(void 0!==d&&d.blendMode===r)return d;c=l.knownActions[0],null===o&&(o=c._clip)}if(null===o)return null;const u=new iJ(this,o,t,r);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const r=t||this._root,i=r.uuid,s="string"==typeof e?Em.findByName(r,e):e,a=this._actionsByClip[s?s.uuid:e];return void 0!==a&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions;for(let r=this._nActiveActions-1;r>=0;--r)e[r].stop();return this}update(e){const t=this._actions,r=this._nActiveActions,i=this.time+=e*=this.timeScale,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==r;++c)t[c]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(void 0!==s){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const l=r[o].actionByRoot[t];void 0!==l&&(this._deactivateAction(l),this._removeInactiveAction(l))}const s=this._bindingsByRootAndName[t];if(void 0!==s)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class Xx{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new Xx(void 0===this.value.clone?this.value:this.value.clone())}}(class oJ extends $c{constructor(e,t,r=1){super(e,t),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}).prototype.isInstancedInterleavedBuffer=!0;class lJ{constructor(e,t,r=0,i=1/0){this.ray=new Ha(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Ic,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return Yx(e,this,r,t),r.sort(nF),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)Yx(e[i],this,r,t);return r.sort(nF),r}}function nF(n,e){return n.distance-e.distance}function Yx(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),!0===r){const i=n.children;for(let s=0,o=i.length;s<o;s++)Yx(i[s],e,t,!0)}}const rF=new Q;class Dh{constructor(e=new Q(1/0,1/0),t=new Q(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=rF.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return rF.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Dh.prototype.isBox2=!0;const $o=new E,Pm=new Ee,Zx=new Ee;function oF(n){const e=[];!0===n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,oF(n.children[t]));return e}const hF=new ArrayBuffer(4),Xi=(new Float32Array(hF),new Uint32Array(hF),new Uint32Array(512)),Yi=new Uint32Array(512);for(let n=0;n<256;++n){const e=n-127;e<-27?(Xi[n]=0,Xi[256|n]=32768,Yi[n]=24,Yi[256|n]=24):e<-14?(Xi[n]=1024>>-e-14,Xi[256|n]=1024>>-e-14|32768,Yi[n]=-e-1,Yi[256|n]=-e-1):e<=15?(Xi[n]=e+15<<10,Xi[256|n]=e+15<<10|32768,Yi[n]=13,Yi[256|n]=13):e<128?(Xi[n]=31744,Xi[256|n]=64512,Yi[n]=24,Yi[256|n]=24):(Xi[n]=31744,Xi[256|n]=64512,Yi[n]=13,Yi[256|n]=13)}const Kx=new Uint32Array(2048),su=new Uint32Array(64),gF=new Uint32Array(64);for(let n=1;n<1024;++n){let e=n<<13,t=0;for(;0==(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,Kx[n]=e|t}for(let n=1024;n<2048;++n)Kx[n]=939524096+(n-1024<<13);for(let n=1;n<31;++n)su[n]=n<<23;su[31]=1199570944,su[32]=2147483648;for(let n=33;n<63;++n)su[n]=2147483648+(n-32<<23);su[63]=3347054592;for(let n=1;n<64;++n)32!==n&&(gF[n]=1024);Si.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(Si.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n},yh.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)},class hJ extends Qc{constructor(e=10,t=10,r=4473924,i=8947848){r=new pe(r),i=new pe(i);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let h=0,f=0,g=-a;h<=t;h++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const p=h===s?r:i;p.toArray(c,f),f+=3,p.toArray(c,f),f+=3,p.toArray(c,f),f+=3,p.toArray(c,f),f+=3}const u=new Ue;u.setAttribute("position",new Se(l,3)),u.setAttribute("color",new Se(c,3)),super(u,new er({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class uJ extends Qc{constructor(e){const t=oF(e),r=new Ue,i=[],s=[],o=new pe(0,0,1),a=new pe(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Se(i,3)),r.setAttribute("color",new Se(s,3)),super(r,new er({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");Zx.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Pm.multiplyMatrices(Zx,a.matrixWorld),$o.setFromMatrixPosition(Pm),i.setXYZ(o,$o.x,$o.y,$o.z),Pm.multiplyMatrices(Zx,a.parent.matrixWorld),$o.setFromMatrixPosition(Pm),i.setXYZ(o+1,$o.x,$o.y,$o.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},jo.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),class Wx{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}.extractUrlBase(n)},jo.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Dh.prototype.center=function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)},Dh.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Dh.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},Dh.prototype.size=function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)},bi.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)},bi.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},bi.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},bi.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},bi.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)},Ks.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")},Ua.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Wg.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)},Wn.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},Wn.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},Wn.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Wn.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},Wn.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Wn.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},Ee.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)},Ee.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},Ee.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new E).setFromMatrixColumn(this,3)},Ee.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)},Ee.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Ee.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Ee.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Ee.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Ee.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)},Ee.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Ee.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Ee.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Ee.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Ee.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Ee.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Ee.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},Ee.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Ee.prototype.makeFrustum=function(n,e,t,r,i,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,r,t,i,s)},Ee.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()},ro.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)},$n.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)},$n.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Ha.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},Ha.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)},Ha.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},An.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},An.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)},An.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)},An.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)},An.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)},An.barycoordFromPoint=function(n,e,t,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),An.getBarycoord(n,e,t,r,i)},An.normal=function(n,e,t,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),An.getNormal(n,e,t,r)},io.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)},io.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ho(this,n)},io.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new bh(this,n)},Q.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},Q.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},Q.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},E.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},E.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},E.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)},E.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)},E.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)},E.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)},E.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},E.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},E.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},It.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},It.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Et.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)},Et.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Et.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)},Et.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Et.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(Et.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Un.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Un.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Cx.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Xn.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(n)},Object.defineProperties(hs.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}}),Object.defineProperties(Xt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===eh},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(eh)}}}),Xt.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?eh:Qd),this},Xt.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Xt.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Ue.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)},Ue.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===n?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new Xt(arguments[1],arguments[2])))},Ue.prototype.addDrawCall=function(n,e,t){void 0!==t&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)},Ue.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Ue.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Ue.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)},Ue.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)},Object.defineProperties(Ue.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),$c.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===n?eh:Qd),this},$c.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Ho.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Ho.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Ho.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Zg.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Xx.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Nn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new pe}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(qi.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}}),Dt.prototype.clearTarget=function(n,e,t,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,r)},Dt.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)},Dt.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Dt.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Dt.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Dt.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Dt.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Dt.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Dt.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Dt.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Dt.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Dt.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Dt.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Dt.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Dt.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)},Dt.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Dt.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Dt.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Dt.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Dt.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Dt.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Dt.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Dt.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Dt.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Dt.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Dt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===n?qt:Xs}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(OR.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Jr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}}),class jZ extends Et{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new GZ).load(n,function(r){e.setBuffer(r)}),this},dx.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)},dx.prototype.clear=function(n,e,t,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,r)},La.crossOrigin=void 0,La.loadTexture=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new FZ;i.setCrossOrigin(this.crossOrigin);const s=i.load(n,t,void 0,r);return e&&(s.mapping=e),s},La.loadTextureCube=function(n,e,t,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new OZ;i.setCrossOrigin(this.crossOrigin);const s=i.load(n,t,void 0,r);return e&&(s.mapping=e),s},La.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},La.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"140"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="140");const fJ=["rendererCanvas"];function pJ(n,e){1&n&&av(0,3),2&n&&(cv(),fi("ngTemplateOutlet",function V1(n){return function wl(n,e){return n[e]}(function d3(){return je.lFrame.contextLView}(),22+n)}(4)))}function gJ(n,e){1&n&&ld(0)}const mJ=["*"];class ou extends _i{constructor(e){super(e||null)}set(e){this.next("function"==typeof e?e(this.value):e)}}const Ne={obj:n=>n===Object(n)&&!Ne.arr(n)&&"function"!=typeof n,material:n=>!!n&&n.isMaterial,geometry:n=>!!n&&n.isBufferGeometry,mesh:n=>!!n&&n.isMesh,orthographic:n=>!!n&&n.isOrthographicCamera,perspective:n=>!!n&&n.isPerspectiveCamera,camera:n=>!!n&&n.isCamera,glRenderer:n=>!!n&&n instanceof Dt,scene:n=>!!n&&n.isScene,object3d:n=>!!n&&n.isObject3D,instance:n=>!!n&&!!n.__ngt__,ref:n=>!!n&&n instanceof ou,vector3:n=>!!n&&n.isVector3,color:n=>!!n&&n.isColor,supportColorManagement:()=>!0,fun:n=>"function"==typeof n,str:n=>"string"==typeof n,num:n=>"number"==typeof n,boo:n=>"boolean"==typeof n,und:n=>void 0===n,eventEmitter:n=>n instanceof Qe,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Ne.str(n)||Ne.num(n))return n===e;const s=Ne.obj(n);if(s&&"reference"===r)return n===e;const o=Ne.arr(n);if(o&&"reference"===t)return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;for(a in i?e:n)if(n[a]!==e[a])return!1;if(Ne.und(a)){if(o&&0===n.length&&0===e.length||s&&0===Object.keys(n).length&&0===Object.keys(e).length)return!0;if(n!==e)return!1}return!0}};function Sr(n,...e){return t=>[...(e||[]).map(r=>r(t)),{provide:n,useExisting:t}]}function Th(n,{defaultValueOrFactory:e,provideValueFactory:t}={}){const i=new Pe(n,{factory:e&&"function"==typeof e?e:()=>e});return[function s(a={}){return _t(i,a)},function o(a){return{provide:i,useValue:t?t(a):a}},i]}function fn(n,e,...t){Ne.fun(e)&&(t=[e,...t]);const r=new Pe(n);return[function i(o={}){return _t(r,o)},function s(o,a){return[...(t||[]).map(l=>l(o,a)),{provide:r,useFactory:l=>a?()=>a(l):Ne.boo(e)?l.parentRef:()=>l.instance,deps:[o]}]},r]}const[_J,Ka,Fle]=fn("NgtInstance ref"),[vJ,MJ,Lle]=fn("NgtInstance host ref");let Qx=(()=>{class n{constructor(){this.destroySubject$=new pc(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new pc(1)}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}get(t){let r;return this.stateSubject$.pipe(oc(1),Ah(),Ye(i=>t?t(i):i),Ah()).subscribe(i=>{r=i}),r}set(t){const r="function"==typeof t?t(this.get()):t;this.updateState((i,s)=>({...i,...s}))(r)}select(...t){if(0===t.length)return this.stateSubject$.pipe(Ah(),JP(),Eu({connector:()=>new pc(1),resetOnComplete:!0,resetOnRefCountZero:!0,resetOnError:!0}),gc(this.destroy$));TM(t[t.length-1])&&t.push(()=>({}));const{observables:r,projector:i}=function xJ(n){const e=Array.from(n),t=e.pop();return{observables:e,projector:t}}(t);let s;return s=0===r.length?this.stateSubject$.pipe(Ah(),Ye(i)):Y0(r).pipe(Ye(o=>i(...o))),s.pipe(Ah(),JP(),Eu({connector:()=>new pc(1),resetOnComplete:!0,resetOnRefCountZero:!0,resetOnError:!0}),gc(this.destroy$))}effect(t){const r=new Vr;return t(r).pipe(gc(this.destroy$)).subscribe(),i=>(TM(i)?i:Ae(i)).pipe(gc(this.destroy$)).subscribe(o=>{r.next(o)})}updateState(t){return r=>(TM(r)?r:Ae(r)).pipe(zs(s=>Ob([s],u$).pipe(eI(this.stateSubject$.pipe(zp({}))))),gc(this.destroy$)).subscribe({next:([s,o])=>{this.stateSubject$.next(t(o||{},s))},error:s=>{this.stateSubject$.error(s)}})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Me({type:n}),n})();function Ei(n){let r,e=bu,t=!1;const i=s=>()=>{e&&e({prev:r,complete:!0,error:s})};return en({next:s=>{e&&t&&e({prev:r,complete:!1,error:!1});const o=n(s);o&&(e=o),r=s,t||(t=!0)},complete:i(!1),unsubscribe:i(!1),error:i(!0)})}function Ah(){return yi(n=>void 0!==n)}const mF={current:1,min:.5,max:1,debounce:200},[kle,Ble,wJ]=Th("NgtPerformance options",{defaultValueOrFactory:mF,provideValueFactory:n=>({...mF,...n})}),[tw,,bJ]=Th("window",{defaultValueOrFactory:()=>{const{defaultView:n}=_t(jn);if(!n)throw"window is not available!";return n}}),yF={box:"content-box",scroll:!1,offsetSize:!1,debounce:{scroll:50,resize:0}},[CJ,Vle,Gle]=Th("ngtResize Options",{defaultValueOrFactory:yF,provideValueFactory:n=>({...yF,...n})}),[SJ]=Th("Resize Observer API support",{defaultValueOrFactory:()=>{const n=tw();return"ResizeObserver"in n&&null!=n.ResizeObserver}});let _F=(()=>{class n extends Yt{constructor(){const{nativeElement:t}=_t(mr),r=_t(rn),i=tw(),s=SJ(),{box:o,offsetSize:a,scroll:l,debounce:c}=CJ();let u,d,h=[];const f=new Vr,g=vF(t),p=c?"number"==typeof c?c:c.scroll:null,m=c?"number"==typeof c?c:c.resize:null,y=_=>ly(nI(_??0),gc(f));return super(_=>{if(s)return r.runOutsideAngular(()=>{const v=w=>{h=w;const{left:b,top:S,width:x,height:C,bottom:N,right:P,x:V,y:q}=t.getBoundingClientRect(),I={left:b,top:S,width:x,height:C,bottom:N,right:P,x:V,y:q};t instanceof HTMLElement&&a&&(I.height=t.offsetHeight,I.width=t.offsetWidth),Object.freeze(I),_.next({entries:w,dpr:i.devicePixelRatio,...I}),DJ(d||{},I)||(d=I)},M=()=>{v(h)};u=new ResizeObserver(v),u.observe(t,{box:o}),l&&(g&&g.forEach(w=>{Xd(w,"scroll",{capture:!0,passive:!0}).pipe(y(p)).subscribe(M)}),Xd(i,"scroll",{capture:!0,passive:!0}).pipe(y(p)).subscribe(M)),Xd(i,"resize").pipe(y(m)).subscribe(M)}),()=>{u&&(u.unobserve(t),u.disconnect()),f.next(),f.complete()};_.error("ResizeObserver is not supported in your browser. Please use a polyfill")}),this.pipe(nI(p||0),Eu({connector:()=>new pc(1),resetOnRefCountZero:!0,resetOnComplete:!0}))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac}),n})();function vF(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>"auto"===s||"scroll"===s)&&e.push(n),[...e,...vF(n.parentElement)]}const EJ=["x","y","top","bottom","left","right","width","height"],DJ=(n,e)=>EJ.every(t=>n[t]===e[t]);function Qa(n){null!==n&&"object"==typeof n&&"needsUpdate"in n&&(n.needsUpdate=!0,"uniformsNeedUpdate"in n&&(n.uniformsNeedUpdate=!0))}function Di(n){if(n)return n.__ngt__}function nw(n,e,t,r,i=!1){const s=Di(r?.value),o=t||(s?s.parent:void 0);return Ne.scene(n)&&ao(n,{dispose:null}),Object.assign(n,{__ngt__:{root:e,primitive:i||s?.primitive,eventCount:s?.eventCount??0,handlers:s?.handlers??{},objects:s?.objects??new ou([]),parent:o?o===n?null:o:null}})}function TJ(n,e,t=!1){const r=Object.entries(e);return 0===r.length?Ae({}):n.select(...r.map(([i,s])=>{const o=n.select(a=>a[i]);return s?o.pipe(function ew(){return zp(void 0)}()):o}),(...i)=>i.reduce((s,o,a)=>(s[r[a][0]]=o,s),{})).pipe(zp({}),function _$(){return Kt((n,e)=>{let t,r=!1;n.subscribe(Lt(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}(),Ye(([i,s])=>Object.entries(s).reduce((o,[a,l])=>((!Ne.equ(i[a],l)||t&&Ne.equ(i[a],l))&&(o[a]=l),o),{})))}function rw(n){Ne.object3d(n)?n.updateMatrix():Ne.camera(n)&&((Ne.perspective(n)||Ne.orthographic(n))&&n.updateProjectionMatrix(),n.updateMatrixWorld()),Qa(n)}function ao(n,e){if(!Object.keys(e).length)return;const r=(Di(n)||{}).root?.()??{};"__ngt__"in e&&(n.__ngt__=Di(e));for(const i of Object.entries(e)){const s=i[0];let o=i[1];if("raycast"===s&&null==o)continue;Ne.ref(o)&&(o=o.value);const a=n,l=a[s];if(l&&l.set&&(l.copy||l instanceof Ic)){if(Ne.arr(o))l.fromArray?l.fromArray(o):l.set(...o);else if(l.copy&&o&&o.constructor&&l.constructor.name===o.constructor.name)l.copy(o);else if(void 0!==o){const c=l instanceof pe;!c&&l.setScalar?l.setScalar(o):l instanceof Ic&&o instanceof Ic?l.mask=o.mask:l.set(o),!Ne.supportColorManagement()&&!r.linear&&c&&l.convertSRGBToLinear()}}else a[s]=o,!r.linear&&a[s]instanceof xr&&(a[s].encoding=qt);Qa(o),Qa(l)}}function el(n,e){return e?e instanceof n?e:(Ne.arr(e)||(e="number"==typeof e?[e,e,e]:[e]),new n(...e)):new n}function iw(n){return Ne.arr(n)?Math.min(Math.max(n[0],window.devicePixelRatio),n[1]):n}const MF={};function Nh(n){if(n)return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId;const e=O9.generateUUID();return MF[e]?Nh():(MF[e]=!0,e)}function xF(n,e,t,r){const i=t.get(e);i&&(t.delete(e),0===t.size&&(n.delete(r),i.target.releasePointerCapture(r)))}var Ph,Lm,sw,km,Ih,ow,Rh,aw,lw,cw,uw,dw,hw,wF,bF,CF;const SF={click:!1,contextmenu:!1,dblclick:!1,wheel:!1,pointerdown:!0,pointerup:!0,pointerleave:!0,pointermove:!0,pointercancel:!0,lostpointercapture:!0},fw={objects:"shallow",strict:!1};class fs extends Qx{constructor({nativeElement:{clientWidth:e,clientHeight:t}},r,{devicePixelRatio:i},s,o,a){super(),this.parentStore=s,this.resizeResult$=o,this.zone=a,Ph.add(this),Lm.set(this,new Q),sw.set(this,new E),km.set(this,new E),Ih.set(this,new E),this.ready$=this.select(l=>l.ready).pipe(yi(l=>l)),ow.set(this,this.select(this.select(l=>l.camera),this.select(l=>l.scene),this.select(l=>l.gl),this.select(l=>l.raycaster),this.select(l=>l.internal.active),(l,c,u,d,h)=>({ready:!!(l&&u&&c&&d&&!0===h)}))),Rh.set(this,void 0),aw.set(this,this.select(this.select(l=>l.size),this.select(l=>l.viewport))),this.startLoop=this.effect(en(({invalidate:l})=>{l()})),lw.set(this,this.effect(Ei(({canvasElement:l,rootStateMap:c,advance:u,invalidate:d})=>{const h=this.get(),f=nw(new Zg,()=>this.get(),this.parentStore?.get(b=>b.sceneRef));ao(f,h.sceneOptions),this.get(b=>b.sceneRef).set(f);let g=h.gl;h.gl||(g=function RJ(n,e){const t="function"==typeof n?n(e):n;return null!=t?.render?t:new Dt({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})}(h.glOptions,l)),this.set({gl:g});let p=h.raycaster;h.raycaster||(p=new lJ);const{params:m,...y}=h.raycasterOptions||{};Ne.equ(y,p,fw)||ao(p,{...y}),Ne.equ(m,p.params,fw)||ao(p,{params:{...p.params,...m||{}}});let _=h.camera;if(!h.camera){const b=Ne.camera(h.cameraOptions);_=b?h.cameraOptions:function NJ(n){return n.orthographic?new ch(0,0,0,0,.1,1e3):new Xn(75,n.size.width/n.size.height,.1,1e3)}(h),b||(h.cameraOptions&&ao(_,h.cameraOptions),h.cameraOptions?.position||(_.position.z=5),h.cameraOptions?.rotation||_.lookAt(h.lookAt??el(E)),_.updateProjectionMatrix()),Ne.instance(_)||(_=nw(_,()=>this.get(),this.parentStore?.get(S=>S.cameraRef))),this.get(S=>S.cameraRef).set(_)}let v=h.xr;if(!h.xr){const b=(x,C)=>{"never"!==this.get().frameloop&&u(x,!0,this.get.bind(this),C)},S=()=>{const x=this.get(C=>C.gl);x.xr.enabled=x.xr.isPresenting,x.xr.setAnimationLoop(x.xr.isPresenting?b:null),x.xr.isPresenting||d(this.get.bind(this))};v={connect:()=>{const x=this.get(C=>C.gl);x.xr.addEventListener("sessionstart",S),x.xr.addEventListener("sessionend",S)},disconnect:()=>{const x=this.get(C=>C.gl);x.xr.removeEventListener("sessionstart",S),x.xr.removeEventListener("sessionend",S)}},g.xr&&v.connect(),this.set({xr:v})}if(g.shadowMap){const b=Ne.boo(h.shadows);if(b&&g.shadowMap.enabled!==h.shadows||!Ne.equ(h.shadows,g.shadowMap,fw)){const S=g.shadowMap.enabled;g.shadowMap.enabled=!!h.shadows,b?g.shadowMap.type=2:Object.assign(g.shadowMap,h.shadows),S!==g.shadowMap.enabled&&Qa(g.shadowMap)}}Ne.supportColorManagement()&&(wi.legacyMode=h.legacy);const M=h.linear?Xs:qt,w=h.flat?0:4;return g.outputEncoding!==M&&(g.outputEncoding=M),g.toneMapping!==w&&(g.toneMapping=w),g.setClearAlpha(0),g.setPixelRatio(iw(h.viewport.dpr)),g.setSize(h.size.width,h.size.height),Ne.obj(h.glOptions)&&!Ne.fun(h.glOptions)&&!Ne.glRenderer(h.glOptions)&&ao(g,h.glOptions),this.set({gl:g,camera:_,scene:f,raycaster:p}),()=>{const{gl:b,xr:S,cameraRef:x,sceneRef:C,events:N}=this.get();b&&(N.disconnect&&N.disconnect(),b.renderLists.dispose(),b.forceContextLoss(),b.xr&&b.xr.enabled&&(b.xr.setAnimationLoop(null),S.disconnect()),x.complete(),C.complete(),this.set(P=>({...P,internal:{...P.internal,active:!1}})),c.delete(l))}}))),cw.set(this,this.effect(en(({width:l,height:c,dpr:u})=>{this.set(({viewport:d,camera:h})=>{const f={width:l,height:c};return{size:f,viewport:{...d,...d.getCurrentViewport(h,wn(this,km,"f"),f),dpr:iw(u)}}})}))),uw.set(this,this.effect(en(()=>{const{camera:l,gl:c,ready:u,cameraOptions:d,size:h,viewport:f}=this.get();u&&(function AJ(n,e,t){Ne.camera(n)||e.manual||(Ne.orthographic(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}(d,l,h),c.setPixelRatio(f.dpr),c.setSize(h.width,h.height))}))),dw.set(this,this.effect(Ei(({uuid:l,...c})=>(l&&this.set(u=>({internal:{...u.internal,animations:new Map(u.internal.animations).set(l,c),priority:u.internal.priority+((c.priority||0)>0?1:0)}})),({prev:{uuid:u}={},complete:d})=>{(u!==l||d)&&this.unregisterBeforeRender(l)})))),hw.set(this,this.effect(en(()=>{const l=this.get(u=>u.internal);if(!l.animations.size)return;const c=Array.from(l.animations.values());c.sort((u,d)=>(u.priority||0)-(d.priority||0)),this.set(u=>({internal:{...u.internal,subscribers:c}}))}))),this.set({ready:!1,clock:new KO,frameloop:"always",legacy:!1,linear:!1,flat:!1,orthographic:!1,shadows:!1,controls:null,pointer:wn(this,Lm,"f"),mouse:wn(this,Lm,"f"),sceneRef:new ou,cameraRef:new ou,events:{priority:1,enabled:!0,connected:void 0,handlers:{},compute:(l,c)=>{c.pointer.set(l.offsetX/c.size.width*2-1,-l.offsetY/c.size.height*2+1),c.raycaster.setFromCamera(c.pointer,c.camera)}},cameraOptions:{},glOptions:{},raycasterOptions:{},sceneOptions:{},pointerMissed:()=>{},internal:{active:!1,lastEvent:null,priority:0,frames:0,interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,animations:new Map},dpr:[1,2],size:{width:e,height:t},viewport:{initialDpr:i||1,dpr:i||1,width:e,height:t,aspect:e/t,distance:0,factor:0,getCurrentViewport:(l=this.get(d=>d.camera),c=wn(this,km,"f"),u=this.get(d=>d.size))=>{const{width:d,height:h}=u,f=d/h;c instanceof E?wn(this,Ih,"f").copy(c):wn(this,Ih,"f").set(...c);const g=l.getWorldPosition(wn(this,sw,"f")).distanceTo(wn(this,Ih,"f"));if(Ne.orthographic(l))return{width:d/l.zoom,height:h/l.zoom,factor:1,distance:g,aspect:f};const p=l.fov*Math.PI/180,m=2*Math.tan(p/2)*g,y=m*(d/h);return{width:y,height:m,factor:d/y,distance:g,aspect:f}}},performance:{...r,regress:()=>{this.zone.runOutsideAngular(()=>{const l=this.get(c=>c.performance);wn(this,Rh,"f")&&clearTimeout(wn(this,Rh,"f")),l.current!==l.min&&this.set(c=>({performance:{...c.performance,current:l.min}})),function uL(n,e,t,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?i.call(n,t):i?i.value=t:e.set(n,t)}(this,Rh,setTimeout(()=>this.set(c=>({performance:{...c.performance,current:this.get(u=>u.performance.max)}})),l.debounce),"f")})}},previousState:s?.get()})}init(e,t,r,i){wn(this,Ph,"m",wF).call(this,e),wn(this,cw,"f").call(this,this.resizeResult$),wn(this,uw,"f").call(this,wn(this,aw,"f")),wn(this,lw,"f").call(this,{canvasElement:e,rootStateMap:t,advance:i,invalidate:r}),wn(this,hw,"f").call(this,this.select(this.select(s=>s.internal.animations),this.select(s=>s.internal.priority))),this.set(s=>({invalidate:()=>r(this.get.bind(this)),advance:(o,a)=>i(o,a,this.get.bind(this)),internal:{...s.internal,active:!0}})),this.set(wn(this,ow,"f"))}onReady(e){return this.effect(Ei(e))(this.ready$)}registerBeforeRender(e){const t=Ne.object3d(e.obj)?e.obj.uuid:Ne.ref(e.obj)?e.obj.value.uuid:Nh();return wn(this,dw,"f").call(this,{...e,uuid:t}),()=>{this.unregisterBeforeRender(t)}}unregisterBeforeRender(e){if(!e)return;const t=this.get(s=>s.internal.animations),r=t.get(e);t.delete(e)&&r&&this.set(s=>({internal:{...s.internal,animations:t,priority:s.internal.priority-((r.priority||0)>0?1:0)}}))}addInteraction(e){this.set(t=>({...t,internal:{...t.internal,interaction:[...t.internal.interaction,e]}}))}removeInteraction(e){this.set(t=>({...t,internal:{...t.internal,interaction:t.internal.interaction.filter(r=>r.uuid!==e)}}))}setFrameloop(e="always"){const t=this.get(r=>r.clock);t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),this.set({frameloop:e})}setDpr(e){const t=iw(e);this.set(({viewport:r})=>({dpr:t,viewport:{...r,dpr:t,initialDpr:r.initialDpr||t}}))}ngOnDestroy(){wn(this,Ph,"m",CF).call(this),super.ngOnDestroy()}}function vt(n){return null!=n&&"false"!=`${n}`}function Gt(n,e=0){return function OJ(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):Gt(e)}function pw(n,e,t){const{decomposedPath:r,base:i}=function FJ(n){return n.length<1?{base:"",decomposedPath:[]}:{base:n[0],decomposedPath:n}}(e);void 0!==i&&(function LJ(n,e){!Object.prototype.hasOwnProperty.call(n,e)&&Reflect&&Reflect.has&&!Reflect.has(n,e)&&(n[e]={})}(n,i),r.length<=1?ao(n,{[i]:t}):pw(n[i],r.slice(1),t))}Lm=new WeakMap,sw=new WeakMap,km=new WeakMap,Ih=new WeakMap,ow=new WeakMap,Rh=new WeakMap,aw=new WeakMap,lw=new WeakMap,cw=new WeakMap,uw=new WeakMap,dw=new WeakMap,hw=new WeakMap,Ph=new WeakSet,wF=function(e){const{handlePointer:t}=function IJ(n){const e=new E;function r(c){return c.filter(u=>["move","over","enter","out","leave"].some(d=>Di(u)?.handlers?.["pointer"+d]))}function o(c){const u=n().internal;Array.from(u.hovered.values()).forEach(d=>{if(!c.length||!c.find(h=>h.object===d.object&&h.index===d.index&&h.instanceId===d.instanceId)){const f=Di(d.eventObject),g=f?.handlers;if(u.hovered.delete(Nh(d)),f?.eventCount){const p={...d,intersections:c||[]};g.pointerout?.(p),g.pointerleave?.(p)}}})}function l(c,u){u.forEach(d=>Di(d)?.handlers?.pointermissed?.(c))}return{handlePointer:c=>{switch(c){case"pointerleave":case"pointercancel":return()=>o([]);case"lostpointercapture":return u=>{const d=n().internal;"pointerId"in u&&!d.capturedMap.has(u.pointerId)&&(d.capturedMap.delete(u.pointerId),o([]))}}return u=>{const{pointerMissed:d,internal:h}=n();h.lastEvent=u;const f="pointermove"===c,g="click"===c||"contextmenu"===c||"dblclick"===c,m=function i(c,u){const d=n(),h=new Set,f=[],g=u?u(d.internal.interaction):d.internal.interaction;g.forEach(m=>{const y=Di(m)?.root();y&&(y.raycaster.camera=void 0)}),d.previousState||d.events.compute?.(c,d);let p=g.flatMap(m=>{const y=Di(m)?.root();return y&&y.events.enabled&&null!==y.raycaster.camera?(void 0===y.raycaster.camera&&(y.events.compute?.(c,y,y.previousState),void 0===y.raycaster.camera&&(y.raycaster.camera=null)),y.raycaster.camera?y.raycaster.intersectObject(m,!0):[]):[]}).sort((m,y)=>{const _=Di(m.object)?.root(),v=Di(y.object)?.root();return _&&v?v.events.priority-_.events.priority||m.distance-y.distance:0}).filter(m=>{const y=Nh(m);return!h.has(y)&&(h.add(y),!0)});d.events.filter&&(p=d.events.filter(p,d));for(const m of p){let y=m.object;for(;y;)Di(y)?.eventCount&&f.push({...m,eventObject:y}),y=y.parent}if("pointerId"in c&&d.internal.capturedMap.has(c.pointerId))for(const m of d.internal.capturedMap.get(c.pointerId).values())f.push(m.intersection);return f}(u,f?r:void 0),y=g?function t(c){const u=n().internal,d=c.offsetX-u.initialClick[0],h=c.offsetY-u.initialClick[1];return Math.round(Math.sqrt(d*d+h*h))}(u):0;"pointerdown"===c&&(h.initialClick=[u.offsetX,u.offsetY],h.initialHits=m.map(_=>_.eventObject)),g&&!m.length&&y<=2&&(l(u,h.interaction),d&&d(u)),f&&o(m),function s(c,u,d,h){const{raycaster:f,pointer:g,camera:p,internal:m}=n();if(c.length){const y=e.set(g.x,g.y,0).unproject(p),_={stopped:!1};for(const v of c){const M=C=>m.capturedMap.get(C)?.has(v.eventObject)??!1,w=C=>{const N={intersection:v,target:u.target};m.capturedMap.has(C)?m.capturedMap.get(C).set(v.eventObject,N):m.capturedMap.set(C,new Map([[v.eventObject,N]])),u.target.setPointerCapture(C)},b=C=>{const N=m.capturedMap.get(C);N&&xF(m.capturedMap,v.eventObject,N,C)},S={};for(const C in u){const N=u[C];"function"!=typeof N&&(S[C]=N)}const x={...v,...S,pointer:g,intersections:c,stopped:_.stopped,delta:d,unprojectedPoint:y,ray:f.ray,camera:p,stopPropagation:()=>{const C="pointerId"in u&&m.capturedMap.get(u.pointerId);(!C||C.has(v.eventObject))&&(x.stopped=_.stopped=!0,m.hovered.size&&Array.from(m.hovered.values()).find(N=>N.eventObject===v.eventObject))&&o([...c.slice(0,c.indexOf(v)),v])},target:{hasPointerCapture:M,setPointerCapture:w,releasePointerCapture:b},currentTarget:{hasPointerCapture:M,setPointerCapture:w,releasePointerCapture:b},nativeEvent:u};if(h(x),!0===_.stopped)break}}}(m,u,y,_=>{const v=_.eventObject,M=Di(v),w=M?.handlers;if(M?.eventCount)if(f){if(w.pointerover||w.pointerenter||w.pointerout||w.pointerleave){const b=Nh(_),S=h.hovered.get(b);S?S.stopped&&_.stopPropagation():(h.hovered.set(b,_),w.pointerover?.(_),w.pointerenter?.(_))}w.pointermove?.(_)}else{const b=w[c];b?(!g||h.initialHits.includes(v))&&(l(u,h.interaction.filter(S=>!h.initialHits.includes(S))),b(_)):g&&h.initialHits.includes(v)&&l(u,h.interaction.filter(S=>!h.initialHits.includes(S)))}})}}}}(()=>this.get());this.set(r=>({events:{...r.events,handlers:Object.keys(SF).reduce((i,s)=>(i[s]=t(s),i),{})}})),wn(this,Ph,"m",bF).call(this,e)},bF=function(e){this.set(r=>({events:{...r.events,connected:e}}));const t=this.get(r=>r.events.handlers);Object.entries(t??{}).forEach(([r,i])=>{e.addEventListener(r,i,{passive:SF[r]})})},CF=function(){const{handlers:e,connected:t}=this.get(r=>r.events);t&&Object.entries(e??{}).forEach(([r,i])=>{t instanceof HTMLElement&&t.removeEventListener(r,i)})},fs.\u0275fac=function(e){return new(e||fs)(xe(mr),xe(wJ),xe(bJ),xe(fs,12),xe(_F),xe(rn))},fs.\u0275prov=Oe({token:fs,factory:fs.\u0275fac});let qo=(()=>{class n extends Qx{constructor(t=!1){super(),this.skipSelfStore=t,this.ready=new Qe,this.hasEmittedAlready=!1,this.update=new Qe,this.instance$=this.select(r=>r.instance).pipe(zi(r=>r.pipe(yi(i=>null!=i)))),this.instanceArgs$=this.select(r=>r.instanceArgs),this.zone=_t(rn),this.store=this.skipSelfStore?_t(fs,{skipSelf:!0}):_t(fs),this.document=_t(jn),this.parentRef=_J({skipSelf:!0,optional:!0}),this.parentHostRef=vJ({skipSelf:!0,optional:!0}),this.isPrimitive=!1,this.isWrapper=!1,this.isRaw=!1,this.instanceReady=this.effect(Ei(()=>{const r=this.setOptions(this.select(TJ(this,this.optionFields,Ne.material(this.instanceValue)),this.setOptionsTrigger$,i=>i));return this.get(i=>i.noAttach)||this.attachToParent(),()=>{r.unsubscribe()}})),this.setOptions=this.effect(en(r=>{if(0!==Object.keys(r).length&&this.instanceValue){const i=this.get(),s={},{rotation:o,quaternion:a,...l}=r;o?s.rotation=i.rotation:a&&(s.quaternion=i.quaternion);for(const c of Object.keys(l))(Ne.material(this.instanceValue)?void 0!==i[c]:null!=i[c])&&(s[c]=i[c]);Ne.material(this.instanceValue)?(s.uniforms={},"uniforms"in this.instanceValue&&"uniforms"in l&&(s.uniforms={...this.instanceValue.uniforms,...l.uniforms}),this.instanceValue.setValues(s)):ao(this.instanceValue,s),this.postSetOptions(this.instanceValue),rw(this.instanceValue),this.update.observed&&this.update.emit(this.instanceValue)}})),this.attachToParent=this.effect(ly(eI(this.select(r=>r.attach)),en(([,r])=>{let i=this.__ngt__.parent;if(!i||!i.value){if(!this.parent?.value)return;this.__ngt__.parent=this.parent,i=this.parent}if("function"==typeof r){const s=r(i,this.instance);s&&(this.__ngt__.previousAttach=s)}else{const s=[...r];if(0===s.length||("material"===s[0]&&s[1]&&Ne.num(Number(s[1]))&&Ne.material(this.instanceValue)&&(Ne.arr(i.value.material)||(i.value.material=[])),("material"===s[0]||"geometry"===s[0])&&!Ne.mesh(i.value)))return;this.__ngt__.previousAttachValue=s.reduce((o,a)=>o[a],i.value),pw(i.value,s,this.instanceValue),this.__ngt__&&this.__ngt__.root().invalidate(),i.value.__ngt__&&i.value.__ngt__.root().invalidate(),this.__ngt__.previousAttach=s,this.set({attach:s})}rw(i.value),rw(this.instanceValue)}))),this.set({instance:new ou(null),instanceArgs:[],attach:[],noAttach:!1,skipParent:!1})}set ref(t){this.set({instance:t})}set skipParent(t){this.set({attachExplicit:!0,skipParent:vt(t)})}get skipParent(){return this.get(t=>t.skipParent)}set noAttach(t){this.set({noAttachExplicit:!0,noAttach:vt(t)})}get noAttach(){return this.get(t=>t.noAttach)}set attach(t){t&&this.set({skipParentExplicit:!0,attach:"function"==typeof t||Ne.arr(t)?t:[t]})}get attach(){return this.get(t=>t.attach)}get instance(){return this.get(t=>t.instance)}get instanceValue(){return this.isRaw?this.instance.value.valueOf():this.instance.value}get __ngt__(){return this.instance.value.__ngt__}get parent(){return this.skipParent&&this.parentHostRef?.()||this.parentRef?.()}set instanceArgs(t){this.set({instanceArgs:Ne.arr(t)?t:[t]})}get instanceArgs(){return this.get(t=>t.instanceArgs)}ngOnInit(){this.zone.runOutsideAngular(()=>{this.preInit(),this.store.onReady(()=>{this.instanceReady(this.instance$)})})}preInit(){}postInit(){}emitReady(){this.hasEmittedAlready||(this.ready.emit(this.instanceValue),this.hasEmittedAlready=!0)}prepareInstance(t,r){r&&"uuid"in t&&(t.uuid=r);const i=nw(t,()=>this.store.get(),this.parent,this.instance,this.isPrimitive);if(this.postPrepare(i),this.instance.set(i),this.emitReady(),!Ne.object3d(i)&&!this.noAttach&&!this.skipParent){const s=i.__ngt__.parent?.value?.__ngt__?.objects;s&&s.set([...s.value,this.instance])}return i}adjustCtorParams(t){return t}get ctorParams$(){return this.instanceArgs$.pipe(Ye(()=>({})))}destroy(){if(this.instanceValue){if(Ne.object3d(this.instanceValue)){const r=this.parent;r&&Ne.object3d(r.value)&&function PJ(n,e){const t=n().internal;t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{xF(t.capturedMap,e,r,i)})}(this.__ngt__.root.bind(this.__ngt__),this.instanceValue),null!=this.instanceValue.clear&&this.instanceValue.clear()}else{const r=this.__ngt__.previousAttach;if(null!=r)if("function"==typeof r)r(),this.__ngt__.parent&&this.__ngt__.parent.value&&Qa(this.__ngt__.parent.value);else{const i=this.__ngt__.previousAttachValue;this.__ngt__.parent&&this.__ngt__.parent.value&&(pw(this.__ngt__.parent.value,r,i),Qa(this.__ngt__.parent.value))}}const t=this.instanceValue.dispose;t&&"function"==typeof t&&t.apply(this.instanceValue)}this.set({attach:[]}),this.instance.complete()}postPrepare(t){}get optionFields(){return{}}ngOnDestroy(){this.zone.runOutsideAngular(()=>{this.destroy()}),super.ngOnDestroy()}postSetOptions(t){}get setOptionsTrigger$(){return Ae({})}}return n.\u0275fac=function(t){return new(t||n)(re("NGT_SKIP_SELF_STORE",8))},n.\u0275dir=Me({type:n,inputs:{ref:"ref",skipParent:"skipParent",noAttach:"noAttach",attach:"attach"},outputs:{ready:"ready",update:"update"},features:[Le]}),n})();const tl=Sr(qo),[Bm,Xo,Ule]=fn("NgtObject ref",Ka),[Vm,Hle,zle]=fn("NgtObject host ref",!0,MJ),[jle,kJ,Wle]=fn("NgtCamera ref"),[$le,BJ,qle]=fn("NgtScene ref"),VJ=["click","contextmenu","dblclick","pointerup","pointerdown","pointerover","pointerout","pointerenter","pointerleave","pointermove","pointermissed","pointercancel","wheel"];let GJ=(()=>{class n extends qo{constructor(){super(),this.click=new Qe,this.contextmenu=new Qe,this.dblclick=new Qe,this.pointerup=new Qe,this.pointerdown=new Qe,this.pointerover=new Qe,this.pointerout=new Qe,this.pointerenter=new Qe,this.pointerleave=new Qe,this.pointermove=new Qe,this.pointermissed=new Qe,this.pointercancel=new Qe,this.wheel=new Qe,this.shouldPassThroughRef=!0,this.parentRef=Bm({optional:!0,skipSelf:!0}),this.parentHostRef=Vm({optional:!0,skipSelf:!0}),this.set({name:"",position:new E,rotation:new Ks,quaternion:new $n,scale:new E(1,1,1),color:new pe,castShadow:!1,receiveShadow:!1,priority:0,visible:!0,matrixAutoUpdate:!0,appendMode:"immediate",userData:{}})}set name(t){this.set({nameExplicit:!0,name:t})}get name(){return this.get(t=>t.name)}set position(t){this.set({positionExplicit:!0,position:el(E,t)})}get position(){return this.get(t=>t.position)}get rotation(){return this.get(t=>t.rotation)}set rotation(t){this.set({rotationExplicit:!0,rotation:el(Ks,t)})}get quaternion(){return this.get(t=>t.quaternion)}set quaternion(t){this.set({quaternionExplicit:!0,quaternion:el($n,t)})}get scale(){return this.get(t=>t.scale)}set scale(t){this.set({scaleExplicit:!0,scale:el(E,t)})}get color(){return this.get(t=>t.color)}set color(t){this.set({colorExplicit:!0,color:el(pe,t)})}get castShadow(){return this.get(t=>t.castShadow)}set castShadow(t){this.set({castShadowExplicit:!0,castShadow:vt(t)})}get receiveShadow(){return this.get(t=>t.receiveShadow)}set receiveShadow(t){this.set({receiveShadowExplicit:!0,receiveShadow:vt(t)})}get priority(){return this.get(t=>t.priority)}set priority(t){this.set({priorityExplicit:!0,priority:Gt(t)})}get visible(){return this.get(t=>t.visible)}set visible(t){this.set({visibleExplicit:!0,visible:vt(t)})}get matrixAutoUpdate(){return this.get(t=>t.matrixAutoUpdate)}set matrixAutoUpdate(t){this.set({matrixAutoUpdateExplicit:!0,matrixAutoUpdate:vt(t)})}get userData(){return this.get(t=>t.userData)}set userData(t){this.set({userDataExplicit:!0,userData:t})}get dispose(){return this.get(t=>t.dispose)}set dispose(t){this.set({disposeExplicit:!0,dispose:t})}get raycast(){return this.get(t=>t.raycast)}set raycast(t){this.set({raycastExplicit:!0,raycast:t})}get appendMode(){return this.get(t=>t.appendMode)}set appendMode(t){this.set({appendModeExplicit:!0,appendMode:t})}get appendTo(){return this.get(t=>t.appendTo)}set appendTo(t){this.set({appendToExplicit:!0,appendTo:t?Ne.ref(t)?t:new ou(t):void 0})}get optionFields(){return{name:!1,position:!1,rotation:!1,quaternion:!1,scale:!1,color:!1,castShadow:!1,receiveShadow:!1,visible:!1,matrixAutoUpdate:!1,userData:!1,dispose:!0,raycast:!0}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Me({type:n,inputs:{name:"name",position:"position",rotation:"rotation",quaternion:"quaternion",scale:"scale",color:"color",castShadow:"castShadow",receiveShadow:"receiveShadow",priority:"priority",visible:"visible",matrixAutoUpdate:"matrixAutoUpdate",userData:"userData",dispose:"dispose",raycast:"raycast",appendMode:"appendMode",appendTo:"appendTo"},outputs:{click:"click",contextmenu:"contextmenu",dblclick:"dblclick",pointerup:"pointerup",pointerdown:"pointerdown",pointerover:"pointerover",pointerout:"pointerout",pointerenter:"pointerenter",pointerleave:"pointerleave",pointermove:"pointermove",pointermissed:"pointermissed",pointercancel:"pointercancel",wheel:"wheel"},features:[Le]}),n})(),nl=(()=>{class n extends GJ{constructor(){super(...arguments),this.appended=new Qe,this.beforeRender=new Qe,this.animateReady=this.beforeRender,this.init=this.effect(Ei(()=>{if(this.instance.value&&this.__ngt__?this.switch():this.prepareInstance(this.objectInitFn(),this.instance?.value?.uuid),this.instance.value){this.postInit&&this.postInit();const t=VJ.reduce((r,i)=>{const s=this[i].observed?this[i]:null;return s&&(r.handlers[i]=this.eventNameToHandler(s),r.eventCount+=1),r},{handlers:{},eventCount:0});ao(this.__ngt__,{handlers:t.handlers,eventCount:t.eventCount}),t.eventCount>0&&this.store.addInteraction(this.instance.value),Ne.object3d(this.instance.value)&&this.appendToParent(),this.beforeRender.observed&&this.store.registerBeforeRender({obj:this.instance,callback:r=>{this.beforeRender.emit({state:r,object:this.instance.value})},priority:this.get(r=>r.priority)})}return()=>{this.destroy()}}))}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.store.onReady(()=>{this.preObjectInit?this.preObjectInit(()=>this.init(this.instanceArgs$)):this.init(this.instanceArgs$)})})}get preObjectInit(){}destroy(){this.instance.value&&(this.store.unregisterBeforeRender(this.instance.value.uuid),this.__ngt__.eventCount>0&&this.store.removeInteraction(this.instance.value.uuid),this.remove()),super.destroy()}appendToParent(){const t=()=>{const i=this.get(o=>o.appendTo);if(i&&i.value)return i.value.add(this.instance.value),void this.appended.emit(this.instance.value);const s=this.get(o=>o.appendMode);if("none"!==s){if("root"===s)return this.addToScene(),void this.appended.emit(this.instance.value);"immediate"===s&&(this.addToParent(),this.appended.emit(this.instance.value))}},r=this.store.get(i=>i.gl);r.xr.enabled?r.xr.getSession()?.requestAnimationFrame(t):requestAnimationFrame(t)}addToScene(){const t=this.store.get(r=>r.scene);t&&t.add(this.instance.value)}addToParent(){let t=this.parent;this.shouldUseParent(t)?t.value.add(this.instance.value):(t=this.parentHostRef?.(),this.shouldUseParent(t)?t.value.add(this.instance.value):this.addToScene())}shouldUseParent(t){return t&&t.value&&t.value.uuid!==this.instance.value.uuid}remove(){const{appendMode:t,appendTo:r}=this.get();if(r&&r.value)r.value.remove(this.instance.value);else if(this.shouldUseParent(this.parent)&&"immediate"===t)this.parent.value.remove(this.instance.value);else{const i=this.store.get(s=>s.scene);i&&i.remove(this.instance.value)}}switch(){const t=this.objectInitFn();this.instance.value.children&&(this.instance.value.traverse(r=>{r!==this.instance.value&&r.parent===this.instance.value&&(r.parent=t)}),this.instance.value.children=[]),this.__ngt__.eventCount>0&&this.store.removeInteraction(this.instance.value.uuid),this.remove(),this.prepareInstance(t)}eventNameToHandler(t){return r=>{this.zone.run(()=>{t.emit(r)})}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=Me({type:n,outputs:{appended:"appended",beforeRender:"beforeRender",animateReady:"animateReady"},features:[Le]}),n})();const rl=Sr(nl,tl);let EF=(()=>{class n extends nl{set material(t){this.set({material:t})}set geometry(t){this.set({geometry:t})}set morphTargetInfluences(t){this.set({morphTargetInfluences:t})}set morphTargetDictionary(t){this.set({morphTargetDictionary:t})}objectInitFn(){const t=this.get(),r=this.argsKeys.reduce((s,o)=>(s.push(t[o]),s),[]),i=new this.objectType(Ne.ref(t.geometry)?t.geometry.value:t.geometry,Ne.arr(t.material)?t.material.map(s=>Ne.ref(s)?s.value:s):Ne.ref(t.material)?t.material.value:t.material,...r);return t.morphTargetDictionary&&"morphTargetDictionary"in i&&(i.morphTargetDictionary=t.morphTargetDictionary),t.morphTargetInfluences&&"morphTargetInfluences"in i&&(i.morphTargetInfluences=t.morphTargetInfluences),i}get argsKeys(){return[]}get optionFields(){return{...super.optionFields,material:!0,geometry:!0,morphTargetInfluences:!0,morphTargetDictionary:!0}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=Me({type:n,inputs:{material:"material",geometry:"geometry",morphTargetInfluences:"morphTargetInfluences",morphTargetDictionary:"morphTargetDictionary"},features:[Le]}),n})(),HJ=(()=>{class n{constructor(){this.cached=new Map}use(t,r,i,s){const o=Ne.arr(r)?r:[r],a=new t;i&&i(a);const l=o.map(c=>(this.cached.has(c)||this.cached.set(c,mn(a.loadAsync(c,s)).pipe(en(u=>{u.scene&&Object.assign(u,function UJ(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}(u.scene))}),function x$(n=1/0){let e;e=n&&"object"==typeof n?n:{count:n};const{count:t=1/0,delay:r,resetOnSuccess:i=!1}=e;return t<=0?Zi:Kt((s,o)=>{let l,a=0;const c=()=>{let u=!1;l=s.subscribe(Lt(o,d=>{i&&(a=0),o.next(d)},void 0,d=>{if(a++<t){const h=()=>{l?(l.unsubscribe(),l=null,c()):u=!0};if(null!=r){const f="number"==typeof r?function M$(n=0,e,t=d$){let r=-1;return null!=e&&(Nb(e)?t=e:r=e),new Yt(i=>{let s=function v$(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(r):dr(r(d,a)),g=Lt(o,()=>{g.unsubscribe(),h()},()=>{o.complete()});f.subscribe(g)}else h()}else o.error(d)})),u&&(l.unsubscribe(),l=null,c())};c()})}({count:2}),Ws(u=>(console.error(`Error loading ${c}: ${u.message}`),Ae(null))),Eu({connector:()=>new pc,resetOnComplete:!0,resetOnRefCountZero:!0,resetOnError:!0}))),this.cached.get(c)));return function mA(...n){const e=hy(n),{args:t,keys:r}=pA(n),i=new Yt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;dr(t[u]).subscribe(Lt(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(r?gA(r,a):a),s.complete())}))}});return e?i.pipe(w0(e)):i}(l).pipe(Ye(c=>Ne.arr(r)?c:c[0]))}destroy(){this.cached.clear()}ngOnDestroy(){this.destroy()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=Oe({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Gm=new Set,Um=new Set,gw=new Set;function Oh(n,e){n.forEach(({callback:t})=>t(e))}function yw(n,e,t){const r=e();let i=r.clock.getDelta();"never"===r.frameloop&&"number"==typeof n&&(i=n-r.clock.elapsedTime,r.clock.oldTime=r.clock.elapsedTime,r.clock.elapsedTime=n);for(const s of r.internal.subscribers){const o=Ne.ref(s.obj)?s.obj.value:s.obj;s.callback({...r,delta:i,frame:t},o)}return!r.internal.priority&&r.gl.render&&r.gl.render(r.scene,r.camera),r.internal.frames=Math.max(0,r.internal.frames-1),"always"===r.frameloop?1:r.internal.frames}const _w=new Map,{invalidate:jJ,advance:WJ}=function zJ(n){let t,r,i,e=!1;function s(l){if(r=requestAnimationFrame(s),e=!0,t=0,Gm.size&&Oh(Gm,l),n.forEach(c=>{i=c(),i.internal.active&&("always"===i.frameloop||i.internal.frames>0)&&!i.gl.xr?.isPresenting&&(t+=yw(l,c))}),Um.size&&Oh(Um,l),0===t)return gw.size&&Oh(gw,l),e=!1,cancelAnimationFrame(r)}return{loop:s,invalidate:function o(l,c=1){const u=l?.();if(!u)return n.forEach(d=>o(d,c));u.gl.xr?.isPresenting||!u.internal.active||"never"===u.frameloop||(u.internal.frames=Math.min(60,u.internal.frames+c),e||(e=!0,requestAnimationFrame(s)))},advance:function a(l,c=!0,u,d){c&&Oh(Gm,l),u?yw(l,u,d):n.forEach(h=>yw(l,h)),c&&Oh(Um,l)}}}(_w);let vw=(()=>{class n extends Qx{constructor(){super(...arguments),this.hostClass=!0,this._initialLog=!1,this._projectContent=!1,this.created=new Qe,this.pointermissed=new Qe,this.zone=_t(rn),this.store=_t(fs),this.loader=_t(HJ)}set linear(t){this.store.set({linear:vt(t)})}set legacy(t){this.store.set({legacy:vt(t)})}set flat(t){this.store.set({flat:vt(t)})}set frameloop(t){this.store.setFrameloop(t)}set orthographic(t){this.store.set({orthographic:vt(t)})}set dpr(t){this.store.setDpr(t)}set raycaster(t){this.store.set({raycasterOptions:t})}set shadows(t){this.store.set({shadows:"object"==typeof t?t:vt(t)})}set camera(t){this.store.set({cameraOptions:t})}get cameraRef(){return this.store.get(t=>t.cameraRef)}set lookAt(t){this.store.set({lookAt:el(E,t)})}set scene(t){this.store.set({sceneOptions:t})}get sceneRef(){return this.store.get(t=>t.sceneRef)}set gl(t){this.store.set({glOptions:t})}get initialLog(){return this._initialLog}set initialLog(t){this._initialLog=vt(t)}get projectContent(){return this._projectContent}set projectContent(t){this._projectContent=vt(t)}ngOnInit(){this.zone.runOutsideAngular(()=>{this.pointermissed.observed&&this.store.set({pointerMissed:t=>{this.pointermissed.emit(t)}}),_w.set(this.rendererCanvas.nativeElement,()=>this.store.get()),this.store.init(this.rendererCanvas.nativeElement,_w,jJ,WJ),this.store.onReady(()=>{const t=this.store.get();this.created.emit(t),this.initialLog&&(console.group("[NgtCanvas] Initialized"),console.log(t),console.groupEnd()),this.store.startLoop(this.store.select())})})}ngOnDestroy(){super.ngOnDestroy(),this.loader.destroy()}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275cmp=Zn({type:n,selectors:[["ngt-canvas"]],viewQuery:function(t,r){if(1&t&&Tv(fJ,7),2&t){let i;_d(i=vd())&&(r.rendererCanvas=i.first)}},hostVars:2,hostBindings:function(t,r){2&t&&Ql("ngt-canvas",r.hostClass)},inputs:{linear:"linear",legacy:"legacy",flat:"flat",frameloop:"frameloop",orthographic:"orthographic",dpr:"dpr",raycaster:"raycaster",shadows:"shadows",camera:"camera",lookAt:"lookAt",scene:"scene",gl:"gl",initialLog:"initialLog",projectContent:"projectContent"},outputs:{created:"created",pointermissed:"pointermissed"},standalone:!0,features:[Ft([fs,_F,Xo(n,e=>e.sceneRef),BJ(n,e=>e.sceneRef),kJ(n,e=>e.cameraRef)]),Le,nc],ngContentSelectors:mJ,decls:5,vars:1,consts:[["rendererCanvas",""],[3,"ngTemplateOutlet",4,"ngIf"],["contentTemplate",""],[3,"ngTemplateOutlet"]],template:function(t,r){1&t&&(ad(),Ie(0,"canvas",null,0),rs(2,pJ,1,1,"ng-container",1),rs(3,gJ,1,0,"ng-template",null,2,DD)),2&t&&(Pt(2),fi("ngIf",r.projectContent))},dependencies:[Sp,HT],styles:["[_nghost-%COMP%]{display:block;position:relative;width:100%;height:100%;overflow:hidden}[_nghost-%COMP%]   canvas[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),n})();const[Kle,Qle,ece]=fn("NgtCommonAttribute ref",Ka),[tce,nce,rce]=fn("NgtCommonAudio ref",Xo),[ice,sce,oce]=fn("NgtCommonCamera ref",Xo),[ace,lce,cce]=fn("NgtCommonCurve ref",Ka),[uce,$J,dce]=fn("NgtCommonGeometry ref",Ka),[hce,fce,pce]=fn("NgtCommonHelper ref",Xo),[gce,mce,yce]=fn("NgtCommonObjectHelper ref",Ka),[_ce,,vce]=Th("isWebGLAvailable",{defaultValueOrFactory:()=>{const n=_t(jn),e=tw();try{const t=n.createElement("canvas");return!(!e.WebGL2RenderingContext||!t.getContext("webgl2"))}catch{return!1}}}),[Mce,xce,wce]=fn("NgtCommonLight ref",Xo),[bce,Cce,Sce]=fn("NgtCommonLine ref",Xo),[Ece,qJ,Dce]=fn("NgtCommonMaterial ref",Ka),[Tce,XJ,Ace]=fn("NgtCommonMesh ref",Xo),[Nce,Pce,Ice]=fn("NgtSkinnedMesh host ref",!0),[Rce,Oce,Fce]=fn("NgtSkeleton host ref",!0),[Lce,kce,Bce]=fn("NgtBone host ref",!0),[Vce,Gce,Uce]=fn("NgtCommonSprite ref",Xo),[Hce,zce,jce]=fn("NgtCommonTexture ref",Ka);Sr((()=>{class n extends qo{constructor(){super(...arguments),this.init=this.effect(Ei(t=>{this.prepareInstance(new this.attributeType(...t))}))}set args(t){this.instanceArgs=t}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.store.onReady(()=>{const t=this.init(this.instanceArgs$);return this.postInit(),()=>{t&&t.unsubscribe&&t.unsubscribe()}})})}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=Me({type:n,inputs:{args:"args"},features:[Le]}),n})(),tl),Sr((()=>{class n extends nl{set listener(t){this.set({listener:t})}set buffer(t){this.set({buffer:t})}set detune(t){this.set({detune:Gt(t)})}set loop(t){this.set({loop:vt(t)})}set loopStart(t){this.set({loopStart:Gt(t)})}set loopEnd(t){this.set({loopEnd:Gt(t)})}set offset(t){this.set({offset:Gt(t)})}set playbackRate(t){this.set({playbackRate:Gt(t)})}set isPlaying(t){this.set({isPlaying:vt(t)})}set hasPlaybackControl(t){this.set({hasPlaybackControl:vt(t)})}set sourceType(t){this.set({sourceType:t})}set source(t){this.set({source:t})}set filters(t){this.set({filters:t})}set duration(t){this.set({duration:Gt(t)})}set autoplay(t){this.set({autoplay:vt(t)})}objectInitFn(){const{listener:t}=this.get();if(!t)throw new Error(`[NgtCommonAudio] Cannot initialize ${this.audioType} without "THREE.AudioListener"`);return new this.audioType(t)}preInit(){this.set(t=>({buffer:t.buffer||null,detune:t.detune||0,loop:t.loop||!1,loopStart:t.loopStart||0,loopEnd:t.loopEnd||0,offset:t.offset||0,duration:t.duration||void 0,playbackRate:t.playbackRate||1,isPlaying:t.isPlaying||!1,hasPlaybackControl:t.hasPlaybackControl||!0,sourceType:t.sourceType||"empty",source:t.source||null,filters:t.filters||[]}))}get preObjectInit(){return t=>{this.effect(Ei(()=>{t()}))(this.select(r=>r.listener))}}get optionFields(){return{...super.optionFields,autoplay:!0,buffer:!1,detune:!1,loop:!1,loopStart:!1,loopEnd:!1,offset:!1,duration:!0,playbackRate:!1,isPlaying:!1,hasPlaybackControl:!1,sourceType:!1,source:!1,filters:!1}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=Me({type:n,inputs:{listener:"listener",buffer:"buffer",detune:"detune",loop:"loop",loopStart:"loopStart",loopEnd:"loopEnd",offset:"offset",playbackRate:"playbackRate",isPlaying:"isPlaying",hasPlaybackControl:"hasPlaybackControl",sourceType:"sourceType",source:"source",filters:"filters",duration:"duration",autoplay:"autoplay"},features:[Le]}),n})(),rl),Sr((()=>{class n extends nl{set args(t){this.instanceArgs=t}objectInitFn(){const t=this.get(r=>r.instanceArgs);return new this.cameraType(...t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=Me({type:n,inputs:{args:"args"},features:[Le]}),n})(),rl),Sr((()=>{class n extends qo{constructor(){super(...arguments),this.init=this.effect(Ei(t=>{this.prepareInstance(new this.curveType(...t))}))}set args(t){this.instanceArgs=t}set arcLengthDivisions(t){this.set({arcLengthDivisions:Gt(t)})}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.store.onReady(()=>{this.init(this.instanceArgs$),this.postInit()})})}postPrepare(t){const r=this.get(i=>i.arcLengthDivisions);null!=r&&(t.arcLengthDivisions=r)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=Me({type:n,inputs:{args:"args",arcLengthDivisions:"arcLengthDivisions"},features:[Le]}),n})(),tl);let DF=(()=>{class n extends qo{constructor(){super(...arguments),this.parentRef=Bm({optional:!0,skipSelf:!0}),this.parentHostRef=Vm({optional:!0,skipSelf:!0}),this.init=this.effect(Ei(()=>{const t=this.get(s=>s.instanceArgs),r=this.adjustCtorParams(t),i=this.prepareInstance(new this.geometryType(...r));return()=>{i.dispose()}}))}set args(t){this.instanceArgs=t}preInit(){this.set(t=>({attach:t.attach.length?t.attach:["geometry"]}))}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.store.onReady(()=>{this.init(this.ctorParams$),this.postInit()})})}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=Me({type:n,inputs:{args:"args"},features:[Le]}),n})();const YJ=Sr(DF,tl);Sr((()=>{class n extends nl{set args(t){this.instanceArgs=t}objectInitFn(){const t=this.get(r=>r.instanceArgs);return new this.helperType(...t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=Me({type:n,inputs:{args:"args"},features:[Le]}),n})(),rl),Sr((()=>{class n extends nl{set args(t){this.instanceArgs=t}set intensity(t){this.set({intensity:Gt(t)})}objectInitFn(){const{intensity:t,instanceArgs:r}=this.get(),i=new this.lightType(...r);return null!=t&&(i.intensity=t),i}get preObjectInit(){return t=>{this.set(r=>({intensity:r.intensity??1})),t()}}get optionFields(){return{...super.optionFields,intensity:!1}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=Me({type:n,inputs:{args:"args",intensity:"intensity"},features:[Le]}),n})(),rl),Sr((()=>{class n extends EF{get objectType(){return this.lineType}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=Me({type:n,features:[Le]}),n})(),rl);let TF=(()=>{class n extends qo{constructor(){super(...arguments),this.parentRef=Bm({optional:!0,skipSelf:!0}),this.parentHostRef=Vm({optional:!0,skipSelf:!0}),this.init=this.effect(Ei(()=>{const t=this.prepareInstance(new this.materialType);return()=>{t.dispose()}}))}set alphaTest(t){this.set({alphaTest:Gt(t)})}set alphaToCoverage(t){this.set({alphaToCoverage:vt(t)})}set blendDst(t){this.set({blendDst:t})}set blendDstAlpha(t){this.set({blendDstAlpha:Gt(t)})}set blendEquation(t){this.set({blendEquation:t})}set blendEquationAlpha(t){this.set({blendEquationAlpha:Gt(t)})}set blending(t){this.set({blending:t})}set blendSrc(t){this.set({blendSrc:t})}set blendSrcAlpha(t){this.set({blendSrcAlpha:Gt(t)})}set clipIntersection(t){this.set({clipIntersection:vt(t)})}set clippingPlanes(t){this.set({clippingPlanes:t})}set clipShadows(t){this.set({clipShadows:vt(t)})}set colorWrite(t){this.set({colorWrite:vt(t)})}set defines(t){this.set({defines:t})}set depthFunc(t){this.set({depthFunc:t})}set depthTest(t){this.set({depthTest:vt(t)})}set depthWrite(t){this.set({depthWrite:vt(t)})}set name(t){this.set({name:t})}set opacity(t){this.set({opacity:Gt(t)})}set polygonOffset(t){this.set({polygonOffset:vt(t)})}set polygonOffsetFactor(t){this.set({polygonOffsetFactor:Gt(t)})}set polygonOffsetUnits(t){this.set({polygonOffsetUnits:Gt(t)})}set precision(t){this.set({precision:t})}set premultipliedAlpha(t){this.set({premultipliedAlpha:vt(t)})}set dithering(t){this.set({dithering:vt(t)})}set side(t){this.set({side:t})}set shadowSide(t){this.set({shadowSide:t})}set toneMapped(t){this.set({toneMapped:vt(t)})}set transparent(t){this.set({transparent:vt(t)})}set vertexColors(t){this.set({vertexColors:vt(t)})}set visible(t){this.set({visible:vt(t)})}set format(t){this.set({format:t})}set stencilWrite(t){this.set({stencilWrite:vt(t)})}set stencilFunc(t){this.set({stencilFunc:t})}set stencilRef(t){this.set({stencilRef:Gt(t)})}set stencilWriteMask(t){this.set({stencilWriteMask:Gt(t)})}set stencilFuncMask(t){this.set({stencilFuncMask:Gt(t)})}set stencilFail(t){this.set({stencilFail:t})}set stencilZFail(t){this.set({stencilZFail:t})}set stencilZPass(t){this.set({stencilZPass:t})}set userData(t){this.set({userData:t})}preInit(){this.set(t=>({attach:t.attach.length?t.attach:["material"]}))}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.store.onReady(()=>{this.init(this.ctorParams$),this.postInit()})})}get optionFields(){return{...super.optionFields,alphaTest:!0,alphaToCoverage:!0,blendDst:!0,blendDstAlpha:!0,blendEquation:!0,blendEquationAlpha:!0,blending:!0,blendSrc:!0,blendSrcAlpha:!0,clipIntersection:!0,clippingPlanes:!0,clipShadows:!0,colorWrite:!0,defines:!0,depthFunc:!0,depthTest:!0,depthWrite:!0,fog:!0,name:!0,opacity:!0,polygonOffset:!0,polygonOffsetFactor:!0,polygonOffsetUnits:!0,precision:!0,premultipliedAlpha:!0,dithering:!0,side:!0,shadowSide:!0,toneMapped:!0,transparent:!0,vertexColors:!0,visible:!0,format:!0,stencilWrite:!0,stencilFunc:!0,stencilRef:!0,stencilWriteMask:!0,stencilFuncMask:!0,stencilFail:!0,stencilZFail:!0,stencilZPass:!0,userData:!0}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=Me({type:n,inputs:{alphaTest:"alphaTest",alphaToCoverage:"alphaToCoverage",blendDst:"blendDst",blendDstAlpha:"blendDstAlpha",blendEquation:"blendEquation",blendEquationAlpha:"blendEquationAlpha",blending:"blending",blendSrc:"blendSrc",blendSrcAlpha:"blendSrcAlpha",clipIntersection:"clipIntersection",clippingPlanes:"clippingPlanes",clipShadows:"clipShadows",colorWrite:"colorWrite",defines:"defines",depthFunc:"depthFunc",depthTest:"depthTest",depthWrite:"depthWrite",name:"name",opacity:"opacity",polygonOffset:"polygonOffset",polygonOffsetFactor:"polygonOffsetFactor",polygonOffsetUnits:"polygonOffsetUnits",precision:"precision",premultipliedAlpha:"premultipliedAlpha",dithering:"dithering",side:"side",shadowSide:"shadowSide",toneMapped:"toneMapped",transparent:"transparent",vertexColors:"vertexColors",visible:"visible",format:"format",stencilWrite:"stencilWrite",stencilFunc:"stencilFunc",stencilRef:"stencilRef",stencilWriteMask:"stencilWriteMask",stencilFuncMask:"stencilFuncMask",stencilFail:"stencilFail",stencilZFail:"stencilZFail",stencilZPass:"stencilZPass",userData:"userData"},features:[Le]}),n})();const ZJ=Sr(TF,tl);let AF=(()=>{class n extends EF{get objectType(){return this.meshType}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=Me({type:n,features:[Le]}),n})();const JJ=Sr(AF,rl);Sr((()=>{class n extends qo{constructor(){super(...arguments),this.parentRef=Bm({optional:!0}),this.parentHostRef=Vm({optional:!0}),this.init=this.effect(Ei(t=>{if(!this.parent||!this.parent.value)return void console.info("Parent is not an object3d");const r=this.prepareInstance(new this.objectHelperType(this.parent.value,...t)),i=this.store.get(s=>s.scene);if(r&&i){i.add(r);const s=this.store.registerBeforeRender({callback:()=>{r&&r.update()},obj:this.instance});return()=>{r&&i&&(i.remove(r),s())}}}))}set helperVisible(t){this.set({visible:vt(t)})}preInit(){super.preInit(),this.set(t=>({visible:t.visible??!0}))}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.store.onReady(()=>{this.init(this.instanceArgs$),this.postInit()})})}get optionFields(){return{...super.optionFields,visible:!1}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=Me({type:n,inputs:{helperVisible:"helperVisible"},features:[Le]}),n})(),tl),Sr((()=>{class n extends nl{set args(t){this.instanceArgs=t}set material(t){this.set({material:t})}objectInitFn(){const{material:t}=this.get();return new this.spriteType(t)}get optionFields(){return{...super.optionFields,material:!0}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=Me({type:n,inputs:{args:"args",material:"material"},features:[Le]}),n})(),rl),Sr((()=>{class n extends qo{constructor(){super(...arguments),this.init=this.effect(Ei(()=>{const t=this.store.get(o=>o.gl),r=this.get(o=>o.instanceArgs),i=this.adjustCtorParams(r),s=this.prepareInstance(new this.textureType(...i));return s.encoding=t.outputEncoding,Qa(s),()=>{s.dispose()}}))}set args(t){this.instanceArgs=t}set image(t){this.set({image:t})}set mapping(t){this.set({mapping:t})}set wrapS(t){this.set({wrapS:t})}set wrapT(t){this.set({wrapT:t})}set magFilter(t){this.set({magFilter:t})}set minFilter(t){this.set({minFilter:t})}set format(t){this.set({format:t})}set type(t){this.set({type:t})}set anisotropy(t){this.set({anisotropy:Gt(t)})}set encoding(t){this.set({encoding:t})}ngOnInit(){super.ngOnInit(),this.zone.runOutsideAngular(()=>{this.store.onReady(()=>{this.init(this.ctorParams$),this.postInit()})})}get optionFields(){return{...super.optionFields,image:!0,mapping:!0,wrapS:!0,wrapT:!0,magFilter:!0,minFilter:!0,format:!0,type:!0,anisotropy:!0,encoding:!0}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275dir=Me({type:n,inputs:{args:"args",image:"image",mapping:"mapping",wrapS:"wrapS",wrapT:"wrapT",magFilter:"magFilter",minFilter:"minFilter",format:"format",type:"type",anisotropy:"anisotropy",encoding:"encoding"},features:[Le]}),n})(),tl);let KJ=(()=>{class n{constructor(){this.task_variable=!1}ngOnInit(){}scrollfunction(){this.task_variable=document.body.scrollTop>750||document.documentElement.scrollTop>750}chatBot(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Zn({type:n,selectors:[["app-genuine-purchase"]],hostBindings:function(t,r){1&t&&yn("scroll",function(){return r.scrollfunction()},0,_S)},decls:43,vars:2,consts:[[1,"taskbar"],[1,"task-container"],["href",""],["src","../../assets/images/support.png","id","support","alt",""],["src","../../assets/images/steer.png","id","steer","alt",""],[1,"bx","bxs-download"],[3,"click"],[1,"bx","bxs-chat"],[1,"chatBot-Online"],[1,"new-models"],[1,"section-container"],[1,"new-head"],[1,"new","models","threejs"],[1,"new-container","grid"],[1,"carOne","three","container","span"],[1,"carTwo","three","container","one"],[2,"color","white"],[1,"carThree","three","container","two"],[1,"more-button"],["href","#"]],template:function(t,r){1&t&&(O(0,"div",0)(1,"div",1)(2,"a",2),Ie(3,"img",3),F(),O(4,"a",2),Ie(5,"img",4),F(),O(6,"a",2),Ie(7,"i",5),F(),O(8,"a",6),yn("click",function(){return r.chatBot()}),Ie(9,"i",7),F()()(),Ie(10,"div",8),O(11,"div",9)(12,"div",10)(13,"div",11)(14,"h2"),k(15,"Genuine Ghana Purchase"),F()(),O(16,"div",12)(17,"div",13)(18,"div",14)(19,"span")(20,"h2"),k(21,"Purchase"),F(),O(22,"p"),k(23,"Purchase authentically from Toyota Ghana or our trusted dealers"),F()()(),O(24,"div",15)(25,"span")(26,"h2"),k(27,"Parts"),F(),O(28,"p",16),k(29,"Enjoy using durable parts straight from us."),F()()(),O(30,"div",17)(31,"span")(32,"h2"),k(33,"Interior"),F(),O(34,"p",16),k(35,"Interior at top notch"),F()()()()(),O(36,"div",18)(37,"a",19),k(38,"More"),F(),O(39,"span",2),k(40,"|"),F(),O(41,"a",19),k(42,"Gallery"),F()()()()),2&t&&Ql("taskbar_change",r.task_variable)},styles:[".taskbar[_ngcontent-%COMP%]{position:fixed;width:250px;height:70px;max-height:50px;min-height:60px;background-color:#000;display:flex;align-items:center;top:5%;right:-40%;border-left:7px solid #EB0A1E;transition:.4s all ease}.task-container[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;justify-content:center;align-items:center}.task-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:invert(100%) sepia(4%) saturate(14%) hue-rotate(59deg) brightness(103%) contrast(106%);margin:0 10px}.task-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{filter:invert(0%) sepia(20%) saturate(100%) hue-rotate(5deg) brightness(200%) contrast(06%);transition:.2s all ease}.task-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0 10px;color:#fff;font-size:2.5rem;transition:.2s all ease}.task-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#eb0a1e;transition:.2s all ease}#support[_ngcontent-%COMP%]{width:35px;filter:invert(100%) sepia(4%) saturate(14%) hue-rotate(59deg) brightness(103%) contrast(106%)}#steer[_ngcontent-%COMP%]{width:35px}.taskbar_change[_ngcontent-%COMP%]{position:fixed;z-index:5;top:5%;right:0;transition:.4s all ease}.new-models[_ngcontent-%COMP%]{width:100%;height:120vh;display:flex;justify-content:space-around;align-content:center}.section-container[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column;justify-content:space-evenly;margin-top:10vh}.new-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3rem}.new[_ngcontent-%COMP%]{width:100%;height:auto;justify-content:center}.more-button[_ngcontent-%COMP%]{margin:20px 0}.more-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px 30px;background-color:#000;color:#fff;font-size:1rem;font-weight:lighter;margin-right:10px}.more-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#eb0a1e;transition:.4s all ease}.more-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.2rem;margin-right:10px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(2,1fr);width:100%;height:70vh;margin:30px 0}.carOne[_ngcontent-%COMP%]{background-image:url(https://www.motorbiscuit.com/wp-content/uploads/2021/11/Drivers-side-rear-angle-view-of-2022-Toyota-RAV4-XSE-with-Cavalry-Blue-color-option.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;padding:1rem}.carTwo[_ngcontent-%COMP%]{background-image:url(https://www.motorbiscuit.com/wp-content/uploads/2021/11/Black-wheel-on-Cavalry-Blue-2022-Toyota-RAV4-XSE.jpg);background-repeat:no-repeat;background-size:cover;background-position:center}.carThree[_ngcontent-%COMP%]{background-image:url(https://www.motorbiscuit.com/wp-content/uploads/2021/11/Steering-wheel-touchscreen-and-front-seats-in-2022-Toyota-RAV4-SE-Hybrid.jpg);background-repeat:no-repeat;background-size:cover;background-position:center}.carTwo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:has(span){color:#fff}.span[_ngcontent-%COMP%]{grid-row-start:span 2;margin-right:20px}.one[_ngcontent-%COMP%]{margin-bottom:40px}.three[_ngcontent-%COMP%]{position:relative}.three[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;padding:1rem;bottom:0;left:0}.three[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding:.2rem;width:10rem;background-color:#eb0a1e;color:#fff}.three[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(25px);backdrop-filter:blur(25px);background-color:#fff2;padding:.3rem;color:#000}@media screen and (max-width: 500px){.new-models[_ngcontent-%COMP%]{height:auto}.new-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:40px 0;height:auto}.container[_ngcontent-%COMP%]{padding:7rem}.span[_ngcontent-%COMP%]{margin:0;padding:0;grid-row-start:none}.span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.carOne[_ngcontent-%COMP%]{background-image:url(https://www.motorbiscuit.com/wp-content/uploads/2021/11/Black-wheel-on-Cavalry-Blue-2022-Toyota-RAV4-XSE.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;padding:7rem;margin-bottom:40px}.carOne[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.more-button[_ngcontent-%COMP%]{margin:0}.taskbar[_ngcontent-%COMP%]{width:100%;height:auto;max-height:auto;right:-100%;top:0;border:0}.taskbar_change[_ngcontent-%COMP%]{width:100%;height:auto;flex-direction:column;justify-content:center;align-items:center;right:0;bottom:auto;top:0}.task-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:5px 0}.task-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#eb0a1e}}@media screen and (min-width: 540px) and (max-width: 1080px){.new-models[_ngcontent-%COMP%]{height:140vh}.new-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;margin:20px 0}.grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0;height:auto}.container[_ngcontent-%COMP%]{padding:7rem}.span[_ngcontent-%COMP%]{margin:0;padding:0;grid-row-start:none}.span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.carOne[_ngcontent-%COMP%]{background-image:url(https://www.motorbiscuit.com/wp-content/uploads/2021/11/Black-wheel-on-Cavalry-Blue-2022-Toyota-RAV4-XSE.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;padding:7rem;margin-bottom:40px}.carOne[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.more-button[_ngcontent-%COMP%]{margin:50px 0}.taskbar[_ngcontent-%COMP%]{width:100%;height:auto;max-height:auto;top:0;border:0}.taskbar_change[_ngcontent-%COMP%]{width:100%;height:auto;flex-direction:column;justify-content:center;align-items:center;right:0;bottom:auto;top:0;border-bottom:5px solid #EB0A1E}.task-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:5px 0}.task-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#eb0a1e}}"]}),n})(),QJ=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Zn({type:n,selectors:[["app-purchase"]],decls:11,vars:0,consts:[[1,"purchase"],[1,"section-container"],[1,"blog"],[1,"blog-picture"],[1,"resp"]],template:function(t,r){1&t&&(O(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),k(4,"Genuinely Purchase"),F(),O(5,"p"),k(6,"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Labore possimus consectetur a corporis, ipsum odit ea voluptatem explicabo provident, facilis ullam assumenda vero consequuntur, vel recusandae. Ipsum illum voluptate exercitationem."),F(),O(7,"p"),k(8,"Lorem ipsum dolor, sit amet consectetur adipisicing elit. Labore possimus consectetur a corporis, ipsum odit ea voluptatem explicabo provident, facilis ullam assumenda vero consequuntur, vel recusandae. Ipsum illum voluptate exercitationem."),F()(),Ie(9,"div",3),F()(),Ie(10,"div",4))},styles:[".purchase[_ngcontent-%COMP%]{height:100vh;width:100%;display:flex;justify-content:center;align-items:center}.section-container[_ngcontent-%COMP%]{width:80%;display:flex;justify-content:space-between;align-items:center}.blog[_ngcontent-%COMP%]{width:100%;height:100%}.blog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3rem}.blog[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem}.blog-picture[_ngcontent-%COMP%]{padding:13rem 22rem;background-color:#000;margin-left:70px;margin-right:-9.6rem;background-image:url(toyota-engine.a86de0c954dfde26.jpg);background-repeat:no-repeat;background-size:cover}@media screen and (max-width: 500px){.purchase[_ngcontent-%COMP%]{height:auto;margin:100px 0}.section-container[_ngcontent-%COMP%]{height:auto;display:flex;flex-direction:column;justify-content:space-around}.blog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.blog[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.blog-picture[_ngcontent-%COMP%]{display:none;width:100%;height:40vh;margin:20px 0;padding:0}.resp[_ngcontent-%COMP%]{width:100%;height:40vh;background-image:url(toyota-engine.a86de0c954dfde26.jpg);background-repeat:no-repeat;background-size:cover;margin:40px 0}}@media screen and (min-width: 540px) and (max-width: 1080px){.purchase[_ngcontent-%COMP%]{height:70vh}.section-container[_ngcontent-%COMP%]{height:auto;display:flex;flex-direction:column;justify-content:space-around}.blog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem}.blog[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem}.blog-picture[_ngcontent-%COMP%]{display:none;width:100%;height:70vh;margin:20px 0;padding:0}.resp[_ngcontent-%COMP%]{width:100%;height:70vh;background-image:url(toyota-engine.a86de0c954dfde26.jpg);background-repeat:no-repeat;background-size:cover;margin:40px 0}}@media screen and (min-width: 550px) and (max-width: 1300px){.blog-picture[_ngcontent-%COMP%]{padding:15rem 16rem;margin:0}}"]}),n})(),eK=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Zn({type:n,selectors:[["app-new-models"]],decls:32,vars:0,consts:[[1,"new-models"],[1,"section-container"],[1,"new-head"],[1,"new","models","threejs"],[1,"new-container","grid"],[1,"carOne","three","container","span"],[1,"carTwo","three","container","one"],[2,"color","white"],[1,"carThree","three","container","two"],[1,"more-button"],["href","#"],["href",""]],template:function(t,r){1&t&&(O(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),k(4,"New Models"),F()(),O(5,"div",3)(6,"div",4)(7,"div",5)(8,"span")(9,"h2"),k(10,"RAV 4"),F(),O(11,"p"),k(12,"Toyota's New 2022 Model"),F()()(),O(13,"div",6)(14,"span")(15,"h2"),k(16,"RAV 4"),F(),O(17,"p",7),k(18,"Cobalt is blue"),F()()(),O(19,"div",8)(20,"span")(21,"h2"),k(22,"New Model"),F(),O(23,"p",7),k(24,"New details and info"),F()()()()(),O(25,"div",9)(26,"a",10),k(27,"More"),F(),O(28,"span",11),k(29,"|"),F(),O(30,"a",10),k(31,"Gallery"),F()()()())},styles:[".new-models[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;justify-content:center;align-content:center}.section-container[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column;justify-content:center}.new-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3rem}.new[_ngcontent-%COMP%]{width:100%;height:auto;justify-content:center}.more-button[_ngcontent-%COMP%]{margin:20px 0}.more-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px 30px;background-color:#000;color:#fff;font-size:1rem;font-weight:lighter}.more-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px 30px;background-color:#eb0a1e;color:#fff;font-size:1rem;font-weight:lighter;margin-right:10px}.more-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#000;transition:.4s all ease}.more-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.2rem;margin-right:10px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(2,1fr);width:100%;height:70vh;margin:30px 0}.carOne[_ngcontent-%COMP%]{background-image:url(https://www.motorbiscuit.com/wp-content/uploads/2021/11/Side-view-of-silver-2022-Toyota-RAV4-SE-Hybrid.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;padding:1rem}.carTwo[_ngcontent-%COMP%]{background-image:url(https://media.ed.edmunds-media.com/toyota/rav4/2022/oem/2022_toyota_rav4_4dr-suv_base_s_oem_1_815.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;padding:1rem}.carThree[_ngcontent-%COMP%]{background-image:url(https://www.motorbiscuit.com/wp-content/uploads/2021/11/Side-view-of-silver-2022-Toyota-RAV4-SE-Hybrid.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;padding:1rem}.three[_ngcontent-%COMP%]{background-color:gray;padding:1rem}.span[_ngcontent-%COMP%]{grid-row-start:span 2;margin-right:20px;margin-left:-9.7rem}.span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:139px}.one[_ngcontent-%COMP%]{margin-bottom:20px}.three[_ngcontent-%COMP%]{position:relative}.three[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;padding:1rem;bottom:0;left:0}.three[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{padding:.2rem 1.5rem;background-color:#000;color:#fff}.three[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(25px);backdrop-filter:blur(25px);background-color:#fff2;padding:.3rem;color:#000}.display[_ngcontent-%COMP%]{width:100%;height:60vh;display:flex;justify-content:center;align-items:center}.container-display[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:auto;width:100%}@media screen and (max-width: 378px){.new-models[_ngcontent-%COMP%]{height:150vh}.new-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}@media screen and (max-width: 500px){.new-models[_ngcontent-%COMP%]{height:auto}.new-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem}.grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:50px 0;height:auto}.container[_ngcontent-%COMP%]{padding:7rem}.span[_ngcontent-%COMP%]{margin:0;padding:0;grid-row-start:none}.carOne[_ngcontent-%COMP%]{background-image:url(https://www.motorbiscuit.com/wp-content/uploads/2021/11/Black-wheel-on-Cavalry-Blue-2022-Toyota-RAV4-XSE.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;padding:7rem;margin-bottom:40px}.one[_ngcontent-%COMP%]{margin-bottom:40px}.span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0;color:#fff}.span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.section-container[_ngcontent-%COMP%]{justify-content:space-evenly}}@media screen and (min-width: 540px) and (max-width: 1080px){.new-models[_ngcontent-%COMP%]{height:120vh}.new-head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;margin:20px 0}.grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:0;height:auto}.container[_ngcontent-%COMP%]{padding:7rem}.span[_ngcontent-%COMP%]{margin:0;padding:0;grid-row-start:none}.carOne[_ngcontent-%COMP%]{background-image:url(https://www.motorbiscuit.com/wp-content/uploads/2021/11/Black-wheel-on-Cavalry-Blue-2022-Toyota-RAV4-XSE.jpg);background-repeat:no-repeat;background-size:cover;background-position:center;padding:7rem;margin-bottom:40px}.one[_ngcontent-%COMP%]{margin-bottom:40px}.span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0;color:#fff}.span[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff}.section-container[_ngcontent-%COMP%]{justify-content:space-evenly}.more-button[_ngcontent-%COMP%]{margin:50px 0}}"]}),n})();function tK(n,e){if(1&n&&(O(0,"option",9),k(1),F()),2&n){const t=e.$implicit;Pt(1),pi(" ",t.name," ")}}function nK(n,e){if(1&n&&(O(0,"div",14)(1,"span",15),k(2),F(),O(3,"a",16),Ie(4,"i",17),k(5),F(),O(6,"span"),k(7,"Service:"),F(),O(8,"span"),Ie(9,"i",18),k(10),F(),O(11,"span"),Ie(12,"i",19),k(13),F(),O(14,"span"),Ie(15,"i",19),k(16),F(),O(17,"div",20)(18,"a",21),k(19,"View"),F()()()),2&n){const t=e.$implicit;Pt(2),pi(" ",t.name," "),Pt(3),pi(" ",t.location,""),Pt(5),pi(" ",t.serviceOne," "),Pt(3),pi(" ",t.serviceTwo," "),Pt(3),pi(" ",t.serviceThree," ")}}function rK(n,e){if(1&n&&(O(0,"div",10),Yf(1,11),O(2,"div",12),rs(3,nK,20,5,"div",13),F(),Zf(),F()),2&n){const t=cv();Pt(3),fi("ngForOf",t.dealersinSight)}}let iK=(()=>{class n{constructor(){this.regions=[{id:1,name:"Greater Accra"},{id:2,name:"Tarkwa"},{id:3,name:"Brong"}],this.regionOne=[{name:"Kofi Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"Benjamin Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"Daniel Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"Samuel Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"Ezekiel Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"Akwasi Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"}],this.regionTwo=[{name:"Kwesi Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"John Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"Jonah Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"David Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"Peter Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"},{name:"Akwasi Mensah",location:"Link",serviceOne:"Service 1",serviceTwo:"Service 2",serviceThree:"Service 3"}],this.dealersinSight=this.regionOne}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Zn({type:n,selectors:[["app-trusted-dealers"]],decls:11,vars:2,consts:[[1,"trusted-dealers"],[1,"container"],[1,"head"],[1,"dealers"],[1,"dealer-container"],["name","","id","select",1,"form-select"],["select",""],["value","",4,"ngFor","ngForOf"],["class","region-dealers",4,"ngIf"],["value",""],[1,"region-dealers"],[1,"dealing"],[1,"dealers-container"],["class","dealer",4,"ngFor","ngForOf"],[1,"dealer"],["id","name"],["href","","id","location"],[1,"bx","bxs-map"],[1,"bx","bx-check"],[1,"bx","bx-check-double"],[1,"view"],["href","#","id","view"]],template:function(t,r){1&t&&(O(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),k(4,"Trusted Dealers"),F()(),O(5,"div",3)(6,"div",4)(7,"select",5,6),rs(9,tK,2,1,"option",7),F(),rs(10,rK,4,1,"div",8),F()()()()),2&t&&(Pt(9),fi("ngForOf",r.regions),Pt(1),fi("ngIf",r.dealersinSight))},dependencies:[l0,Sp,pN,mN],styles:["[_ngcontent-%COMP%]:root{--primary-color: #8f0410;--secondary-color: #0000;--white: white;--menu-fonts: 1.5rem;--global-links: 1.5rem;--Tittle: 2rem;--inner-card-head-title: 1.6rem;--inner-card-sub-title: 1.2rem}.trusted-dealers[_ngcontent-%COMP%]{height:100vh;width:100%;background-color:#000;display:flex;justify-content:center;align-items:center;margin-top:120px}.container[_ngcontent-%COMP%]{width:80%;height:100%;display:flex;flex-direction:column;justify-content:center}h2[_ngcontent-%COMP%]{color:#fff;font-size:3rem}.region-dealers[_ngcontent-%COMP%]{overflow-x:scroll;overflow-y:hidden;height:50vh;width:100%}.dealers-container[_ngcontent-%COMP%]{height:50vh;display:flex;align-items:center;margin-left:5px;margin-top:-20px}.dealers-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.dealer-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:#000;color:#fff;font-size:2.2rem;border:none;margin:10px 0;width:20rem}.dealer-container[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;background-color:#000;color:#fff;font-size:1rem;border:none}.dealers[_ngcontent-%COMP%]{color:#000;margin-top:20px;margin-right:-150px}ng-container[_ngcontent-%COMP%]{display:flex;width:100%;height:auto;background-color:gray}#name[_ngcontent-%COMP%]{font-size:1.4rem}.dealer[_ngcontent-%COMP%]{width:20%;display:flex;flex-direction:column;padding:2rem 1rem;margin-right:40px;background-color:var(--primary-color);transition:.2s all ease}.dealer[_ngcontent-%COMP%]:hover{outline:2px solid white;transition:.2s all ease}.dealer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:17px;height:15px;filter:invert(100%) sepia(4%) saturate(14%) hue-rotate(59deg) brightness(103%) contrast(106%)}.dealer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{margin-bottom:10px;color:#fff}#location[_ngcontent-%COMP%]{font-size:1.2rem}.view[_ngcontent-%COMP%]{width:100%;height:2vh;display:flex;justify-content:center;align-items:center;margin-top:20px}.view[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:7px 85px;background-color:var(--white);color:#000;transition:.4s all ease}.view[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:gray;color:#fff}@media screen and (max-width: 500px){.head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem}.dealer-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:1.5rem}.dealer[_ngcontent-%COMP%]{width:100%;padding:3rem 2rem}.dealers[_ngcontent-%COMP%]{margin-right:-30px}}@media screen and (min-width: 540px) and (max-width: 1080px){.head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem}.dealer-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:1.5rem}.dealer[_ngcontent-%COMP%]{width:100%;padding:3rem 2rem}.dealers[_ngcontent-%COMP%]{margin-right:-60px}}@media screen and (min-width: 540px) and (max-width: 1300px){.dealers[_ngcontent-%COMP%]{margin-right:-90px}}"]}),n})();function sK(n,e){if(1&n&&(O(0,"div",8)(1,"div",9)(2,"p"),k(3),F()(),O(4,"div",10)(5,"a",11),k(6,"Learn More"),F()()()),2&n){const t=e.$implicit;Pt(3),Ls(t)}}function oK(n,e){if(1&n&&(O(0,"div",4)(1,"div",5)(2,"span"),k(3),F()(),O(4,"div",6),rs(5,sK,7,1,"div",7),F()()),2&n){const t=e.$implicit;Pt(3),Ls(t.category),Pt(2),fi("ngForOf",t.tips)}}let aK=(()=>{class n{constructor(){this.tips=[{category:"Vehicle Usage",tips:["Avoid aggressive acceleration and braking to improve fuel efficiency and reduce wear on components.","Use cruise control on highways to maintain a steady speed and save fuel.","Ensure tires are properly inflated to the recommended PSI for better mileage and handling.","Regularly check engine oil levels and change oil at recommended intervals.","Drive smoothly and avoid excessive idling to extend the lifespan of your engine."]},{category:"Parts and Maintenance",tips:["Use only genuine Toyota parts or OEM-approved alternatives for repairs and replacements.","Check and replace air filters regularly to maintain engine performance and fuel efficiency.","Inspect brake pads and rotors periodically to ensure safe braking performance.","Flush and replace coolant according to Toyota's maintenance schedule to prevent overheating.","Keep an eye on battery health and clean corrosion from terminals to prevent starting issues."]}]}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Zn({type:n,selectors:[["app-tips"]],decls:6,vars:1,consts:[[1,"tips"],[1,"tips-container"],[1,"head"],["class","vehicle-usage",4,"ngFor","ngForOf"],[1,"vehicle-usage"],[1,"subtitle"],[1,"tip"],["class","container",4,"ngFor","ngForOf"],[1,"container"],[1,"words"],[1,"learn-more"],["href","#"]],template:function(t,r){1&t&&(O(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),k(4,"Tips"),F()(),rs(5,oK,6,2,"div",3),F()()),2&t&&(Pt(5),fi("ngForOf",r.tips))},dependencies:[l0],styles:[".tips[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;margin-block:50px}.tips-container[_ngcontent-%COMP%]{width:80%;height:100%;display:flex;flex-direction:column;justify-content:center;gap:40px}.tips[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3rem}.head[_ngcontent-%COMP%]{margin-bottom:40px}.subtitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2rem}.subtitle[_ngcontent-%COMP%]{margin-bottom:20px}.container[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;border-bottom:20px solid black;margin-bottom:40px}.words[_ngcontent-%COMP%], .learn-more[_ngcontent-%COMP%]{height:10vh;display:flex;justify-content:center;align-items:center;padding:1.5rem}.words[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-start;background-color:#eb0a1e;color:#fff}.words[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}.learn-more[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#000;color:#fff}.learn-more[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;color:#fff}@media screen and (max-width: 500px){.head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem}.subtitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem}.words[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.45rem}}@media screen and (min-width: 540px) and (max-width: 1080px){.head[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.8rem}.subtitle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.8rem}.words[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.7rem}}"]}),n})();function lo(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function NF(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var Mw,tr,nn,an,gs,Ew,Dw,LF,VF,fu,zh,l,c,u,d,h,f,n,e,t,r,i,s,o,a,g,ei={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},au={duration:.5,overwrite:!1,delay:0},Ti=1e8,Ut=1e-8,xw=2*Math.PI,lK=xw/4,cK=0,PF=Math.sqrt,uK=Math.cos,dK=Math.sin,Yn=function(e){return"string"==typeof e},pn=function(e){return"function"==typeof e},co=function(e){return"number"==typeof e},ww=function(e){return typeof e>"u"},ps=function(e){return"object"==typeof e},Rr=function(e){return!1!==e},bw=function(){return typeof window<"u"},Hm=function(e){return pn(e)||Yn(e)},IF="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},cr=Array.isArray,Cw=/(?:-?\.?\d|\.)+/gi,RF=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,lu=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Sw=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,OF=/[+-]=-?[.\d]+/,FF=/[^,'"\[\]\s]+/gi,hK=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ti={},zm={},kF=function(e){return(zm=uu(e,ti))&&Lr},Tw=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Fh=function(e,t){return!t&&console.warn(e)},BF=function(e,t){return e&&(ti[e]=t)&&zm&&(zm[e]=t)||ti},Lh=function(){return 0},fK={suppressEvents:!0,isStart:!0,kill:!1},jm={suppressEvents:!0,kill:!1},pK={suppressEvents:!0},Aw={},Yo=[],Nw={},ni={},Pw={},GF=30,Wm=[],Iw="",Rw=function(e){var r,i,t=e[0];if(ps(t)||pn(t)||(e=[e]),!(r=(t._gsap||{}).harness)){for(i=Wm.length;i--&&!Wm[i].targetTest(t););r=Wm[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new g2(e[i],r)))||e.splice(i,1);return e},il=function(e){return e._gsap||Rw(Ni(e))[0]._gsap},UF=function(e,t,r){return(r=e[t])&&pn(r)?e[t]():ww(r)&&e.getAttribute&&e.getAttribute(t)||r},Or=function(e,t){return(e=e.split(",")).forEach(t)||e},xn=function(e){return Math.round(1e5*e)/1e5||0},In=function(e){return Math.round(1e7*e)/1e7||0},cu=function(e,t){var r=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),"+"===r?e+i:"-"===r?e-i:"*"===r?e*i:e/i},gK=function(e,t){for(var r=t.length,i=0;e.indexOf(t[i])<0&&++i<r;);return i<r},$m=function(){var r,i,e=Yo.length,t=Yo.slice(0);for(Nw={},Yo.length=0,r=0;r<e;r++)(i=t[r])&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},HF=function(e,t,r,i){Yo.length&&!tr&&$m(),e.render(t,r,i||tr&&t<0&&(e._initted||e._startAt)),Yo.length&&!tr&&$m()},zF=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(FF).length<2?t:Yn(e)?e.trim():e},jF=function(e){return e},ri=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},uu=function(e,t){for(var r in t)e[r]=t[r];return e},WF=function n(e,t){for(var r in t)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(e[r]=ps(t[r])?n(e[r]||(e[r]={}),t[r]):t[r]);return e},qm=function(e,t){var i,r={};for(i in e)i in t||(r[i]=e[i]);return r},kh=function(e){var t=e.parent||an,r=e.keyframes?function(e){return function(t,r){for(var i in r)i in t||"duration"===i&&e||"ease"===i||(t[i]=r[i])}}(cr(e.keyframes)):ri;if(Rr(e.inherit))for(;t;)r(e,t.vars.defaults),t=t.parent||t._dp;return e},$F=function(e,t,r,i,s){void 0===r&&(r="_first"),void 0===i&&(i="_last");var a,o=e[i];if(s)for(a=t[s];o&&o[s]>a;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=o,t.parent=t._dp=e,t},Xm=function(e,t,r,i){void 0===r&&(r="_first"),void 0===i&&(i="_last");var s=t._prev,o=t._next;s?s._next=o:e[r]===t&&(e[r]=o),o?o._prev=s:e[i]===t&&(e[i]=s),t._next=t._prev=t.parent=null},Zo=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},sl=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},_K=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},Ow=function(e,t,r,i){return e._startAt&&(tr?e._startAt.revert(jm):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},vK=function n(e){return!e||e._ts&&n(e.parent)},qF=function(e){return e._repeat?du(e._tTime,e=e.duration()+e._rDelay)*e:0},du=function(e,t){var r=Math.floor(e=In(e/t));return e&&r===e?r-1:r},Ym=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Zm=function(e){return e._end=In(e._start+(e._tDur/Math.abs(e._ts||e._rts||Ut)||0))},Jm=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=In(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Zm(e),r._dirty||sl(r,e)),e},XF=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=Ym(e.rawTime(),t),(!t._dur||Vh(0,t.totalDuration(),r)-t._tTime>Ut)&&t.render(r,!0)),sl(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-Ut}},ms=function(e,t,r,i){return t.parent&&Zo(t),t._start=In((co(r)?r:r||e!==an?Ai(e,r,t):e._time)+t._delay),t._end=In(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),$F(e,t,"_first","_last",e._sort?"_start":0),Fw(t)||(e._recent=t),i||XF(e,t),e._ts<0&&Jm(e,e._tTime),e},YF=function(e,t){return(ti.ScrollTrigger||Tw("scrollTrigger",t))&&ti.ScrollTrigger.create(t,e)},ZF=function(e,t,r,i,s){return jw(e,t,s),e._initted?!r&&e._pt&&!tr&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&VF!==si.frame?(Yo.push(e),e._lazy=[s,i],1):void 0:1},MK=function n(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||n(t))},Fw=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},hu=function(e,t,r,i){var s=e._repeat,o=In(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:In(o*(s+1)+e._rDelay*s):o,a>0&&!i&&Jm(e,e._tTime=e._tDur*a),e.parent&&Zm(e),r||sl(e.parent,e),e},JF=function(e){return e instanceof Er?sl(e):hu(e,e._dur)},bK={_start:0,endTime:Lh,totalDuration:Lh},Ai=function n(e,t,r){var a,l,c,i=e.labels,s=e._recent||bK,o=e.duration()>=Ti?s.endTime(!1):e._dur;return Yn(t)&&(isNaN(t)||t in i)?(l=t.charAt(0),c="%"===t.substr(-1),a=t.indexOf("="),"<"===l||">"===l?(a>=0&&(t=t.replace(/=/,"")),("<"===l?s._start:s.endTime(s._repeat>=0))+(parseFloat(t.substr(1))||0)*(c?(a<0?s:r).totalDuration()/100:1)):a<0?(t in i||(i[t]=o),i[t]):(l=parseFloat(t.charAt(a-1)+t.substr(a+1)),c&&r&&(l=l/100*(cr(r)?r[0]:r).totalDuration()),a>1?n(e,t.substr(0,a-1),r)+l:o+l)):null==t?o:+t},Bh=function(e,t,r){var a,l,i=co(t[1]),s=(i?2:1)+(e<2?0:1),o=t[s];if(i&&(o.duration=t[1]),o.parent=r,e){for(a=o,l=r;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Rr(l.vars.inherit)&&l.parent;o.immediateRender=Rr(a.immediateRender),e<2?o.runBackwards=1:o.startAt=t[s-1]}return new Rn(t[0],o,t[s+1])},Jo=function(e,t){return e||0===e?t(e):t},Vh=function(e,t,r){return r<e?e:r>t?t:r},ur=function(e,t){return Yn(e)&&(t=hK.exec(e))?t[1]:""},Lw=[].slice,KF=function(e,t){return e&&ps(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&ps(e[0]))&&!e.nodeType&&e!==gs},Ni=function(e,t,r){return nn&&!t&&nn.selector?nn.selector(e):!Yn(e)||r||!Ew&&pu()?cr(e)?function(e,t,r){return void 0===r&&(r=[]),e.forEach(function(i){var s;return Yn(i)&&!t||KF(i,1)?(s=r).push.apply(s,Ni(i)):r.push(i)})||r}(e,r):KF(e)?Lw.call(e,0):e?[e]:[]:Lw.call((t||Dw).querySelectorAll(e),0)},kw=function(e){return e=Ni(e)[0]||Fh("Invalid scope")||{},function(t){var r=e.current||e.nativeElement||e;return Ni(t,r.querySelectorAll?r:r===e?Fh("Invalid scope")||Dw.createElement("div"):e)}},QF=function(e){return e.sort(function(){return.5-Math.random()})},e2=function(e){if(pn(e))return e;var t=ps(e)?e:{each:e},r=ol(t.ease),i=t.from||0,s=parseFloat(t.base)||0,o={},a=i>0&&i<1,l=isNaN(i)||a,c=t.axis,u=i,d=i;return Yn(i)?u=d={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(u=i[0],d=i[1]),function(h,f,g){var y,_,v,M,w,b,S,x,C,p=(g||t).length,m=o[p];if(!m){if(!(C="auto"===t.grid?0:(t.grid||[1,Ti])[1])){for(S=-Ti;S<(S=g[C++].getBoundingClientRect().left)&&C<p;);C<p&&C--}for(m=o[p]=[],y=l?Math.min(C,p)*u-.5:i%C,_=C===Ti?0:l?p*d/C-.5:i/C|0,S=0,x=Ti,b=0;b<p;b++)v=b%C-y,M=_-(b/C|0),m[b]=w=c?Math.abs("y"===c?M:v):PF(v*v+M*M),w>S&&(S=w),w<x&&(x=w);"random"===i&&QF(m),m.max=S-x,m.min=x,m.v=p=(parseFloat(t.amount)||parseFloat(t.each)*(C>p?p-1:c?"y"===c?p/C:C:Math.max(C,p/C))||0)*("edges"===i?-1:1),m.b=p<0?s-p:s,m.u=ur(t.amount||t.each)||0,r=r&&p<0?h2(r):r}return p=(m[h]-m.min)/m.max||0,In(m.b+(r?r(p):p)*m.v)+m.u}},Bw=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=In(Math.round(parseFloat(r)/e)*e*t);return(i-i%1)/t+(co(r)?0:ur(r))}},t2=function(e,t){var i,s,r=cr(e);return!r&&ps(e)&&(i=r=e.radius||Ti,e.values?(e=Ni(e.values),(s=!co(e[0]))&&(i*=i)):e=Bw(e.increment)),Jo(t,r?pn(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var h,f,a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=Ti,u=0,d=e.length;d--;)(h=s?(h=e[d].x-a)*h+(f=e[d].y-l)*f:Math.abs(e[d]-a))<c&&(c=h,u=d);return u=!i||c<=i?e[u]:o,s||u===o||co(o)?u:u+ur(o)}:Bw(e))},n2=function(e,t,r,i){return Jo(cr(e)?!t:!0===r?!!(r=0):!i,function(){return cr(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+.99*r))/r)*r*i)/i})},r2=function(e,t,r){return Jo(r,function(i){return e[~~t(i)]})},Gh=function(e){for(var i,s,o,a,t=0,r="";~(i=e.indexOf("random(",t));)o=e.indexOf(")",i),a="["===e.charAt(i+7),s=e.substr(i+7,o-i-7).match(a?FF:Cw),r+=e.substr(t,i-t)+n2(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),t=o+1;return r+e.substr(t,e.length-t)},i2=function(e,t,r,i,s){var o=t-e,a=i-r;return Jo(s,function(l){return r+((l-e)/o*a||0)})},s2=function(e,t,r){var o,a,l,i=e.labels,s=Ti;for(o in i)(a=i[o]-t)<0==!!r&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},ii=function(e,t,r){var l,c,u,i=e.vars,s=i[t],o=nn,a=e._ctx;if(s)return l=i[t+"Params"],c=i.callbackScope||e,r&&Yo.length&&$m(),a&&(nn=a),u=l?s.apply(c,l):s.call(c),nn=o,u},Uh=function(e){return Zo(e),e.scrollTrigger&&e.scrollTrigger.kill(!!tr),e.progress()<1&&ii(e,"onInterrupt"),e},o2=[],a2=function(e){if(e)if(e=!e.name&&e.default||e,bw()||e.headless){var t=e.name,r=pn(e),i=t&&!r&&e.init?function(){this._props=[]}:e,s={init:Lh,render:qw,add:Hw,kill:qK,modifier:$K,rawVars:0},o={targetTest:0,get:0,getSetter:$w,aliases:{},register:0};if(pu(),e!==i){if(ni[t])return;ri(i,ri(qm(e,s),o)),uu(i.prototype,uu(s,qm(e,o))),ni[i.prop=t]=i,e.targetTest&&(Wm.push(i),Aw[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}BF(t,i),e.register&&e.register(Lr,i,Fr)}else o2.push(e)},Ht=255,Hh={aqua:[0,Ht,Ht],lime:[0,Ht,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ht],navy:[0,0,128],white:[Ht,Ht,Ht],olive:[128,128,0],yellow:[Ht,Ht,0],orange:[Ht,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ht,0,0],pink:[Ht,192,203],cyan:[0,Ht,Ht],transparent:[Ht,Ht,Ht,0]},Vw=function(e,t,r){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(r-t)*e*6:e<.5?r:3*e<2?t+(r-t)*(2/3-e)*6:t)*Ht+.5|0},l2=function(e,t,r){var s,o,a,l,c,u,d,h,f,g,i=e?co(e)?[e>>16,e>>8&Ht,e&Ht]:0:Hh.black;if(!i){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),Hh[e])i=Hh[e];else if("#"===e.charAt(0)){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(i=parseInt(e.substr(1,6),16))>>16,i>>8&Ht,i&Ht,parseInt(e.substr(7),16)/255];i=[(e=parseInt(e.substr(1),16))>>16,e>>8&Ht,e&Ht]}else if("hsl"===e.substr(0,3))if(i=g=e.match(Cw),t){if(~e.indexOf("="))return i=e.match(RF),r&&i.length<4&&(i[3]=1),i}else l=+i[0]%360/360,c=+i[1]/100,s=2*(u=+i[2]/100)-(o=u<=.5?u*(c+1):u+c-u*c),i.length>3&&(i[3]*=1),i[0]=Vw(l+1/3,s,o),i[1]=Vw(l,s,o),i[2]=Vw(l-1/3,s,o);else i=e.match(Cw)||Hh.transparent;i=i.map(Number)}return t&&!g&&(s=i[0]/Ht,o=i[1]/Ht,a=i[2]/Ht,u=((d=Math.max(s,o,a))+(h=Math.min(s,o,a)))/2,d===h?l=c=0:(f=d-h,c=u>.5?f/(2-d-h):f/(d+h),l=d===s?(o-a)/f+(o<a?6:0):d===o?(a-s)/f+2:(s-o)/f+4,l*=60),i[0]=~~(l+.5),i[1]=~~(100*c+.5),i[2]=~~(100*u+.5)),r&&i.length<4&&(i[3]=1),i},c2=function(e){var t=[],r=[],i=-1;return e.split(Ko).forEach(function(s){var o=s.match(lu)||[];t.push.apply(t,o),r.push(i+=o.length+1)}),t.c=r,t},u2=function(e,t,r){var l,c,u,d,i="",s=(e+i).match(Ko),o=t?"hsla(":"rgba(",a=0;if(!s)return e;if(s=s.map(function(h){return(h=l2(h,t,1))&&o+(t?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),r&&(u=c2(e),(l=r.c).join(i)!==u.c.join(i)))for(d=(c=e.replace(Ko,"1").split(lu)).length-1;a<d;a++)i+=c[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:r).shift());if(!c)for(d=(c=e.split(Ko)).length-1;a<d;a++)i+=c[a]+s[a];return i+c[d]},Ko=function(){var e,n="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in Hh)n+="|"+e+"\\b";return new RegExp(n+")","gi")}(),IK=/hsl[a]?\(/,d2=function(e){var r,t=e.join(" ");if(Ko.lastIndex=0,Ko.test(t))return r=IK.test(t),e[1]=u2(e[1],r),e[0]=u2(e[0],r,c2(e[1])),!0},si=(n=Date.now,e=500,t=33,r=n(),i=r,o=s=1e3/240,g=function p(m){var v,M,w,b,y=n()-i,_=!0===m;if((y>e||y<0)&&(r+=y-t),((v=(w=(i+=y)-r)-o)>0||_)&&(b=++d.frame,h=w-1e3*d.time,d.time=w/=1e3,o+=v+(v>=s?4:s-v),M=1),_||(l=c(p)),M)for(f=0;f<a.length;f++)a[f](w,h,b,m)},d={time:0,frame:0,tick:function(){g(!0)},deltaRatio:function(m){return h/(1e3/(m||60))},wake:function(){LF&&(!Ew&&bw()&&(gs=Ew=window,Dw=gs.document||{},ti.gsap=Lr,(gs.gsapVersions||(gs.gsapVersions=[])).push(Lr.version),kF(zm||gs.GreenSockGlobals||!gs.gsap&&gs||{}),o2.forEach(a2)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&d.sleep(),c=u||function(m){return setTimeout(m,o-1e3*d.time+1|0)},zh=1,g(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),zh=0,c=Lh},lagSmoothing:function(m,y){e=m||1/0,t=Math.min(y||33,e)},fps:function(m){o=1e3*d.time+(s=1e3/(m||240))},add:function(m,y,_){var v=y?function(M,w,b,S){m(M,w,b,S),d.remove(v)}:m;return d.remove(m),a[_?"unshift":"push"](v),pu(),v},remove:function(m,y){~(y=a.indexOf(m))&&a.splice(y,1)&&f>=y&&f--},_listeners:a=[]}),pu=function(){return!zh&&si.wake()},gt={},RK=/^[\d.\-M][\d.\-,\s]/,OK=/["']/g,FK=function(e){for(var a,l,c,t={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length;s<o;s++)l=r[s],a=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,a),t[i]=isNaN(c)?c.replace(OK,"").trim():+c,i=l.substr(a+1).trim();return t},h2=function(e){return function(t){return 1-e(1-t)}},f2=function n(e,t){for(var i,r=e._first;r;)r instanceof Er?n(r,t):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==t&&(r.timeline?n(r.timeline,t):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=t)),r=r._next},ol=function(e,t){return e&&(pn(e)?e:gt[e]||function(e){var t=(e+"").split("("),r=gt[t[0]];return r&&t.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[FK(t[1])]:function(e){var t=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<r?e.indexOf(")",r+1):r)}(e).split(",").map(zF)):gt._CE&&RK.test(e)?gt._CE("",e):r}(e))||t},al=function(e,t,r,i){void 0===r&&(r=function(l){return 1-t(1-l)}),void 0===i&&(i=function(l){return l<.5?t(2*l)/2:1-t(2*(1-l))/2});var o,s={easeIn:t,easeOut:r,easeInOut:i};return Or(e,function(a){for(var l in gt[a]=ti[a]=s,gt[o=a.toLowerCase()]=r,s)gt[o+("easeIn"===l?".in":"easeOut"===l?".out":".inOut")]=gt[a+"."+l]=s[l]}),s},p2=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},Gw=function n(e,t,r){var i=t>=1?t:1,s=(r||(e?.3:.45))/(t<1?t:1),o=s/xw*(Math.asin(1/i)||0),a=function(u){return 1===u?1:i*Math.pow(2,-10*u)*dK((u-o)*s)+1},l="out"===e?a:"in"===e?function(c){return 1-a(1-c)}:p2(a);return s=xw/s,l.config=function(c,u){return n(e,c,u)},l},Uw=function n(e,t){void 0===t&&(t=1.70158);var r=function(o){return o?--o*o*((t+1)*o+t)+1:0},i="out"===e?r:"in"===e?function(s){return 1-r(1-s)}:p2(r);return i.config=function(s){return n(e,s)},i};Or("Linear,Quad,Cubic,Quart,Quint,Strong",function(n,e){var t=e<5?e+1:e;al(n+",Power"+(t-1),e?function(r){return Math.pow(r,t)}:function(r){return r},function(r){return 1-Math.pow(1-r,t)},function(r){return r<.5?Math.pow(2*r,t)/2:1-Math.pow(2*(1-r),t)/2})}),gt.Linear.easeNone=gt.none=gt.Linear.easeIn,al("Elastic",Gw("in"),Gw("out"),Gw()),function(n,e){var s=function(a){return a<.36363636363636365?n*a*a:a<.7272727272727273?n*Math.pow(a-1.5/e,2)+.75:a<.9090909090909092?n*(a-=2.25/e)*a+.9375:n*Math.pow(a-2.625/e,2)+.984375};al("Bounce",function(o){return 1-s(1-o)},s)}(7.5625,2.75),al("Expo",function(n){return Math.pow(2,10*(n-1))*n+n*n*n*n*n*n*(1-n)}),al("Circ",function(n){return-(PF(1-n*n)-1)}),al("Sine",function(n){return 1===n?1:1-uK(n*lK)}),al("Back",Uw("in"),Uw("out"),Uw()),gt.SteppedEase=gt.steps=ti.SteppedEase={config:function(e,t){void 0===e&&(e=1);var r=1/e,i=e+(t?0:1),s=t?1:0;return function(a){return((i*Vh(0,.99999999,a)|0)+s)*r}}},au.ease=gt["quad.out"],Or("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(n){return Iw+=n+","+n+"Params,"});var g2=function(e,t){this.id=cK++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:UF,this.set=t?t.getSetter:$w},jh=function(){function n(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,hu(this,+t.duration,1,1),this.data=t.data,nn&&(this._ctx=nn,nn.data.push(this)),zh||si.wake()}var e=n.prototype;return e.delay=function(r){return r||0===r?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,hu(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(pu(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Jm(this,r),!s._dp||s.parent||XF(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&ms(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Ut||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),HF(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+qF(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?r:1-r)+qF(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?du(this._tTime,s)+1:1},e.timeScale=function(r,i){if(!arguments.length)return this._rts===-Ut?0:this._rts;if(this._rts===r)return this;var s=this.parent&&this._ts?Ym(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Ut?0:this._rts,this.totalTime(Vh(-Math.abs(this._delay),this._tDur,s),!1!==i),Zm(this),_K(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(pu(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==Ut&&(this._tTime-=Ut)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&ms(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(Rr(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ym(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){void 0===r&&(r=pK);var i=tr;return tr=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),"nested"!==this.data&&!1!==r.kill&&this.kill(),tr=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,JF(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,JF(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(Ai(this,r),Rr(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,Rr(i)),this._dur||(this._zTime=-Ut),this},e.play=function(r,i){return null!=r&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return null!=r&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return null!=r&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Ut:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ut,this},e.isActive=function(){var s,r=this.parent||this._dp,i=this._start;return!(r&&!(this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-Ut))},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),"onUpdate"===r&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=pn(r)?r:jF,a=function(){var c=i.then;i.then=null,pn(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=c),s(o),i.then=c};i._initted&&1===i.totalProgress()&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){Uh(this)},n}();ri(jh.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ut,_prom:0,_ps:!1,_rts:1});var Er=function(n){function e(r,i){var s;return void 0===r&&(r={}),(s=n.call(this,r)||this).labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=Rr(r.sortChildren),an&&ms(r.parent||an,lo(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&YF(lo(s),r.scrollTrigger),s}NF(e,n);var t=e.prototype;return t.to=function(i,s,o){return Bh(0,arguments,this),this},t.from=function(i,s,o){return Bh(1,arguments,this),this},t.fromTo=function(i,s,o,a){return Bh(2,arguments,this),this},t.set=function(i,s,o){return s.duration=0,s.parent=this,kh(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Rn(i,s,Ai(this,o),1),this},t.call=function(i,s,o){return ms(this,Rn.delayedCall(0,i,s),o)},t.staggerTo=function(i,s,o,a,l,c,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=c,o.onCompleteParams=u,o.parent=this,new Rn(i,o,Ai(this,l)),this},t.staggerFrom=function(i,s,o,a,l,c,u){return o.runBackwards=1,kh(o).immediateRender=Rr(o.immediateRender),this.staggerTo(i,s,o,a,l,c,u)},t.staggerFromTo=function(i,s,o,a,l,c,u,d){return a.startAt=o,kh(a).immediateRender=Rr(a.immediateRender),this.staggerTo(i,s,a,l,c,u,d)},t.render=function(i,s,o){var h,f,g,p,m,y,_,v,M,w,b,S,a=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,u=i<=0?0:In(i),d=this._zTime<0!=i<0&&(this._initted||!c);if(this!==an&&u>l&&i>=0&&(u=l),u!==this._tTime||o||d){if(a!==this._time&&c&&(u+=this._time-a,i+=this._time-a),h=u,M=this._start,y=!(v=this._ts),d&&(c||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(b=this._yoyo,m=c+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(100*m+i,s,o);if(h=In(u%m),u===l?(p=this._repeat,h=c):((p=~~(w=In(u/m)))&&p===w&&(h=c,p--),h>c&&(h=c)),w=du(this._tTime,m),!a&&this._tTime&&w!==p&&this._tTime-w*m-this._dur<=0&&(w=p),b&&1&p&&(h=c-h,S=1),p!==w&&!this._lock){var x=b&&1&w,C=x===(b&&1&p);if(p<w&&(x=!x),a=x?0:u%c?c:u,this._lock=1,this.render(a||(S?0:In(p*m)),s,!c)._lock=0,this._tTime=u,!s&&this.parent&&ii(this,"onRepeat"),this.vars.repeatRefresh&&!S&&(this.invalidate()._lock=1),a&&a!==this._time||y!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,C&&(this._lock=2,this.render(a=x?c:-1e-4,!0),this.vars.repeatRefresh&&!S&&this.invalidate()),this._lock=0,!this._ts&&!y)return this;f2(this,S)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(_=function(e,t,r){var i;if(r>t)for(i=e._first;i&&i._start<=r;){if("isPause"===i.data&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if("isPause"===i.data&&i._start<t)return i;i=i._prev}}(this,In(a),In(h)),_&&(u-=h-(h=_._start))),this._tTime=u,this._time=h,this._act=!v,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&h&&!s&&!p&&(ii(this,"onStart"),this._tTime!==u))return this;if(h>=a&&i>=0)for(f=this._first;f;){if(g=f._next,(f._act||h>=f._start)&&f._ts&&_!==f){if(f.parent!==this)return this.render(i,s,o);if(f.render(f._ts>0?(h-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(h-f._start)*f._ts,s,o),h!==this._time||!this._ts&&!y){_=0,g&&(u+=this._zTime=-Ut);break}}f=g}else{f=this._last;for(var N=i<0?i:h;f;){if(g=f._prev,(f._act||N<=f._end)&&f._ts&&_!==f){if(f.parent!==this)return this.render(i,s,o);if(f.render(f._ts>0?(N-f._start)*f._ts:(f._dirty?f.totalDuration():f._tDur)+(N-f._start)*f._ts,s,o||tr&&(f._initted||f._startAt)),h!==this._time||!this._ts&&!y){_=0,g&&(u+=this._zTime=N?-Ut:Ut);break}}f=g}}if(_&&!s&&(this.pause(),_.render(h>=a?0:-Ut)._zTime=h>=a?1:-1,this._ts))return this._start=M,Zm(this),this.render(i,s,o);this._onUpdate&&!s&&ii(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(M===this._start||Math.abs(v)!==Math.abs(this._ts))&&(this._lock||((i||!c)&&(u===l&&this._ts>0||!u&&this._ts<0)&&Zo(this,1),!s&&(!(i<0)||a)&&(u||a||!l)&&(ii(this,u===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,s){var o=this;if(co(s)||(s=Ai(this,s,i)),!(i instanceof jh)){if(cr(i))return i.forEach(function(a){return o.add(a,s)}),this;if(Yn(i))return this.addLabel(i,s);if(!pn(i))return this;i=Rn.delayedCall(0,i)}return this!==i?ms(this,i,s):this},t.getChildren=function(i,s,o,a){void 0===i&&(i=!0),void 0===s&&(s=!0),void 0===o&&(o=!0),void 0===a&&(a=-Ti);for(var l=[],c=this._first;c;)c._start>=a&&(c instanceof Rn?s&&l.push(c):(o&&l.push(c),i&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},t.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},t.remove=function(i){return Yn(i)?this.removeLabel(i):pn(i)?this.killTweensOf(i):(i.parent===this&&Xm(this,i),i===this._recent&&(this._recent=this._last),sl(this))},t.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=In(si.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),n.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},t.addLabel=function(i,s){return this.labels[i]=Ai(this,s),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,s,o){var a=Rn.delayedCall(0,s||Lh,o);return a.data="isPause",this._hasPause=1,ms(this,a,Ai(this,i))},t.removePause=function(i){var s=this._first;for(i=Ai(this,i);s;)s._start===i&&"isPause"===s.data&&Zo(s),s=s._next},t.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),l=a.length;l--;)Qo!==a[l]&&a[l].kill(i,s);return this},t.getTweensOf=function(i,s){for(var u,o=[],a=Ni(i),l=this._first,c=co(s);l;)l instanceof Rn?gK(l._targets,a)&&(c?(!Qo||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},t.tweenTo=function(i,s){s=s||{};var f,o=this,a=Ai(o,i),c=s.startAt,u=s.onStart,d=s.onStartParams,h=s.immediateRender,g=Rn.to(o,ri({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale())||Ut,onStart:function(){if(o.pause(),!f){var m=s.duration||Math.abs((a-(c&&"time"in c?c.time:o._time))/o.timeScale());g._dur!==m&&hu(g,m,0,1).render(g._time,!0,!0),f=1}u&&u.apply(g,d||[])}},s));return h?g.render(0):g},t.tweenFromTo=function(i,s,o){return this.tweenTo(s,ri({startAt:{time:Ai(this,i)}},o))},t.recent=function(){return this._recent},t.nextLabel=function(i){return void 0===i&&(i=this._time),s2(this,Ai(this,i))},t.previousLabel=function(i){return void 0===i&&(i=this._time),s2(this,Ai(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Ut)},t.shiftChildren=function(i,s,o){void 0===o&&(o=0);for(var c,a=this._first,l=this.labels;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(c in l)l[c]>=o&&(l[c]+=i);return sl(this)},t.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return n.prototype.invalidate.call(this,i)},t.clear=function(i){void 0===i&&(i=!0);for(var o,s=this._first;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),sl(this)},t.totalDuration=function(i){var c,u,d,s=0,o=this,a=o._last,l=Ti;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(d=o.parent;a;)c=a._prev,a._dirty&&a.totalDuration(),(u=a._start)>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,ms(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=c;hu(o,o===an&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(an._ts&&(HF(an,Ym(i,an)),VF=si.frame),si.frame>=GF){GF+=ei.autoSleep||120;var s=an._first;if((!s||!s._ts)&&ei.autoSleep&&si._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||si.sleep()}}},e}(jh);ri(Er.prototype,{_lock:0,_hasPause:0,_forcing:0});var Qo,zw,BK=function(e,t,r,i,s,o,a){var d,h,f,g,p,m,y,_,l=new Fr(this._pt,e,t,0,1,x2,null,s),c=0,u=0;for(l.b=r,l.e=i,r+="",(y=~(i+="").indexOf("random("))&&(i=Gh(i)),o&&(o(_=[r,i],e,t),r=_[0],i=_[1]),h=r.match(Sw)||[];d=Sw.exec(i);)g=d[0],p=i.substring(c,d.index),f?f=(f+1)%5:"rgba("===p.substr(-5)&&(f=1),g!==h[u++]&&(m=parseFloat(h[u-1])||0,l._pt={_next:l._pt,p:p||1===u?p:",",s:m,c:"="===g.charAt(1)?cu(m,g)-m:parseFloat(g)-m,m:f&&f<4?Math.round:0},c=Sw.lastIndex);return l.c=c<i.length?i.substring(c,i.length):"",l.fp=a,(OF.test(i)||y)&&(l.e=0),this._pt=l,l},Hw=function(e,t,r,i,s,o,a,l,c,u){pn(i)&&(i=i(s||0,e,o));var g,d=e[t],h="get"!==r?r:pn(d)?c?e[t.indexOf("set")||!pn(e["get"+t.substr(3)])?t:"get"+t.substr(3)](c):e[t]():d,f=pn(d)?c?zK:v2:Ww;if(Yn(i)&&(~i.indexOf("random(")&&(i=Gh(i)),"="===i.charAt(1)&&((g=cu(h,i)+(ur(h)||0))||0===g)&&(i=g)),!u||h!==i||zw)return isNaN(h*i)||""===i?(!d&&!(t in e)&&Tw(t,i),BK.call(this,e,t,h,i,f,l||ei.stringFilter,c)):(g=new Fr(this._pt,e,t,+h||0,i-(h||0),"boolean"==typeof d?WK:M2,0,f),c&&(g.fp=c),a&&g.modifier(a,this,e),this._pt=g)},m2=function(e,t,r,i,s,o){var a,l,c,u;if(ni[e]&&!1!==(a=new ni[e]).init(s,a.rawVars?t[e]:function(e,t,r,i,s){if(pn(e)&&(e=Wh(e,s,t,r,i)),!ps(e)||e.style&&e.nodeType||cr(e)||IF(e))return Yn(e)?Wh(e,s,t,r,i):e;var a,o={};for(a in e)o[a]=Wh(e[a],s,t,r,i);return o}(t[e],i,s,o,r),r,i,o)&&(r._pt=l=new Fr(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==fu))for(c=r._ptLookup[r._targets.indexOf(s)],u=a._props.length;u--;)c[a._props[u]]=l;return a},jw=function n(e,t,r){var w,b,S,x,C,N,P,V,q,I,G,L,j,i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,l=i.lazy,c=i.onUpdate,u=i.runBackwards,d=i.yoyoEase,h=i.keyframes,f=i.autoRevert,g=e._dur,p=e._startAt,m=e._targets,y=e.parent,_=y&&"nested"===y.data?y.vars.targets:m,v="auto"===e._overwrite&&!Mw,M=e.timeline;if(M&&(!h||!s)&&(s="none"),e._ease=ol(s,au.ease),e._yEase=d?h2(ol(!0===d?s:d,au.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!M&&!!i.runBackwards,!M||h&&!i.stagger){if(L=(V=m[0]?il(m[0]).harness:0)&&i[V.prop],w=qm(i,Aw),p&&(p._zTime<0&&p.progress(1),t<0&&u&&a&&!f?p.render(-1,!0):p.revert(u&&g?jm:fK),p._lazy=0),o){if(Zo(e._startAt=Rn.set(m,ri({data:"isStart",overwrite:!1,parent:y,immediateRender:!0,lazy:!p&&Rr(l),startAt:null,delay:0,onUpdate:c&&function(){return ii(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(tr||!a&&!f)&&e._startAt.revert(jm),a&&g&&t<=0&&r<=0)return void(t&&(e._zTime=t))}else if(u&&g&&!p)if(t&&(a=!1),S=ri({overwrite:!1,data:"isFromStart",lazy:a&&!p&&Rr(l),immediateRender:a,stagger:0,parent:y},w),L&&(S[V.prop]=L),Zo(e._startAt=Rn.set(m,S)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(tr?e._startAt.revert(jm):e._startAt.render(-1,!0)),e._zTime=t,a){if(!t)return}else n(e._startAt,Ut,Ut);for(e._pt=e._ptCache=0,l=g&&Rr(l)||l&&!g,b=0;b<m.length;b++){if(P=(C=m[b])._gsap||Rw(m)[b]._gsap,e._ptLookup[b]=I={},Nw[P.id]&&Yo.length&&$m(),G=_===m?b:_.indexOf(C),V&&!1!==(q=new V).init(C,L||w,e,G,_)&&(e._pt=x=new Fr(e._pt,C,q.name,0,1,q.render,q,0,q.priority),q._props.forEach(function(Y){I[Y]=x}),q.priority&&(N=1)),!V||L)for(S in w)ni[S]&&(q=m2(S,w,e,G,C,_))?q.priority&&(N=1):I[S]=x=Hw.call(e,C,S,"get",w[S],G,_,0,i.stringFilter);e._op&&e._op[b]&&e.kill(C,e._op[b]),v&&e._pt&&(Qo=e,an.killTweensOf(C,I,e.globalTime(t)),j=!e.parent,Qo=0),e._pt&&l&&(Nw[P.id]=1)}N&&w2(e),e._onInit&&e._onInit(e)}e._onUpdate=c,e._initted=(!e._op||e._pt)&&!j,h&&t<=0&&M.render(Ti,!0,!0)},HK=function(e,t,r,i){var o,a,s=t.ease||i||"power1.inOut";if(cr(t))a=r[e]||(r[e]=[]),t.forEach(function(l,c){return a.push({t:c/(t.length-1)*100,v:l,e:s})});else for(o in t)a=r[o]||(r[o]=[]),"ease"===o||a.push({t:parseFloat(e),v:t[o],e:s})},Wh=function(e,t,r,i,s){return pn(e)?e.call(t,r,i,s):Yn(e)&&~e.indexOf("random(")?Gh(e):e},y2=Iw+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_2={};Or(y2+",id,stagger,delay,duration,paused,scrollTrigger",function(n){return _2[n]=1});var Rn=function(n){function e(r,i,s,o){var a;"number"==typeof i&&(s.duration=i,i=s,s=null);var M,w,b,S,x,C,N,P,l=(a=n.call(this,o?i:kh(i))||this).vars,c=l.duration,u=l.delay,d=l.immediateRender,h=l.stagger,f=l.overwrite,g=l.keyframes,p=l.defaults,m=l.scrollTrigger,y=l.yoyoEase,_=i.parent||an,v=(cr(r)||IF(r)?co(r[0]):"length"in i)?[r]:Ni(r);if(a._targets=v.length?Rw(v):Fh("GSAP target "+r+" not found. https://gsap.com",!ei.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=f,g||h||Hm(c)||Hm(u)){if(i=a.vars,(M=a.timeline=new Er({data:"nested",defaults:p||{},targets:_&&"nested"===_.data?_.vars.targets:v})).kill(),M.parent=M._dp=lo(a),M._start=0,h||Hm(c)||Hm(u)){if(S=v.length,N=h&&e2(h),ps(h))for(x in h)~y2.indexOf(x)&&(P||(P={}),P[x]=h[x]);for(w=0;w<S;w++)(b=qm(i,_2)).stagger=0,y&&(b.yoyoEase=y),P&&uu(b,P),C=v[w],b.duration=+Wh(c,lo(a),w,C,v),b.delay=(+Wh(u,lo(a),w,C,v)||0)-a._delay,!h&&1===S&&b.delay&&(a._delay=u=b.delay,a._start+=u,b.delay=0),M.to(C,b,N?N(w,C,v):0),M._ease=gt.none;M.duration()?c=u=0:a.timeline=0}else if(g){kh(ri(M.vars.defaults,{ease:"none"})),M._ease=ol(g.ease||i.ease||"none");var q,I,G,V=0;if(cr(g))g.forEach(function(L){return M.to(v,L,">")}),M.duration();else{for(x in b={},g)"ease"===x||"easeEach"===x||HK(x,g[x],b,g.easeEach);for(x in b)for(q=b[x].sort(function(L,j){return L.t-j.t}),V=0,w=0;w<q.length;w++)(G={ease:(I=q[w]).e,duration:(I.t-(w?q[w-1].t:0))/100*c})[x]=I.v,M.to(v,G,V),V+=G.duration;M.duration()<c&&M.to({},{duration:c-M.duration()})}}c||a.duration(c=M.duration())}else a.timeline=0;return!0===f&&!Mw&&(Qo=lo(a),an.killTweensOf(v),Qo=0),ms(_,lo(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(d||!c&&!g&&a._start===In(_._time)&&Rr(d)&&vK(lo(a))&&"nested"!==_.data)&&(a._tTime=-Ut,a.render(Math.max(0,-u)||0)),m&&YF(lo(a),m),a}NF(e,n);var t=e.prototype;return t.render=function(i,s,o){var h,f,g,p,m,y,_,v,M,a=this._time,l=this._tDur,c=this._dur,u=i<0,d=i>l-Ut&&!u?l:i<Ut?0:i;if(c){if(d!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u||this._lazy){if(h=d,v=this.timeline,this._repeat){if(p=c+this._rDelay,this._repeat<-1&&u)return this.totalTime(100*p+i,s,o);if(h=In(d%p),d===l?(g=this._repeat,h=c):(g=~~(m=In(d/p)))&&g===m?(h=c,g--):h>c&&(h=c),(y=this._yoyo&&1&g)&&(M=this._yEase,h=c-h),m=du(this._tTime,p),h===a&&!o&&this._initted&&g===m)return this._tTime=d,this;g!==m&&(v&&this._yEase&&f2(v,y),this.vars.repeatRefresh&&!y&&!this._lock&&h!==p&&this._initted&&(this._lock=o=1,this.render(In(p*g),!0).invalidate()._lock=0))}if(!this._initted){if(ZF(this,u?i:h,o,s,d))return this._tTime=0,this;if(!(a===this._time||o&&this.vars.repeatRefresh&&g!==m))return this;if(c!==this._dur)return this.render(i,s,o)}if(this._tTime=d,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=_=(M||this._ease)(h/c),this._from&&(this.ratio=_=1-_),h&&!a&&!s&&!g&&(ii(this,"onStart"),this._tTime!==d))return this;for(f=this._pt;f;)f.r(_,f.d),f=f._next;v&&v.render(i<0?i:v._dur*v._ease(h/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(u&&Ow(this,i,0,o),ii(this,"onUpdate")),this._repeat&&g!==m&&this.vars.onRepeat&&!s&&this.parent&&ii(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(u&&!this._onUpdate&&Ow(this,i,0,!0),(i||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&Zo(this,1),!s&&(!u||a)&&(d||a||y)&&(ii(this,d===l?"onComplete":"onReverseComplete",!0),this._prom&&!(d<l&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,r,i){var c,u,d,s=e.ratio,o=t<0||!t&&(!e._start&&MK(e)&&(e._initted||!Fw(e))||(e._ts<0||e._dp._ts<0)&&!Fw(e))?0:1,a=e._rDelay,l=0;if(a&&e._repeat&&(l=Vh(0,e._tDur,t),u=du(l,a),e._yoyo&&1&u&&(o=1-o),u!==du(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||tr||i||e._zTime===Ut||!t&&e._zTime){if(!e._initted&&ZF(e,t,i,r,l))return;for(d=e._zTime,e._zTime=t||(r?Ut:0),r||(r=t&&!d),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,c=e._pt;c;)c.r(o,c.d),c=c._next;t<0&&Ow(e,t,0,!0),e._onUpdate&&!r&&ii(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&ii(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===o&&(o&&Zo(e,1),!r&&!tr&&(ii(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,i,s,o);return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),n.prototype.invalidate.call(this,i)},t.resetTo=function(i,s,o,a,l){zh||si.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||jw(this,c),function(e,t,r,i,s,o,a,l){var u,d,h,f,c=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!c)for(c=e._ptCache[t]=[],h=e._ptLookup,f=e._targets.length;f--;){if((u=h[f][t])&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==t&&u.fp!==t;)u=u._next;if(!u)return zw=1,e.vars[t]="+=0",jw(e,a),zw=0,l?Fh(t+" not eligible for reset"):1;c.push(u)}for(f=c.length;f--;)(u=(d=c[f])._pt||d).s=!i&&0!==i||s?u.s+(i||0)+o*u.c:i,u.c=r-u.s,d.e&&(d.e=xn(r)+ur(d.e)),d.b&&(d.b=u.s+ur(d.b))}(this,i,s,o,a,this._ease(c/this._dur),c,l)?this.resetTo(i,s,o,a,1):(Jm(this,0),this.parent||$F(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,s){if(void 0===s&&(s="all"),!(i||s&&"all"!==s))return this._lazy=this._pt=0,this.parent?Uh(this):this.scrollTrigger&&this.scrollTrigger.kill(!!tr),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,Qo&&!0!==Qo.vars.overwrite)._first||Uh(this),this.parent&&o!==this.timeline.totalDuration()&&hu(this,this._dur*this.timeline._tDur/o,0,1),this}var d,h,f,g,p,m,y,a=this._targets,l=i?Ni(i):a,c=this._ptLookup,u=this._pt;if((!s||"all"===s)&&function(e,t){for(var r=e.length,i=r===t.length;i&&r--&&e[r]===t[r];);return r<0}(a,l))return"all"===s&&(this._pt=0),Uh(this);for(d=this._op=this._op||[],"all"!==s&&(Yn(s)&&(p={},Or(s,function(_){return p[_]=1}),s=p),s=function(e,t){var s,o,a,l,r=e[0]?il(e[0]).harness:0,i=r&&r.aliases;if(!i)return t;for(o in s=uu({},t),i)if(o in s)for(a=(l=i[o].split(",")).length;a--;)s[l[a]]=s[o];return s}(a,s)),y=a.length;y--;)if(~l.indexOf(a[y]))for(p in h=c[y],"all"===s?(d[y]=s,g=h,f={}):(f=d[y]=d[y]||{},g=s),g)(m=h&&h[p])&&((!("kill"in m.d)||!0===m.d.kill(p))&&Xm(this,m,"_pt"),delete h[p]),"all"!==f&&(f[p]=1);return this._initted&&!this._pt&&u&&Uh(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Bh(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return Bh(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return an.killTweensOf(i,s,o)},e}(jh);ri(Rn.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Or("staggerTo,staggerFrom,staggerFromTo",function(n){Rn[n]=function(){var e=new Er,t=Lw.call(arguments,0);return t.splice("staggerFromTo"===n?5:4,0,0),e[n].apply(e,t)}});var Ww=function(e,t,r){return e[t]=r},v2=function(e,t,r){return e[t](r)},zK=function(e,t,r,i){return e[t](i.fp,r)},jK=function(e,t,r){return e.setAttribute(t,r)},$w=function(e,t){return pn(e[t])?v2:ww(e[t])&&e.setAttribute?jK:Ww},M2=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},WK=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},x2=function(e,t){var r=t._pt,i="";if(!e&&t.b)i=t.b;else if(1===e&&t.e)i=t.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round(1e4*(r.s+r.c*e))/1e4)+i,r=r._next;i+=t.c}t.set(t.t,t.p,i,t)},qw=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},$K=function(e,t,r,i){for(var o,s=this._pt;s;)o=s._next,s.p===i&&s.modifier(e,t,r),s=o},qK=function(e){for(var r,i,t=this._pt;t;)i=t._next,t.p===e&&!t.op||t.op===e?Xm(this,t,"_pt"):t.dep||(r=1),t=i;return!r},XK=function(e,t,r,i){i.mSet(e,t,i.m.call(i.tween,r,i.mt),i)},w2=function(e){for(var r,i,s,o,t=e._pt;t;){for(r=t._next,i=s;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:o)?t._prev._next=t:s=t,(t._next=i)?i._prev=t:o=t,t=r}e._pt=s},Fr=function(){function n(t,r,i,s,o,a,l,c,u){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||M2,this.d=l||this,this.set=c||Ww,this.pr=u||0,this._next=t,t&&(t._prev=this)}return n.prototype.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=XK,this.m=r,this.mt=s,this.tween=i},n}();Or(Iw+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(n){return Aw[n]=1}),ti.TweenMax=ti.TweenLite=Rn,ti.TimelineLite=ti.TimelineMax=Er,an=new Er({sortChildren:!1,defaults:au,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),ei.stringFilter=d2;var ll=[],Km={},YK=[],b2=0,ZK=0,Xw=function(e){return(Km[e]||YK).map(function(t){return t()})},Yw=function(){var e=Date.now(),t=[];e-b2>2&&(Xw("matchMediaInit"),ll.forEach(function(r){var o,a,l,c,i=r.queries,s=r.conditions;for(a in i)(o=gs.matchMedia(i[a]).matches)&&(l=1),o!==s[a]&&(s[a]=o,c=1);c&&(r.revert(),l&&t.push(r))}),Xw("matchMediaRevert"),t.forEach(function(r){return r.onMatch(r,function(i){return r.add(null,i)})}),b2=e,Xw("matchMedia"))},C2=function(){function n(t,r){this.selector=r&&kw(r),this.data=[],this._r=[],this.isReverted=!1,this.id=ZK++,t&&this.add(t)}var e=n.prototype;return e.add=function(r,i,s){pn(r)&&(s=i,i=r,r=pn);var o=this,a=function(){var d,c=nn,u=o.selector;return c&&c!==o&&c.data.push(o),s&&(o.selector=kw(s)),nn=o,d=i.apply(o,arguments),pn(d)&&o._r.push(d),nn=c,o.selector=u,o.isReverted=!1,d};return o.last=a,r===pn?a(o,function(l){return o.add(null,l)}):r?o[r]=a:a},e.ignore=function(r){var i=nn;nn=null,r(this),nn=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof n?r.push.apply(r,i.getTweens()):i instanceof Rn&&!(i.parent&&"nested"===i.parent.data)&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r?function(){for(var c,a=s.getTweens(),l=s.data.length;l--;)"isFlip"===(c=s.data[l]).data&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,d){return d.g-u.g||-1/0}).forEach(function(u){return u.t.revert(r)}),l=s.data.length;l--;)(c=s.data[l])instanceof Er?"nested"!==c.data&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Rn)&&c.revert&&c.revert(r);s._r.forEach(function(u){return u(r,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),i)for(var o=ll.length;o--;)ll[o].id===this.id&&ll.splice(o,1)},e.revert=function(r){this.kill(r||{})},n}(),JK=function(){function n(t){this.contexts=[],this.scope=t,nn&&nn.data.push(this)}var e=n.prototype;return e.add=function(r,i,s){ps(r)||(r={matches:r});var l,c,u,o=new C2(0,s||this.scope),a=o.conditions={};for(c in nn&&!o.selector&&(o.selector=nn.selector),this.contexts.push(o),i=o.add("onMatch",i),o.queries=r,r)"all"===c?u=1:(l=gs.matchMedia(r[c]))&&(ll.indexOf(o)<0&&ll.push(o),(a[c]=l.matches)&&(u=1),l.addListener?l.addListener(Yw):l.addEventListener("change",Yw));return u&&i(o,function(d){return o.add(null,d)}),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},n}(),Qm={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(i){return a2(i)})},timeline:function(e){return new Er(e)},getTweensOf:function(e,t){return an.getTweensOf(e,t)},getProperty:function(e,t,r,i){Yn(e)&&(e=Ni(e)[0]);var s=il(e||{}).get,o=r?jF:zF;return"native"===r&&(r=""),e&&(t?o((ni[t]&&ni[t].get||s)(e,t,r,i)):function(a,l,c){return o((ni[a]&&ni[a].get||s)(e,a,l,c))})},quickSetter:function(e,t,r){if((e=Ni(e)).length>1){var i=e.map(function(u){return Lr.quickSetter(u,t,r)}),s=i.length;return function(u){for(var d=s;d--;)i[d](u)}}var o=ni[t],a=il(e=e[0]||{}),l=a.harness&&(a.harness.aliases||{})[t]||t,c=o?function(u){var d=new o;fu._pt=0,d.init(e,r?u+r:u,fu,0,[e]),d.render(1,d),fu._pt&&qw(1,fu)}:a.set(e,l);return o?c:function(u){return c(e,l,r?u+r:u,a,1)}},quickTo:function(e,t,r){var i,s=Lr.to(e,ri(((i={})[t]="+=0.1",i.paused=!0,i.stagger=0,i),r||{})),o=function(l,c,u){return s.resetTo(t,l,c,u)};return o.tween=s,o},isTweening:function(e){return an.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=ol(e.ease,au.ease)),WF(au,e||{})},config:function(e){return WF(ei,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,s=e.defaults,o=e.extendTimeline;(e.plugins||"").split(",").forEach(function(a){return a&&!ni[a]&&!ti[a]&&Fh(t+" effect requires "+a+" plugin.")}),Pw[t]=function(a,l,c){return r(Ni(a),ri(l||{},s),c)},o&&(Er.prototype[t]=function(a,l,c){return this.add(Pw[t](a,ps(l)?l:(c=l)&&{},this),c)})},registerEase:function(e,t){gt[e]=ol(t)},parseEase:function(e,t){return arguments.length?ol(e,t):gt},getById:function(e){return an.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var i,s,r=new Er(e);for(r.smoothChildTiming=Rr(e.smoothChildTiming),an.remove(r),r._dp=0,r._time=r._tTime=an._time,i=an._first;i;)s=i._next,(t||!(!i._dur&&i instanceof Rn&&i.vars.onComplete===i._targets[0]))&&ms(r,i,i._start-i._delay),i=s;return ms(an,r,0),r},context:function(e,t){return e?new C2(e,t):nn},matchMedia:function(e){return new JK(e)},matchMediaRefresh:function(){return ll.forEach(function(e){var r,i,t=e.conditions;for(i in t)t[i]&&(t[i]=!1,r=1);r&&e.revert()})||Yw()},addEventListener:function(e,t){var r=Km[e]||(Km[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=Km[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)},utils:{wrap:function n(e,t,r){var i=t-e;return cr(e)?r2(e,n(0,e.length),t):Jo(r,function(s){return(i+(s-e)%i)%i+e})},wrapYoyo:function n(e,t,r){var i=t-e,s=2*i;return cr(e)?r2(e,n(0,e.length-1),t):Jo(r,function(o){return e+((o=(s+(o-e)%s)%s||0)>i?s-o:o)})},distribute:e2,random:n2,snap:t2,normalize:function(e,t,r){return i2(e,t,0,1,r)},getUnit:ur,clamp:function(e,t,r){return Jo(r,function(i){return Vh(e,t,i)})},splitColor:l2,toArray:Ni,selector:kw,mapRange:i2,pipe:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return t.reduce(function(s,o){return o(s)},i)}},unitize:function(e,t){return function(r){return e(parseFloat(r))+(t||ur(r))}},interpolate:function n(e,t,r,i){var s=isNaN(e+t)?0:function(f){return(1-f)*e+f*t};if(!s){var l,c,u,d,h,o=Yn(e),a={};if(!0===r&&(i=1)&&(r=null),o)e={p:e},t={p:t};else if(cr(e)&&!cr(t)){for(u=[],h=(d=e.length)-2,c=1;c<d;c++)u.push(n(e[c-1],e[c]));d--,s=function(g){g*=d;var p=Math.min(h,~~g);return u[p](g-p)},r=t}else i||(e=uu(cr(e)?[]:{},e));if(!u){for(l in t)Hw.call(a,e,l,"get",t[l]);s=function(g){return qw(g,a)||(o?e.p:e)}}}return Jo(r,s)},shuffle:QF},install:kF,effects:Pw,ticker:si,updateRoot:Er.updateRoot,plugins:ni,globalTimeline:an,core:{PropTween:Fr,globals:BF,Tween:Rn,Timeline:Er,Animation:jh,getCache:il,_removeLinkedListItem:Xm,reverting:function(){return tr},context:function(e){return e&&nn&&(nn.data.push(e),e._ctx=nn),nn},suppressOverwrites:function(e){return Mw=e}}};Or("to,from,fromTo,delayedCall,set,killTweensOf",function(n){return Qm[n]=Rn[n]}),si.add(Er.updateRoot),fu=Qm.to({},{duration:0});var KK=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},Zw=function(e,t){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var l,c;if(Yn(s)&&(l={},Or(s,function(u){return l[u]=1}),s=l),t){for(c in l={},s)l[c]=t(s[c]);s=l}!function(e,t){var i,s,o,r=e._targets;for(i in t)for(s=r.length;s--;)(o=e._ptLookup[s][i])&&(o=o.d)&&(o._pt&&(o=KK(o,i)),o&&o.modifier&&o.modifier(t[i],e,r[s],i))}(a,s)}}}},Lr=Qm.registerPlugin({name:"attr",init:function(e,t,r,i,s){var o,a,l;for(o in this.tween=r,t)l=e.getAttribute(o)||"",(a=this.add(e,"setAttribute",(l||0)+"",t[o],i,s,0,0,o)).op=o,a.b=l,this._props.push(o)},render:function(e,t){for(var r=t._pt;r;)tr?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},Zw("roundProps",Bw),Zw("modifiers"),Zw("snap",t2))||Qm;Rn.version=Er.version=Lr.version="3.12.7",LF=1,bw()&&pu();var S2,ea,gu,Jw,cl,E2,Kw,I2,uo={},ul=180/Math.PI,mu=Math.PI/180,yu=Math.atan2,D2=1e8,Qw=/([A-Z])/g,nQ=/(left|right|width|margin|padding|x)/i,rQ=/[\s,\(]\S/,ys={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},eb=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},iQ=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},sQ=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},oQ=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},T2=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},A2=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},aQ=function(e,t,r){return e.style[t]=r},lQ=function(e,t,r){return e.style.setProperty(t,r)},cQ=function(e,t,r){return e._gsap[t]=r},uQ=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},dQ=function(e,t,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},hQ=function(e,t,r,i,s){var o=e._gsap;o[t]=r,o.renderTransform(s,o)},ln="transform",kr=ln+"Origin",fQ=function n(e,t){var r=this,i=this.target,s=i.style,o=i._gsap;if(e in uo&&s){if(this.tfm=this.tfm||{},"transform"===e)return ys.transform.split(",").forEach(function(a){return n.call(r,a,t)});if(~(e=ys[e]||e).indexOf(",")?e.split(",").forEach(function(a){return r.tfm[a]=ho(i,a)}):this.tfm[e]=o.x?o[e]:ho(i,e),e===kr&&(this.tfm.zOrigin=o.zOrigin),this.props.indexOf(ln)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(kr,t,"")),e=ln}(s||t)&&this.props.push(e,t,s[e])},N2=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},pQ=function(){var s,o,e=this.props,t=this.target,r=t.style,i=t._gsap;for(s=0;s<e.length;s+=3)e[s+1]?2===e[s+1]?t[e[s]](e[s+2]):t[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty("--"===e[s].substr(0,2)?e[s]:e[s].replace(Qw,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),(!(s=Kw())||!s.isStart)&&!r[ln]&&(N2(r),i.zOrigin&&r[kr]&&(r[kr]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},P2=function(e,t){var r={target:e,props:[],revert:pQ,save:fQ};return e._gsap||Lr.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(i){return r.save(i)}),r},tb=function(e,t){var r=ea.createElementNS?ea.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):ea.createElement(e);return r&&r.style?r:ea.createElement(e)},_s=function n(e,t,r){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(Qw,"-$1").toLowerCase())||i.getPropertyValue(t)||!r&&n(e,_u(t)||t,1)||""},R2="O,Moz,ms,Ms,Webkit".split(","),_u=function(e,t,r){var s=(t||cl).style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(R2[o]+e in s););return o<0?null:(3===o?"ms":o>=0?R2[o]:"")+e},nb=function(){typeof window<"u"&&window.document&&(S2=window,gu=(ea=S2.document).documentElement,cl=tb("div")||{style:{}},tb("div"),ln=_u(ln),kr=ln+"Origin",cl.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",I2=!!_u("perspective"),Kw=Lr.core.reverting,Jw=1)},O2=function(e){var s,t=e.ownerSVGElement,r=tb("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0);i.style.display="block",r.appendChild(i),gu.appendChild(r);try{s=i.getBBox()}catch{}return r.removeChild(i),gu.removeChild(r),s},F2=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},L2=function(e){var t,r;try{t=e.getBBox()}catch{t=O2(e),r=1}return t&&(t.width||t.height)||r||(t=O2(e)),!t||t.width||t.x||t.y?t:{x:+F2(e,["x","cx","x1"])||0,y:+F2(e,["y","cy","y1"])||0,width:0,height:0}},k2=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!L2(e))},dl=function(e,t){if(t){var i,r=e.style;t in uo&&t!==kr&&(t=ln),r.removeProperty?(("ms"===(i=t.substr(0,2))||"webkit"===t.substr(0,6))&&(t="-"+t),r.removeProperty("--"===i?t:t.replace(Qw,"-$1").toLowerCase())):r.removeAttribute(t)}},ta=function(e,t,r,i,s,o){var a=new Fr(e._pt,t,r,0,1,o?A2:T2);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},B2={deg:1,rad:1,turn:1},gQ={grid:1,flex:1},na=function n(e,t,r,i){var g,p,m,y,s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=cl.style,l=nQ.test(t),c="svg"===e.tagName.toLowerCase(),u=(c?"client":"offset")+(l?"Width":"Height"),d=100,h="px"===i,f="%"===i;if(i===o||!s||B2[i]||B2[o])return s;if("px"!==o&&!h&&(s=n(e,t,r,"px")),y=e.getCTM&&k2(e),(f||"%"===o)&&(uo[t]||~t.indexOf("adius")))return g=y?e.getBBox()[l?"width":"height"]:e[u],xn(f?s/g*d:s/100*g);if(a[l?"width":"height"]=d+(h?o:i),p="rem"!==i&&~t.indexOf("adius")||"em"===i&&e.appendChild&&!c?e:e.parentNode,y&&(p=(e.ownerSVGElement||{}).parentNode),(!p||p===ea||!p.appendChild)&&(p=ea.body),(m=p._gsap)&&f&&m.width&&l&&m.time===si.time&&!m.uncache)return xn(s/m.width*d);if(!f||"height"!==t&&"width"!==t)(f||"%"===o)&&!gQ[_s(p,"display")]&&(a.position=_s(e,"position")),p===e&&(a.position="static"),p.appendChild(cl),g=cl[u],p.removeChild(cl),a.position="absolute";else{var _=e.style[t];e.style[t]=d+i,g=e[u],_?e.style[t]=_:dl(e,t)}return l&&f&&((m=il(p)).time=si.time,m.width=p[u]),xn(h?g*s/d:g&&s?d/g*s:0)},ho=function(e,t,r,i){var s;return Jw||nb(),t in ys&&"transform"!==t&&~(t=ys[t]).indexOf(",")&&(t=t.split(",")[0]),uo[t]&&"transform"!==t?(s=qh(e,i),s="transformOrigin"!==t?s[t]:s.svg?s.origin:ty(_s(e,kr))+" "+s.zOrigin+"px"):(!(s=e.style[t])||"auto"===s||i||~(s+"").indexOf("calc("))&&(s=ey[t]&&ey[t](e,t,r)||_s(e,t)||UF(e,t)||("opacity"===t?1:0)),r&&!~(s+"").trim().indexOf(" ")?na(e,t,s,r)+r:s},mQ=function(e,t,r,i){if(!r||"none"===r){var s=_u(t,e,1),o=s&&_s(e,s,1);o&&o!==r?(t=s,r=o):"borderColor"===t&&(r=_s(e,"borderTopColor"))}var u,d,h,f,g,p,m,y,_,v,M,a=new Fr(this._pt,e.style,t,0,1,x2),l=0,c=0;if(a.b=r,a.e=i,r+="","auto"==(i+="")&&(p=e.style[t],e.style[t]=i,i=_s(e,t)||i,p?e.style[t]=p:dl(e,t)),d2(u=[r,i]),i=u[1],h=(r=u[0]).match(lu)||[],(i.match(lu)||[]).length){for(;d=lu.exec(i);)m=d[0],_=i.substring(l,d.index),g?g=(g+1)%5:("rgba("===_.substr(-5)||"hsla("===_.substr(-5))&&(g=1),m!==(p=h[c++]||"")&&(f=parseFloat(p)||0,M=p.substr((f+"").length),"="===m.charAt(1)&&(m=cu(f,m)+M),y=parseFloat(m),v=m.substr((y+"").length),l=lu.lastIndex-v.length,v||(v=v||ei.units[t]||M,l===i.length&&(i+=v,a.e+=v)),M!==v&&(f=na(e,t,p,v)||0),a._pt={_next:a._pt,p:_||1===c?_:",",s:f,c:y-f,m:g&&g<4||"zIndex"===t?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r="display"===t&&"none"===i?A2:T2;return OF.test(i)&&(a.e=0),this._pt=a,a},V2={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},yQ=function(e){var t=e.split(" "),r=t[0],i=t[1]||"50%";return("top"===r||"bottom"===r||"left"===i||"right"===i)&&(e=r,r=i,i=e),t[0]=V2[r]||r,t[1]=V2[i]||i,t.join(" ")},_Q=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var a,l,c,r=t.t,i=r.style,s=t.u,o=r._gsap;if("all"===s||!0===s)i.cssText="",l=1;else for(c=(s=s.split(",")).length;--c>-1;)uo[a=s[c]]&&(l=1,a="transformOrigin"===a?kr:ln),dl(r,a);l&&(dl(r,ln),o&&(o.svg&&r.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",qh(r,1),o.uncache=1,N2(i)))}},ey={clearProps:function(e,t,r,i,s){if("isFromStart"!==s.data){var o=e._pt=new Fr(e._pt,t,r,0,0,_Q);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},$h=[1,0,0,1,0,0],G2={},U2=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},H2=function(e){var t=_s(e,ln);return U2(t)?$h:t.substr(7).match(RF).map(xn)},rb=function(e,t){var o,a,l,c,r=e._gsap||il(e),i=e.style,s=H2(e);return r.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(s=[(l=e.transform.baseVal.consolidate().matrix).a,l.b,l.c,l.d,l.e,l.f]).join(",")?$h:s:(s===$h&&!e.offsetParent&&e!==gu&&!r.svg&&(l=i.display,i.display="block",(!(o=e.parentNode)||!e.offsetParent&&!e.getBoundingClientRect().width)&&(c=1,a=e.nextElementSibling,gu.appendChild(e)),s=H2(e),l?i.display=l:dl(e,"display"),c&&(a?o.insertBefore(e,a):o?o.appendChild(e):gu.removeChild(e))),t&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},ib=function(e,t,r,i,s,o){var b,S,C,a=e._gsap,l=s||rb(e,!0),c=a.xOrigin||0,u=a.yOrigin||0,d=a.xOffset||0,h=a.yOffset||0,f=l[0],g=l[1],p=l[2],m=l[3],y=l[4],_=l[5],v=t.split(" "),M=parseFloat(v[0])||0,w=parseFloat(v[1])||0;r?l!==$h&&(S=f*m-g*p)&&(C=M*(-g/S)+w*(f/S)-(f*_-g*y)/S,M=M*(m/S)+w*(-p/S)+(p*_-m*y)/S,w=C):(M=(b=L2(e)).x+(~v[0].indexOf("%")?M/100*b.width:M),w=b.y+(~(v[1]||v[0]).indexOf("%")?w/100*b.height:w)),i||!1!==i&&a.smooth?(a.xOffset=d+((y=M-c)*f+(_=w-u)*p)-y,a.yOffset=h+(y*g+_*m)-_):a.xOffset=a.yOffset=0,a.xOrigin=M,a.yOrigin=w,a.smooth=!!i,a.origin=t,a.originIsAbsolute=!!r,e.style[kr]="0px 0px",o&&(ta(o,a,"xOrigin",c,M),ta(o,a,"yOrigin",u,w),ta(o,a,"xOffset",d,a.xOffset),ta(o,a,"yOffset",h,a.yOffset)),e.setAttribute("data-svg-origin",M+" "+w)},qh=function(e,t){var r=e._gsap||new g2(e);if("x"in r&&!t&&!r.uncache)return r;var u,d,h,f,g,p,m,y,_,v,M,w,b,S,x,C,N,P,V,q,I,G,L,j,Y,H,$,se,J,ce,ve,Ce,i=e.style,s=r.scaleX<0,o="px",a="deg",l=getComputedStyle(e),c=_s(e,kr)||"0";return u=d=h=p=m=y=_=v=M=0,f=g=1,r.svg=!(!e.getCTM||!k2(e)),l.translate&&(("none"!==l.translate||"none"!==l.scale||"none"!==l.rotate)&&(i[ln]=("none"!==l.translate?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==l.rotate?"rotate("+l.rotate+") ":"")+("none"!==l.scale?"scale("+l.scale.split(" ").join(",")+") ":"")+("none"!==l[ln]?l[ln]:"")),i.scale=i.rotate=i.translate="none"),S=rb(e,r.svg),r.svg&&(r.uncache?(Y=e.getBBox(),c=r.xOrigin-Y.x+"px "+(r.yOrigin-Y.y)+"px",j=""):j=!t&&e.getAttribute("data-svg-origin"),ib(e,j||c,!!j||r.originIsAbsolute,!1!==r.smooth,S)),w=r.xOrigin||0,b=r.yOrigin||0,S!==$h&&(P=S[0],V=S[1],q=S[2],I=S[3],u=G=S[4],d=L=S[5],6===S.length?(f=Math.sqrt(P*P+V*V),g=Math.sqrt(I*I+q*q),p=P||V?yu(V,P)*ul:0,(_=q||I?yu(q,I)*ul+p:0)&&(g*=Math.abs(Math.cos(_*mu))),r.svg&&(u-=w-(w*P+b*q),d-=b-(w*V+b*I))):(ce=S[7],$=S[8],se=S[9],ve=S[11],u=S[12],d=S[13],h=S[14],m=(x=yu(Ce=S[6],J=S[10]))*ul,x&&(j=G*(C=Math.cos(-x))+$*(N=Math.sin(-x)),Y=L*C+se*N,H=Ce*C+J*N,$=G*-N+$*C,se=L*-N+se*C,J=Ce*-N+J*C,ve=ce*-N+ve*C,G=j,L=Y,Ce=H),y=(x=yu(-q,J))*ul,x&&(C=Math.cos(-x),ve=I*(N=Math.sin(-x))+ve*C,P=j=P*C-$*N,V=Y=V*C-se*N,q=H=q*C-J*N),p=(x=yu(V,P))*ul,x&&(j=P*(C=Math.cos(x))+V*(N=Math.sin(x)),Y=G*C+L*N,V=V*C-P*N,L=L*C-G*N,P=j,G=Y),m&&Math.abs(m)+Math.abs(p)>359.9&&(m=p=0,y=180-y),f=xn(Math.sqrt(P*P+V*V+q*q)),g=xn(Math.sqrt(L*L+Ce*Ce)),x=yu(G,L),_=Math.abs(x)>2e-4?x*ul:0,M=ve?1/(ve<0?-ve:ve):0),r.svg&&(j=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!U2(_s(e,ln)),j&&e.setAttribute("transform",j))),Math.abs(_)>90&&Math.abs(_)<270&&(s?(f*=-1,_+=p<=0?180:-180,p+=p<=0?180:-180):(g*=-1,_+=_<=0?180:-180)),t=t||r.uncache,r.x=u-((r.xPercent=u&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-u)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=d-((r.yPercent=d&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=h+o,r.scaleX=xn(f),r.scaleY=xn(g),r.rotation=xn(p)+a,r.rotationX=xn(m)+a,r.rotationY=xn(y)+a,r.skewX=_+a,r.skewY=v+a,r.transformPerspective=M+o,(r.zOrigin=parseFloat(c.split(" ")[2])||!t&&r.zOrigin||0)&&(i[kr]=ty(c)),r.xOffset=r.yOffset=0,r.force3D=ei.force3D,r.renderTransform=r.svg?MQ:I2?z2:vQ,r.uncache=0,r},ty=function(e){return(e=e.split(" "))[0]+" "+e[1]},sb=function(e,t,r){var i=ur(t);return xn(parseFloat(t)+parseFloat(na(e,"x",r+"px",i)))+i},vQ=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,z2(e,t)},hl="0deg",Xh="0px",fl=") ",z2=function(e,t){var r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.z,c=r.rotation,u=r.rotationY,d=r.rotationX,h=r.skewX,f=r.skewY,g=r.scaleX,p=r.scaleY,m=r.transformPerspective,y=r.force3D,_=r.target,v=r.zOrigin,M="",w="auto"===y&&e&&1!==e||!0===y;if(v&&(d!==hl||u!==hl)){var C,b=parseFloat(u)*mu,S=Math.sin(b),x=Math.cos(b);b=parseFloat(d)*mu,C=Math.cos(b),o=sb(_,o,S*C*-v),a=sb(_,a,-Math.sin(b)*-v),l=sb(_,l,x*C*-v+v)}m!==Xh&&(M+="perspective("+m+fl),(i||s)&&(M+="translate("+i+"%, "+s+"%) "),(w||o!==Xh||a!==Xh||l!==Xh)&&(M+=l!==Xh||w?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+fl),c!==hl&&(M+="rotate("+c+fl),u!==hl&&(M+="rotateY("+u+fl),d!==hl&&(M+="rotateX("+d+fl),(h!==hl||f!==hl)&&(M+="skew("+h+", "+f+fl),(1!==g||1!==p)&&(M+="scale("+g+", "+p+fl),_.style[ln]=M||"translate(0, 0)"},MQ=function(e,t){var w,b,S,x,C,r=t||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.rotation,c=r.skewX,u=r.skewY,d=r.scaleX,h=r.scaleY,f=r.target,g=r.xOrigin,p=r.yOrigin,m=r.xOffset,y=r.yOffset,_=r.forceCSS,v=parseFloat(o),M=parseFloat(a);l=parseFloat(l),c=parseFloat(c),(u=parseFloat(u))&&(c+=u=parseFloat(u),l+=u),l||c?(l*=mu,c*=mu,w=Math.cos(l)*d,b=Math.sin(l)*d,S=Math.sin(l-c)*-h,x=Math.cos(l-c)*h,c&&(u*=mu,C=Math.tan(c-u),S*=C=Math.sqrt(1+C*C),x*=C,u&&(C=Math.tan(u),w*=C=Math.sqrt(1+C*C),b*=C)),w=xn(w),b=xn(b),S=xn(S),x=xn(x)):(w=d,x=h,b=S=0),(v&&!~(o+"").indexOf("px")||M&&!~(a+"").indexOf("px"))&&(v=na(f,"x",o,"px"),M=na(f,"y",a,"px")),(g||p||m||y)&&(v=xn(v+g-(g*w+p*S)+m),M=xn(M+p-(g*b+p*x)+y)),(i||s)&&(C=f.getBBox(),v=xn(v+i/100*C.width),M=xn(M+s/100*C.height)),f.setAttribute("transform",C="matrix("+w+","+b+","+S+","+x+","+v+","+M+")"),_&&(f.style[ln]=C)},xQ=function(e,t,r,i,s){var d,h,o=360,a=Yn(s),c=parseFloat(s)*(a&&~s.indexOf("rad")?ul:1)-i,u=i+c+"deg";return a&&("short"===(d=s.split("_")[1])&&(c%=o)!=c%180&&(c+=c<0?o:-o),"cw"===d&&c<0?c=(c+o*D2)%o-~~(c/o)*o:"ccw"===d&&c>0&&(c=(c-o*D2)%o-~~(c/o)*o)),e._pt=h=new Fr(e._pt,t,r,i,c,iQ),h.e=u,h.u="deg",e._props.push(r),h},j2=function(e,t){for(var r in t)e[r]=t[r];return e},wQ=function(e,t,r){var a,l,c,u,d,h,g,i=j2({},r._gsap),o=r.style;for(l in i.svg?(c=r.getAttribute("transform"),r.setAttribute("transform",""),o[ln]=t,a=qh(r,1),dl(r,ln),r.setAttribute("transform",c)):(c=getComputedStyle(r)[ln],o[ln]=t,a=qh(r,1),o[ln]=c),uo)(c=i[l])!==(u=a[l])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(l)<0&&(d=ur(c)!==(g=ur(u))?na(r,l,c,g):parseFloat(c),h=parseFloat(u),e._pt=new Fr(e._pt,a,l,d,h-d,eb),e._pt.u=g||0,e._props.push(l));j2(a,i)};Or("padding,margin,Width,Radius",function(n,e){var t="Top",r="Right",i="Bottom",s="Left",o=(e<3?[t,r,i,s]:[t+s,t+r,i+r,i+s]).map(function(a){return e<2?n+a:"border"+a+n});ey[e>1?"border"+n:n]=function(a,l,c,u,d){var h,f;if(arguments.length<4)return h=o.map(function(g){return ho(a,g,c)}),5===(f=h.join(" ")).split(h[0]).length?h[0]:f;h=(u+"").split(" "),f={},o.forEach(function(g,p){return f[g]=h[p]=h[p]||h[(p-1)/2|0]}),a.init(l,f,d)}});var W2={name:"css",register:nb,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,i,s){var c,u,d,h,f,g,p,m,y,_,v,M,w,b,S,x,o=this._props,a=e.style,l=r.vars.startAt;for(p in Jw||nb(),this.styles=this.styles||P2(e),x=this.styles.props,this.tween=r,t)if("autoRound"!==p&&(u=t[p],!ni[p]||!m2(p,t,r,i,e,s)))if(g=ey[p],"function"==(f=typeof u)&&(f=typeof(u=u.call(r,i,e,s))),"string"===f&&~u.indexOf("random(")&&(u=Gh(u)),g)g(this,e,p,u,r)&&(S=1);else if("--"===p.substr(0,2))c=(getComputedStyle(e).getPropertyValue(p)+"").trim(),u+="",Ko.lastIndex=0,Ko.test(c)||(m=ur(c),y=ur(u)),y?m!==y&&(c=na(e,p,c,y)+y):m&&(u+=m),this.add(a,"setProperty",c,u,i,s,0,0,p),o.push(p),x.push(p,0,a[p]);else if("undefined"!==f){if(l&&p in l?(c="function"==typeof l[p]?l[p].call(r,i,e,s):l[p],Yn(c)&&~c.indexOf("random(")&&(c=Gh(c)),ur(c+"")||"auto"===c||(c+=ei.units[p]||ur(ho(e,p))||""),"="===(c+"").charAt(1)&&(c=ho(e,p))):c=ho(e,p),h=parseFloat(c),(_="string"===f&&"="===u.charAt(1)&&u.substr(0,2))&&(u=u.substr(2)),d=parseFloat(u),p in ys&&("autoAlpha"===p&&(1===h&&"hidden"===ho(e,"visibility")&&d&&(h=0),x.push("visibility",0,a.visibility),ta(this,a,"visibility",h?"inherit":"hidden",d?"inherit":"hidden",!d)),"scale"!==p&&"transform"!==p&&~(p=ys[p]).indexOf(",")&&(p=p.split(",")[0])),v=p in uo)if(this.styles.save(p),M||((w=e._gsap).renderTransform&&!t.parseTransform||qh(e,t.parseTransform),b=!1!==t.smoothOrigin&&w.smooth,(M=this._pt=new Fr(this._pt,a,ln,0,1,w.renderTransform,w,0,-1)).dep=1),"scale"===p)this._pt=new Fr(this._pt,w,"scaleY",w.scaleY,(_?cu(w.scaleY,_+d):d)-w.scaleY||0,eb),this._pt.u=0,o.push("scaleY",p),p+="X";else{if("transformOrigin"===p){x.push(kr,0,a[kr]),u=yQ(u),w.svg?ib(e,u,0,b,0,this):((y=parseFloat(u.split(" ")[2])||0)!==w.zOrigin&&ta(this,w,"zOrigin",w.zOrigin,y),ta(this,a,p,ty(c),ty(u)));continue}if("svgOrigin"===p){ib(e,u,1,b,0,this);continue}if(p in G2){xQ(this,w,p,h,_?cu(h,_+u):u);continue}if("smoothOrigin"===p){ta(this,w,"smooth",w.smooth,u);continue}if("force3D"===p){w[p]=u;continue}if("transform"===p){wQ(this,u,e);continue}}else p in a||(p=_u(p)||p);if(v||(d||0===d)&&(h||0===h)&&!rQ.test(u)&&p in a)d||(d=0),(m=(c+"").substr((h+"").length))!==(y=ur(u)||(p in ei.units?ei.units[p]:m))&&(h=na(e,p,c,y)),this._pt=new Fr(this._pt,v?w:a,p,h,(_?cu(h,_+d):d)-h,v||"px"!==y&&"zIndex"!==p||!1===t.autoRound?eb:oQ),this._pt.u=y||0,m!==y&&"%"!==y&&(this._pt.b=c,this._pt.r=sQ);else if(p in a)mQ.call(this,e,p,c,_?_+u:u);else if(p in e)this.add(e,p,c||e[p],_?_+u:u,i,s);else if("parseTransform"!==p){Tw(p,u);continue}v||(p in a?x.push(p,0,a[p]):"function"==typeof e[p]?x.push(p,2,e[p]()):x.push(p,1,c||e[p])),o.push(p)}S&&w2(this)},render:function(e,t){if(t.tween._time||!Kw())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:ho,aliases:ys,getSetter:function(e,t,r){var i=ys[t];return i&&i.indexOf(",")<0&&(t=i),t in uo&&t!==kr&&(e._gsap.x||ho(e,"x"))?r&&E2===r?"scale"===t?uQ:cQ:(E2=r||{})&&("scale"===t?dQ:hQ):e.style&&!ww(e.style[t])?aQ:~t.indexOf("-")?lQ:$w(e,t)},core:{_removeProperty:dl,_getMatrix:rb}};Lr.utils.checkPrefix=_u,Lr.core.getStyleSaver=P2,function(n,e,t,r){var i=Or(n+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(s){uo[s]=1});Or(e,function(s){ei.units[s]="deg",G2[s]=1}),ys[i[13]]=n+","+e,Or("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(s){var o=s.split(":");ys[o[1]]=i[o[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),Or("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(n){ei.units[n]="px"}),Lr.registerPlugin(W2);var ob=Lr.registerPlugin(W2)||Lr;const bQ=["newsImage"];let CQ=(()=>{class n{constructor(t){this.http=t,this.alltophighlights=[],this.indicators=!0,this.controls=!0,this.autoSlide=!1,this.slideInterval=3e3,this.selectedIndex=0,this.images=["https://img.freepik.com/free-photo/handsome-elegant-man-car-salon_1157-30215.jpg?t=st=1739439580~exp=1739443180~hmac=9d519c989e8a36b0f838d3974f201a6e12e538b164a9456773a8c42a84330dc4&w=1060","https://img.freepik.com/free-photo/handsome-elegant-man-car-salon_1157-30203.jpg?t=st=1739434474~exp=1739438074~hmac=da1890d61f81f9d5e1d3911bf6b375cfd759d6219b1a85b672894ae382373e4b&w=1060","https://img.freepik.com/free-photo/automobile-details-close-up-new-car_1303-26484.jpg?t=st=1739439627~exp=1739443227~hmac=f171955bdf4c2c9cc742e6bdd3cc5b5d5399191b6720ded4bfef04481af25b9d&w=740"],this.currentImageIndex=0,this.newsroom=[{category:"New Deals",items:[{title:"Exclusive Car Deals",description:"Get up to 15% off on select Toyota models this season.",image:"https://via.placeholder.com/300x200",link:"#"},{title:"Trade-In Bonus",description:"Trade in your old car and get up to $2,000 in bonuses.",image:"https://via.placeholder.com/300x200",link:"#"}]},{category:"Sales",items:[{title:"Limited-Time Offers",description:"Save big on our latest Toyota SUVs and Sedans. Offers valid till March 2025.",image:"https://global.toyota/pages/news/images/2024/12/20/1330/20241220_01_kv_w1920.jpg",link:"#"},{title:"0% APR Financing",description:"Finance your new Toyota with 0% APR for up to 36 months.",image:"https://global.toyota/pages/global_toyota/company/vision-and-philosophy/production-system_003_2.jpg",link:"#"}]},{category:"Promotions",items:[{title:"Free Maintenance for 1 Year",description:"Buy a new Toyota and enjoy a full year of complimentary maintenance.",image:"https://global.toyota/pages/global_toyota/company/vision-and-philosophy/production-system_002_2.jpg",link:"#"},{title:"Latest Highlights",description:"Stay updated with Toyota's latest models and upcoming events.",image:"https://via.placeholder.com/300x200",highlights:["2025 Toyota Camry Reveal","Hybrid Innovation in the Automotive Industry","Global Sales Milestone Achieved"],link:"#"}]}]}ngOnInit(){this.startImageTransition()}ngAfterViewInit(){this.startImageTransition()}startImageTransition(){setInterval(()=>{ob.to(this.newsImage.nativeElement,{opacity:0,duration:1,onComplete:()=>{this.currentImageIndex=(this.currentImageIndex+1)%this.images.length,this.newsImage.nativeElement.src=this.images[this.currentImageIndex],ob.to(this.newsImage.nativeElement,{opacity:1,duration:1})}})},6e3)}}return n.\u0275fac=function(t){return new(t||n)(re(RN))},n.\u0275cmp=Zn({type:n,selectors:[["app-newsroom"]],viewQuery:function(t,r){if(1&t&&Tv(bQ,5),2&t){let i;_d(i=vd())&&(r.newsImage=i.first)}},inputs:{indicators:"indicators",controls:"controls",autoSlide:"autoSlide",slideInterval:"slideInterval"},decls:62,vars:12,consts:[[1,"newsroom"],[1,"container"],[1,"header"],[1,"news"],[1,"new-deals"],[1,"head"],[1,"news-box"],[1,"news-container"],[1,"gradient"],["alt","New Deal Image",3,"src"],["newsImage",""],[1,"news-content"],[1,"news-title"],[1,"news-box","grid"],[1,"news-container","next","forward",2,"margin-right","20px"],["alt","",3,"src"],["id","card"],[1,"news-container","red"],["id","card",1,"black",2,"background-color","black"],[1,"new-deals","top"],[1,"news-container","red","backward"],[1,"news-container","back"],["src","https://global.toyota/pages/news/images/2023/11/02/1330/20231102_01_kv_w1920.jpg","alt",""]],template:function(t,r){1&t&&(O(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),k(4,"Newsroom"),F()(),O(5,"div",3)(6,"div",4)(7,"div",5)(8,"span"),k(9,"New Deals"),F()(),O(10,"div",6)(11,"div",7),Ie(12,"div",8)(13,"img",9,10),O(15,"div",11)(16,"h3",12),k(17,"Exclusive Car Deals"),F(),O(18,"p"),k(19,"Get up to 15% off on select Toyota models this season."),F()()()()(),O(20,"div",4)(21,"div",5)(22,"span"),k(23,"Sales"),F()(),O(24,"div",13)(25,"div",14),Ie(26,"div",8)(27,"img",15),O(28,"span",11)(29,"h3",16),k(30),F(),O(31,"p"),k(32),F()()(),O(33,"div",17),Ie(34,"div",8)(35,"img",15),O(36,"span",11)(37,"h3",18),k(38),F(),O(39,"p"),k(40),F()()()()(),O(41,"div",19)(42,"div",5)(43,"span"),k(44,"Promotions"),F()(),O(45,"div",13)(46,"div",20),Ie(47,"div",8)(48,"img",15),O(49,"span",11)(50,"h3",18),k(51),F(),O(52,"p"),k(53),F()()(),O(54,"div",21),Ie(55,"div",8)(56,"img",22),O(57,"span",11)(58,"h3",16),k(59),F(),O(60,"p"),k(61),F()()()()()()()()),2&t&&(Pt(13),fi("src",r.images[r.currentImageIndex],ha),Pt(14),cd("src",r.newsroom[1].items[0].image,ha),Pt(3),Ls(r.newsroom[1].items[0].title),Pt(2),Ls(r.newsroom[1].items[0].description),Pt(3),cd("src",r.newsroom[1].items[1].image,ha),Pt(3),pi(" ",r.newsroom[1].items[1].title," "),Pt(2),Ls(r.newsroom[1].items[1].description),Pt(8),cd("src",r.newsroom[2].items[0].image,ha),Pt(3),pi(" ",r.newsroom[2].items[0].title," "),Pt(2),Ls(r.newsroom[2].items[0].description),Pt(6),Ls(r.newsroom[2].items[1].title),Pt(2),pi(" ",r.newsroom[2].items[1].description," "))},styles:[".newsroom[_ngcontent-%COMP%]{height:auto;width:100%;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]{width:80%;height:auto;display:flex;flex-direction:column;justify-content:center;gap:30px}.news[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:40px}.header[_ngcontent-%COMP%]{font-size:2.5rem}.head[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2rem}.news-box[_ngcontent-%COMP%]{width:100%;height:auto}.news-container[_ngcontent-%COMP%]{position:relative;height:50vh;width:100%;color:#fff}.news-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;display:flex;flex-direction:column;gap:10px;padding:2rem}.news-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,2fr);grid-template-rows:repeat(2,2fr);margin-right:40px}.next[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{background-color:#000;color:#fff}.red[_ngcontent-%COMP%]{background-color:#eb0a1e}.forward[_ngcontent-%COMP%]{width:45rem}.backward[_ngcontent-%COMP%]{width:30rem}.back[_ngcontent-%COMP%]{width:45.5rem}.top[_ngcontent-%COMP%]{margin-top:-20rem}.header[_ngcontent-%COMP%]{margin-bottom:5rem}.head[_ngcontent-%COMP%]{margin-bottom:1.5rem}#card[_ngcontent-%COMP%]{display:flex;align-items:center;height:40px;width:auto;padding:0 20px;background-color:#eb0a1e}.news-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.news-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]   .image-active[_ngcontent-%COMP%]{display:block;width:100%;height:40vh}.news-content[_ngcontent-%COMP%]{position:absolute;bottom:0;z-index:2;padding:20px}.news-container[_ngcontent-%COMP%]   .gradient[_ngcontent-%COMP%]{width:100%;height:100%;z-index:1;position:absolute;background-image:linear-gradient(0deg,black,#00000000)}.fade[_ngcontent-%COMP%]{animation-name:fade;animation-duration:1.5s}@keyframes fade{0%{opacity:.4}to{opacity:1}}@media screen and (max-width: 900px){.container[_ngcontent-%COMP%]{gap:30px}.grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}}@media screen and (max-width: 500px){*[_ngcontent-%COMP%]{margin:0}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem}.head[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem}.grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.forward[_ngcontent-%COMP%], .backward[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{width:100%}.top[_ngcontent-%COMP%]{margin:0}}@media screen and (min-width: 540px) and (max-width: 1300px){*[_ngcontent-%COMP%]{margin:0}.header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem}.head[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem}.grid[_ngcontent-%COMP%]{display:flex;flex-direction:column}.forward[_ngcontent-%COMP%], .backward[_ngcontent-%COMP%], .back[_ngcontent-%COMP%]{width:100%}.top[_ngcontent-%COMP%]{margin:0}}"]}),n})(),SQ=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Zn({type:n,selectors:[["app-footer"]],decls:117,vars:0,consts:[[1,"footer"],[1,"container"],[1,"links"],["id","up"],["href",""],[1,"subscribe"],[1,"title"],[1,"input"],["type","email","placeholder","username@mail.com"],[1,"extra-navigation"],["href","#"],[1,"foot"]],template:function(t,r){1&t&&(O(0,"div",0)(1,"div",1)(2,"div",2)(3,"ul")(4,"span"),k(5,"Vehicle"),F(),O(6,"li",3)(7,"a",4),k(8,"Passenger"),F()(),O(9,"li")(10,"a",4),k(11,"SUV & Crossover"),F()(),O(12,"li")(13,"a",4),k(14,"Commerciak"),F()()(),O(15,"ul")(16,"span"),k(17,"Shopping Tools"),F(),O(18,"li",3)(19,"a",4),k(20,"Find a Dealer"),F()(),O(21,"li")(22,"a",4),k(23,"Book a Test Drive"),F()(),O(24,"li")(25,"a",4),k(26,"Compare Vehicles"),F()(),O(27,"li")(28,"a",4),k(29,"Top Financial Services"),F()()(),O(30,"ul")(31,"span"),k(32,"Owners"),F(),O(33,"li",3)(34,"a",4),k(35,"My Toyota Ghana"),F()(),O(36,"li")(37,"a",4),k(38,"Genuine Parts"),F()(),O(39,"li")(40,"a",4),k(41,"Genuine Accessories"),F()(),O(42,"li")(43,"a",4),k(44,"Toyota Services"),F()(),O(45,"li")(46,"a",4),k(47,"Warranty"),F()(),O(48,"li")(49,"a",4),k(50,"Advisory"),F()()(),O(51,"ul")(52,"span"),k(53,"See Also"),F(),O(54,"li",3)(55,"a",4),k(56,"Auto Mark - Certified Used Cars"),F()(),O(57,"li")(58,"a",4),k(59,"Toyota Africa"),F()(),O(60,"li")(61,"a",4),k(62,"Toyota Global"),F()(),O(63,"li")(64,"a",4),k(65,"Careers"),F()()(),O(66,"ul")(67,"span"),k(68,"Social Media"),F(),O(69,"li",3)(70,"a",4),k(71,"Instagram"),F()(),O(72,"li")(73,"a",4),k(74,"Facebook"),F()(),O(75,"li")(76,"a",4),k(77,"Twitter"),F()(),O(78,"li")(79,"a",4),k(80,"Youtube"),F()()()(),O(81,"div",5)(82,"div",6)(83,"span"),k(84,"Subscribe"),F()(),O(85,"div",7),Ie(86,"input",8),O(87,"button"),k(88,"Submit"),F()()(),O(89,"div",9)(90,"ul")(91,"li")(92,"a",10),k(93,"Contact Us"),F()(),O(94,"span"),k(95,"|"),F(),O(96,"li")(97,"a",10),k(98,"Dealer Locator"),F()(),O(99,"span"),k(100,"|"),F(),O(101,"li")(102,"a",10),k(103,"Download Brochure"),F()(),O(104,"span"),k(105,"|"),F(),O(106,"li")(107,"a",10),k(108,"Privacy Policy"),F()(),O(109,"span"),k(110,"|"),F(),O(111,"li")(112,"a",10),k(113,"Site Map"),F()()()()()(),O(114,"div",11)(115,"span"),k(116,"\xa9 2022 Toyota Ghana. All Rights Reserved"),F()())},styles:["*[_ngcontent-%COMP%]{color:#fff}.footer[_ngcontent-%COMP%]{height:100vh;width:100%;background-color:#000;display:flex;flex-direction:column;justify-content:center;align-items:center}ul[_ngcontent-%COMP%]{list-style:none}.container[_ngcontent-%COMP%]{width:80%;height:auto;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:20px}.links[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:baseline;width:100%;height:auto;margin-bottom:2rem}.links[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem;margin:40px 0}.links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:100%;height:auto}.links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:200}.subscribe[_ngcontent-%COMP%]{width:100%;height:auto}#up[_ngcontent-%COMP%]{margin-top:20px}.subscribe[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem}.input[_ngcontent-%COMP%]{margin-top:1rem}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0;border-radius:0;outline:0;background-color:#fff;color:#000;font-size:1.2rem;padding:.5rem 2rem}.input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;border-radius:0;outline:0;background-color:#eb0a1e;font-size:1.2rem;color:#fff;padding:.5rem 2rem;cursor:pointer}.input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{background-color:gray}.extra-navigation[_ngcontent-%COMP%]{position:relative;width:100%;height:30vh;display:flex;justify-content:center;align-items:center;margin-bottom:-200px}.extra-navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex}.extra-navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 20px}.foot[_ngcontent-%COMP%]{position:relative;bottom:0;width:100%;height:7.5vh;background-color:#eb0a1e;display:flex;justify-content:center;align-items:center}@media screen and (max-width: 500px){.footer[_ngcontent-%COMP%]{height:190vh}.links[_ngcontent-%COMP%]{display:flex;flex-direction:column}.links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:40px 0}.footer[_ngcontent-%COMP%]{height:auto}.container[_ngcontent-%COMP%]{height:270vh}.extra-navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex}.extra-navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.7rem;margin:0 10px}.extra-navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}@media screen and (min-width: 540px) and (max-width: 1080px){.footer[_ngcontent-%COMP%]{height:260vh}.links[_ngcontent-%COMP%]{display:flex;flex-direction:column}.links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-bottom:40px}.container[_ngcontent-%COMP%]{height:260vh}.extra-navigation[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.8rem}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]}),n})(),EQ=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Zn({type:n,selectors:[["app-stalone"]],decls:1,vars:0,template:function(t,r){1&t&&Ie(0,"ngt-canvas")},dependencies:[vw]}),n})(),DQ=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Zn({type:n,selectors:[["app-three-s"]],decls:15,vars:0,consts:[[1,"three-s"],[1,"container"],["href","#",1,"sale","sales"],["src","https://img.freepik.com/free-photo/close-up-sales-manager-black-suit-selling-car-customer_146671-14738.jpg?t=st=1739401196~exp=1739404796~hmac=446485ba57b4a8ef45f1fd36da243faf4e078089df0cfdb4c6e5188daf17885d&w=1060","alt",""],["href","#",1,"service","sales"],["src","https://img.freepik.com/free-photo/mechanic-fixing-car-tyre_1170-1655.jpg?t=st=1739401163~exp=1739404763~hmac=a2c4a6b8ee961cf5ea59b52acd46269ac6248cb15555393db0dad99f0d923371&w=1060","alt",""],["href","#",1,"spare","sales"],["src","https://img.freepik.com/free-photo/different-car-accessories-composition_23-2149030385.jpg?t=st=1739401223~exp=1739404823~hmac=6402588f4f3f7aca4ad1d010284c1f78910c44abb5352196e7b2d813c97c1e5e&w=1060","alt",""],[1,"background"]],template:function(t,r){1&t&&(O(0,"div",0)(1,"div",1)(2,"a",2),Ie(3,"img",3),O(4,"span"),k(5,"Sales"),F()(),O(6,"a",4),Ie(7,"img",5),O(8,"span"),k(9,"Services"),F()(),O(10,"a",6),Ie(11,"img",7),O(12,"span"),k(13,"Spare Parts"),F()(),Ie(14,"div",8),F()())},styles:[".three-s[_ngcontent-%COMP%]{width:100%;height:70vh;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;gap:50px}.container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:20rem;height:17rem;background-color:#000}.container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;top:70%;color:#fff;font-size:1.5rem;padding:10px 15px;background-color:#eb0a1e;opacity:0;float:left;transition:.4s all ease}.background[_ngcontent-%COMP%]{position:absolute;z-index:-2;width:100%;height:100%;background-color:#fff;transition:.4s all ease}.sales[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]   .sale[_ngcontent-%COMP%]:hover ~ .background[_ngcontent-%COMP%]{background-color:#fff}.container[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:hover ~ .background[_ngcontent-%COMP%]{background-color:gray}.container[_ngcontent-%COMP%]   .spare[_ngcontent-%COMP%]:hover ~ .background[_ngcontent-%COMP%]{background-color:#eb0a1e}.container[_ngcontent-%COMP%]   .sale[_ngcontent-%COMP%]:hover > span[_ngcontent-%COMP%]{opacity:1;top:10px}.container[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]:hover > span[_ngcontent-%COMP%]{opacity:1;top:10px}.container[_ngcontent-%COMP%]   .spare[_ngcontent-%COMP%]:hover > span[_ngcontent-%COMP%]{opacity:1;top:10px;background-color:#fff;color:#000}.sales[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}@media screen and (max-width: 1300px){.three-s[_ngcontent-%COMP%]{margin-top:170px}}@media screen and (max-width: 500px){.three-s[_ngcontent-%COMP%]{width:100%;height:100%;margin:40px 0}.container[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:20px 0}.container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;top:84%;right:-5%;font-size:1rem;padding:5px 7%;transition:.4s all ease}.container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#fff;transition:.4s all ease}}"]}),n})();function TQ(n,e){1&n&&(O(0,"div",47)(1,"div",48)(2,"div",49),Ie(3,"input",50),O(4,"button"),k(5,"Search"),F()()()())}function AQ(n,e){1&n&&(O(0,"div",51,52)(2,"div",53)(3,"a",54),k(4,"Global"),F()()())}let NQ=(()=>{class n{constructor(){this.title="ToyotaBck",this.isSearchOpen=!1,this.isMobileMenuOpen=!1,this.isMenuOpen=!1,this.images=[{imageSrc:"../assets/images/news3.jpg",imageAlt:"News One"},{imageSrc:"../assets/images/news1.jpg",imageAlt:"News Two"},{imageSrc:"../assets/images/news2.jpg",imageAlt:"News Three"},{imageSrc:"../assets/images/news3.jpg",imageAlt:"News Four"},{imageSrc:"../assets/images/news4.png",imageAlt:"News Five"}]}openSearch(){this.isSearchOpen=!this.isSearchOpen}openGlobal(){this.isMenuOpen=!this.isMenuOpen}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}closeMobileMenu(){this.isMobileMenuOpen=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Zn({type:n,selectors:[["app-root"]],decls:263,vars:2,consts:[[1,"first"],[1,"section-container"],[1,"navbar"],[1,"nav-container"],[1,"logo"],["href","index.html"],["xmlns","http://www.w3.org/2000/svg","width","136","height","24","viewBox","0 0 136 24"],["fill","none","d","M0 0h158v48H0V0z"],["fill","white","d","M20.354.804H1.004v4.278h7.142v18.241h5.067V5.082h7.141V.804m18.921 14.874a6.206 6.206 0 0 1-4.678 3.826 6.807 6.807 0 0 1-1.175.104c-.399 0-.792-.038-1.172-.104a6.197 6.197 0 0 1-4.676-3.826 9.886 9.886 0 0 1-.682-3.614c0-1.276.243-2.498.682-3.617.791-2 2.56-3.447 4.676-3.825a6.474 6.474 0 0 1 2.347 0 6.203 6.203 0 0 1 4.678 3.824 9.95 9.95 0 0 1 0 7.232M33.421.127c-6.589 0-11.936 5.344-11.936 11.937 0 6.588 5.347 11.933 11.936 11.933 6.594 0 11.937-5.345 11.937-11.933 0-6.593-5.343-11.937-11.937-11.937zm12.017.677h5.968l5.573 9.682L62.552.804h5.966l-9.006 14.188v8.331h-5.066v-8.331L45.438.804M80.549 19.61c.398 0 .793-.04 1.172-.106a6.193 6.193 0 0 0 4.676-3.824 9.877 9.877 0 0 0 0-7.231 6.197 6.197 0 0 0-4.676-3.826 6.674 6.674 0 0 0-2.35 0 6.193 6.193 0 0 0-4.674 3.825 9.872 9.872 0 0 0-.684 3.615c0 1.276.243 2.495.684 3.616a6.188 6.188 0 0 0 4.674 3.824 6.72 6.72 0 0 0 1.178.107m-11.938-7.547c0-6.592 5.342-11.938 11.938-11.938 6.589 0 11.936 5.344 11.936 11.938C92.484 18.651 87.138 24 80.549 24c-6.596 0-11.938-5.349-11.938-11.937zm58.432 2.347l-3.316-8.897-3.32 8.897h6.636m1.47 3.94h-9.585l-1.844 4.959h-5.637L120.57.788h6.304L136 23.309h-5.63l-1.857-4.959zM112.936.804h-19.35v4.278h7.145l-.002 18.241h5.069l-.002-18.241h7.14V.804"],[1,"menu"],["id","menu-resp"],["id","search",3,"click"],["search",""],[1,"bx","bx-search"],["id","bar"],["routerLink","#",3,"click"],["id","support"],[1,"sup"],["id","titles","href",""],[1,"bx","bx-chevron-right"],[1,"support"],[1,"sales"],["id","sub-t"],["href",""],["href","",2,"font-size","1rem"],[2,"color","red"],[1,"Services"],[1,"Spare-Parts"],["routerLink","#"],["id","titl","href",""],["id","title","href",""],[1,"responsive"],[1,"bx","bx-menu-alt-right"],["id","container","class","search",4,"ngIf"],[1,"menu-opened"],[1,"opened-container"],[1,"three-js"],[1,"gh-global"],[1,"gh-container"],[1,"gh-box"],["class","global",4,"ngIf"],[1,"gh-button"],[1,"container"],["src","assets\\images\\logo.png","alt",""],["for",""],["onclick","openGlobal()",3,"click"],[1,"bx","bx-chevron-down"],["id","container",1,"search"],[1,"search-container"],[1,"search-engine"],["type","search","placeholder","Find your drive"],[1,"global"],["globalVisible",""],[1,"glo-container"],["href","https://global.toyota/en/"]],template:function(t,r){1&t&&(O(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),function aC(){je.lFrame.currentNamespace="svg"}(),O(6,"svg",6),Ie(7,"path",7)(8,"path",8),F()()(),function lC(){!function v3(){je.lFrame.currentNamespace=null}()}(),O(9,"div",9)(10,"ul",10)(11,"li")(12,"a",11,12),yn("click",function(){return r.openSearch()}),Ie(14,"i",13),F()(),O(15,"li")(16,"a",14),k(17,"|"),F()(),O(18,"li")(19,"a",15),yn("click",function(){return r.closeMobileMenu()}),k(20,"Branches"),F(),O(21,"ul",16)(22,"div",17)(23,"a",18),k(24,"Branches"),Ie(25,"i",19),F()(),O(26,"div",20)(27,"div",21)(28,"li",22)(29,"a",23),k(30,"Accra Branches"),Ie(31,"i",19),F()(),O(32,"li")(33,"a",24),k(34,"- Abatoir - Head Office"),F()(),O(35,"li")(36,"a",24),k(37,"- Tema"),F()(),O(38,"li")(39,"a",24),k(40,"- Accra"),F()(),O(41,"li")(42,"a",24),k(43,"- East Legon - "),O(44,"b",25),k(45,"New"),F()()(),O(46,"li")(47,"a",24),k(48,"- others"),F()()(),O(49,"div",26)(50,"li",22)(51,"a"),k(52,"Kumasi Branches"),Ie(53,"i",19),F()(),O(54,"li")(55,"a",24),k(56,"- Kegyetia"),F()(),O(57,"li")(58,"a",24),k(59,"- Boadi"),F()(),O(60,"li")(61,"a",24),k(62,"- Others"),F()()(),O(63,"div",27)(64,"li",22)(65,"a"),k(66,"Other Regional Branches"),Ie(67,"i",19),F()()()()()(),O(68,"li")(69,"a",28),k(70,"Vehicles"),F(),O(71,"ul",16)(72,"div",17)(73,"a",29),k(74,"Vehicles "),Ie(75,"i",19),F()(),O(76,"div",20)(77,"div",21)(78,"li",22)(79,"a",23),k(80,"Trusted Dealers "),Ie(81,"i",19),F()(),O(82,"li")(83,"a",24),k(84,"- New Models"),F()(),O(85,"li")(86,"a",24),k(87,"- Genuine Purchase"),F()()(),O(88,"div",26)(89,"li",22)(90,"a"),k(91,"New Vehicles "),Ie(92,"i",19),F()(),O(93,"li")(94,"a",24),k(95,"- Appointment"),F()(),O(96,"li")(97,"a",24),k(98,"- Car Checks"),F()(),O(99,"li")(100,"a",24),k(101,"- Car Servicing"),F()()(),O(102,"div",27)(103,"li",22)(104,"a"),k(105,"Buy "),Ie(106,"i",19),F()(),O(107,"li")(108,"a",24),k(109,"- Genuine Body parts"),F()(),O(110,"li")(111,"a",24),k(112,"- Engines"),F()(),O(113,"li")(114,"a",24),k(115,"- The New Toyota Car Oil"),F()()()()()(),O(116,"li")(117,"a",15),yn("click",function(){return r.closeMobileMenu()}),k(118,"Support"),F(),O(119,"ul",16)(120,"div",17)(121,"a",30),k(122,"Support "),Ie(123,"i",19),F()(),O(124,"div",20)(125,"div",21)(126,"li",22)(127,"a",23),k(128,"Sales "),Ie(129,"i",19),F()(),O(130,"li")(131,"a",24),k(132,"- Purchases"),F()(),O(133,"li")(134,"a",24),k(135,"- Buy our verified used cars"),F()(),O(136,"li")(137,"a",24),k(138,"- Deals"),F()(),O(139,"li")(140,"a",24),k(141,"- Promotions"),F()()(),O(142,"div",26)(143,"li",22)(144,"a"),k(145,"Services "),Ie(146,"i",19),F()(),O(147,"li")(148,"a",24),k(149,"- Appointment"),F()(),O(150,"li")(151,"a",24),k(152,"- Car Checks"),F()(),O(153,"li")(154,"a",24),k(155,"- Car Servicing"),F()()(),O(156,"div",27)(157,"li",22)(158,"a"),k(159,"Spare Parts "),Ie(160,"i",19),F()(),O(161,"li")(162,"a",24),k(163,"- Genuine Body parts"),F()(),O(164,"li")(165,"a",24),k(166,"- Engines"),F()(),O(167,"li")(168,"a",24),k(169,"- The New Toyota Car Oil"),F()()()()()(),O(170,"li")(171,"a",15),yn("click",function(){return r.closeMobileMenu()}),k(172,"About"),F(),O(173,"ul",16)(174,"div",17)(175,"a",18),k(176,"About "),Ie(177,"i",19),F()(),O(178,"div",20)(179,"div",21)(180,"li",22)(181,"a",23),k(182,"Who we are? "),Ie(183,"i",19),F()(),O(184,"li")(185,"a",24),k(186,"- Purchases"),F()(),O(187,"li")(188,"a",24),k(189,"- Buy our verified used cars"),F()(),O(190,"li")(191,"a",24),k(192,"- Deals"),F()(),O(193,"li")(194,"a",24),k(195,"- Promotions"),F()()(),O(196,"div",26)(197,"li",22)(198,"a"),k(199,"How far we've come "),Ie(200,"i",19),F()(),O(201,"li")(202,"a",24),k(203,"- Appointment"),F()(),O(204,"li")(205,"a",24),k(206,"- Car Checks"),F()(),O(207,"li")(208,"a",24),k(209,"- Car Servicing"),F()()(),O(210,"div",27)(211,"li",22)(212,"a"),k(213,"Message from the MD "),Ie(214,"i",19),F()(),O(215,"li")(216,"a",24),k(217,"- Genuine Body parts"),F()(),O(218,"li")(219,"a",24),k(220,"- Engines"),F()(),O(221,"li")(222,"a",24),k(223,"- The New Toyota Car Oil"),F()()()()()()(),O(224,"div",31)(225,"ul")(226,"li")(227,"a",11,12),yn("click",function(){return r.openSearch()}),Ie(229,"i",13),F()(),O(230,"li")(231,"a",14),k(232,"|"),F()(),O(233,"li")(234,"span"),Ie(235,"i",32),F()()()()()()(),rs(236,TQ,6,0,"div",33),O(237,"div",34),Ie(238,"div",35),F(),O(239,"div",36),Ie(240,"ngt-canvas"),F(),O(241,"div",37)(242,"div",38)(243,"div",39),rs(244,AQ,5,0,"div",40),O(245,"div",41)(246,"div",42),Ie(247,"img",43),O(248,"p"),k(249,"|"),F(),O(250,"label",44),k(251,"Ghana"),F(),O(252,"span",45),yn("click",function(){return r.openGlobal()}),Ie(253,"i",46),F()()()()()()()(),Ie(254,"app-genuine-purchase")(255,"app-purchase")(256,"app-new-models")(257,"app-trusted-dealers")(258,"app-tips")(259,"app-newsroom")(260,"app-three-s")(261,"app-footer")(262,"app-stalone")),2&t&&(Pt(236),fi("ngIf",r.isSearchOpen),Pt(8),fi("ngIf",r.isMenuOpen))},dependencies:[Sp,cg,vw,KJ,QJ,eK,iK,aK,CQ,SQ,EQ,DQ],styles:["[_ngcontent-%COMP%]:root{--primary-color: #EB0A1E;--secondary-color: #0000;--white: white;--menu-fonts: 1.5rem;--global-links: 1.5rem;--Tittle: 2rem;--inner-card-head-title: 1.6rem;--inner-card-sub-title: 1.2rem}.first[_ngcontent-%COMP%]{height:100vh;width:100%;min-height:100vh;max-height:100vh}.navbar[_ngcontent-%COMP%]{position:relative;width:100%;height:80px;display:flex;align-items:center}.nav-container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:flex;justify-content:center;align-items:center;right:-10%}.logo[_ngcontent-%COMP%], .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex}.logo[_ngcontent-%COMP%]{width:40%}#logo[_ngcontent-%COMP%]{fill:#fff}.logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-family:Toyota Type;font-weight:700;font-size:1.7rem;color:#fff;text-align:center}.menu[_ngcontent-%COMP%]{height:100%;width:100%;max-inline-size:60rem;display:flex;justify-content:center;align-items:center;background-color:#fff;position:relative}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;display:flex;justify-content:center;align-items:center}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-size:1.2rem;margin:0 20px}#menu-resp[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:100}#bar[_ngcontent-%COMP%]{color:var(--primary-color);font-size:2rem}#search[_ngcontent-%COMP%]{cursor:pointer}.gh-global[_ngcontent-%COMP%]{width:100%;position:relative;top:650px;display:flex;justify-content:center;align-items:center}.gh-container[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column}.gh-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.gh-button[_ngcontent-%COMP%]{width:100%;height:40px;display:flex;justify-content:center;align-items:center;background-color:#eb0a1e;margin-top:2px}.container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:10px;color:#fff;font-size:1.5rem}.container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], i[_ngcontent-%COMP%]{font-size:1.2rem;margin-right:5px}.container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;font-size:1.4rem}.container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:45px;margin-right:5px}.gh-box[_ngcontent-%COMP%]{width:160px;height:auto}.global[_ngcontent-%COMP%]{position:absolute;display:flex;width:10rem;top:-95%;transition:.4s all ease}.glo-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;background-color:var(--primary-color)}.glo-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;color:var(--white);padding:7px 10px;transition:.4s all ease;font-size:1.2rem}.glo-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--white);color:#000}#glo-list[_ngcontent-%COMP%]{border-top:2px solid white;border-bottom:2px solid white}.three-js[_ngcontent-%COMP%]{position:absolute;width:100%;height:100vh;z-index:1;background-image:url(Toyota_beginning.9672d6af6507af58.jpg);background-repeat:no-repeat;background-position:center;background-size:cover}.gh-global[_ngcontent-%COMP%]{position:absolute;z-index:2;top:90%}.navbar[_ngcontent-%COMP%]{position:absolute;z-index:3}.search[_ngcontent-%COMP%]{position:absolute;z-index:99;width:100%;height:20vh;top:10%;display:flex;justify-content:center;align-items:baseline}.search-container[_ngcontent-%COMP%]{position:relative;z-index:99;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#fff}.search-engine[_ngcontent-%COMP%]{position:relative;width:50%;border-bottom:5px solid #EB0A1E;display:flex;justify-content:last baseline;align-items:last baseline;top:10%}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:90%;height:100%;border:0;outline:0;font-size:1.5rem;margin-right:20px}.search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;padding:.2rem;background-color:#fff;font-size:1.4rem}.responsive[_ngcontent-%COMP%]{display:none}.menu[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{color:#000;font-size:33px;font-weight:700;line-height:70px;padding-left:110px}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;display:flex}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;display:block;line-height:70px;font-size:20px;transition:.5s}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;display:block;line-height:70px;font-size:20px;transition:.5s}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%], .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, #titles[_ngcontent-%COMP%]:hover, #titles[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, #title[_ngcontent-%COMP%]:hover, #title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, #titl[_ngcontent-%COMP%]:hover, #titl[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{color:#eb0a1e}#titles[_ngcontent-%COMP%], #title[_ngcontent-%COMP%], #titl[_ngcontent-%COMP%]{color:#fff}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:60%;height:40vh;-webkit-backdrop-filter:blur(40px);backdrop-filter:blur(40px);background-color:#0000009a;position:absolute;top:95px;border-top:3px solid #EB0A1E;opacity:0;visibility:hidden}.support[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-evenly;margin-top:-40px}.sales[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > ul[_ngcontent-%COMP%]{width:60%;top:75px;right:0;opacity:1;visibility:visible;transition:.3s linear}#support[_ngcontent-%COMP%]{width:100%;display:flex;max-inline-size:60rem;align-items:flex-start;padding:5px;position:absolute;left:0}#support[_ngcontent-%COMP%]   #title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:bolder;margin-bottom:20px}#titles[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:bolder;margin-bottom:20px;margin-left:4px}#titl[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:bolder;margin-bottom:20px;margin-left:30px}.sup[_ngcontent-%COMP%]{display:flex;height:20%;align-items:center;margin-bottom:40px;margin-left:50px}.sup[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1rem;margin-top:-4px}#sub-t[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:-20px}#sub-t[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], i[_ngcontent-%COMP%]{font-size:1rem;font-weight:bolder}.Services[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.8rem}.sales[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .Services[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .Spare-Parts[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1rem;margin-left:20px}.sales[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .Services[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .Spare-Parts[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1rem}.sales[_ngcontent-%COMP%], .Services[_ngcontent-%COMP%], .Spare-Parts[_ngcontent-%COMP%]{align-items:flex-start}.sales[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .Services[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .Spare-Parts[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{align-items:flex-start;margin:-20px 0}#about[_ngcontent-%COMP%]{flex-direction:column}.aboutt[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center}.abouttt[_ngcontent-%COMP%]{width:100%}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{line-height:50px}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{border-top:none}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative}@media screen and (max-width: 1300px){.menu[_ngcontent-%COMP%]   #menu-resp[_ngcontent-%COMP%]{width:100%;justify-content:space-between}}@media screen and (max-width: 1080px){.menu[_ngcontent-%COMP%]   #menu-resp[_ngcontent-%COMP%]{display:none;flex-direction:column;position:absolute;top:80px;left:0;width:100%;background-color:#fff;z-index:1000}.menu[_ngcontent-%COMP%]   #menu-resp.active[_ngcontent-%COMP%]{display:flex}.menu[_ngcontent-%COMP%]   #menu-resp[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:100%;text-align:center}.menu[_ngcontent-%COMP%]   #menu-resp[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:10px;display:block}.menu[_ngcontent-%COMP%]   #menu-resp[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{position:static;display:none}.menu[_ngcontent-%COMP%]   #menu-resp[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   ul[_ngcontent-%COMP%]{display:block}}@media screen and (min-width: 500px) and (max-width: 1080px){.responsive[_ngcontent-%COMP%]{width:100%;height:100%;visibility:visible;display:flex;align-items:center}.responsive[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:baseline;gap:30px}.responsive[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{width:auto;margin:0}.responsive[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;margin:0}.responsive[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.responsive[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#000;font-size:1.5rem}.menu[_ngcontent-%COMP%]   #menu-resp[_ngcontent-%COMP%]{display:none}.navbar[_ngcontent-%COMP%]{width:100%}.search-engine[_ngcontent-%COMP%]{width:82%}}@media screen and (max-width: 500px){.logo[_ngcontent-%COMP%]{margin-right:20px}.responsive[_ngcontent-%COMP%]{width:100%;height:100%;visibility:visible;display:flex;justify-content:center;align-items:center}.responsive[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{height:auto;display:flex;justify-content:center;align-items:baseline;gap:30px}.responsive[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;margin:0}.responsive[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.responsive[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#000;font-size:1.5rem}.menu[_ngcontent-%COMP%]   #menu-resp[_ngcontent-%COMP%]{display:none}.navbar[_ngcontent-%COMP%]{width:100%}.search-engine[_ngcontent-%COMP%]{width:82%}}"]}),n})();const PQ=["*"];let IQ=(()=>{class n extends AF{get meshType(){return Un}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275cmp=Zn({type:n,selectors:[["ngt-mesh"]],standalone:!0,features:[Ft([JJ(n),XJ(n)]),Le,nc],ngContentSelectors:PQ,decls:1,vars:0,template:function(t,r){1&t&&(ad(),ld(0))},encapsulation:2,changeDetection:0}),n})();const RQ=["*"];let OQ=(()=>{class n extends DF{get geometryType(){return Bo}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275cmp=Zn({type:n,selectors:[["ngt-box-geometry"]],standalone:!0,features:[Ft([YJ(n),$J(n)]),Le,nc],ngContentSelectors:RQ,decls:1,vars:0,template:function(t,r){1&t&&(ad(),ld(0))},encapsulation:2,changeDetection:0}),n})();const FQ=["*"];let LQ=(()=>{class n extends TF{set color(t){this.set({color:t})}set opacity(t){this.set({opacity:Gt(t)})}set map(t){this.set({map:t})}set lightMap(t){this.set({lightMap:t})}set lightMapIntensity(t){this.set({lightMapIntensity:Gt(t)})}set aoMap(t){this.set({aoMap:t})}set aoMapIntensity(t){this.set({aoMapIntensity:Gt(t)})}set specularMap(t){this.set({specularMap:t})}set alphaMap(t){this.set({alphaMap:t})}set fog(t){this.set({fog:vt(t)})}set envMap(t){this.set({envMap:t})}set combine(t){this.set({combine:t})}set reflectivity(t){this.set({reflectivity:Gt(t)})}set refractionRatio(t){this.set({refractionRatio:Gt(t)})}set wireframe(t){this.set({wireframe:vt(t)})}set wireframeLinewidth(t){this.set({wireframeLinewidth:Gt(t)})}set wireframeLinecap(t){this.set({wireframeLinecap:t})}set wireframeLinejoin(t){this.set({wireframeLinejoin:t})}get materialType(){return no}get optionFields(){return{...super.optionFields,color:!0,opacity:!0,map:!0,lightMap:!0,lightMapIntensity:!0,aoMap:!0,aoMapIntensity:!0,specularMap:!0,alphaMap:!0,fog:!0,envMap:!0,combine:!0,reflectivity:!0,refractionRatio:!0,wireframe:!0,wireframeLinewidth:!0,wireframeLinecap:!0,wireframeLinejoin:!0}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=pt(n)))(r||n)}}(),n.\u0275cmp=Zn({type:n,selectors:[["ngt-mesh-basic-material"]],inputs:{color:"color",opacity:"opacity",map:"map",lightMap:"lightMap",lightMapIntensity:"lightMapIntensity",aoMap:"aoMap",aoMapIntensity:"aoMapIntensity",specularMap:"specularMap",alphaMap:"alphaMap",fog:"fog",envMap:"envMap",combine:"combine",reflectivity:"reflectivity",refractionRatio:"refractionRatio",wireframe:"wireframe",wireframeLinewidth:"wireframeLinewidth",wireframeLinecap:"wireframeLinecap",wireframeLinejoin:"wireframeLinejoin"},standalone:!0,features:[Ft([ZJ(n),qJ(n)]),Le,nc],ngContentSelectors:FQ,decls:1,vars:0,template:function(t,r){1&t&&(ad(),ld(0))},encapsulation:2,changeDetection:0}),n})(),kQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=ai({type:n,bootstrap:[NQ]}),n.\u0275inj=Hr({imports:[oj,M8,s$,vw,IQ,OQ,LQ,F8]}),n})();(function Nz(){dT=!1})(),sj().bootstrapModule(kQ).catch(n=>console.error(n))}},ft=>{ft(ft.s=344)}]);
